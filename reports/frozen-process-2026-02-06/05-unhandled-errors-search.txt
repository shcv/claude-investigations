${$}`,JgB,FgB,KgB=(H,$,A)=>{let L=A===""?"":`with ${A.trim()}() `,I=XgB.bind(null,L,$.toString());Object.defineProperty(I,"name",FgB),Object.defineProperty(H,"toString",{...JgB,value:I})};var xAL=K(()=>{JgB=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),FgB=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name")});var voH,SAL=(H,$={})=>{if(typeof H!=="function")throw TypeError("Expected a function");let A,L=0,I=H.displayName||H.name||"<anonymous>",D=function(...B){if(voH.set(D,++L),L===1)A=H.apply(this,B),H=null;else if($.throw===!0)throw Error(`Function \`${I}\` can only be called once`);return A};return Bb$(D,H),voH.set(D,L),D},jAL;var RAL=K(()=>{xAL();voH=new WeakMap;SAL.callCount=(H)=>{if(!voH.has(H))throw Error(`The given function \`${H.name}\` is not wrapped by the \`onetime\` package`);return voH.get(H)};jAL=SAL});var yAL=()=>{let H=fb$-vAL+1;return Array.from({length:H},QgB)},QgB=(H,$)=>({name:`SIGRT${$+1}`,number:vAL+$,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}),vAL=34,fb$=64;var hAL;var bAL=K(()=>{hAL=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}]});var kAL,Eb$=()=>{let H=yAL();return[...hAL,...H].map(WgB)},WgB=({name:H,number:$,description:A,action:L,forced:I=!1,standard:D})=>{let{signals:{[H]:B}}=kAL.constants,f=B!==void 0;return{name:H,number:f?B:$,description:A,supported:f,action:L,forced:I,standard:D}};var uAL=K(()=>{bAL();kAL=require("os")});var gAL,VgB=()=>{let H=Eb$();return Object.fromEntries(H.map(PgB))},PgB=({name:H,number:$,description:A,supported:L,action:I,forced:D,standard:B})=>[H,{name:H,number:$,description:A,supported:L,action:I,forced:D,standard:B}],mAL,_gB=()=>{let H=Eb$(),$=fb$+1,A=Array.from({length:$},(L,I)=>CgB(I,H));return Object.assign({},...A)},CgB=(H,$)=>{let A=YgB(H,$);if(A===void 0)return{};let{name:L,description:I,supported:D,action:B,forced:f,standard:E}=A;return{[H]:{name:L,number:H,description:I,supported:D,action:B,forced:f,standard:E}}},YgB=(H,$)=>{let A=$.find(({name:L})=>gAL.constants.signals[L]===H);if(A!==void 0)return A;return $.find((L)=>L.number===H)},L$8;var pAL=K(()=>{uAL();gAL=require("os"),mAL=VgB(),L$8=_gB()});var dAL,wgB=({timedOut:H,timeout:$,errorCode:A,signal:L,signalDescription:I,exitCode:D,isCanceled:B})=>{if(H)return`timed out after ${$} milliseconds`;if(B)return"was canceled";if(A!==void 0)return`failed with ${A}`;if(L!==void 0)return`was killed with ${L} (${I})`;if(D!==void 0)return`failed with exit code ${D}`;return"failed"},xYH=({stdout:H,stderr:$,all:A,error:L,signal:I,exitCode:D,command:B,escapedCommand:f,timedOut:E,isCanceled:M,killed:G,parsed:{options:{timeout:U,cwd:X=dAL.default.cwd()}}})=>{D=D===null?void 0:D,I=I===null?void 0:I;let J=I===void 0?void 0:mAL[I].description,F=L&&L.code,W=`Command ${wgB({timedOut:E,timeout:U,errorCode:F,signal:I,signalDescription:J,exitCode:D,isCanceled:M})}: ${B}`,P=Object.prototype.toString.call(L)==="[object Error]",Y=P?`${W}
${A}`);this.errors=H,this.name=Oc0}};nu=class nu extends Error{constructor(H){super(H.message,H.cause?{cause:H.cause}:void 0);this.scopes=H.scopes,this.getTokenOptions=H.getTokenOptions,this.name="AuthenticationRequiredError"}}});function xc0(H){return`The current credential is not configured to acquire tokens for tenant ${H}. To enable acquiring tokens for this tenant add it to the AdditionallyAllowedTenants on the credential options, or add "*" to AdditionallyAllowedTenants to allow acquiring tokens for any tenant.`}function bV(H,$,A=[],L){var I;let D;if(process.env.AZURE_IDENTITY_DISABLE_MULTITENANTAUTH)D=H;else if(H==="adfs")D=H;else D=(I=$===null||$===void 0?void 0:$.tenantId)!==null&&I!==void 0?I:H;if(H&&D!==H&&!A.includes("*")&&!A.some((B)=>B.localeCompare(D)===0)){let B=xc0(D);throw L===null||L===void 0||L.info(B),new Q0(B)}return D}var vMI=K(()=>{hV()});function r_(H,$){if(!$.match(/^[0-9a-zA-Z-.]+$/)){let A=Error("Invalid tenant id provided. You can locate your tenant id by following the instructions listed here: https://learn.microsoft.com/partner-center/find-ids-and-domain-names.");throw H.info(NE("",A)),A}}function hMI(H,$,A){if($)return r_(H,$),$;if(!A)A=DfA;if(A!==DfA)return"common";return"organizations"}function a_(H){if(!H||H.length===0)return[];if(H.includes("*"))return UMI;return H}var RO=K(()=>{KXH();DJ();vMI()});var KfA="$",$E$="_";function Sc0(H,$){return $!=="Composite"&&$!=="Dictionary"&&(typeof H==="string"||typeof H==="number"||typeof H==="boolean"||($===null||$===void 0?void 0:$.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i))!==null||H===void 0||H===null)}function jc0(H){let $=Object.assign(Object.assign({},H.headers),H.body);if(H.hasNullableType&&Object.getOwnPropertyNames($).length===0)return H.shouldWrapBody?{body:null}:null;else return H.shouldWrapBody?Object.assign(Object.assign({},H.headers),{body:H.body}):$}function QfA(H,$){var A,L;let I=H.parsedHeaders;if(H.request.method==="HEAD")return Object.assign(Object.assign({},I),{body:H.parsedBody});let D=$&&$.bodyMapper,B=Boolean(D===null||D===void 0?void 0:D.nullable),f=D===null||D===void 0?void 0:D.type.name;if(f==="Stream")return Object.assign(Object.assign({},I),{blobBody:H.blobBody,readableStreamBody:H.readableStreamBody});let E=f==="Composite"&&D.type.modelProperties||{},M=Object.keys(E).some((G)=>E[G].serializedName==="");if(f==="Sequence"||M){let G=(A=H.parsedBody)!==null&&A!==void 0?A:[];for(let U of Object.keys(E))if(E[U].serializedName)G[U]=(L=H.parsedBody)===null||L===void 0?void 0:L[U];if(I)for(let U of Object.keys(I))G[U]=I[U];return B&&!H.parsedBody&&!I&&Object.getOwnPropertyNames(E).length===0?null:G}return jc0({body:H.parsedBody,headers:I,hasNullableType:B,shouldWrapBody:Sc0(H.parsedBody,f)})}var bMI=()=>{};var ru;var AE$=K(()=>{ru={Base64Url:"Base64Url",Boolean:"Boolean",ByteArray:"ByteArray",Composite:"Composite",Date:"Date",DateTime:"DateTime",DateTimeRfc1123:"DateTimeRfc1123",Dictionary:"Dictionary",Enum:"Enum",Number:"Number",Object:"Object",Sequence:"Sequence",String:"String",Stream:"Stream",TimeSpan:"TimeSpan",UnixTime:"UnixTime"}});var hn;var LE$=K(()=>{hn=class hn extends Error{constructor(H){super(H);this.name="AbortError"}}});function IE$(H){return H.toLowerCase()}function*Rc0(H){for(let $ of H.values())yield[$.name,$.value]}function _y(H){return new kMI(H)}var kMI;var uNH=K(()=>{kMI=class kMI{constructor(H){if(this._headersMap=new Map,H)for(let $ of Object.keys(H))this.set($,H[$])}set(H,$){this._headersMap.set(IE$(H),{name:H,value:String($).trim()})}get(H){var $;return($=this._headersMap.get(IE$(H)))===null||$===void 0?void 0:$.value}has(H){return this._headersMap.has(IE$(H))}delete(H){this._headersMap.delete(IE$(H))}toJSON(H={}){let $={};if(H.preserveCase)for(let A of this._headersMap.values())$[A.name]=A.value;else for(let[A,L]of this._headersMap)$[A]=L.value;return $}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return Rc0(this._headersMap)}}});var uMI=()=>{};var gMI=()=>{};function gNH(){return yc0()}var mMI,WfA,yc0;var VfA=K(()=>{mMI=require("crypto"),yc0=typeof((WfA=globalThis===null||globalThis===void 0?void 0:globalThis.crypto)===null||WfA===void 0?void 0:WfA.randomUUID)==="function"?globalThis.crypto.randomUUID.bind(globalThis.crypto):mMI.randomUUID});class pMI{constructor(H){var $,A,L,I,D,B,f;this.url=H.url,this.body=H.body,this.headers=($=H.headers)!==null&&$!==void 0?$:_y(),this.method=(A=H.method)!==null&&A!==void 0?A:"GET",this.timeout=(L=H.timeout)!==null&&L!==void 0?L:0,this.multipartBody=H.multipartBody,this.formData=H.formData,this.disableKeepAlive=(I=H.disableKeepAlive)!==null&&I!==void 0?I:!1,this.proxySettings=H.proxySettings,this.streamResponseStatusCodes=H.streamResponseStatusCodes,this.withCredentials=(D=H.withCredentials)!==null&&D!==void 0?D:!1,this.abortSignal=H.abortSignal,this.onUploadProgress=H.onUploadProgress,this.onDownloadProgress=H.onDownloadProgress,this.requestId=H.requestId||gNH(),this.allowInsecureConnection=(B=H.allowInsecureConnection)!==null&&B!==void 0?B:!1,this.enableBrowserStreams=(f=H.enableBrowserStreams)!==null&&f!==void 0?f:!1,this.requestOverrides=H.requestOverrides,this.authSchemes=H.authSchemes}}function PfA(H){return new pMI(H)}var dMI=K(()=>{uNH();VfA()});class DE${constructor(H){var $;this._policies=[],this._policies=($=H===null||H===void 0?void 0:H.slice(0))!==null&&$!==void 0?$:[],this._orderedPolicies=void 0}addPolicy(H,$={}){if($.phase&&$.afterPhase)throw Error("Policies inside a phase cannot specify afterPhase.");if($.phase&&!cMI.has($.phase))throw Error(`Invalid phase name: ${$.phase}`);if($.afterPhase&&!cMI.has($.afterPhase))throw Error(`Invalid afterPhase name: ${$.afterPhase}`);this._policies.push({policy:H,options:$}),this._orderedPolicies=void 0}removePolicy(H){let $=[];return this._policies=this._policies.filter((A)=>{if(H.name&&A.policy.name===H.name||H.phase&&A.options.phase===H.phase)return $.push(A.policy),!1;else return!0}),this._orderedPolicies=void 0,$}sendRequest(H,$){return this.getOrderedPolicies().reduceRight((I,D)=>{return(B)=>{return D.sendRequest(B,I)}},(I)=>H.sendRequest(I))($)}getOrderedPolicies(){if(!this._orderedPolicies)this._orderedPolicies=this.orderPolicies();return this._orderedPolicies}clone(){return new DE$(this._policies)}static create(){return new DE$}orderPolicies(){let H=[],$=new Map;function A(J){return{name:J,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}let L=A("Serialize"),I=A("None"),D=A("Deserialize"),B=A("Retry"),f=A("Sign"),E=[L,I,D,B,f];function M(J){if(J==="Retry")return B;else if(J==="Serialize")return L;else if(J==="Deserialize")return D;else if(J==="Sign")return f;else return I}for(let J of this._policies){let{policy:F,options:Q}=J,W=F.name;if($.has(W))throw Error("Duplicate policy names not allowed in pipeline");let P={policy:F,dependsOn:new Set,dependants:new Set};if(Q.afterPhase)P.afterPhase=M(Q.afterPhase),P.afterPhase.hasAfterPolicies=!0;$.set(W,P),M(Q.phase).policies.add(P)}for(let J of this._policies){let{policy:F,options:Q}=J,W=F.name,P=$.get(W);if(!P)throw Error(`Missing node for policy ${W}`);if(Q.afterPolicies)for(let Y of Q.afterPolicies){let C=$.get(Y);if(C)P.dependsOn.add(C),C.dependants.add(P)}if(Q.beforePolicies)for(let Y of Q.beforePolicies){let C=$.get(Y);if(C)C.dependsOn.add(P),P.dependants.add(C)}}function G(J){J.hasRun=!0;for(let F of J.policies){if(F.afterPhase&&(!F.afterPhase.hasRun||F.afterPhase.policies.size))continue;if(F.dependsOn.size===0){H.push(F.policy);for(let Q of F.dependants)Q.dependsOn.delete(F);$.delete(F.policy.name),J.policies.delete(F)}}}function U(){for(let J of E){if(G(J),J.policies.size>0&&J!==I){if(!I.hasRun)G(I);return}if(J.hasAfterPolicies)G(I)}}let X=0;while($.size>0){X++;let J=H.length;if(U(),H.length<=J&&X>1)throw Error("Cannot satisfy policy dependencies due to requirements cycle.")}return H}}function _fA(){return DE$.create()}var cMI;var lMI=K(()=>{cMI=new Set(["Deserialize","Serialize","Retry","Sign"])});function mNH(H){return typeof H==="object"&&H!==null&&!Array.isArray(H)&&!(H instanceof RegExp)&&!(H instanceof Date)}function zLH(H){if(mNH(H)){let $=typeof H.name==="string",A=typeof H.message==="string";return $&&A}return!1}var CfA=()=>{};var iMI,nMI;var rMI=K(()=>{iMI=require("util"),nMI=iMI.inspect.custom});class Cy{constructor({additionalAllowedHeaderNames:H=[],additionalAllowedQueryParameters:$=[]}={}){H=vc0.concat(H),$=hc0.concat($),this.allowedHeaderNames=new Set(H.map((A)=>A.toLowerCase())),this.allowedQueryParameters=new Set($.map((A)=>A.toLowerCase()))}sanitize(H){let $=new Set;return JSON.stringify(H,(A,L)=>{if(L instanceof Error)return Object.assign(Object.assign({},L),{name:L.name,message:L.message});if(A==="headers")return this.sanitizeHeaders(L);else if(A==="url")return this.sanitizeUrl(L);else if(A==="query")return this.sanitizeQuery(L);else if(A==="body")return;else if(A==="response")return;else if(A==="operationSpec")return;else if(Array.isArray(L)||mNH(L)){if($.has(L))return"[Circular]";$.add(L)}return L},2)}sanitizeUrl(H){if(typeof H!=="string"||H===null||H==="")return H;let $=new URL(H);if(!$.search)return H;for(let[A]of $.searchParams)if(!this.allowedQueryParameters.has(A.toLowerCase()))$.searchParams.set(A,YfA);return $.toString()}sanitizeHeaders(H){let $={};for(let A of Object.keys(H))if(this.allowedHeaderNames.has(A.toLowerCase()))$[A]=H[A];else $[A]=YfA;return $}sanitizeQuery(H){if(typeof H!=="object"||H===null)return H;let $={};for(let A of Object.keys(H))if(this.allowedQueryParameters.has(A.toLowerCase()))$[A]=H[A];else $[A]=YfA;return $}}var YfA="REDACTED",vc0,hc0;var pNH=K(()=>{vc0=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],hc0=["api-version"]});function wfA(H){if(H instanceof o_)return!0;return zLH(H)&&H.name==="RestError"}var bc0,o_;var ZfA=K(()=>{CfA();rMI();pNH();bc0=new Cy;o_=class o_ extends Error{constructor(H,$={}){super(H);this.name="RestError",this.code=$.code,this.statusCode=$.statusCode,Object.defineProperty(this,"request",{value:$.request,enumerable:!1}),Object.defineProperty(this,"response",{value:$.response,enumerable:!1}),Object.defineProperty(this,nMI,{value:()=>{return`RestError: ${this.message} 
              || ${B} === "boolean" || ${I} === null`).assign(f,z1._`[${I}]`)}}}function $f9({gen:H,parentData:$,parentDataProperty:A},L){H.if(z1._`${$} !== undefined`,()=>H.assign(z1._`${$}[${A}]`,L))}function hXA(H,$,A,L=KFH.Correct){let I=L===KFH.Correct?z1.operators.EQ:z1.operators.NEQ,D;switch(H){case"null":return z1._`${$} ${I} null`;case"array":D=z1._`Array.isArray(${$})`;break;case"object":D=z1._`${$} && typeof ${$} == "object" && !Array.isArray(${$})`;break;case"integer":D=B(z1._`!(${$} % 1) && !isNaN(${$})`);break;case"number":D=B();break;default:return z1._`typeof ${$} ${I} ${H}`}return L===KFH.Correct?D:(0,z1.not)(D);function B(f=z1.nil){return(0,z1.and)(z1._`typeof ${$} == "number"`,f,A?z1._`isFinite(${$})`:z1.nil)}}t6.checkDataType=hXA;function bXA(H,$,A,L){if(H.length===1)return hXA(H[0],$,A,L);let I,D=(0,FCI.toHash)(H);if(D.array&&D.object){let B=z1._`typeof ${$} != "object"`;I=D.null?B:z1._`!${$} || ${B}`,delete D.null,delete D.array,delete D.object}else I=z1.nil;if(D.number)delete D.integer;for(let B in D)I=(0,z1.and)(I,hXA(B,$,A,L));return I}t6.checkDataTypes=bXA;var Af9={message:({schema:H})=>`must be ${H}`,params:({schema:H,schemaValue:$})=>typeof H=="string"?z1._`{type: ${H}}`:z1._`{type: ${$}}`};function kXA(H){let $=Lf9(H);(0,o89.reportError)($,Af9)}t6.reportTypeError=kXA;function Lf9(H){let{gen:$,data:A,schema:L}=H,I=(0,FCI.schemaRefOrVal)(H,L,"type");return{gen:$,keyword:"type",data:A,schema:L.type,schemaCode:I,schemaValue:I,parentSchema:L,params:{},it:H}}});var VCI=z((a4$)=>{Object.defineProperty(a4$,"__esModule",{value:!0});a4$.assignDefaults=void 0;var QFH=u1(),If9=Zf();function Df9(H,$){let{properties:A,items:L}=H.schema;if($==="object"&&A)for(let I in A)WCI(H,I,A[I].default);else if($==="array"&&Array.isArray(L))L.forEach((I,D)=>WCI(H,D,I.default))}a4$.assignDefaults=Df9;function WCI(H,$,A){let{gen:L,compositeRule:I,data:D,opts:B}=H;if(A===void 0)return;let f=QFH._`${D}${(0,QFH.getProperty)($)}`;if(I){(0,If9.checkStrictMode)(H,`default is ignored for: ${f}`);return}let E=QFH._`${f} === undefined`;if(B.useDefaults==="empty")E=QFH._`${E} || ${f} === null || ${f} === ""`;L.if(E,QFH._`${f} = ${(0,QFH.stringify)(A)}`)}});var fT=z((jM)=>{Object.defineProperty(jM,"__esModule",{value:!0});jM.validateUnion=jM.validateArray=jM.usePattern=jM.callValidateCode=jM.schemaProperties=jM.allSchemaProperties=jM.noPropertyInData=jM.propertyInData=jM.isOwnProperty=jM.hasPropFunc=jM.reportMissingProp=jM.checkMissingProp=jM.checkReportMissingProp=void 0;var dU=u1(),uXA=Zf(),dr=ug(),Bf9=Zf();function ff9(H,$){let{gen:A,data:L,it:I}=H;A.if(mXA(A,L,$,I.opts.ownProperties),()=>{H.setParams({missingProperty:dU._`${$}`},!0),H.error()})}jM.checkReportMissingProp=ff9;function Ef9({gen:H,data:$,it:{opts:A}},L,I){return(0,dU.or)(...L.map((D)=>(0,dU.and)(mXA(H,$,D,A.ownProperties),dU._`${I} = ${D}`)))}jM.checkMissingProp=Ef9;function Mf9(H,$){H.setParams({missingProperty:$},!0),H.error()}jM.reportMissingProp=Mf9;function PCI(H){return H.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:dU._`Object.prototype.hasOwnProperty`})}jM.hasPropFunc=PCI;function gXA(H,$,A){return dU._`${PCI(H)}.call(${$}, ${A})`}jM.isOwnProperty=gXA;function Gf9(H,$,A,L){let I=dU._`${$}${(0,dU.getProperty)(A)} !== undefined`;return L?dU._`${I} && ${gXA(H,$,A)}`:I}jM.propertyInData=Gf9;function mXA(H,$,A,L){let I=dU._`${$}${(0,dU.getProperty)(A)} === undefined`;return L?(0,dU.or)(I,(0,dU.not)(gXA(H,$,A))):I}jM.noPropertyInData=mXA;function _CI(H){return H?Object.keys(H).filter(($)=>$!=="__proto__"):[]}jM.allSchemaProperties=_CI;function Uf9(H,$){return _CI($).filter((A)=>!(0,uXA.alwaysValidSchema)(H,$[A]))}jM.schemaProperties=Uf9;function Xf9({schemaCode:H,data:$,it:{gen:A,topSchemaRef:L,schemaPath:I,errorPath:D},it:B},f,E,M){let G=M?dU._`${H}, ${$}, ${L}${I}`:$,U=[[dr.default.instancePath,(0,dU.strConcat)(dr.default.instancePath,D)],[dr.default.parentData,B.parentData],[dr.default.parentDataProperty,B.parentDataProperty],[dr.default.rootData,dr.default.rootData]];if(B.opts.dynamicRef)U.push([dr.default.dynamicAnchors,dr.default.dynamicAnchors]);let X=dU._`${G}, ${A.object(...U)}`;return E!==dU.nil?dU._`${f}.call(${E}, ${X})`:dU._`${f}(${X})`}jM.callValidateCode=Xf9;var Jf9=dU._`new RegExp`;function Ff9({gen:H,it:{opts:$}},A){let L=$.unicodeRegExp?"u":"",{regExp:I}=$.code,D=I(A,L);return H.scopeValue("pattern",{key:D.toString(),ref:D,code:dU._`${I.code==="new RegExp"?Jf9:(0,Bf9.useFunc)(H,I)}(${A}, ${L})`})}jM.usePattern=Ff9;function Kf9(H){let{gen:$,data:A,keyword:L,it:I}=H,D=$.name("valid");if(I.allErrors){let f=$.let("valid",!0);return B(()=>$.assign(f,!1)),f}return $.var(D,!0),B(()=>$.break()),D;function B(f){let E=$.const("len",dU._`${A}.length`);$.forRange("i",0,E,(M)=>{H.subschema({keyword:L,dataProp:M,dataPropType:uXA.Type.Num},D),$.if((0,dU.not)(D),f)})}}jM.validateArray=Kf9;function Qf9(H){let{gen:$,schema:A,keyword:L,it:I}=H;if(!Array.isArray(A))throw Error("ajv implementation error");if(A.some((E)=>(0,uXA.alwaysValidSchema)(I,E))&&!I.opts.unevaluated)return;let B=$.let("valid",!1),f=$.name("_valid");$.block(()=>A.forEach((E,M)=>{let G=H.subschema({keyword:L,schemaProp:M,compositeRule:!0},f);if($.assign(B,dU._`${B} || ${f}`),!H.mergeValidEvaluated(G,f))$.if((0,dU.not)(B))})),H.result(B,()=>H.reset(),()=>H.error(!0))}jM.validateUnion=Qf9});var wCI=z((ey)=>{Object.defineProperty(ey,"__esModule",{value:!0});ey.validateKeywordUsage=ey.validSchemaType=ey.funcKeywordCode=ey.macroKeywordCode=void 0;var HP=u1(),MDH=ug(),Wf9=fT(),Vf9=lSH();function Pf9(H,$){let{gen:A,keyword:L,schema:I,parentSchema:D,it:B}=H,f=$.macro.call(B.self,I,D,B),E=YCI(A,L,f);if(B.opts.validateSchema!==!1)B.self.validateSchema(f,!0);let M=A.name("valid");H.subschema({schema:f,schemaPath:HP.nil,errSchemaPath:`${B.errSchemaPath}/${L}`,topSchemaRef:E,compositeRule:!0},M),H.pass(M,()=>H.error(!0))}ey.macroKeywordCode=Pf9;function _f9(H,$){var A;let{gen:L,keyword:I,schema:D,parentSchema:B,$data:f,it:E}=H;Yf9(E,$);let M=!f&&$.compile?$.compile.call(E.self,D,B,E):$.validate,G=YCI(L,I,M),U=L.let("valid");H.block$data(U,X),H.ok((A=$.valid)!==null&&A!==void 0?A:U);function X(){if($.errors===!1){if(Q(),$.modifying)CCI(H);W(()=>H.error())}else{let P=$.async?J():F();if($.modifying)CCI(H);W(()=>Cf9(H,P))}}function J(){let P=L.let("ruleErrs",null);return L.try(()=>Q(HP._`await `),(Y)=>L.assign(U,!1).if(HP._`${Y} instanceof ${E.ValidationError}`,()=>L.assign(P,HP._`${Y}.errors`),()=>L.throw(Y))),P}function F(){let P=HP._`${G}.errors`;return L.assign(P,null),Q(HP.nil),P}function Q(P=$.async?HP._`await `:HP.nil){let Y=E.opts.passContext?MDH.default.this:MDH.default.self,C=!(("compile"in $)&&!f||$.schema===!1);L.assign(U,HP._`${P}${(0,Wf9.callValidateCode)(H,G,Y,C)}`,$.modifying)}function W(P){var Y;L.if((0,HP.not)((Y=$.valid)!==null&&Y!==void 0?Y:U),P)}}ey.funcKeywordCode=_f9;function CCI(H){let{gen:$,data:A,it:L}=H;$.if(L.parentData,()=>$.assign(A,HP._`${L.parentData}[${L.parentDataProperty}]`))}function Cf9(H,$){let{gen:A}=H;A.if(HP._`Array.isArray(${$})`,()=>{A.assign(MDH.default.vErrors,HP._`${MDH.default.vErrors} === null ? ${$} : ${MDH.default.vErrors}.concat(${$})`).assign(MDH.default.errors,HP._`${MDH.default.vErrors}.length`),(0,Vf9.extendErrors)(H)},()=>H.error())}function Yf9({schemaEnv:H},$){if($.async&&!H.$async)throw Error("async keyword in sync schema")}function YCI(H,$,A){if(A===void 0)throw Error(`keyword "${$}" failed to compile`);return H.scopeValue("keyword",typeof A=="function"?{ref:A}:{ref:A,code:(0,HP.stringify)(A)})}function wf9(H,$,A=!1){return!$.length||$.some((L)=>L==="array"?Array.isArray(H):L==="object"?H&&typeof H=="object"&&!Array.isArray(H):typeof H==L||A&&typeof H>"u")}ey.validSchemaType=wf9;function Zf9({schema:H,opts:$,self:A,errSchemaPath:L},I,D){if(Array.isArray(I.keyword)?!I.keyword.includes(D):I.keyword!==D)throw Error("ajv implementation error");let B=I.dependencies;if(B===null||B===void 0?void 0:B.some((f)=>!Object.prototype.hasOwnProperty.call(H,f)))throw Error(`parent schema must have dependencies of ${D}: ${B.join(",")}`);if(I.validateSchema){if(!I.validateSchema(H[D])){let E=`keyword "${D}" value is invalid at path "${L}": `+A.errorsText(I.validateSchema.errors);if($.validateSchema==="log")A.logger.error(E);else throw Error(E)}}}ey.validateKeywordUsage=Zf9});var qCI=z((cr)=>{Object.defineProperty(cr,"__esModule",{value:!0});cr.extendSubschemaMode=cr.extendSubschemaData=cr.getSubschema=void 0;var Hv=u1(),ZCI=Zf();function qf9(H,{keyword:$,schemaProp:A,schema:L,schemaPath:I,errSchemaPath:D,topSchemaRef:B}){if($!==void 0&&L!==void 0)throw Error('both "keyword" and "schema" passed, only one allowed');if($!==void 0){let f=H.schema[$];return A===void 0?{schema:f,schemaPath:Hv._`${H.schemaPath}${(0,Hv.getProperty)($)}`,errSchemaPath:`${H.errSchemaPath}/${$}`}:{schema:f[A],schemaPath:Hv._`${H.schemaPath}${(0,Hv.getProperty)($)}${(0,Hv.getProperty)(A)}`,errSchemaPath:`${H.errSchemaPath}/${$}/${(0,ZCI.escapeFragment)(A)}`}}if(L!==void 0){if(I===void 0||D===void 0||B===void 0)throw Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:L,schemaPath:I,topSchemaRef:B,errSchemaPath:D}}throw Error('either "keyword" or "schema" must be passed')}cr.getSubschema=qf9;function Tf9(H,$,{dataProp:A,dataPropType:L,data:I,dataTypes:D,propertyName:B}){if(I!==void 0&&A!==void 0)throw Error('both "data" and "dataProp" passed, only one allowed');let{gen:f}=$;if(A!==void 0){let{errorPath:M,dataPathArr:G,opts:U}=$,X=f.let("data",Hv._`${$.data}${(0,Hv.getProperty)(A)}`,!0);E(X),H.errorPath=Hv.str`${M}${(0,ZCI.getErrorPath)(A,L,U.jsPropertySyntax)}`,H.parentDataProperty=Hv._`${A}`,H.dataPathArr=[...G,H.parentDataProperty]}if(I!==void 0){let M=I instanceof Hv.Name?I:f.let("data",I,!0);if(E(M),B!==void 0)H.propertyName=B}if(D)H.dataTypes=D;function E(M){H.data=M,H.dataLevel=$.dataLevel+1,H.dataTypes=[],$.definedProperties=new Set,H.parentData=$.data,H.dataNames=[...$.dataNames,M]}}cr.extendSubschemaData=Tf9;function zf9(H,{jtdDiscriminator:$,jtdMetadata:A,compositeRule:L,createErrors:I,allErrors:D}){if(L!==void 0)H.compositeRule=L;if(I!==void 0)H.createErrors=I;if(D!==void 0)H.allErrors=D;H.jtdDiscriminator=$,H.jtdMetadata=A}cr.extendSubschemaMode=zf9});var pXA=z((U$E,TCI)=>{TCI.exports=function H($,A){if($===A)return!0;if($&&A&&typeof $=="object"&&typeof A=="object"){if($.constructor!==A.constructor)return!1;var L,I,D;if(Array.isArray($)){if(L=$.length,L!=A.length)return!1;for(I=L;I--!==0;)if(!H($[I],A[I]))return!1;return!0}if($.constructor===RegExp)return $.source===A.source&&$.flags===A.flags;if($.valueOf!==Object.prototype.valueOf)return $.valueOf()===A.valueOf();if($.toString!==Object.prototype.toString)return $.toString()===A.toString();if(D=Object.keys($),L=D.length,L!==Object.keys(A).length)return!1;for(I=L;I--!==0;)if(!Object.prototype.hasOwnProperty.call(A,D[I]))return!1;for(I=L;I--!==0;){var B=D[I];if(!H($[B],A[B]))return!1}return!0}return $!==$&&A!==A}});var NCI=z((X$E,zCI)=>{var lr=zCI.exports=function(H,$,A){if(typeof $=="function")A=$,$={};A=$.cb||A;var L=typeof A=="function"?A:A.pre||function(){},I=A.post||function(){};o4$($,L,I,H,"",H)};lr.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};lr.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};lr.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};lr.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function o4$(H,$,A,L,I,D,B,f,E,M){if(L&&typeof L=="object"&&!Array.isArray(L)){$(L,I,D,B,f,E,M);for(var G in L){var U=L[G];if(Array.isArray(U)){if(G in lr.arrayKeywords)for(var X=0;X<U.length;X++)o4$(H,$,A,U[X],I+"/"+G+"/"+X,D,I,G,L,X)}else if(G in lr.propsKeywords){if(U&&typeof U=="object")for(var J in U)o4$(H,$,A,U[J],I+"/"+G+"/"+Nf9(J),D,I,G,L,J)}else if(G in lr.keywords||H.allKeys&&!(G in lr.skipKeywords))o4$(H,$,A,U,I+"/"+G,D,I,G,L)}A(L,I,D,B,f,E,M)}}function Nf9(H){return H.replace(/~/g,"~0").replace(/\//g,"~1")}});var nSH=z((XC)=>{Object.defineProperty(XC,"__esModule",{value:!0});XC.getSchemaRefs=XC.resolveUrl=XC.normalizeId=XC._getFullPath=XC.getFullPath=XC.inlineRef=void 0;var Of9=Zf(),xf9=pXA(),Sf9=NCI(),jf9=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Rf9(H,$=!0){if(typeof H=="boolean")return!0;if($===!0)return!dXA(H);if(!$)return!1;return OCI(H)<=$}XC.inlineRef=Rf9;var yf9=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function dXA(H){for(let $ in H){if(yf9.has($))return!0;let A=H[$];if(Array.isArray(A)&&A.some(dXA))return!0;if(typeof A=="object"&&dXA(A))return!0}return!1}function OCI(H){let $=0;for(let A in H){if(A==="$ref")return 1/0;if($++,jf9.has(A))continue;if(typeof H[A]=="object")(0,Of9.eachItem)(H[A],(L)=>$+=OCI(L));if($===1/0)return 1/0}return $}function xCI(H,$="",A){if(A!==!1)$=WFH($);let L=H.parse($);return SCI(H,L)}XC.getFullPath=xCI;function SCI(H,$){return H.serialize($).split("#")[0]+"#"}XC._getFullPath=SCI;var vf9=/#\/?$/;function WFH(H){return H?H.replace(vf9,""):""}XC.normalizeId=WFH;function hf9(H,$,A){return A=WFH(A),H.resolve($,A)}XC.resolveUrl=hf9;var bf9=/^[a-z_][-a-z0-9._]*$/i;function kf9(H,$){if(typeof H=="boolean")return{};let{schemaId:A,uriResolver:L}=this.opts,I=WFH(H[A]||$),D={"":I},B=xCI(L,I,!1),f={},E=new Set;return Sf9(H,{allKeys:!0},(U,X,J,F)=>{if(F===void 0)return;let Q=B+X,W=D[F];if(typeof U[A]=="string")W=P.call(this,U[A]);Y.call(this,U.$anchor),Y.call(this,U.$dynamicAnchor),D[X]=W;function P(C){let Z=this.opts.uriResolver.resolve;if(C=WFH(W?Z(W,C):C),E.has(C))throw G(C);E.add(C);let q=this.refs[C];if(typeof q=="string")q=this.refs[q];if(typeof q=="object")M(U,q.schema,C);else if(C!==WFH(Q))if(C[0]==="#")M(U,f[C],C),f[C]=U;else this.refs[C]=Q;return C}function Y(C){if(typeof C=="string"){if(!bf9.test(C))throw Error(`invalid anchor "${C}"`);P.call(this,`#${C}`)}}}),f;function M(U,X,J){if(X!==void 0&&!xf9(U,X))throw G(J)}function G(U){return Error(`reference "${U}" resolves to more than one schema`)}}XC.getSchemaRefs=kf9});var oSH=z((ir)=>{Object.defineProperty(ir,"__esModule",{value:!0});ir.getData=ir.KeywordCxt=ir.validateFunctionCode=void 0;var hCI=UCI(),jCI=iSH(),lXA=vXA(),t4$=iSH(),uf9=VCI(),aSH=wCI(),cXA=qCI(),_B=u1(),Q9=ug(),gf9=nSH(),gg=Zf(),rSH=lSH();function mf9(H){if(uCI(H)){if(gCI(H),kCI(H)){cf9(H);return}}bCI(H,()=>(0,hCI.topBoolOrEmptySchema)(H))}ir.validateFunctionCode=mf9;function bCI({gen:H,validateName:$,schema:A,schemaEnv:L,opts:I},D){if(I.code.es5)H.func($,_B._`${Q9.default.data}, ${Q9.default.valCxt}`,L.$async,()=>{H.code(_B._`"use strict"; ${RCI(A,I)}`),df9(H,I),H.code(D)});else H.func($,_B._`${Q9.default.data}, ${pf9(I)}`,L.$async,()=>H.code(RCI(A,I)).code(D))}function pf9(H){return _B._`{${Q9.default.instancePath}="", ${Q9.default.parentData}, ${Q9.default.parentDataProperty}, ${Q9.default.rootData}=${Q9.default.data}${H.dynamicRef?_B._`, ${Q9.default.dynamicAnchors}={}`:_B.nil}}={}`}function df9(H,$){H.if(Q9.default.valCxt,()=>{if(H.var(Q9.default.instancePath,_B._`${Q9.default.valCxt}.${Q9.default.instancePath}`),H.var(Q9.default.parentData,_B._`${Q9.default.valCxt}.${Q9.default.parentData}`),H.var(Q9.default.parentDataProperty,_B._`${Q9.default.valCxt}.${Q9.default.parentDataProperty}`),H.var(Q9.default.rootData,_B._`${Q9.default.valCxt}.${Q9.default.rootData}`),$.dynamicRef)H.var(Q9.default.dynamicAnchors,_B._`${Q9.default.valCxt}.${Q9.default.dynamicAnchors}`)},()=>{if(H.var(Q9.default.instancePath,_B._`""`),H.var(Q9.default.parentData,_B._`undefined`),H.var(Q9.default.parentDataProperty,_B._`undefined`),H.var(Q9.default.rootData,Q9.default.data),$.dynamicRef)H.var(Q9.default.dynamicAnchors,_B._`{}`)})}function cf9(H){let{schema:$,opts:A,gen:L}=H;bCI(H,()=>{if(A.$comment&&$.$comment)pCI(H);if(af9(H),L.let(Q9.default.vErrors,null),L.let(Q9.default.errors,0),A.unevaluated)lf9(H);mCI(H),sf9(H)});return}function lf9(H){let{gen:$,validateName:A}=H;H.evaluated=$.const("evaluated",_B._`${A}.evaluated`),$.if(_B._`${H.evaluated}.dynamicProps`,()=>$.assign(_B._`${H.evaluated}.props`,_B._`undefined`)),$.if(_B._`${H.evaluated}.dynamicItems`,()=>$.assign(_B._`${H.evaluated}.items`,_B._`undefined`))}function RCI(H,$){let A=typeof H=="object"&&H[$.schemaId];return A&&($.code.source||$.code.process)?_B._`/*# sourceURL=${A} */`:_B.nil}function if9(H,$){if(uCI(H)){if(gCI(H),kCI(H)){nf9(H,$);return}}(0,hCI.boolOrEmptySchema)(H,$)}function kCI({schema:H,self:$}){if(typeof H=="boolean")return!H;for(let A in H)if($.RULES.all[A])return!0;return!1}function uCI(H){return typeof H.schema!="boolean"}function nf9(H,$){let{schema:A,gen:L,opts:I}=H;if(I.$comment&&A.$comment)pCI(H);of9(H),tf9(H);let D=L.const("_errs",Q9.default.errors);mCI(H,D),L.var($,_B._`${D} === ${Q9.default.errors}`)}function gCI(H){(0,gg.checkUnknownRules)(H),rf9(H)}function mCI(H,$){if(H.opts.jtd)return yCI(H,[],!1,$);let A=(0,jCI.getSchemaTypes)(H.schema),L=(0,jCI.coerceAndCheckDataType)(H,A);yCI(H,A,!L,$)}function rf9(H){let{schema:$,errSchemaPath:A,opts:L,self:I}=H;if($.$ref&&L.ignoreKeywordsWithRef&&(0,gg.schemaHasRulesButRef)($,I.RULES))I.logger.warn(`$ref: keywords ignored in schema at path "${A}"`)}function af9(H){let{schema:$,opts:A}=H;if($.default!==void 0&&A.useDefaults&&A.strictSchema)(0,gg.checkStrictMode)(H,"default is ignored in the schema root")}function of9(H){let $=H.schema[H.opts.schemaId];if($)H.baseId=(0,gf9.resolveUrl)(H.opts.uriResolver,H.baseId,$)}function tf9(H){if(H.schema.$async&&!H.schemaEnv.$async)throw Error("async schema in sync schema")}function pCI({gen:H,schemaEnv:$,schema:A,errSchemaPath:L,opts:I}){let D=A.$comment;if(I.$comment===!0)H.code(_B._`${Q9.default.self}.logger.log(${D})`);else if(typeof I.$comment=="function"){let B=_B.str`${L}/$comment`,f=H.scopeValue("root",{ref:$.root});H.code(_B._`${Q9.default.self}.opts.$comment(${D}, ${B}, ${f}.schema)`)}}function sf9(H){let{gen:$,schemaEnv:A,validateName:L,ValidationError:I,opts:D}=H;if(A.$async)$.if(_B._`${Q9.default.errors} === 0`,()=>$.return(Q9.default.data),()=>$.throw(_B._`new ${I}(${Q9.default.vErrors})`));else{if($.assign(_B._`${L}.errors`,Q9.default.vErrors),D.unevaluated)ef9(H);$.return(_B._`${Q9.default.errors} === 0`)}}function ef9({gen:H,evaluated:$,props:A,items:L}){if(A instanceof _B.Name)H.assign(_B._`${$}.props`,A);if(L instanceof _B.Name)H.assign(_B._`${$}.items`,L)}function yCI(H,$,A,L){let{gen:I,schema:D,data:B,allErrors:f,opts:E,self:M}=H,{RULES:G}=M;if(D.$ref&&(E.ignoreKeywordsWithRef||!(0,gg.schemaHasRulesButRef)(D,G))){I.block(()=>cCI(H,"$ref",G.all.$ref.definition));return}if(!E.jtd)HE9(H,$);I.block(()=>{for(let X of G.rules)U(X);U(G.post)});function U(X){if(!(0,lXA.shouldUseGroup)(D,X))return;if(X.type){if(I.if((0,t4$.checkDataType)(X.type,B,E.strictNumbers)),vCI(H,X),$.length===1&&$[0]===X.type&&A)I.else(),(0,t4$.reportTypeError)(H);I.endIf()}else vCI(H,X);if(!f)I.if(_B._`${Q9.default.errors} === ${L||0}`)}}function vCI(H,$){let{gen:A,schema:L,opts:{useDefaults:I}}=H;if(I)(0,uf9.assignDefaults)(H,$.type);A.block(()=>{for(let D of $.rules)if((0,lXA.shouldUseRule)(L,D))cCI(H,D.keyword,D.definition,$.type)})}function HE9(H,$){if(H.schemaEnv.meta||!H.opts.strictTypes)return;if($E9(H,$),!H.opts.allowUnionTypes)AE9(H,$);LE9(H,H.dataTypes)}function $E9(H,$){if(!$.length)return;if(!H.dataTypes.length){H.dataTypes=$;return}$.forEach((A)=>{if(!dCI(H.dataTypes,A))iXA(H,`type "${A}" not allowed by context "${H.dataTypes.join(",")}"`)}),DE9(H,$)}function AE9(H,$){if($.length>1&&!($.length===2&&$.includes("null")))iXA(H,"use allowUnionTypes to allow union type keyword")}function LE9(H,$){let A=H.self.RULES.all;for(let L in A){let I=A[L];if(typeof I=="object"&&(0,lXA.shouldUseRule)(H.schema,I)){let{type:D}=I.definition;if(D.length&&!D.some((B)=>IE9($,B)))iXA(H,`missing type "${D.join(",")}" for keyword "${L}"`)}}}function IE9(H,$){return H.includes($)||$==="number"&&H.includes("integer")}function dCI(H,$){return H.includes($)||$==="integer"&&H.includes("number")}function DE9(H,$){let A=[];for(let L of H.dataTypes)if(dCI($,L))A.push(L);else if($.includes("integer")&&L==="number")A.push("integer");H.dataTypes=A}function iXA(H,$){let A=H.schemaEnv.baseId+H.errSchemaPath;$+=` at "${A}" (strictTypes)`,(0,gg.checkStrictMode)(H,$,H.opts.strictTypes)}class nXA{constructor(H,$,A){if((0,aSH.validateKeywordUsage)(H,$,A),this.gen=H.gen,this.allErrors=H.allErrors,this.keyword=A,this.data=H.data,this.schema=H.schema[A],this.$data=$.$data&&H.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,gg.schemaRefOrVal)(H,this.schema,A,this.$data),this.schemaType=$.schemaType,this.parentSchema=H.schema,this.params={},this.it=H,this.def=$,this.$data)this.schemaCode=H.gen.const("vSchema",lCI(this.$data,H));else if(this.schemaCode=this.schemaValue,!(0,aSH.validSchemaType)(this.schema,$.schemaType,$.allowUndefined))throw Error(`${A} value must be ${JSON.stringify($.schemaType)}`);if("code"in $?$.trackErrors:$.errors!==!1)this.errsCount=H.gen.const("_errs",Q9.default.errors)}result(H,$,A){this.failResult((0,_B.not)(H),$,A)}failResult(H,$,A){if(this.gen.if(H),A)A();else this.error();if($){if(this.gen.else(),$(),this.allErrors)this.gen.endIf()}else if(this.allErrors)this.gen.endIf();else this.gen.else()}pass(H,$){this.failResult((0,_B.not)(H),void 0,$)}fail(H){if(H===void 0){if(this.error(),!this.allErrors)this.gen.if(!1);return}if(this.gen.if(H),this.error(),this.allErrors)this.gen.endIf();else this.gen.else()}fail$data(H){if(!this.$data)return this.fail(H);let{schemaCode:$}=this;this.fail(_B._`${$} !== undefined && (${(0,_B.or)(this.invalid$data(),H)})`)}error(H,$,A){if($){this.setParams($),this._error(H,A),this.setParams({});return}this._error(H,A)}_error(H,$){(H?rSH.reportExtraError:rSH.reportError)(this,this.def.error,$)}$dataError(){(0,rSH.reportError)(this,this.def.$dataError||rSH.keyword$DataError)}reset(){if(this.errsCount===void 0)throw Error('add "trackErrors" to keyword definition');(0,rSH.resetErrorsCount)(this.gen,this.errsCount)}ok(H){if(!this.allErrors)this.gen.if(H)}setParams(H,$){if($)Object.assign(this.params,H);else this.params=H}block$data(H,$,A=_B.nil){this.gen.block(()=>{this.check$data(H,A),$()})}check$data(H=_B.nil,$=_B.nil){if(!this.$data)return;let{gen:A,schemaCode:L,schemaType:I,def:D}=this;if(A.if((0,_B.or)(_B._`${L} === undefined`,$)),H!==_B.nil)A.assign(H,!0);if(I.length||D.validateSchema){if(A.elseIf(this.invalid$data()),this.$dataError(),H!==_B.nil)A.assign(H,!1)}A.else()}invalid$data(){let{gen:H,schemaCode:$,schemaType:A,def:L,it:I}=this;return(0,_B.or)(D(),B());function D(){if(A.length){if(!($ instanceof _B.Name))throw Error("ajv implementation error");let f=Array.isArray(A)?A:[A];return _B._`${(0,t4$.checkDataTypes)(f,$,I.opts.strictNumbers,t4$.DataType.Wrong)}`}return _B.nil}function B(){if(L.validateSchema){let f=H.scopeValue("validate$data",{ref:L.validateSchema});return _B._`!${f}(${$})`}return _B.nil}}subschema(H,$){let A=(0,cXA.getSubschema)(this.it,H);(0,cXA.extendSubschemaData)(A,this.it,H),(0,cXA.extendSubschemaMode)(A,H);let L={...this.it,...A,items:void 0,props:void 0};return if9(L,$),L}mergeEvaluated(H,$){let{it:A,gen:L}=this;if(!A.opts.unevaluated)return;if(A.props!==!0&&H.props!==void 0)A.props=gg.mergeEvaluated.props(L,H.props,A.props,$);if(A.items!==!0&&H.items!==void 0)A.items=gg.mergeEvaluated.items(L,H.items,A.items,$)}mergeValidEvaluated(H,$){let{it:A,gen:L}=this;if(A.opts.unevaluated&&(A.props!==!0||A.items!==!0))return L.if($,()=>this.mergeEvaluated(H,_B.Name)),!0}}ir.KeywordCxt=nXA;function cCI(H,$,A,L){let I=new nXA(H,A,$);if("code"in A)A.code(I,L);else if(I.$data&&A.validate)(0,aSH.funcKeywordCode)(I,A);else if("macro"in A)(0,aSH.macroKeywordCode)(I,A);else if(A.compile||A.validate)(0,aSH.funcKeywordCode)(I,A)}var BE9=/^\/(?:[^~]|~0|~1)*$/,fE9=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function lCI(H,{dataLevel:$,dataNames:A,dataPathArr:L}){let I,D;if(H==="")return Q9.default.rootData;if(H[0]==="/"){if(!BE9.test(H))throw Error(`Invalid JSON-pointer: ${H}`);I=H,D=Q9.default.rootData}else{let M=fE9.exec(H);if(!M)throw Error(`Invalid JSON-pointer: ${H}`);let G=+M[1];if(I=M[2],I==="#"){if(G>=$)throw Error(E("property/index",G));return L[$-G]}if(G>$)throw Error(E("data",G));if(D=A[$-G],!I)return D}let B=D,f=I.split("/");for(let M of f)if(M)D=_B._`${D}${(0,_B.getProperty)((0,gg.unescapeJsonPointer)(M))}`,B=_B._`${B} && ${D}`;return B;function E(M,G){return`Cannot access ${M} ${G} levels up, current level is ${$}`}}ir.getData=lCI});var s4$=z((rXA)=>{Object.defineProperty(rXA,"__esModule",{value:!0});class iCI extends Error{constructor(H){super("validation failed");this.errors=H,this.ajv=this.validation=!0}}rXA.default=iCI});var tSH=z((oXA)=>{Object.defineProperty(oXA,"__esModule",{value:!0});var aXA=nSH();class nCI extends Error{constructor(H,$,A,L){super(L||`can't resolve reference ${A} from id ${$}`);this.missingRef=(0,aXA.resolveUrl)(H,$,A),this.missingSchema=(0,aXA.normalizeId)((0,aXA.getFullPath)(H,this.missingRef))}}oXA.default=nCI});var H5$=z((ET)=>{Object.defineProperty(ET,"__esModule",{value:!0});ET.resolveSchema=ET.getCompilingSchema=ET.resolveRef=ET.compileSchema=ET.SchemaEnv=void 0;var Ix=u1(),EE9=s4$(),GDH=ug(),Dx=nSH(),rCI=Zf(),ME9=oSH();class sSH{constructor(H){var $;this.refs={},this.dynamicAnchors={};let A;if(typeof H.schema=="object")A=H.schema;this.schema=H.schema,this.schemaId=H.schemaId,this.root=H.root||this,this.baseId=($=H.baseId)!==null&&$!==void 0?$:(0,Dx.normalizeId)(A===null||A===void 0?void 0:A[H.schemaId||"$id"]),this.schemaPath=H.schemaPath,this.localRefs=H.localRefs,this.meta=H.meta,this.$async=A===null||A===void 0?void 0:A.$async,this.refs={}}}ET.SchemaEnv=sSH;function sXA(H){let $=aCI.call(this,H);if($)return $;let A=(0,Dx.getFullPath)(this.opts.uriResolver,H.root.baseId),{es5:L,lines:I}=this.opts.code,{ownProperties:D}=this.opts,B=new Ix.CodeGen(this.scope,{es5:L,lines:I,ownProperties:D}),f;if(H.$async)f=B.scopeValue("Error",{ref:EE9.default,code:Ix._`require("ajv/dist/runtime/validation_error").default`});let E=B.scopeName("validate");H.validateName=E;let M={gen:B,allErrors:this.opts.allErrors,data:GDH.default.data,parentData:GDH.default.parentData,parentDataProperty:GDH.default.parentDataProperty,dataNames:[GDH.default.data],dataPathArr:[Ix.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:B.scopeValue("schema",this.opts.code.source===!0?{ref:H.schema,code:(0,Ix.stringify)(H.schema)}:{ref:H.schema}),validateName:E,ValidationError:f,schema:H.schema,schemaEnv:H,rootId:A,baseId:H.baseId||A,schemaPath:Ix.nil,errSchemaPath:H.schemaPath||(this.opts.jtd?"":"#"),errorPath:Ix._`""`,opts:this.opts,self:this},G;try{this._compilations.add(H),(0,ME9.validateFunctionCode)(M),B.optimize(this.opts.code.optimize);let U=B.toString();if(G=`${B.scopeRefs(GDH.default.scope)}return ${U}`,this.opts.code.process)G=this.opts.code.process(G,H);let J=Function(`${GDH.default.self}`,`${GDH.default.scope}`,G)(this,this.scope.get());if(this.scope.value(E,{ref:J}),J.errors=null,J.schema=H.schema,J.schemaEnv=H,H.$async)J.$async=!0;if(this.opts.code.source===!0)J.source={validateName:E,validateCode:U,scopeValues:B._values};if(this.opts.unevaluated){let{props:F,items:Q}=M;if(J.evaluated={props:F instanceof Ix.Name?void 0:F,items:Q instanceof Ix.Name?void 0:Q,dynamicProps:F instanceof Ix.Name,dynamicItems:Q instanceof Ix.Name},J.source)J.source.evaluated=(0,Ix.stringify)(J.evaluated)}return H.validate=J,H}catch(U){if(delete H.validate,delete H.validateName,G)this.logger.error("Error compiling schema, function code:",G);throw U}finally{this._compilations.delete(H)}}ET.compileSchema=sXA;function GE9(H,$,A){var L;A=(0,Dx.resolveUrl)(this.opts.uriResolver,$,A);let I=H.refs[A];if(I)return I;let D=JE9.call(this,H,A);if(D===void 0){let B=(L=H.localRefs)===null||L===void 0?void 0:L[A],{schemaId:f}=this.opts;if(B)D=new sSH({schema:B,schemaId:f,root:H,baseId:$})}if(D===void 0)return;return H.refs[A]=UE9.call(this,D)}ET.resolveRef=GE9;function UE9(H){if((0,Dx.inlineRef)(H.schema,this.opts.inlineRefs))return H.schema;return H.validate?H:sXA.call(this,H)}function aCI(H){for(let $ of this._compilations)if(XE9($,H))return $}ET.getCompilingSchema=aCI;function XE9(H,$){return H.schema===$.schema&&H.root===$.root&&H.baseId===$.baseId}function JE9(H,$){let A;while(typeof(A=this.refs[$])=="string")$=A;return A||this.schemas[$]||e4$.call(this,H,$)}function e4$(H,$){let A=this.opts.uriResolver.parse($),L=(0,Dx._getFullPath)(this.opts.uriResolver,A),I=(0,Dx.getFullPath)(this.opts.uriResolver,H.baseId,void 0);if(Object.keys(H.schema).length>0&&L===I)return tXA.call(this,A,H);let D=(0,Dx.normalizeId)(L),B=this.refs[D]||this.schemas[D];if(typeof B=="string"){let f=e4$.call(this,H,B);if(typeof(f===null||f===void 0?void 0:f.schema)!=="object")return;return tXA.call(this,A,f)}if(typeof(B===null||B===void 0?void 0:B.schema)!=="object")return;if(!B.validate)sXA.call(this,B);if(D===(0,Dx.normalizeId)($)){let{schema:f}=B,{schemaId:E}=this.opts,M=f[E];if(M)I=(0,Dx.resolveUrl)(this.opts.uriResolver,I,M);return new sSH({schema:f,schemaId:E,root:H,baseId:I})}return tXA.call(this,A,B)}ET.resolveSchema=e4$;var FE9=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function tXA(H,{baseId:$,schema:A,root:L}){var I;if(((I=H.fragment)===null||I===void 0?void 0:I[0])!=="/")return;for(let f of H.fragment.slice(1).split("/")){if(typeof A==="boolean")return;let E=A[(0,rCI.unescapeFragment)(f)];if(E===void 0)return;A=E;let M=typeof A==="object"&&A[this.opts.schemaId];if(!FE9.has(f)&&M)$=(0,Dx.resolveUrl)(this.opts.uriResolver,$,M)}let D;if(typeof A!="boolean"&&A.$ref&&!(0,rCI.schemaHasRulesButRef)(A,this.RULES)){let f=(0,Dx.resolveUrl)(this.opts.uriResolver,$,A.$ref);D=e4$.call(this,L,f)}let{schemaId:B}=this.opts;if(D=D||new sSH({schema:A,schemaId:B,root:L,baseId:$}),D.schema!==D.root.schema)return D;return}});var oCI=z((V$E,KE9)=>{KE9.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var sCI=z((P$E,tCI)=>{var QE9={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};tCI.exports={HEX:QE9}});var BYI=z((_$E,DYI)=>{var{HEX:WE9}=sCI(),VE9=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function AYI(H){if(IYI(H,".")<3)return{host:H,isIPV4:!1};let $=H.match(VE9)||[],[A]=$;if(A)return{host:_E9(A,"."),isIPV4:!0};else return{host:H,isIPV4:!1}}function eXA(H,$=!1){let A="",L=!0;for(let I of H){if(WE9[I]===void 0)return;if(I!=="0"&&L===!0)L=!1;if(!L)A+=I}if($&&A.length===0)A="0";return A}function PE9(H){let $=0,A={error:!1,address:"",zone:""},L=[],I=[],D=!1,B=!1,f=!1;function E(){if(I.length){if(D===!1){let M=eXA(I);if(M!==void 0)L.push(M);else return A.error=!0,!1}I.length=0}return!0}for(let M=0;M<H.length;M++){let G=H[M];if(G==="["||G==="]")continue;if(G===":"){if(B===!0)f=!0;if(!E())break;if($++,L.push(":"),$>7){A.error=!0;break}if(M-1>=0&&H[M-1]===":")B=!0;continue}else if(G==="%"){if(!E())break;D=!0}else{I.push(G);continue}}if(I.length)if(D)A.zone=I.join("");else if(f)L.push(I.join(""));else L.push(eXA(I));return A.address=L.join(""),A}function LYI(H){if(IYI(H,":")<2)return{host:H,isIPV6:!1};let $=PE9(H);if(!$.error){let{address:A,address:L}=$;if($.zone)A+="%"+$.zone,L+="%25"+$.zone;return{host:A,escapedHost:L,isIPV6:!0}}else return{host:H,isIPV6:!1}}function _E9(H,$){let A="",L=!0,I=H.length;for(let D=0;D<I;D++){let B=H[D];if(B==="0"&&L){if(D+1<=I&&H[D+1]===$||D+1===I)A+=B,L=!1}else{if(B===$)L=!0;else L=!1;A+=B}}return A}function IYI(H,$){let A=0;for(let L=0;L<H.length;L++)if(H[L]===$)A++;return A}var eCI=/^\.\.?\//u,HYI=/^\/\.(?:\/|$)/u,$YI=/^\/\.\.(?:\/|$)/u,CE9=/^\/?(?:.|\n)*?(?=\/|$)/u;function YE9(H){let $=[];while(H.length)if(H.match(eCI))H=H.replace(eCI,"");else if(H.match(HYI))H=H.replace(HYI,"/");else if(H.match($YI))H=H.replace($YI,"/"),$.pop();else if(H==="."||H==="..")H="";else{let A=H.match(CE9);if(A){let L=A[0];H=H.slice(L.length),$.push(L)}else throw Error("Unexpected dot segment condition")}return $.join("")}function wE9(H,$){let A=$!==!0?escape:unescape;if(H.scheme!==void 0)H.scheme=A(H.scheme);if(H.userinfo!==void 0)H.userinfo=A(H.userinfo);if(H.host!==void 0)H.host=A(H.host);if(H.path!==void 0)H.path=A(H.path);if(H.query!==void 0)H.query=A(H.query);if(H.fragment!==void 0)H.fragment=A(H.fragment);return H}function ZE9(H){let $=[];if(H.userinfo!==void 0)$.push(H.userinfo),$.push("@");if(H.host!==void 0){let A=unescape(H.host),L=AYI(A);if(L.isIPV4)A=L.host;else{let I=LYI(L.host);if(I.isIPV6===!0)A=`[${I.escapedHost}]`;else A=H.host}$.push(A)}if(typeof H.port==="number"||typeof H.port==="string")$.push(":"),$.push(String(H.port));return $.length?$.join(""):void 0}DYI.exports={recomposeAuthority:ZE9,normalizeComponentEncoding:wE9,removeDotSegments:YE9,normalizeIPv4:AYI,normalizeIPv6:LYI,stringArrayToHexStripped:eXA}});var XYI=z((C$E,UYI)=>{var qE9=/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu,TE9=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function fYI(H){return typeof H.secure==="boolean"?H.secure:String(H.scheme).toLowerCase()==="wss"}function EYI(H){if(!H.host)H.error=H.error||"HTTP URIs must have a host.";return H}function MYI(H){let $=String(H.scheme).toLowerCase()==="https";if(H.port===($?443:80)||H.port==="")H.port=void 0;if(!H.path)H.path="/";return H}function zE9(H){return H.secure=fYI(H),H.resourceName=(H.path||"/")+(H.query?"?"+H.query:""),H.path=void 0,H.query=void 0,H}function NE9(H){if(H.port===(fYI(H)?443:80)||H.port==="")H.port=void 0;if(typeof H.secure==="boolean")H.scheme=H.secure?"wss":"ws",H.secure=void 0;if(H.resourceName){let[$,A]=H.resourceName.split("?");H.path=$&&$!=="/"?$:void 0,H.query=A,H.resourceName=void 0}return H.fragment=void 0,H}function OE9(H,$){if(!H.path)return H.error="URN can not be parsed",H;let A=H.path.match(TE9);if(A){let L=$.scheme||H.scheme||"urn";H.nid=A[1].toLowerCase(),H.nss=A[2];let I=`${L}:${$.nid||H.nid}`,D=HJA[I];if(H.path=void 0,D)H=D.parse(H,$)}else H.error=H.error||"URN can not be parsed.";return H}function xE9(H,$){let A=$.scheme||H.scheme||"urn",L=H.nid.toLowerCase(),I=`${A}:${$.nid||L}`,D=HJA[I];if(D)H=D.serialize(H,$);let B=H,f=H.nss;return B.path=`${L||$.nid}:${f}`,$.skipEscape=!0,B}function SE9(H,$){let A=H;if(A.uuid=A.nss,A.nss=void 0,!$.tolerant&&(!A.uuid||!qE9.test(A.uuid)))A.error=A.error||"UUID is not valid.";return A}function jE9(H){let $=H;return $.nss=(H.uuid||"").toLowerCase(),$}var GYI={scheme:"http",domainHost:!0,parse:EYI,serialize:MYI},RE9={scheme:"https",domainHost:GYI.domainHost,parse:EYI,serialize:MYI},$5$={scheme:"ws",domainHost:!0,parse:zE9,serialize:NE9},yE9={scheme:"wss",domainHost:$5$.domainHost,parse:$5$.parse,serialize:$5$.serialize},vE9={scheme:"urn",parse:OE9,serialize:xE9,skipNormalize:!0},hE9={scheme:"urn:uuid",parse:SE9,serialize:jE9,skipNormalize:!0},HJA={http:GYI,https:RE9,ws:$5$,wss:yE9,urn:vE9,"urn:uuid":hE9};UYI.exports=HJA});var FYI=z((Y$E,L5$)=>{var{normalizeIPv6:bE9,normalizeIPv4:kE9,removeDotSegments:eSH,recomposeAuthority:uE9,normalizeComponentEncoding:A5$}=BYI(),$JA=XYI();function gE9(H,$){if(typeof H==="string")H=$v(mg(H,$),$);else if(typeof H==="object")H=mg($v(H,$),$);return H}function mE9(H,$,A){let L=Object.assign({scheme:"null"},A),I=JYI(mg(H,L),mg($,L),L,!0);return $v(I,{...L,skipEscape:!0})}function JYI(H,$,A,L){let I={};if(!L)H=mg($v(H,A),A),$=mg($v($,A),A);if(A=A||{},!A.tolerant&&$.scheme)I.scheme=$.scheme,I.userinfo=$.userinfo,I.host=$.host,I.port=$.port,I.path=eSH($.path||""),I.query=$.query;else{if($.userinfo!==void 0||$.host!==void 0||$.port!==void 0)I.userinfo=$.userinfo,I.host=$.host,I.port=$.port,I.path=eSH($.path||""),I.query=$.query;else{if(!$.path)if(I.path=H.path,$.query!==void 0)I.query=$.query;else I.query=H.query;else{if($.path.charAt(0)==="/")I.path=eSH($.path);else{if((H.userinfo!==void 0||H.host!==void 0||H.port!==void 0)&&!H.path)I.path="/"+$.path;else if(!H.path)I.path=$.path;else I.path=H.path.slice(0,H.path.lastIndexOf("/")+1)+$.path;I.path=eSH(I.path)}I.query=$.query}I.userinfo=H.userinfo,I.host=H.host,I.port=H.port}I.scheme=H.scheme}return I.fragment=$.fragment,I}function pE9(H,$,A){if(typeof H==="string")H=unescape(H),H=$v(A5$(mg(H,A),!0),{...A,skipEscape:!0});else if(typeof H==="object")H=$v(A5$(H,!0),{...A,skipEscape:!0});if(typeof $==="string")$=unescape($),$=$v(A5$(mg($,A),!0),{...A,skipEscape:!0});else if(typeof $==="object")$=$v(A5$($,!0),{...A,skipEscape:!0});return H.toLowerCase()===$.toLowerCase()}function $v(H,$){let A={host:H.host,scheme:H.scheme,userinfo:H.userinfo,port:H.port,path:H.path,query:H.query,nid:H.nid,nss:H.nss,uuid:H.uuid,fragment:H.fragment,reference:H.reference,resourceName:H.resourceName,secure:H.secure,error:""},L=Object.assign({},$),I=[],D=$JA[(L.scheme||A.scheme||"").toLowerCase()];if(D&&D.serialize)D.serialize(A,L);if(A.path!==void 0)if(!L.skipEscape){if(A.path=escape(A.path),A.scheme!==void 0)A.path=A.path.split("%3A").join(":")}else A.path=unescape(A.path);if(L.reference!=="suffix"&&A.scheme)I.push(A.scheme,":");let B=uE9(A);if(B!==void 0){if(L.reference!=="suffix")I.push("//");if(I.push(B),A.path&&A.path.charAt(0)!=="/")I.push("/")}if(A.path!==void 0){let f=A.path;if(!L.absolutePath&&(!D||!D.absolutePath))f=eSH(f);if(B===void 0)f=f.replace(/^\/\//u,"/%2F");I.push(f)}if(A.query!==void 0)I.push("?",A.query);if(A.fragment!==void 0)I.push("#",A.fragment);return I.join("")}var dE9=Array.from({length:127},(H,$)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode($)));function cE9(H){let $=0;for(let A=0,L=H.length;A<L;++A)if($=H.charCodeAt(A),$>126||dE9[$])return!0;return!1}var lE9=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function mg(H,$){let A=Object.assign({},$),L={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},I=H.indexOf("%")!==-1,D=!1;if(A.reference==="suffix")H=(A.scheme?A.scheme+":":"")+"//"+H;let B=H.match(lE9);if(B){if(L.scheme=B[1],L.userinfo=B[3],L.host=B[4],L.port=parseInt(B[5],10),L.path=B[6]||"",L.query=B[7],L.fragment=B[8],isNaN(L.port))L.port=B[5];if(L.host){let E=kE9(L.host);if(E.isIPV4===!1){let M=bE9(E.host);L.host=M.host.toLowerCase(),D=M.isIPV6}else L.host=E.host,D=!0}if(L.scheme===void 0&&L.userinfo===void 0&&L.host===void 0&&L.port===void 0&&L.query===void 0&&!L.path)L.reference="same-document";else if(L.scheme===void 0)L.reference="relative";else if(L.fragment===void 0)L.reference="absolute";else L.reference="uri";if(A.reference&&A.reference!=="suffix"&&A.reference!==L.reference)L.error=L.error||"URI is not a "+A.reference+" reference.";let f=$JA[(A.scheme||L.scheme||"").toLowerCase()];if(!A.unicodeSupport&&(!f||!f.unicodeSupport)){if(L.host&&(A.domainHost||f&&f.domainHost)&&D===!1&&cE9(L.host))try{L.host=URL.domainToASCII(L.host.toLowerCase())}catch(E){L.error=L.error||"Host's domain name can not be converted to ASCII: "+E}}if(!f||f&&!f.skipNormalize){if(I&&L.scheme!==void 0)L.scheme=unescape(L.scheme);if(I&&L.host!==void 0)L.host=unescape(L.host);if(L.path)L.path=escape(unescape(L.path));if(L.fragment)L.fragment=encodeURI(decodeURIComponent(L.fragment))}if(f&&f.parse)f.parse(L,A)}else L.error=L.error||"URI can not be parsed.";return L}var AJA={SCHEMES:$JA,normalize:gE9,resolve:mE9,resolveComponents:JYI,equal:pE9,serialize:$v,parse:mg};L5$.exports=AJA;L5$.exports.default=AJA;L5$.exports.fastUri=AJA});var QYI=z((LJA)=>{Object.defineProperty(LJA,"__esModule",{value:!0});var KYI=FYI();KYI.code='require("ajv/dist/runtime/uri").default';LJA.default=KYI});var ZYI=z((B7)=>{Object.defineProperty(B7,"__esModule",{value:!0});B7.CodeGen=B7.Name=B7.nil=B7.stringify=B7.str=B7._=B7.KeywordCxt=void 0;var iE9=oSH();Object.defineProperty(B7,"KeywordCxt",{enumerable:!0,get:function(){return iE9.KeywordCxt}});var VFH=u1();Object.defineProperty(B7,"_",{enumerable:!0,get:function(){return VFH._}});Object.defineProperty(B7,"str",{enumerable:!0,get:function(){return VFH.str}});Object.defineProperty(B7,"stringify",{enumerable:!0,get:function(){return VFH.stringify}});Object.defineProperty(B7,"nil",{enumerable:!0,get:function(){return VFH.nil}});Object.defineProperty(B7,"Name",{enumerable:!0,get:function(){return VFH.Name}});Object.defineProperty(B7,"CodeGen",{enumerable:!0,get:function(){return VFH.CodeGen}});var nE9=s4$(),CYI=tSH(),rE9=yXA(),HjH=H5$(),aE9=u1(),$jH=nSH(),I5$=iSH(),DJA=Zf(),WYI=oCI(),oE9=QYI(),YYI=(H,$)=>new RegExp(H,$);YYI.code="new RegExp";var tE9=["removeAdditional","useDefaults","coerceTypes"],sE9=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),eE9={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},HM9={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},VYI=200;function $M9(H){var $,A,L,I,D,B,f,E,M,G,U,X,J,F,Q,W,P,Y,C,Z,q,O,j,u,y;let g=H.strict,v=($=H.code)===null||$===void 0?void 0:$.optimize,p=v===!0||v===void 0?1:v||0,d=(L=(A=H.code)===null||A===void 0?void 0:A.regExp)!==null&&L!==void 0?L:YYI,k=(I=H.uriResolver)!==null&&I!==void 0?I:oE9.default;return{strictSchema:(B=(D=H.strictSchema)!==null&&D!==void 0?D:g)!==null&&B!==void 0?B:!0,strictNumbers:(E=(f=H.strictNumbers)!==null&&f!==void 0?f:g)!==null&&E!==void 0?E:!0,strictTypes:(G=(M=H.strictTypes)!==null&&M!==void 0?M:g)!==null&&G!==void 0?G:"log",strictTuples:(X=(U=H.strictTuples)!==null&&U!==void 0?U:g)!==null&&X!==void 0?X:"log",strictRequired:(F=(J=H.strictRequired)!==null&&J!==void 0?J:g)!==null&&F!==void 0?F:!1,code:H.code?{...H.code,optimize:p,regExp:d}:{optimize:p,regExp:d},loopRequired:(Q=H.loopRequired)!==null&&Q!==void 0?Q:VYI,loopEnum:(W=H.loopEnum)!==null&&W!==void 0?W:VYI,meta:(P=H.meta)!==null&&P!==void 0?P:!0,messages:(Y=H.messages)!==null&&Y!==void 0?Y:!0,inlineRefs:(C=H.inlineRefs)!==null&&C!==void 0?C:!0,schemaId:(Z=H.schemaId)!==null&&Z!==void 0?Z:"$id",addUsedSchema:(q=H.addUsedSchema)!==null&&q!==void 0?q:!0,validateSchema:(O=H.validateSchema)!==null&&O!==void 0?O:!0,validateFormats:(j=H.validateFormats)!==null&&j!==void 0?j:!0,unicodeRegExp:(u=H.unicodeRegExp)!==null&&u!==void 0?u:!0,int32range:(y=H.int32range)!==null&&y!==void 0?y:!0,uriResolver:k}}class D5${constructor(H={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,H=this.opts={...H,...$M9(H)};let{es5:$,lines:A}=this.opts.code;this.scope=new aE9.ValueScope({scope:{},prefixes:sE9,es5:$,lines:A}),this.logger=fM9(H.logger);let L=H.validateFormats;if(H.validateFormats=!1,this.RULES=(0,rE9.getRules)(),PYI.call(this,eE9,H,"NOT SUPPORTED"),PYI.call(this,HM9,H,"DEPRECATED","warn"),this._metaOpts=DM9.call(this),H.formats)LM9.call(this);if(this._addVocabularies(),this._addDefaultMetaSchema(),H.keywords)IM9.call(this,H.keywords);if(typeof H.meta=="object")this.addMetaSchema(H.meta);AM9.call(this),H.validateFormats=L}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:H,meta:$,schemaId:A}=this.opts,L=WYI;if(A==="id")L={...WYI},L.id=L.$id,delete L.$id;if($&&H)this.addMetaSchema(L,L[A],!1)}defaultMeta(){let{meta:H,schemaId:$}=this.opts;return this.opts.defaultMeta=typeof H=="object"?H[$]||H:void 0}validate(H,$){let A;if(typeof H=="string"){if(A=this.getSchema(H),!A)throw Error(`no schema with key or ref "${H}"`)}else A=this.compile(H);let L=A($);if(!("$async"in A))this.errors=A.errors;return L}compile(H,$){let A=this._addSchema(H,$);return A.validate||this._compileSchemaEnv(A)}compileAsync(H,$){if(typeof this.opts.loadSchema!="function")throw Error("options.loadSchema should be a function");let{loadSchema:A}=this.opts;return L.call(this,H,$);async function L(M,G){await I.call(this,M.$schema);let U=this._addSchema(M,G);return U.validate||D.call(this,U)}async function I(M){if(M&&!this.getSchema(M))await L.call(this,{$ref:M},!0)}async function D(M){try{return this._compileSchemaEnv(M)}catch(G){if(!(G instanceof CYI.default))throw G;return B.call(this,G),await f.call(this,G.missingSchema),D.call(this,M)}}function B({missingSchema:M,missingRef:G}){if(this.refs[M])throw Error(`AnySchema ${M} is loaded but ${G} cannot be resolved`)}async function f(M){let G=await E.call(this,M);if(!this.refs[M])await I.call(this,G.$schema);if(!this.refs[M])this.addSchema(G,M,$)}async function E(M){let G=this._loading[M];if(G)return G;try{return await(this._loading[M]=A(M))}finally{delete this._loading[M]}}}addSchema(H,$,A,L=this.opts.validateSchema){if(Array.isArray(H)){for(let D of H)this.addSchema(D,void 0,A,L);return this}let I;if(typeof H==="object"){let{schemaId:D}=this.opts;if(I=H[D],I!==void 0&&typeof I!="string")throw Error(`schema ${D} must be string`)}return $=(0,$jH.normalizeId)($||I),this._checkUnique($),this.schemas[$]=this._addSchema(H,A,$,L,!0),this}addMetaSchema(H,$,A=this.opts.validateSchema){return this.addSchema(H,$,!0,A),this}validateSchema(H,$){if(typeof H=="boolean")return!0;let A;if(A=H.$schema,A!==void 0&&typeof A!="string")throw Error("$schema must be a string");if(A=A||this.opts.defaultMeta||this.defaultMeta(),!A)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let L=this.validate(A,H);if(!L&&$){let I="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(I);else throw Error(I)}return L}getSchema(H){let $;while(typeof($=_YI.call(this,H))=="string")H=$;if($===void 0){let{schemaId:A}=this.opts,L=new HjH.SchemaEnv({schema:{},schemaId:A});if($=HjH.resolveSchema.call(this,L,H),!$)return;this.refs[H]=$}return $.validate||this._compileSchemaEnv($)}removeSchema(H){if(H instanceof RegExp)return this._removeAllSchemas(this.schemas,H),this._removeAllSchemas(this.refs,H),this;switch(typeof H){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let $=_YI.call(this,H);if(typeof $=="object")this._cache.delete($.schema);return delete this.schemas[H],delete this.refs[H],this}case"object":{let $=H;this._cache.delete($);let A=H[this.opts.schemaId];if(A)A=(0,$jH.normalizeId)(A),delete this.schemas[A],delete this.refs[A];return this}default:throw Error("ajv.removeSchema: invalid parameter")}}addVocabulary(H){for(let $ of H)this.addKeyword($);return this}addKeyword(H,$){let A;if(typeof H=="string"){if(A=H,typeof $=="object")this.logger.warn("these parameters are deprecated, see docs for addKeyword"),$.keyword=A}else if(typeof H=="object"&&$===void 0){if($=H,A=$.keyword,Array.isArray(A)&&!A.length)throw Error("addKeywords: keyword must be string or non-empty array")}else throw Error("invalid addKeywords parameters");if(MM9.call(this,A,$),!$)return(0,DJA.eachItem)(A,(I)=>IJA.call(this,I)),this;UM9.call(this,$);let L={...$,type:(0,I5$.getJSONTypes)($.type),schemaType:(0,I5$.getJSONTypes)($.schemaType)};return(0,DJA.eachItem)(A,L.type.length===0?(I)=>IJA.call(this,I,L):(I)=>L.type.forEach((D)=>IJA.call(this,I,L,D))),this}getKeyword(H){let $=this.RULES.all[H];return typeof $=="object"?$.definition:!!$}removeKeyword(H){let{RULES:$}=this;delete $.keywords[H],delete $.all[H];for(let A of $.rules){let L=A.rules.findIndex((I)=>I.keyword===H);if(L>=0)A.rules.splice(L,1)}return this}addFormat(H,$){if(typeof $=="string")$=new RegExp($);return this.formats[H]=$,this}errorsText(H=this.errors,{separator:$=", ",dataVar:A="data"}={}){if(!H||H.length===0)return"No errors";return H.map((L)=>`${A}${L.instancePath} ${L.message}`).reduce((L,I)=>L+$+I)}$dataMetaSchema(H,$){let A=this.RULES.all;H=JSON.parse(JSON.stringify(H));for(let L of $){let I=L.split("/").slice(1),D=H;for(let B of I)D=D[B];for(let B in A){let f=A[B];if(typeof f!="object")continue;let{$data:E}=f.definition,M=D[B];if(E&&M)D[B]=wYI(M)}}return H}_removeAllSchemas(H,$){for(let A in H){let L=H[A];if(!$||$.test(A)){if(typeof L=="string")delete H[A];else if(L&&!L.meta)this._cache.delete(L.schema),delete H[A]}}}_addSchema(H,$,A,L=this.opts.validateSchema,I=this.opts.addUsedSchema){let D,{schemaId:B}=this.opts;if(typeof H=="object")D=H[B];else if(this.opts.jtd)throw Error("schema must be object");else if(typeof H!="boolean")throw Error("schema must be object or boolean");let f=this._cache.get(H);if(f!==void 0)return f;A=(0,$jH.normalizeId)(D||A);let E=$jH.getSchemaRefs.call(this,H,A);if(f=new HjH.SchemaEnv({schema:H,schemaId:B,meta:$,baseId:A,localRefs:E}),this._cache.set(f.schema,f),I&&!A.startsWith("#")){if(A)this._checkUnique(A);this.refs[A]=f}if(L)this.validateSchema(H,!0);return f}_checkUnique(H){if(this.schemas[H]||this.refs[H])throw Error(`schema with key or id "${H}" already exists`)}_compileSchemaEnv(H){if(H.meta)this._compileMetaSchema(H);else HjH.compileSchema.call(this,H);if(!H.validate)throw Error("ajv implementation error");return H.validate}_compileMetaSchema(H){let $=this.opts;this.opts=this._metaOpts;try{HjH.compileSchema.call(this,H)}finally{this.opts=$}}}D5$.ValidationError=nE9.default;D5$.MissingRefError=CYI.default;B7.default=D5$;function PYI(H,$,A,L="error"){for(let I in H){let D=I;if(D in $)this.logger[L](`${A}: option ${I}. ${H[D]}`)}}function _YI(H){return H=(0,$jH.normalizeId)(H),this.schemas[H]||this.refs[H]}function AM9(){let H=this.opts.schemas;if(!H)return;if(Array.isArray(H))this.addSchema(H);else for(let $ in H)this.addSchema(H[$],$)}function LM9(){for(let H in this.opts.formats){let $=this.opts.formats[H];if($)this.addFormat(H,$)}}function IM9(H){if(Array.isArray(H)){this.addVocabulary(H);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let $ in H){let A=H[$];if(!A.keyword)A.keyword=$;this.addKeyword(A)}}function DM9(){let H={...this.opts};for(let $ of tE9)delete H[$];return H}var BM9={log(){},warn(){},error(){}};function fM9(H){if(H===!1)return BM9;if(H===void 0)return console;if(H.log&&H.warn&&H.error)return H;throw Error("logger must implement log, warn and error methods")}var EM9=/^[a-z_$][a-z0-9_$:-]*$/i;function MM9(H,$){let{RULES:A}=this;if((0,DJA.eachItem)(H,(L)=>{if(A.keywords[L])throw Error(`Keyword ${L} is already defined`);if(!EM9.test(L))throw Error(`Keyword ${L} has invalid name`)}),!$)return;if($.$data&&!(("code"in $)||("validate"in $)))throw Error('$data keyword must have "code" or "validate" function')}function IJA(H,$,A){var L;let I=$===null||$===void 0?void 0:$.post;if(A&&I)throw Error('keyword with "post" flag cannot have "type"');let{RULES:D}=this,B=I?D.post:D.rules.find(({type:E})=>E===A);if(!B)B={type:A,rules:[]},D.rules.push(B);if(D.keywords[H]=!0,!$)return;let f={keyword:H,definition:{...$,type:(0,I5$.getJSONTypes)($.type),schemaType:(0,I5$.getJSONTypes)($.schemaType)}};if($.before)GM9.call(this,B,f,$.before);else B.rules.push(f);D.all[H]=f,(L=$.implements)===null||L===void 0||L.forEach((E)=>this.addKeyword(E))}function GM9(H,$,A){let L=H.rules.findIndex((I)=>I.keyword===A);if(L>=0)H.rules.splice(L,0,$);else H.rules.push($),this.logger.warn(`rule ${A} is not defined`)}function UM9(H){let{metaSchema:$}=H;if($===void 0)return;if(H.$data&&this.opts.$data)$=wYI($);H.validateSchema=this.compile($,!0)}var XM9={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function wYI(H){return{anyOf:[H,XM9]}}});var qYI=z((BJA)=>{Object.defineProperty(BJA,"__esModule",{value:!0});var JM9={keyword:"id",code(){throw Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};BJA.default=JM9});var OYI=z((UDH)=>{Object.defineProperty(UDH,"__esModule",{value:!0});UDH.callRef=UDH.getValidate=void 0;var FM9=tSH(),TYI=fT(),JC=u1(),PFH=ug(),zYI=H5$(),B5$=Zf(),KM9={keyword:"$ref",schemaType:"string",code(H){let{gen:$,schema:A,it:L}=H,{baseId:I,schemaEnv:D,validateName:B,opts:f,self:E}=L,{root:M}=D;if((A==="#"||A==="#/")&&I===M.baseId)return U();let G=zYI.resolveRef.call(E,M,I,A);if(G===void 0)throw new FM9.default(L.opts.uriResolver,I,A);if(G instanceof zYI.SchemaEnv)return X(G);return J(G);function U(){if(D===M)return f5$(H,B,D,D.$async);let F=$.scopeValue("root",{ref:M});return f5$(H,JC._`${F}.validate`,M,M.$async)}function X(F){let Q=NYI(H,F);f5$(H,Q,F,F.$async)}function J(F){let Q=$.scopeValue("schema",f.code.source===!0?{ref:F,code:(0,JC.stringify)(F)}:{ref:F}),W=$.name("valid"),P=H.subschema({schema:F,dataTypes:[],schemaPath:JC.nil,topSchemaRef:Q,errSchemaPath:A},W);H.mergeEvaluated(P),H.ok(W)}}};function NYI(H,$){let{gen:A}=H;return $.validate?A.scopeValue("validate",{ref:$.validate}):JC._`${A.scopeValue("wrapper",{ref:$})}.validate`}UDH.getValidate=NYI;function f5$(H,$,A,L){let{gen:I,it:D}=H,{allErrors:B,schemaEnv:f,opts:E}=D,M=E.passContext?PFH.default.this:JC.nil;if(L)G();else U();function G(){if(!f.$async)throw Error("async schema referenced by sync schema");let F=I.let("valid");I.try(()=>{if(I.code(JC._`await ${(0,TYI.callValidateCode)(H,$,M)}`),J($),!B)I.assign(F,!0)},(Q)=>{if(I.if(JC._`!(${Q} instanceof ${D.ValidationError})`,()=>I.throw(Q)),X(Q),!B)I.assign(F,!1)}),H.ok(F)}function U(){H.result((0,TYI.callValidateCode)(H,$,M),()=>J($),()=>X($))}function X(F){let Q=JC._`${F}.errors`;I.assign(PFH.default.vErrors,JC._`${PFH.default.vErrors} === null ? ${Q} : ${PFH.default.vErrors}.concat(${Q})`),I.assign(PFH.default.errors,JC._`${PFH.default.vErrors}.length`)}function J(F){var Q;if(!D.opts.unevaluated)return;let W=(Q=A===null||A===void 0?void 0:A.validate)===null||Q===void 0?void 0:Q.evaluated;if(D.props!==!0)if(W&&!W.dynamicProps){if(W.props!==void 0)D.props=B5$.mergeEvaluated.props(I,W.props,D.props)}else{let P=I.var("props",JC._`${F}.evaluated.props`);D.props=B5$.mergeEvaluated.props(I,P,D.props,JC.Name)}if(D.items!==!0)if(W&&!W.dynamicItems){if(W.items!==void 0)D.items=B5$.mergeEvaluated.items(I,W.items,D.items)}else{let P=I.var("items",JC._`${F}.evaluated.items`);D.items=B5$.mergeEvaluated.items(I,P,D.items,JC.Name)}}}UDH.callRef=f5$;UDH.default=KM9});var xYI=z((fJA)=>{Object.defineProperty(fJA,"__esModule",{value:!0});var QM9=qYI(),WM9=OYI(),VM9=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",QM9.default,WM9.default];fJA.default=VM9});var SYI=z((EJA)=>{Object.defineProperty(EJA,"__esModule",{value:!0});var E5$=u1(),nr=E5$.operators,M5$={maximum:{okStr:"<=",ok:nr.LTE,fail:nr.GT},minimum:{okStr:">=",ok:nr.GTE,fail:nr.LT},exclusiveMaximum:{okStr:"<",ok:nr.LT,fail:nr.GTE},exclusiveMinimum:{okStr:">",ok:nr.GT,fail:nr.LTE}},PM9={message:({keyword:H,schemaCode:$})=>E5$.str`must be ${M5$[H].okStr} ${$}`,params:({keyword:H,schemaCode:$})=>E5$._`{comparison: ${M5$[H].okStr}, limit: ${$}}`},_M9={keyword:Object.keys(M5$),type:"number",schemaType:"number",$data:!0,error:PM9,code(H){let{keyword:$,data:A,schemaCode:L}=H;H.fail$data(E5$._`${A} ${M5$[$].fail} ${L} || isNaN(${A})`)}};EJA.default=_M9});var jYI=z((MJA)=>{Object.defineProperty(MJA,"__esModule",{value:!0});var AjH=u1(),CM9={message:({schemaCode:H})=>AjH.str`must be multiple of ${H}`,params:({schemaCode:H})=>AjH._`{multipleOf: ${H}}`},YM9={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:CM9,code(H){let{gen:$,data:A,schemaCode:L,it:I}=H,D=I.opts.multipleOfPrecision,B=$.let("res"),f=D?AjH._`Math.abs(Math.round(${B}) - ${B}) > 1e-${D}`:AjH._`${B} !== parseInt(${B})`;H.fail$data(AjH._`(${L} === 0 || (${B} = ${A}/${L}, ${f}))`)}};MJA.default=YM9});var yYI=z((GJA)=>{Object.defineProperty(GJA,"__esModule",{value:!0});function RYI(H){let $=H.length,A=0,L=0,I;while(L<$)if(A++,I=H.charCodeAt(L++),I>=55296&&I<=56319&&L<$){if(I=H.charCodeAt(L),(I&64512)===56320)L++}return A}GJA.default=RYI;RYI.code='require("ajv/dist/runtime/ucs2length").default'});var vYI=z((UJA)=>{Object.defineProperty(UJA,"__esModule",{value:!0});var XDH=u1(),wM9=Zf(),ZM9=yYI(),qM9={message({keyword:H,schemaCode:$}){let A=H==="maxLength"?"more":"fewer";return XDH.str`must NOT have ${A} than ${$} characters`},params:({schemaCode:H})=>XDH._`{limit: ${H}}`},TM9={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:qM9,code(H){let{keyword:$,data:A,schemaCode:L,it:I}=H,D=$==="maxLength"?XDH.operators.GT:XDH.operators.LT,B=I.opts.unicode===!1?XDH._`${A}.length`:XDH._`${(0,wM9.useFunc)(H.gen,ZM9.default)}(${A})`;H.fail$data(XDH._`${B} ${D} ${L}`)}};UJA.default=TM9});var hYI=z((XJA)=>{Object.defineProperty(XJA,"__esModule",{value:!0});var zM9=fT(),G5$=u1(),NM9={message:({schemaCode:H})=>G5$.str`must match pattern "${H}"`,params:({schemaCode:H})=>G5$._`{pattern: ${H}}`},OM9={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:NM9,code(H){let{data:$,$data:A,schema:L,schemaCode:I,it:D}=H,B=D.opts.unicodeRegExp?"u":"",f=A?G5$._`(new RegExp(${I}, ${B}))`:(0,zM9.usePattern)(H,L);H.fail$data(G5$._`!${f}.test(${$})`)}};XJA.default=OM9});var bYI=z((JJA)=>{Object.defineProperty(JJA,"__esModule",{value:!0});var LjH=u1(),xM9={message({keyword:H,schemaCode:$}){let A=H==="maxProperties"?"more":"fewer";return LjH.str`must NOT have ${A} than ${$} properties`},params:({schemaCode:H})=>LjH._`{limit: ${H}}`},SM9={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:xM9,code(H){let{keyword:$,data:A,schemaCode:L}=H,I=$==="maxProperties"?LjH.operators.GT:LjH.operators.LT;H.fail$data(LjH._`Object.keys(${A}).length ${I} ${L}`)}};JJA.default=SM9});var kYI=z((FJA)=>{Object.defineProperty(FJA,"__esModule",{value:!0});var IjH=fT(),DjH=u1(),jM9=Zf(),RM9={message:({params:{missingProperty:H}})=>DjH.str`must have required property '${H}'`,params:({params:{missingProperty:H}})=>DjH._`{missingProperty: ${H}}`},yM9={keyword:"required",type:"object",schemaType:"array",$data:!0,error:RM9,code(H){let{gen:$,schema:A,schemaCode:L,data:I,$data:D,it:B}=H,{opts:f}=B;if(!D&&A.length===0)return;let E=A.length>=f.loopRequired;if(B.allErrors)M();else G();if(f.strictRequired){let J=H.parentSchema.properties,{definedProperties:F}=H.it;for(let Q of A)if((J===null||J===void 0?void 0:J[Q])===void 0&&!F.has(Q)){let W=B.schemaEnv.baseId+B.errSchemaPath,P=`required property "${Q}" is not defined at "${W}" (strictRequired)`;(0,jM9.checkStrictMode)(B,P,B.opts.strictRequired)}}function M(){if(E||D)H.block$data(DjH.nil,U);else for(let J of A)(0,IjH.checkReportMissingProp)(H,J)}function G(){let J=$.let("missing");if(E||D){let F=$.let("valid",!0);H.block$data(F,()=>X(J,F)),H.ok(F)}else $.if((0,IjH.checkMissingProp)(H,A,J)),(0,IjH.reportMissingProp)(H,J),$.else()}function U(){$.forOf("prop",L,(J)=>{H.setParams({missingProperty:J}),$.if((0,IjH.noPropertyInData)($,I,J,f.ownProperties),()=>H.error())})}function X(J,F){H.setParams({missingProperty:J}),$.forOf(J,L,()=>{$.assign(F,(0,IjH.propertyInData)($,I,J,f.ownProperties)),$.if((0,DjH.not)(F),()=>{H.error(),$.break()})},DjH.nil)}}};FJA.default=yM9});var uYI=z((KJA)=>{Object.defineProperty(KJA,"__esModule",{value:!0});var BjH=u1(),vM9={message({keyword:H,schemaCode:$}){let A=H==="maxItems"?"more":"fewer";return BjH.str`must NOT have ${A} than ${$} items`},params:({schemaCode:H})=>BjH._`{limit: ${H}}`},hM9={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:vM9,code(H){let{keyword:$,data:A,schemaCode:L}=H,I=$==="maxItems"?BjH.operators.GT:BjH.operators.LT;H.fail$data(BjH._`${A}.length ${I} ${L}`)}};KJA.default=hM9});var U5$=z((QJA)=>{Object.defineProperty(QJA,"__esModule",{value:!0});var gYI=pXA();gYI.code='require("ajv/dist/runtime/equal").default';QJA.default=gYI});var mYI=z((VJA)=>{Object.defineProperty(VJA,"__esModule",{value:!0});var WJA=iSH(),f7=u1(),bM9=Zf(),kM9=U5$(),uM9={message:({params:{i:H,j:$}})=>f7.str`must NOT have duplicate items (items ## ${$} and ${H} are identical)`,params:({params:{i:H,j:$}})=>f7._`{i: ${H}, j: ${$}}`},gM9={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:uM9,code(H){let{gen:$,data:A,$data:L,schema:I,parentSchema:D,schemaCode:B,it:f}=H;if(!L&&!I)return;let E=$.let("valid"),M=D.items?(0,WJA.getSchemaTypes)(D.items):[];H.block$data(E,G,f7._`${B} === false`),H.ok(E);function G(){let F=$.let("i",f7._`${A}.length`),Q=$.let("j");H.setParams({i:F,j:Q}),$.assign(E,!0),$.if(f7._`${F} > 1`,()=>(U()?X:J)(F,Q))}function U(){return M.length>0&&!M.some((F)=>F==="object"||F==="array")}function X(F,Q){let W=$.name("item"),P=(0,WJA.checkDataTypes)(M,W,f.opts.strictNumbers,WJA.DataType.Wrong),Y=$.const("indices",f7._`{}`);$.for(f7._`;${F}--;`,()=>{if($.let(W,f7._`${A}[${F}]`),$.if(P,f7._`continue`),M.length>1)$.if(f7._`typeof ${W} == "string"`,f7._`${W} += "_"`);$.if(f7._`typeof ${Y}[${W}] == "number"`,()=>{$.assign(Q,f7._`${Y}[${W}]`),H.error(),$.assign(E,!1).break()}).code(f7._`${Y}[${W}] = ${F}`)})}function J(F,Q){let W=(0,bM9.useFunc)($,kM9.default),P=$.name("outer");$.label(P).for(f7._`;${F}--;`,()=>$.for(f7._`${Q} = ${F}; ${Q}--;`,()=>$.if(f7._`${W}(${A}[${F}], ${A}[${Q}])`,()=>{H.error(),$.assign(E,!1).break(P)})))}}};VJA.default=gM9});var pYI=z((_JA)=>{Object.defineProperty(_JA,"__esModule",{value:!0});var PJA=u1(),mM9=Zf(),pM9=U5$(),dM9={message:"must be equal to constant",params:({schemaCode:H})=>PJA._`{allowedValue: ${H}}`},cM9={keyword:"const",$data:!0,error:dM9,code(H){let{gen:$,data:A,$data:L,schemaCode:I,schema:D}=H;if(L||D&&typeof D=="object")H.fail$data(PJA._`!${(0,mM9.useFunc)($,pM9.default)}(${A}, ${I})`);else H.fail(PJA._`${D} !== ${A}`)}};_JA.default=cM9});var dYI=z((CJA)=>{Object.defineProperty(CJA,"__esModule",{value:!0});var fjH=u1(),lM9=Zf(),iM9=U5$(),nM9={message:"must be equal to one of the allowed values",params:({schemaCode:H})=>fjH._`{allowedValues: ${H}}`},rM9={keyword:"enum",schemaType:"array",$data:!0,error:nM9,code(H){let{gen:$,data:A,$data:L,schema:I,schemaCode:D,it:B}=H;if(!L&&I.length===0)throw Error("enum must have non-empty array");let f=I.length>=B.opts.loopEnum,E,M=()=>E!==null&&E!==void 0?E:E=(0,lM9.useFunc)($,iM9.default),G;if(f||L)G=$.let("valid"),H.block$data(G,U);else{if(!Array.isArray(I))throw Error("ajv implementation error");let J=$.const("vSchema",D);G=(0,fjH.or)(...I.map((F,Q)=>X(J,Q)))}H.pass(G);function U(){$.assign(G,!1),$.forOf("v",D,(J)=>$.if(fjH._`${M()}(${A}, ${J})`,()=>$.assign(G,!0).break()))}function X(J,F){let Q=I[F];return typeof Q==="object"&&Q!==null?fjH._`${M()}(${A}, ${J}[${F}])`:fjH._`${A} === ${Q}`}}};CJA.default=rM9});var cYI=z((YJA)=>{Object.defineProperty(YJA,"__esModule",{value:!0});var aM9=SYI(),oM9=jYI(),tM9=vYI(),sM9=hYI(),eM9=bYI(),HG9=kYI(),$G9=uYI(),AG9=mYI(),LG9=pYI(),IG9=dYI(),DG9=[aM9.default,oM9.default,tM9.default,sM9.default,eM9.default,HG9.default,$G9.default,AG9.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},LG9.default,IG9.default];YJA.default=DG9});var ZJA=z((EjH)=>{Object.defineProperty(EjH,"__esModule",{value:!0});EjH.validateAdditionalItems=void 0;var JDH=u1(),wJA=Zf(),BG9={message:({params:{len:H}})=>JDH.str`must NOT have more than ${H} items`,params:({params:{len:H}})=>JDH._`{limit: ${H}}`},fG9={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:BG9,code(H){let{parentSchema:$,it:A}=H,{items:L}=$;if(!Array.isArray(L)){(0,wJA.checkStrictMode)(A,'"additionalItems" is ignored when "items" is not an array of schemas');return}lYI(H,L)}};function lYI(H,$){let{gen:A,schema:L,data:I,keyword:D,it:B}=H;B.items=!0;let f=A.const("len",JDH._`${I}.length`);if(L===!1)H.setParams({len:$.length}),H.pass(JDH._`${f} <= ${$.length}`);else if(typeof L=="object"&&!(0,wJA.alwaysValidSchema)(B,L)){let M=A.var("valid",JDH._`${f} <= ${$.length}`);A.if((0,JDH.not)(M),()=>E(M)),H.ok(M)}function E(M){A.forRange("i",$.length,f,(G)=>{if(H.subschema({keyword:D,dataProp:G,dataPropType:wJA.Type.Num},M),!B.allErrors)A.if((0,JDH.not)(M),()=>A.break())})}}EjH.validateAdditionalItems=lYI;EjH.default=fG9});var qJA=z((MjH)=>{Object.defineProperty(MjH,"__esModule",{value:!0});MjH.validateTuple=void 0;var iYI=u1(),X5$=Zf(),EG9=fT(),MG9={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(H){let{schema:$,it:A}=H;if(Array.isArray($))return nYI(H,"additionalItems",$);if(A.items=!0,(0,X5$.alwaysValidSchema)(A,$))return;H.ok((0,EG9.validateArray)(H))}};function nYI(H,$,A=H.schema){let{gen:L,parentSchema:I,data:D,keyword:B,it:f}=H;if(G(I),f.opts.unevaluated&&A.length&&f.items!==!0)f.items=X5$.mergeEvaluated.items(L,A.length,f.items);let E=L.name("valid"),M=L.const("len",iYI._`${D}.length`);A.forEach((U,X)=>{if((0,X5$.alwaysValidSchema)(f,U))return;L.if(iYI._`${M} > ${X}`,()=>H.subschema({keyword:B,schemaProp:X,dataProp:X},E)),H.ok(E)});function G(U){let{opts:X,errSchemaPath:J}=f,F=A.length,Q=F===U.minItems&&(F===U.maxItems||U[$]===!1);if(X.strictTuples&&!Q){let W=`"${B}" is ${F}-tuple, but minItems or maxItems/${$} are not specified or different at path "${J}"`;(0,X5$.checkStrictMode)(f,W,X.strictTuples)}}}MjH.validateTuple=nYI;MjH.default=MG9});var rYI=z((TJA)=>{Object.defineProperty(TJA,"__esModule",{value:!0});var GG9=qJA(),UG9={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:(H)=>(0,GG9.validateTuple)(H,"items")};TJA.default=UG9});var oYI=z((zJA)=>{Object.defineProperty(zJA,"__esModule",{value:!0});var aYI=u1(),XG9=Zf(),JG9=fT(),FG9=ZJA(),KG9={message:({params:{len:H}})=>aYI.str`must NOT have more than ${H} items`,params:({params:{len:H}})=>aYI._`{limit: ${H}}`},QG9={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:KG9,code(H){let{schema:$,parentSchema:A,it:L}=H,{prefixItems:I}=A;if(L.items=!0,(0,XG9.alwaysValidSchema)(L,$))return;if(I)(0,FG9.validateAdditionalItems)(H,I);else H.ok((0,JG9.validateArray)(H))}};zJA.default=QG9});var tYI=z((NJA)=>{Object.defineProperty(NJA,"__esModule",{value:!0});var MT=u1(),J5$=Zf(),WG9={message:({params:{min:H,max:$}})=>$===void 0?MT.str`must contain at least ${H} valid item(s)`:MT.str`must contain at least ${H} and no more than ${$} valid item(s)`,params:({params:{min:H,max:$}})=>$===void 0?MT._`{minContains: ${H}}`:MT._`{minContains: ${H}, maxContains: ${$}}`},VG9={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:WG9,code(H){let{gen:$,schema:A,parentSchema:L,data:I,it:D}=H,B,f,{minContains:E,maxContains:M}=L;if(D.opts.next)B=E===void 0?1:E,f=M;else B=1;let G=$.const("len",MT._`${I}.length`);if(H.setParams({min:B,max:f}),f===void 0&&B===0){(0,J5$.checkStrictMode)(D,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(f!==void 0&&B>f){(0,J5$.checkStrictMode)(D,'"minContains" > "maxContains" is always invalid'),H.fail();return}if((0,J5$.alwaysValidSchema)(D,A)){let Q=MT._`${G} >= ${B}`;if(f!==void 0)Q=MT._`${Q} && ${G} <= ${f}`;H.pass(Q);return}D.items=!0;let U=$.name("valid");if(f===void 0&&B===1)J(U,()=>$.if(U,()=>$.break()));else if(B===0){if($.let(U,!0),f!==void 0)$.if(MT._`${I}.length > 0`,X)}else $.let(U,!1),X();H.result(U,()=>H.reset());function X(){let Q=$.name("_valid"),W=$.let("count",0);J(Q,()=>$.if(Q,()=>F(W)))}function J(Q,W){$.forRange("i",0,G,(P)=>{H.subschema({keyword:"contains",dataProp:P,dataPropType:J5$.Type.Num,compositeRule:!0},Q),W()})}function F(Q){if($.code(MT._`${Q}++`),f===void 0)$.if(MT._`${Q} >= ${B}`,()=>$.assign(U,!0).break());else if($.if(MT._`${Q} > ${f}`,()=>$.assign(U,!1).break()),B===1)$.assign(U,!0);else $.if(MT._`${Q} >= ${B}`,()=>$.assign(U,!0))}}};NJA.default=VG9});var H2I=z((Av)=>{Object.defineProperty(Av,"__esModule",{value:!0});Av.validateSchemaDeps=Av.validatePropertyDeps=Av.error=void 0;var OJA=u1(),PG9=Zf(),GjH=fT();Av.error={message:({params:{property:H,depsCount:$,deps:A}})=>{let L=$===1?"property":"properties";return OJA.str`must have ${L} ${A} when property ${H} is present`},params:({params:{property:H,depsCount:$,deps:A,missingProperty:L}})=>OJA._`{property: ${H},
 ${bc0.sanitize(Object.assign(Object.assign({},this),{request:this.request,response:this.response}))}`},enumerable:!1}),Object.setPrototypeOf(this,o_.prototype)}};o_.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";o_.PARSE_ERROR="PARSE_ERROR"});function Yy(H,$){return Buffer.from(H,$)}var yO;var BE$=K(()=>{sf$();yO=tf$("ts-http-runtime")});function dNH(H){return H&&typeof H.pipe==="function"}function aMI(H){if(H.readable===!1)return Promise.resolve();return new Promise(($)=>{let A=()=>{$(),H.removeListener("close",A),H.removeListener("end",A),H.removeListener("error",A)};H.on("close",A),H.on("end",A),H.on("error",A)})}function tMI(H){return H&&typeof H.byteLength==="number"}class sMI{constructor(){this.cachedHttpsAgents=new WeakMap}async sendRequest(H){var $,A,L;let I=new AbortController,D;if(H.abortSignal){if(H.abortSignal.aborted)throw new hn("The operation was aborted. Request has already been canceled.");D=(U)=>{if(U.type==="abort")I.abort()},H.abortSignal.addEventListener("abort",D)}let B;if(H.timeout>0)B=setTimeout(()=>{let U=new Cy;yO.info(`request to '${U.sanitizeUrl(H.url)}' timed out. canceling...`),I.abort()},H.timeout);let f=H.headers.get("Accept-Encoding"),E=(f===null||f===void 0?void 0:f.includes("gzip"))||(f===null||f===void 0?void 0:f.includes("deflate")),M=typeof H.body==="function"?H.body():H.body;if(M&&!H.headers.has("Content-Length")){let U=pc0(M);if(U!==null)H.headers.set("Content-Length",U)}let G;try{if(M&&H.onUploadProgress){let W=H.onUploadProgress,P=new qfA(W);if(P.on("error",(Y)=>{yO.error("Error in upload progress",Y)}),dNH(M))M.pipe(P);else P.end(M);M=P}let U=await this.makeRequest(H,I,M);if(B!==void 0)clearTimeout(B);let X=uc0(U),F={status:($=U.statusCode)!==null&&$!==void 0?$:0,headers:X,request:H};if(H.method==="HEAD")return U.resume(),F;G=E?gc0(U,X):U;let Q=H.onDownloadProgress;if(Q){let W=new qfA(Q);W.on("error",(P)=>{yO.error("Error in download progress",P)}),G.pipe(W),G=W}if(((A=H.streamResponseStatusCodes)===null||A===void 0?void 0:A.has(Number.POSITIVE_INFINITY))||((L=H.streamResponseStatusCodes)===null||L===void 0?void 0:L.has(F.status)))F.readableStreamBody=G;else F.bodyAsText=await mc0(G);return F}finally{if(H.abortSignal&&D){let U=Promise.resolve();if(dNH(M))U=aMI(M);let X=Promise.resolve();if(dNH(G))X=aMI(G);Promise.all([U,X]).then(()=>{var J;if(D)(J=H.abortSignal)===null||J===void 0||J.removeEventListener("abort",D)}).catch((J)=>{yO.warning("Error when cleaning up abortListener on httpRequest",J)})}}}makeRequest(H,$,A){var L;let I=new URL(H.url),D=I.protocol!=="https:";if(D&&!H.allowInsecureConnection)throw Error(`Cannot connect to ${H.url} while allowInsecureConnection is false.`);let B=(L=H.agent)!==null&&L!==void 0?L:this.getOrCreateAgent(H,D),f=Object.assign({agent:B,hostname:I.hostname,path:`${I.pathname}${I.search}`,port:I.port,method:H.method,headers:H.headers.toJSON({preserveCase:!0})},H.requestOverrides);return new Promise((E,M)=>{let G=D?WXH.request(f,E):VXH.request(f,E);if(G.once("error",(U)=>{var X;M(new o_(U.message,{code:(X=U.code)!==null&&X!==void 0?X:o_.REQUEST_SEND_ERROR,request:H}))}),$.signal.addEventListener("abort",()=>{let U=new hn("The operation was aborted. Rejecting from abort signal callback while making request.");G.destroy(U),M(U)}),A&&dNH(A))A.pipe(G);else if(A)if(typeof A==="string"||Buffer.isBuffer(A))G.end(A);else if(tMI(A))G.end(ArrayBuffer.isView(A)?Buffer.from(A.buffer):Buffer.from(A));else yO.error("Unrecognized body type",A),M(new o_("Unrecognized body type"));else G.end()})}getOrCreateAgent(H,$){var A;let L=H.disableKeepAlive;if($){if(L)return WXH.globalAgent;if(!this.cachedHttpAgent)this.cachedHttpAgent=new WXH.Agent({keepAlive:!0});return this.cachedHttpAgent}else{if(L&&!H.tlsSettings)return VXH.globalAgent;let I=(A=H.tlsSettings)!==null&&A!==void 0?A:kc0,D=this.cachedHttpsAgents.get(I);if(D&&D.options.keepAlive===!L)return D;return yO.info("No cached TLS Agent exist, creating a new Agent"),D=new VXH.Agent(Object.assign({keepAlive:!L},I)),this.cachedHttpsAgents.set(I,D),D}}}function uc0(H){let $=_y();for(let A of Object.keys(H.headers)){let L=H.headers[A];if(Array.isArray(L)){if(L.length>0)$.set(A,L[0])}else if(L)$.set(A,L)}return $}function gc0(H,$){let A=$.get("Content-Encoding");if(A==="gzip"){let L=fE$.createGunzip();return H.pipe(L),L}else if(A==="deflate"){let L=fE$.createInflate();return H.pipe(L),L}return H}function mc0(H){return new Promise(($,A)=>{let L=[];H.on("data",(I)=>{if(Buffer.isBuffer(I))L.push(I);else L.push(Buffer.from(I))}),H.on("end",()=>{$(Buffer.concat(L).toString("utf8"))}),H.on("error",(I)=>{if(I&&(I===null||I===void 0?void 0:I.name)==="AbortError")A(I);else A(new o_(`Error reading response as text: ${I.message}`,{code:o_.PARSE_ERROR}))})})}function pc0(H){if(!H)return 0;else if(Buffer.isBuffer(H))return H.length;else if(dNH(H))return null;else if(tMI(H))return H.byteLength;else if(typeof H==="string")return Buffer.from(H).length;else return null}function eMI(){return new sMI}var WXH,VXH,fE$,oMI,kc0,qfA;var HGI=K(()=>{LE$();uNH();ZfA();BE$();pNH();WXH=h(require("http")),VXH=h(require("https")),fE$=h(require("zlib")),oMI=require("stream"),kc0={};qfA=class qfA extends oMI.Transform{_transform(H,$,A){this.push(H),this.loadedBytes+=H.length;try{this.progressCallback({loadedBytes:this.loadedBytes}),A()}catch(L){A(L)}}constructor(H){super();this.loadedBytes=0,this.progressCallback=H}}});function TfA(){return eMI()}var $GI=K(()=>{HGI()});function NfA(H={}){var $;let A=($=H.logger)!==null&&$!==void 0?$:yO.info,L=new Cy({additionalAllowedHeaderNames:H.additionalAllowedHeaderNames,additionalAllowedQueryParameters:H.additionalAllowedQueryParameters});return{name:zfA,async sendRequest(I,D){if(!A.enabled)return D(I);A(`Request: ${L.sanitize(I)}`);let B=await D(I);return A(`Response status code: ${B.status}`),A(`Headers: ${L.sanitize(B.headers)}`),B}}}var zfA="logPolicy";var AGI=K(()=>{BE$();pNH()});function OfA(H={}){let{maxRetries:$=20}=H;return{name:"redirectPolicy",async sendRequest(A,L){let I=await L(A);return IGI(L,I,$)}}}async function IGI(H,$,A,L=0){let{request:I,status:D,headers:B}=$,f=B.get("location");if(f&&(D===300||D===301&&LGI.includes(I.method)||D===302&&LGI.includes(I.method)||D===303&&I.method==="POST"||D===307)&&L<A){let E=new URL(f,I.url);if(I.url=E.toString(),D===303)I.method="GET",I.headers.delete("Content-Length"),delete I.body;I.headers.delete("Authorization");let M=await H(I);return IGI(H,M,A,L+1)}return $}var LGI;var DGI=K(()=>{LGI=["GET","HEAD"]});var cNH=3;function xfA(){return{name:"decompressResponsePolicy",async sendRequest(H,$){if(H.method!=="HEAD")H.headers.set("Accept-Encoding","gzip,deflate");return $(H)}}}function SfA(H,$){return H=Math.ceil(H),$=Math.floor($),Math.floor(Math.random()*($-H+1))+H}function lNH(H,$){let A=$.retryDelayInMs*Math.pow(2,H),L=Math.min($.maxRetryDelayInMs,A);return{retryAfterInMs:L/2+SfA(0,L/2)}}var jfA=()=>{};function BGI(H,$,A){return new Promise((L,I)=>{let D=void 0,B=void 0,f=()=>{return I(new hn((A===null||A===void 0?void 0:A.abortErrorMsg)?A===null||A===void 0?void 0:A.abortErrorMsg:dc0))},E=()=>{if((A===null||A===void 0?void 0:A.abortSignal)&&B)A.abortSignal.removeEventListener("abort",B)};if(B=()=>{if(D)clearTimeout(D);return E(),f()},(A===null||A===void 0?void 0:A.abortSignal)&&A.abortSignal.aborted)return f();if(D=setTimeout(()=>{E(),L($)},H),A===null||A===void 0?void 0:A.abortSignal)A.abortSignal.addEventListener("abort",B)})}function fGI(H,$){let A=H.headers.get($);if(!A)return;let L=Number(A);if(Number.isNaN(L))return;return L}var dc0="The operation was aborted.";var RfA=K(()=>{LE$()});function EGI(H){if(!(H&&[429,503].includes(H.status)))return;try{for(let I of cc0){let D=fGI(H,I);if(D===0||D)return D*(I===yfA?1000:1)}let $=H.headers.get(yfA);if(!$)return;let L=Date.parse($)-Date.now();return Number.isFinite(L)?Math.max(0,L):void 0}catch($){return}}function MGI(H){return Number.isFinite(EGI(H))}function GGI(){return{name:"throttlingRetryStrategy",retry({response:H}){let $=EGI(H);if(!Number.isFinite($))return{skipStrategy:!0};return{retryAfterInMs:$}}}}var yfA="Retry-After",cc0;var vfA=K(()=>{RfA();cc0=["retry-after-ms","x-ms-retry-after-ms",yfA]});function UGI(H={}){var $,A;let L=($=H.retryDelayInMs)!==null&&$!==void 0?$:lc0,I=(A=H.maxRetryDelayInMs)!==null&&A!==void 0?A:ic0;return{name:"exponentialRetryStrategy",retry({retryCount:D,response:B,responseError:f}){let E=rc0(f),M=E&&H.ignoreSystemErrors,G=nc0(B),U=G&&H.ignoreHttpStatusCodes;if(B&&(MGI(B)||!G)||U||M)return{skipStrategy:!0};if(f&&!E&&!G)return{errorToThrow:f};return lNH(D,{retryDelayInMs:L,maxRetryDelayInMs:I})}}}function nc0(H){return Boolean(H&&H.status!==void 0&&(H.status>=500||H.status===408)&&H.status!==501&&H.status!==505)}function rc0(H){if(!H)return!1;return H.code==="ETIMEDOUT"||H.code==="ESOCKETTIMEDOUT"||H.code==="ECONNREFUSED"||H.code==="ECONNRESET"||H.code==="ENOENT"||H.code==="ENOTFOUND"}var lc0=1000,ic0=64000;var XGI=K(()=>{jfA();vfA()});function iNH(H,$={maxRetries:cNH}){let A=$.logger||ac0;return{name:oc0,async sendRequest(L,I){var D,B;let f,E,M=-1;H:while(!0){M+=1,f=void 0,E=void 0;try{A.info(`Retry ${M}: Attempting to send request`,L.requestId),f=await I(L),A.info(`Retry ${M}: Received a response from request`,L.requestId)}catch(G){if(A.error(`Retry ${M}: Received an error from request`,L.requestId),E=G,!G||E.name!=="RestError")throw G;f=E.response}if((D=L.abortSignal)===null||D===void 0?void 0:D.aborted)throw A.error(`Retry ${M}: Request aborted.`),new hn;if(M>=((B=$.maxRetries)!==null&&B!==void 0?B:cNH))if(A.info(`Retry ${M}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),E)throw E;else if(f)return f;else throw Error("Maximum retries reached with no response or error to throw");A.info(`Retry ${M}: Processing ${H.length} retry strategies.`);$:for(let G of H){let U=G.logger||A;U.info(`Retry ${M}: Processing retry strategy ${G.name}.`);let X=G.retry({retryCount:M,response:f,responseError:E});if(X.skipStrategy){U.info(`Retry ${M}: Skipped.`);continue $}let{errorToThrow:J,retryAfterInMs:F,redirectTo:Q}=X;if(J)throw U.error(`Retry ${M}: Retry strategy ${G.name} throws error:`,J),J;if(F||F===0){U.info(`Retry ${M}: Retry strategy ${G.name} retries after ${F}`),await BGI(F,void 0,{abortSignal:L.abortSignal});continue H}if(Q){U.info(`Retry ${M}: Retry strategy ${G.name} redirects to ${Q}`),L.url=Q;continue H}}if(E)throw A.info("None of the retry strategies could work with the received error. Throwing it."),E;if(f)return A.info("None of the retry strategies could work with the received response. Returning it."),f}}}}var ac0,oc0="retryPolicy";var hfA=K(()=>{RfA();LE$();sf$();ac0=tf$("ts-http-runtime retryPolicy")});function kfA(H={}){var $;return{name:bfA,sendRequest:iNH([GGI(),UGI(H)],{maxRetries:($=H.maxRetries)!==null&&$!==void 0?$:cNH}).sendRequest}}var bfA="defaultRetryPolicy";var JGI=K(()=>{XGI();vfA();hfA()});var ufA,gfA,mfA,pfA,FGI,KGI,QGI,WGI,PXH,VGI;var dfA=K(()=>{FGI=typeof window<"u"&&typeof window.document<"u",KGI=typeof self==="object"&&typeof(self===null||self===void 0?void 0:self.importScripts)==="function"&&(((ufA=self.constructor)===null||ufA===void 0?void 0:ufA.name)==="DedicatedWorkerGlobalScope"||((gfA=self.constructor)===null||gfA===void 0?void 0:gfA.name)==="ServiceWorkerGlobalScope"||((mfA=self.constructor)===null||mfA===void 0?void 0:mfA.name)==="SharedWorkerGlobalScope"),QGI=typeof Deno<"u"&&typeof Deno.version<"u"&&typeof Deno.version.deno<"u",WGI=typeof Bun<"u"&&typeof Bun.version<"u",PXH=typeof globalThis.process<"u"&&Boolean(globalThis.process.version)&&Boolean((pfA=globalThis.process.versions)===null||pfA===void 0?void 0:pfA.node),VGI=typeof navigator<"u"&&(navigator===null||navigator===void 0?void 0:navigator.product)==="ReactNative"});function tc0(H){var $;let A={};for(let[L,I]of H.entries())($=A[L])!==null&&$!==void 0||(A[L]=[]),A[L].push(I);return A}function lfA(){return{name:cfA,async sendRequest(H,$){if(PXH&&typeof FormData<"u"&&H.body instanceof FormData)H.formData=tc0(H.body),H.body=void 0;if(H.formData){let A=H.headers.get("Content-Type");if(A&&A.indexOf("application/x-www-form-urlencoded")!==-1)H.body=sc0(H.formData);else await ec0(H.formData,H);H.formData=void 0}return $(H)}}}function sc0(H){let $=new URLSearchParams;for(let[A,L]of Object.entries(H))if(Array.isArray(L))for(let I of L)$.append(A,I.toString());else $.append(A,L.toString());return $.toString()}async function ec0(H,$){let A=$.headers.get("Content-Type");if(A&&!A.startsWith("multipart/form-data"))return;$.headers.set("Content-Type",A!==null&&A!==void 0?A:"multipart/form-data");let L=[];for(let[I,D]of Object.entries(H))for(let B of Array.isArray(D)?D:[D])if(typeof B==="string")L.push({headers:_y({"Content-Disposition":`form-data; name="${I}"`}),body:Yy(B,"utf-8")});else if(B===void 0||B===null||typeof B!=="object")throw Error(`Unexpected value for key ${I}: ${B}. Value should be serialized to string first.`);else{let f=B.name||"blob",E=_y();E.set("Content-Disposition",`form-data; name="${I}"; filename="${f}"`),E.set("Content-Type",B.type||"application/octet-stream"),L.push({headers:E,body:B})}$.multipartBody={parts:L}}var cfA="formDataPolicy";var PGI=K(()=>{dfA();uNH()});var YGI=z((mq)=>{var Hl0=mq&&mq.__createBinding||(Object.create?function(H,$,A,L){if(L===void 0)L=A;var I=Object.getOwnPropertyDescriptor($,A);if(!I||("get"in I?!$.__esModule:I.writable||I.configurable))I={enumerable:!0,get:function(){return $[A]}};Object.defineProperty(H,L,I)}:function(H,$,A,L){if(L===void 0)L=A;H[L]=$[A]}),$l0=mq&&mq.__setModuleDefault||(Object.create?function(H,$){Object.defineProperty(H,"default",{enumerable:!0,value:$})}:function(H,$){H.default=$}),CGI=mq&&mq.__importStar||function(H){if(H&&H.__esModule)return H;var $={};if(H!=null){for(var A in H)if(A!=="default"&&Object.prototype.hasOwnProperty.call(H,A))Hl0($,H,A)}return $l0($,H),$},Al0=mq&&mq.__importDefault||function(H){return H&&H.__esModule?H:{default:H}};Object.defineProperty(mq,"__esModule",{value:!0});mq.HttpProxyAgent=void 0;var Ll0=CGI(require("net")),Il0=CGI(require("tls")),Dl0=Al0(jHH()),Bl0=require("events"),fl0=W$A(),_GI=require("url"),_XH=(0,Dl0.default)("http-proxy-agent");class ifA extends fl0.Agent{constructor(H,$){super($);this.proxy=typeof H==="string"?new _GI.URL(H):H,this.proxyHeaders=$?.headers??{},_XH("Creating new HttpProxyAgent instance: %o",this.proxy.href);let A=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),L=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={...$?El0($,"headers"):null,host:A,port:L}}addRequest(H,$){H._header=null,this.setRequestProps(H,$),super.addRequest(H,$)}setRequestProps(H,$){let{proxy:A}=this,L=$.secureEndpoint?"https:":"http:",I=H.getHeader("host")||"localhost",D=`${L}//${I}`,B=new _GI.URL(H.path,D);if($.port!==80)B.port=String($.port);H.path=String(B);let f=typeof this.proxyHeaders==="function"?this.proxyHeaders():{...this.proxyHeaders};if(A.username||A.password){let E=`${decodeURIComponent(A.username)}:${decodeURIComponent(A.password)}`;f["Proxy-Authorization"]=`Basic ${Buffer.from(E).toString("base64")}`}if(!f["Proxy-Connection"])f["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close";for(let E of Object.keys(f)){let M=f[E];if(M)H.setHeader(E,M)}}async connect(H,$){if(H._header=null,!H.path.includes("://"))this.setRequestProps(H,$);let A,L;if(_XH("Regenerating stored HTTP header string for request"),H._implicitHeader(),H.outputData&&H.outputData.length>0)_XH("Patching connection write() output buffer with updated header"),A=H.outputData[0].data,L=A.indexOf(`\r
${D.comment}`:L.comment}L=I}H.items[A]=oD$.isPair(L)?L:new JAA.Pair(L)}else $("Expected a sequence for this tag");return H}function LpL(H,$,A){let{replacer:L}=A,I=new bC0.YAMLSeq(H);I.tag="tag:yaml.org,2002:pairs";let D=0;if($&&Symbol.iterator in Object($))for(let B of $){if(typeof L==="function")B=L.call($,String(D++),B);let f,E;if(Array.isArray(B))if(B.length===2)f=B[0],E=B[1];else throw TypeError(`Expected [key, value] tuple: ${B}`);else if(B&&B instanceof Object){let M=Object.keys(B);if(M.length===1)f=M[0],E=B[f];else throw TypeError(`Expected tuple with one key, not ${M.length} keys`)}else f=B;I.items.push(JAA.createPair(f,E,A))}return I}var kC0={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:ApL,createNode:LpL};tD$.createPairs=LpL;tD$.pairs=kC0;tD$.resolvePairs=ApL});var QAA=z((KAA)=>{var IpL=Bf(),FAA=Zi(),NqH=Oi(),uC0=xi(),DpL=sD$();class WAH extends uC0.YAMLSeq{constructor(){super();this.add=NqH.YAMLMap.prototype.add.bind(this),this.delete=NqH.YAMLMap.prototype.delete.bind(this),this.get=NqH.YAMLMap.prototype.get.bind(this),this.has=NqH.YAMLMap.prototype.has.bind(this),this.set=NqH.YAMLMap.prototype.set.bind(this),this.tag=WAH.tag}toJSON(H,$){if(!$)return super.toJSON(H);let A=new Map;if($?.onCreate)$.onCreate(A);for(let L of this.items){let I,D;if(IpL.isPair(L))I=FAA.toJS(L.key,"",$),D=FAA.toJS(L.value,I,$);else I=FAA.toJS(L,"",$);if(A.has(I))throw Error("Ordered maps must not include duplicate keys");A.set(I,D)}return A}static from(H,$,A){let L=DpL.createPairs(H,$,A),I=new this;return I.items=L.items,I}}WAH.tag="tag:yaml.org,2002:omap";var gC0={collection:"seq",identify:(H)=>H instanceof Map,nodeClass:WAH,default:!1,tag:"tag:yaml.org,2002:omap",resolve(H,$){let A=DpL.resolvePairs(H,$),L=[];for(let{key:I}of A.items)if(IpL.isScalar(I))if(L.includes(I.value))$(`Ordered maps must not include duplicate keys: ${I.value}`);else L.push(I.value);return Object.assign(new WAH,A)},createNode:(H,$,A)=>WAH.from(H,$,A)};KAA.YAMLOMap=WAH;KAA.omap=gC0});var GpL=z((WAA)=>{var BpL=IF();function fpL({value:H,source:$},A){if($&&(H?EpL:MpL).test.test($))return $;return H?A.options.trueStr:A.options.falseStr}var EpL={identify:(H)=>H===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new BpL.Scalar(!0),stringify:fpL},MpL={identify:(H)=>H===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new BpL.Scalar(!1),stringify:fpL};WAA.falseTag=MpL;WAA.trueTag=EpL});var UpL=z((eD$)=>{var mC0=IF(),VAA=H4H(),pC0={identify:(H)=>typeof H==="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:(H)=>H.slice(-3).toLowerCase()==="nan"?NaN:H[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:VAA.stringifyNumber},dC0={identify:(H)=>typeof H==="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:(H)=>parseFloat(H.replace(/_/g,"")),stringify(H){let $=Number(H.value);return isFinite($)?$.toExponential():VAA.stringifyNumber(H)}},cC0={identify:(H)=>typeof H==="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(H){let $=new mC0.Scalar(parseFloat(H.replace(/_/g,""))),A=H.indexOf(".");if(A!==-1){let L=H.substring(A+1).replace(/_/g,"");if(L[L.length-1]==="0")$.minFractionDigits=L.length}return $},stringify:VAA.stringifyNumber};eD$.float=cC0;eD$.floatExp=dC0;eD$.floatNaN=pC0});var JpL=z((xqH)=>{var XpL=H4H(),OqH=(H)=>typeof H==="bigint"||Number.isInteger(H);function HB$(H,$,A,{intAsBigInt:L}){let I=H[0];if(I==="-"||I==="+")$+=1;if(H=H.substring($).replace(/_/g,""),L){switch(A){case 2:H=`0b${H}`;break;case 8:H=`0o${H}`;break;case 16:H=`0x${H}`;break}let B=BigInt(H);return I==="-"?BigInt(-1)*B:B}let D=parseInt(H,A);return I==="-"?-1*D:D}function PAA(H,$,A){let{value:L}=H;if(OqH(L)){let I=L.toString($);return L<0?"-"+A+I.substr(1):A+I}return XpL.stringifyNumber(H)}var lC0={identify:OqH,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(H,$,A)=>HB$(H,2,2,A),stringify:(H)=>PAA(H,2,"0b")},iC0={identify:OqH,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(H,$,A)=>HB$(H,1,8,A),stringify:(H)=>PAA(H,8,"0")},nC0={identify:OqH,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(H,$,A)=>HB$(H,0,10,A),stringify:XpL.stringifyNumber},rC0={identify:OqH,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(H,$,A)=>HB$(H,2,16,A),stringify:(H)=>PAA(H,16,"0x")};xqH.int=nC0;xqH.intBin=lC0;xqH.intHex=rC0;xqH.intOct=iC0});var CAA=z((_AA)=>{var LB$=Bf(),$B$=zi(),AB$=Oi();class VAH extends AB$.YAMLMap{constructor(H){super(H);this.tag=VAH.tag}add(H){let $;if(LB$.isPair(H))$=H;else if(H&&typeof H==="object"&&"key"in H&&"value"in H&&H.value===null)$=new $B$.Pair(H.key,null);else $=new $B$.Pair(H,null);if(!AB$.findPair(this.items,$.key))this.items.push($)}get(H,$){let A=AB$.findPair(this.items,H);return!$&&LB$.isPair(A)?LB$.isScalar(A.key)?A.key.value:A.key:A}set(H,$){if(typeof $!=="boolean")throw Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof $}`);let A=AB$.findPair(this.items,H);if(A&&!$)this.items.splice(this.items.indexOf(A),1);else if(!A&&$)this.items.push(new $B$.Pair(H))}toJSON(H,$){return super.toJSON(H,$,Set)}toString(H,$,A){if(!H)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},H,{allNullValues:!0}),$,A);else throw Error("Set items must all have null values")}static from(H,$,A){let{replacer:L}=A,I=new this(H);if($&&Symbol.iterator in Object($))for(let D of $){if(typeof L==="function")D=L.call($,D,D);I.items.push($B$.createPair(D,null,A))}return I}}VAH.tag="tag:yaml.org,2002:set";var aC0={collection:"map",identify:(H)=>H instanceof Set,nodeClass:VAH,default:!1,tag:"tag:yaml.org,2002:set",createNode:(H,$,A)=>VAH.from(H,$,A),resolve(H,$){if(LB$.isMap(H))if(H.hasAllNullValues(!0))return Object.assign(new VAH,H);else $("Set items must all have null values");else $("Expected a mapping for this tag");return H}};_AA.YAMLSet=VAH;_AA.set=aC0});var wAA=z((IB$)=>{var oC0=H4H();function YAA(H,$){let A=H[0],L=A==="-"||A==="+"?H.substring(1):H,I=(B)=>$?BigInt(B):Number(B),D=L.replace(/_/g,"").split(":").reduce((B,f)=>B*I(60)+I(f),I(0));return A==="-"?I(-1)*D:D}function FpL(H){let{value:$}=H,A=(B)=>B;if(typeof $==="bigint")A=(B)=>BigInt(B);else if(isNaN($)||!isFinite($))return oC0.stringifyNumber(H);let L="";if($<0)L="-",$*=A(-1);let I=A(60),D=[$%I];if($<60)D.unshift(0);else if($=($-D[0])/I,D.unshift($%I),$>=60)$=($-D[0])/I,D.unshift($);return L+D.map((B)=>String(B).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}var tC0={identify:(H)=>typeof H==="bigint"||Number.isInteger(H),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(H,$,{intAsBigInt:A})=>YAA(H,A),stringify:FpL},sC0={identify:(H)=>typeof H==="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:(H)=>YAA(H,!1),stringify:FpL},KpL={identify:(H)=>H instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(H){let $=H.match(KpL.test);if(!$)throw Error("!!timestamp expects a date, starting with yyyy-mm-dd");let[,A,L,I,D,B,f]=$.map(Number),E=$[7]?Number(($[7]+"00").substr(1,3)):0,M=Date.UTC(A,L-1,I,D||0,B||0,f||0,E),G=$[8];if(G&&G!=="Z"){let U=YAA(G,!1);if(Math.abs(U)<30)U*=60;M-=60000*U}return new Date(M)},stringify:({value:H})=>H?.toISOString().replace(/(T00:00:00)?\.000Z$/,"")??""};IB$.floatTime=sC0;IB$.intTime=tC0;IB$.timestamp=KpL});var VpL=z((WpL)=>{var eC0=sUH(),HY0=lD$(),$Y0=eUH(),AY0=TqH(),LY0=XAA(),QpL=GpL(),ZAA=UpL(),DB$=JpL(),IY0=bD$(),DY0=QAA(),BY0=sD$(),fY0=CAA(),qAA=wAA(),EY0=[eC0.map,$Y0.seq,AY0.string,HY0.nullTag,QpL.trueTag,QpL.falseTag,DB$.intBin,DB$.intOct,DB$.int,DB$.intHex,ZAA.floatNaN,ZAA.floatExp,ZAA.float,LY0.binary,IY0.merge,DY0.omap,BY0.pairs,fY0.set,qAA.intTime,qAA.floatTime,qAA.timestamp];WpL.schema=EY0});var NpL=z((NAA)=>{var YpL=sUH(),MY0=lD$(),wpL=eUH(),GY0=TqH(),UY0=IAA(),TAA=BAA(),zAA=EAA(),XY0=tmL(),JY0=HpL(),ZpL=XAA(),SqH=bD$(),qpL=QAA(),TpL=sD$(),PpL=VpL(),zpL=CAA(),BB$=wAA(),_pL=new Map([["core",XY0.schema],["failsafe",[YpL.map,wpL.seq,GY0.string]],["json",JY0.schema],["yaml11",PpL.schema],["yaml-1.1",PpL.schema]]),CpL={binary:ZpL.binary,bool:UY0.boolTag,float:TAA.float,floatExp:TAA.floatExp,floatNaN:TAA.floatNaN,floatTime:BB$.floatTime,int:zAA.int,intHex:zAA.intHex,intOct:zAA.intOct,intTime:BB$.intTime,map:YpL.map,merge:SqH.merge,null:MY0.nullTag,omap:qpL.omap,pairs:TpL.pairs,seq:wpL.seq,set:zpL.set,timestamp:BB$.timestamp},FY0={"tag:yaml.org,2002:binary":ZpL.binary,"tag:yaml.org,2002:merge":SqH.merge,"tag:yaml.org,2002:omap":qpL.omap,"tag:yaml.org,2002:pairs":TpL.pairs,"tag:yaml.org,2002:set":zpL.set,"tag:yaml.org,2002:timestamp":BB$.timestamp};function KY0(H,$,A){let L=_pL.get($);if(L&&!H)return A&&!L.includes(SqH.merge)?L.concat(SqH.merge):L.slice();let I=L;if(!I)if(Array.isArray(H))I=[];else{let D=Array.from(_pL.keys()).filter((B)=>B!=="yaml11").map((B)=>JSON.stringify(B)).join(", ");throw Error(`Unknown schema "${$}"; use one of ${D} or define customTags array`)}if(Array.isArray(H))for(let D of H)I=I.concat(D);else if(typeof H==="function")I=H(I.slice());if(A)I=I.concat(SqH.merge);return I.reduce((D,B)=>{let f=typeof B==="string"?CpL[B]:B;if(!f){let E=JSON.stringify(B),M=Object.keys(CpL).map((G)=>JSON.stringify(G)).join(", ");throw Error(`Unknown custom tag ${E}; use one of ${M}`)}if(!D.includes(f))D.push(f);return D},[])}NAA.coreKnownTags=FY0;NAA.getTags=KY0});var SAA=z((OpL)=>{var OAA=Bf(),QY0=sUH(),WY0=eUH(),VY0=TqH(),fB$=NpL(),PY0=(H,$)=>H.key<$.key?-1:H.key>$.key?1:0;class xAA{constructor({compat:H,customTags:$,merge:A,resolveKnownTags:L,schema:I,sortMapEntries:D,toStringDefaults:B}){this.compat=Array.isArray(H)?fB$.getTags(H,"compat"):H?fB$.getTags(null,H):null,this.name=typeof I==="string"&&I||"core",this.knownTags=L?fB$.coreKnownTags:{},this.tags=fB$.getTags($,this.name,A),this.toStringOptions=B??null,Object.defineProperty(this,OAA.MAP,{value:QY0.map}),Object.defineProperty(this,OAA.SCALAR,{value:VY0.string}),Object.defineProperty(this,OAA.SEQ,{value:WY0.seq}),this.sortMapEntries=typeof D==="function"?D:D===!0?PY0:null}clone(){let H=Object.create(xAA.prototype,Object.getOwnPropertyDescriptors(this));return H.tags=this.tags.slice(),H}}OpL.Schema=xAA});var SpL=z((xpL)=>{var _Y0=Bf(),jAA=YqH(),jqH=VqH();function CY0(H,$){let A=[],L=$.directives===!0;if($.directives!==!1&&H.directives){let E=H.directives.toString(H);if(E)A.push(E),L=!0;else if(H.directives.docStart)L=!0}if(L)A.push("---");let I=jAA.createStringifyContext(H,$),{commentString:D}=I.options;if(H.commentBefore){if(A.length!==1)A.unshift("");let E=D(H.commentBefore);A.unshift(jqH.indentComment(E,""))}let B=!1,f=null;if(H.contents){if(_Y0.isNode(H.contents)){if(H.contents.spaceBefore&&L)A.push("");if(H.contents.commentBefore){let G=D(H.contents.commentBefore);A.push(jqH.indentComment(G,""))}I.forceBlockIndent=!!H.comment,f=H.contents.comment}let E=f?void 0:()=>B=!0,M=jAA.stringify(H.contents,I,()=>f=null,E);if(f)M+=jqH.lineComment(M,"",D(f));if((M[0]==="|"||M[0]===">")&&A[A.length-1]==="---")A[A.length-1]=`--- ${M}`;else A.push(M)}else A.push(jAA.stringify(H.contents,I));if(H.directives?.docEnd)if(H.comment){let E=D(H.comment);if(E.includes(`
)${E}\\s*\\)`).test(f))return!1;let G=new RegExp(`^\\$\\(cat\\s*<<-?\\s*(?:'+${E}'+|\\\\${E})[^\\n]*\\n(?:[\\s\\S]*?\\n)?${E}\\s*\\)`);if(!f.match(G))return!1}let I=H;for(let{delimiter:D}of L){let B=D.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),f=new RegExp(`\\$\\(cat\\s*<<-?\\s*(?:'+${B}'+|\\\\${B})[^\\n]*\\n(?:[\\s\\S]*?\\n)?${B}\\s*\\)`);I=I.replace(f,"")}if(/\$\(/.test(I))return!1;if(/\${/.test(I))return!1;return!0}function QH1(H){let{originalCommand:$}=H;if(!twA.test($))return{behavior:"passthrough",message:"No heredoc in substitution"};if(KH1($))return{behavior:"allow",updatedInput:{command:$},decisionReason:{type:"other",reason:"Safe command substitution: cat with quoted/escaped heredoc delimiter"}};return{behavior:"passthrough",message:"Command substitution needs validation"}}function WH1(H){let{originalCommand:$,baseCommand:A}=H;if(A!=="git"||!/^git\s+commit\s+/.test($))return{behavior:"passthrough",message:"Not a git commit"};let L=$.match(/^git\s+commit\s+.*-m\s+(["'])([\s\S]*?)\1(.*)$/);if(L){let[,I,D,B]=L;if(I==='"'&&D&&/\$\(|`|\$\{/.test(D))return c("tengu_bash_security_check_triggered",{checkId:JU.GIT_COMMIT_SUBSTITUTION,subId:1}),{behavior:"ask",message:"Git commit message contains command substitution patterns"};if(B&&/\$\(|`|\$\{/.test(B))return{behavior:"passthrough",message:"Check patterns in flags"};if(D&&D.startsWith("-"))return c("tengu_bash_security_check_triggered",{checkId:JU.OBFUSCATED_FLAGS,subId:5}),{behavior:"ask",message:"Command contains quoted characters in flag names"};return{behavior:"allow",updatedInput:{command:$},decisionReason:{type:"other",reason:"Git commit with simple quoted message is allowed"}}}return{behavior:"passthrough",message:"Git commit needs validation"}}function VH1(H){let{originalCommand:$}=H;if(twA.test($))return{behavior:"passthrough",message:"Heredoc in substitution"};let A=/<<-?\s*'[^']+'/,L=/<<-?\s*\\\w+/;if(A.test($)||L.test($))return{behavior:"allow",updatedInput:{command:$},decisionReason:{type:"other",reason:"Heredoc with quoted/escaped delimiter is safe"}};return{behavior:"passthrough",message:"No heredoc patterns"}}function PH1(H){let{originalCommand:$,baseCommand:A}=H;if(A!=="jq")return{behavior:"passthrough",message:"Not jq"};if(/\bsystem\s*\(/.test($))return c("tengu_bash_security_check_triggered",{checkId:JU.JQ_SYSTEM_FUNCTION,subId:1}),{behavior:"ask",message:"jq command contains system() function which executes arbitrary commands"};let L=$.substring(3).trim();if(/(?:^|\s)(?:-f\b|--from-file|--rawfile|--slurpfile|-L\b|--library-path)/.test(L))return c("tengu_bash_security_check_triggered",{checkId:JU.JQ_FILE_ARGUMENTS,subId:1}),{behavior:"ask",message:"jq command contains dangerous flags that could execute code or read arbitrary files"};return{behavior:"passthrough",message:"jq command is safe"}}function _H1(H){let{unquotedContent:$}=H,A="Command contains shell metacharacters (;, |, or &) in arguments";if(/(?:^|\s)["'][^"']*[;&][^"']*["'](?:\s|$)/.test($))return c("tengu_bash_security_check_triggered",{checkId:JU.SHELL_METACHARACTERS,subId:1}),{behavior:"ask",message:"Command contains shell metacharacters (;, |, or &) in arguments"};if([/-name\s+["'][^"']*[;|&][^"']*["']/,/-path\s+["'][^"']*[;|&][^"']*["']/,/-iname\s+["'][^"']*[;|&][^"']*["']/].some((I)=>I.test($)))return c("tengu_bash_security_check_triggered",{checkId:JU.SHELL_METACHARACTERS,subId:2}),{behavior:"ask",message:"Command contains shell metacharacters (;, |, or &) in arguments"};if(/-regex\s+["'][^"']*[;&][^"']*["']/.test($))return c("tengu_bash_security_check_triggered",{checkId:JU.SHELL_METACHARACTERS,subId:3}),{behavior:"ask",message:"Command contains shell metacharacters (;, |, or &) in arguments"};return{behavior:"passthrough",message:"No metacharacters"}}function CH1(H){let{fullyUnquotedContent:$}=H;if(/[<>|]\s*\$[A-Za-z_]/.test($)||/\$[A-Za-z_][A-Za-z0-9_]*\s*[|<>]/.test($))return c("tengu_bash_security_check_triggered",{checkId:JU.DANGEROUS_VARIABLES,subId:1}),{behavior:"ask",message:"Command contains variables in dangerous contexts (redirections or pipes)"};return{behavior:"passthrough",message:"No dangerous variables"}}function YH1(H){let{unquotedContent:$,fullyUnquotedContent:A}=H;if(XH1($,"`"))return{behavior:"ask",message:"Command contains backticks (`) for command substitution"};for(let{pattern:L,message:I}of MH1)if(L.test($))return c("tengu_bash_security_check_triggered",{checkId:JU.DANGEROUS_PATTERNS_COMMAND_SUBSTITUTION,subId:1}),{behavior:"ask",message:`Command contains ${I}`};if(/</.test(A))return c("tengu_bash_security_check_triggered",{checkId:JU.DANGEROUS_PATTERNS_INPUT_REDIRECTION,subId:1}),{behavior:"ask",message:"Command contains input redirection (<) which could read sensitive files"};if(/>/.test(A))return c("tengu_bash_security_check_triggered",{checkId:JU.DANGEROUS_PATTERNS_OUTPUT_REDIRECTION,subId:1}),{behavior:"ask",message:"Command contains output redirection (>) which could write to arbitrary files"};return{behavior:"passthrough",message:"No dangerous patterns"}}function wH1(H){let{fullyUnquotedContent:$}=H;if(!/[\n\r]/.test($))return{behavior:"passthrough",message:"No newlines"};if(/[\n\r]\s*[a-zA-Z/.~({$![>|]/.test($))return c("tengu_bash_security_check_triggered",{checkId:JU.NEWLINES,subId:1}),{behavior:"ask",message:"Command contains newlines that could separate multiple commands"};return{behavior:"passthrough",message:"Newlines appear to be within data"}}function ZH1(H){let{originalCommand:$}=H;if(/\$IFS|\$\{[^}]*IFS/.test($))return c("tengu_bash_security_check_triggered",{checkId:JU.IFS_INJECTION,subId:1}),{behavior:"ask",message:"Command contains IFS variable usage which could bypass security validation"};return{behavior:"passthrough",message:"No IFS injection detected"}}function qH1(H){let{originalCommand:$}=H;if(/\/proc\/.*\/environ/.test($))return c("tengu_bash_security_check_triggered",{checkId:JU.PROC_ENVIRON_ACCESS,subId:1}),{behavior:"ask",message:"Command accesses /proc/*/environ which could expose sensitive environment variables"};return{behavior:"passthrough",message:"No /proc/environ access detected"}}function TH1(H){let{originalCommand:$}=H,A=wE($);if(!A.success)return{behavior:"passthrough",message:"Parse failed, handled elsewhere"};let L=A.tokens;if(!L.some((D)=>typeof D==="object"&&D!==null&&("op"in D)&&(D.op===";"||D.op==="&&"||D.op==="||")))return{behavior:"passthrough",message:"No command separators"};if(EH1(L))return c("tengu_bash_security_check_triggered",{checkId:JU.MALFORMED_TOKEN_INJECTION,subId:1}),{behavior:"ask",message:"Command contains ambiguous syntax with command separators that could be misinterpreted"};return{behavior:"passthrough",message:"No malformed token injection detected"}}function zH1(H){let{originalCommand:$,baseCommand:A}=H,L=/[|&;]/.test($);if(A==="echo"&&!L)return{behavior:"passthrough",message:"echo command is safe and has no dangerous flags"};if(/\$'[^']*'/.test($))return c("tengu_bash_security_check_triggered",{checkId:JU.OBFUSCATED_FLAGS,subId:5}),{behavior:"ask",message:"Command contains ANSI-C quoting which can hide characters"};if(/\$"[^"]*"/.test($))return c("tengu_bash_security_check_triggered",{checkId:JU.OBFUSCATED_FLAGS,subId:6}),{behavior:"ask",message:"Command contains locale quoting which can hide characters"};if(/\$['"]{2}\s*-/.test($))return c("tengu_bash_security_check_triggered",{checkId:JU.OBFUSCATED_FLAGS,subId:9}),{behavior:"ask",message:"Command contains empty special quotes before dash (potential bypass)"};if(/(?:^|\s)(?:''|"")+\s*-/.test($))return c("tengu_bash_security_check_triggered",{checkId:JU.OBFUSCATED_FLAGS,subId:7}),{behavior:"ask",message:"Command contains empty quotes before dash (potential bypass)"};let I=!1,D=!1,B=!1;for(let f=0;f<$.length-1;f++){let E=$[f],M=$[f+1];if(B){B=!1;continue}if(E==="\\"){B=!0;continue}if(E==="'"&&!D){I=!I;continue}if(E==='"'&&!I){D=!D;continue}if(I||D)continue;if(E&&M&&/\s/.test(E)&&/['"`]/.test(M)){let G=M,U=f+2,X="";while(U<$.length&&$[U]!==G)X+=$[U],U++;if(U<$.length&&$[U]===G&&X.startsWith("-"))return c("tengu_bash_security_check_triggered",{checkId:JU.OBFUSCATED_FLAGS,subId:4}),{behavior:"ask",message:"Command contains quoted characters in flag names"}}if(E&&M&&/\s/.test(E)&&M==="-"){let G=f+1,U="";while(G<$.length){let X=$[G];if(!X)break;if(/[\s=]/.test(X))break;if(/['"`]/.test(X)){if(A==="cut"&&U==="-d"&&/['"`]/.test(X))break;if(G+1<$.length){let J=$[G+1];if(J&&!/[a-zA-Z0-9_'"-]/.test(J))break}}U+=X,G++}if(U.includes('"')||U.includes("'"))return c("tengu_bash_security_check_triggered",{checkId:JU.OBFUSCATED_FLAGS,subId:1}),{behavior:"ask",message:"Command contains quoted characters in flag names"}}}if(/\s['"`]-/.test(H.fullyUnquotedContent))return c("tengu_bash_security_check_triggered",{checkId:JU.OBFUSCATED_FLAGS,subId:2}),{behavior:"ask",message:"Command contains quoted characters in flag names"};if(/['"`]{2}-/.test(H.fullyUnquotedContent))return c("tengu_bash_security_check_triggered",{checkId:JU.OBFUSCATED_FLAGS,subId:3}),{behavior:"ask",message:"Command contains quoted characters in flag names"};return{behavior:"passthrough",message:"No obfuscated flags detected"}}function Zh(H){let $=H.split(" ")[0]||"",{withDoubleQuotes:A,fullyUnquoted:L}=GH1(H,$==="jq"),I={originalCommand:H,baseCommand:$,unquotedContent:A,fullyUnquotedContent:UH1(L)},D=[JH1,FH1,QH1,VH1,WH1];for(let f of D){let E=f(I);if(E.behavior==="allow")return{behavior:"passthrough",message:E.decisionReason?.type==="other"?E.decisionReason.reason:"Command allowed"};if(E.behavior!=="passthrough")return E}let B=[PH1,zH1,_H1,CH1,wH1,ZH1,qH1,YH1,TH1];for(let f of B){let E=f(I);if(E.behavior==="ask")return E}return{behavior:"passthrough",message:"Command passed all security checks"}}var twA,MH1,JU;var w_$=K(()=>{z$();DX();twA=/\$\(.*<</,MH1=[{pattern:/<\(/,message:"process substitution <()"},{pattern:/>\(/,message:"process substitution >()"},{pattern:/\$\(/,message:"$() command substitution"},{pattern:/\$\{/,message:"${} parameter substitution"},{pattern:/\$\[/,message:"$[] legacy arithmetic expansion"},{pattern:/~\[/,message:"Zsh-style parameter expansion"},{pattern:/\(e:/,message:"Zsh-style glob qualifiers"},{pattern:/<#/,message:"PowerShell comment syntax"}],JU={INCOMPLETE_COMMANDS:1,JQ_SYSTEM_FUNCTION:2,JQ_FILE_ARGUMENTS:3,OBFUSCATED_FLAGS:4,SHELL_METACHARACTERS:5,DANGEROUS_VARIABLES:6,NEWLINES:7,DANGEROUS_PATTERNS_COMMAND_SUBSTITUTION:8,DANGEROUS_PATTERNS_INPUT_REDIRECTION:9,DANGEROUS_PATTERNS_OUTPUT_REDIRECTION:10,IFS_INJECTION:11,GIT_COMMIT_SUBSTITUTION:12,PROC_ENVIRON_ACCESS:13,MALFORMED_TOKEN_INJECTION:14}});function b7H(H){if(H!==to)throw Error("Illegal constructor")}function lbH(H){return!!H&&typeof H.row==="number"&&typeof H.column==="number"}function aKD(H){D$=H}function AZA(H,$,A,L){let I=A-$,D=H.textCallback($,L);if(D){$+=D.length;while($<A){let B=H.textCallback($,L);if(B&&B.length>0)$+=B.length,D+=B;else break}if($>A)D=D.slice(0,I)}return D??""}function $ZA(H,$,A,L,I){for(let D=0,B=I.length;D<B;D++){let f=D$.getValue(A,"i32");A+=$B;let E=k4($,A);A+=oC,I[D]={patternIndex:L,name:H.captureNames[f],node:E}}return A}function e9(H,$=0){let A=bD+$*oC;D$.setValue(A,H.id,"i32"),A+=$B,D$.setValue(A,H.startIndex,"i32"),A+=$B,D$.setValue(A,H.startPosition.row,"i32"),A+=$B,D$.setValue(A,H.startPosition.column,"i32"),A+=$B,D$.setValue(A,H[0],"i32")}function k4(H,$=bD){let A=D$.getValue($,"i32");if($+=$B,A===0)return null;let L=D$.getValue($,"i32");$+=$B;let I=D$.getValue($,"i32");$+=$B;let D=D$.getValue($,"i32");$+=$B;let B=D$.getValue($,"i32");return new jH1(to,{id:A,tree:H,startIndex:L,startPosition:{row:I,column:D},other:B})}function zG(H,$=bD){D$.setValue($+0*$B,H[0],"i32"),D$.setValue($+1*$B,H[1],"i32"),D$.setValue($+2*$B,H[2],"i32"),D$.setValue($+3*$B,H[3],"i32")}function Zw(H){H[0]=D$.getValue(bD+0*$B,"i32"),H[1]=D$.getValue(bD+1*$B,"i32"),H[2]=D$.getValue(bD+2*$B,"i32"),H[3]=D$.getValue(bD+3*$B,"i32")}function $z(H,$){D$.setValue(H,$.row,"i32"),D$.setValue(H+$B,$.column,"i32")}function L9H(H){return{row:D$.getValue(H,"i32")>>>0,column:D$.getValue(H+$B,"i32")>>>0}}function oKD(H,$){$z(H,$.startPosition),H+=qh,$z(H,$.endPosition),H+=qh,D$.setValue(H,$.startIndex,"i32"),H+=$B,D$.setValue(H,$.endIndex,"i32"),H+=$B}function q_$(H){let $={};return $.startPosition=L9H(H),H+=qh,$.endPosition=L9H(H),H+=qh,$.startIndex=D$.getValue(H,"i32")>>>0,H+=$B,$.endIndex=D$.getValue(H,"i32")>>>0,$}function tKD(H,$=bD){$z($,H.startPosition),$+=qh,$z($,H.oldEndPosition),$+=qh,$z($,H.newEndPosition),$+=qh,D$.setValue($,H.startIndex,"i32"),$+=$B,D$.setValue($,H.oldEndIndex,"i32"),$+=$B,D$.setValue($,H.newEndIndex,"i32"),$+=$B}function sKD(H){let $={};return $.major_version=D$.getValue(H,"i32"),H+=$B,$.minor_version=D$.getValue(H,"i32"),H+=$B,$.field_count=D$.getValue(H,"i32"),$}function eKD(H,$,A,L){if(H.length!==3)throw Error(`Wrong number of arguments to \`#${A}\` predicate. Expected 2, got ${H.length-1}`);if(!rKD(H[1]))throw Error(`First argument of \`#${A}\` predicate must be a capture. Got "${H[1].value}"`);let I=A==="eq?"||A==="any-eq?",D=!A.startsWith("any-");if(rKD(H[2])){let B=H[1].name,f=H[2].name;L[$].push((E)=>{let M=[],G=[];for(let X of E){if(X.name===B)M.push(X.node);if(X.name===f)G.push(X.node)}let U=GA((X,J,F)=>{return F?X.text===J.text:X.text!==J.text},"compare");return D?M.every((X)=>G.some((J)=>U(X,J,I))):M.some((X)=>G.some((J)=>U(X,J,I)))})}else{let B=H[1].name,f=H[2].value,E=GA((G)=>G.text===f,"matches"),M=GA((G)=>G.text!==f,"doesNotMatch");L[$].push((G)=>{let U=[];for(let J of G)if(J.name===B)U.push(J.node);let X=I?E:M;return D?U.every(X):U.some(X)})}}function HQD(H,$,A,L){if(H.length!==3)throw Error(`Wrong number of arguments to \`#${A}\` predicate. Expected 2, got ${H.length-1}.`);if(H[1].type!=="capture")throw Error(`First argument of \`#${A}\` predicate must be a capture. Got "${H[1].value}".`);if(H[2].type!=="string")throw Error(`Second argument of \`#${A}\` predicate must be a string. Got @${H[2].name}.`);let I=A==="match?"||A==="any-match?",D=!A.startsWith("any-"),B=H[1].name,f=new RegExp(H[2].value);L[$].push((E)=>{let M=[];for(let U of E)if(U.name===B)M.push(U.node.text);let G=GA((U,X)=>{return X?f.test(U):!f.test(U)},"test");if(M.length===0)return!I;return D?M.every((U)=>G(U,I)):M.some((U)=>G(U,I))})}function $QD(H,$,A,L){if(H.length<2)throw Error(`Wrong number of arguments to \`#${A}\` predicate. Expected at least 1. Got ${H.length-1}.`);if(H[1].type!=="capture")throw Error(`First argument of \`#${A}\` predicate must be a capture. Got "${H[1].value}".`);let I=A==="any-of?",D=H[1].name,B=H.slice(2);if(!B.every(LZA))throw Error(`Arguments to \`#${A}\` predicate must be strings.".`);let f=B.map((E)=>E.value);L[$].push((E)=>{let M=[];for(let G of E)if(G.name===D)M.push(G.node.text);if(M.length===0)return!I;return M.every((G)=>f.includes(G))===I})}function AQD(H,$,A,L,I){if(H.length<2||H.length>3)throw Error(`Wrong number of arguments to \`#${A}\` predicate. Expected 1 or 2. Got ${H.length-1}.`);if(!H.every(LZA))throw Error(`Arguments to \`#${A}\` predicate must be strings.".`);let D=A==="is?"?L:I;if(!D[$])D[$]={};D[$][H[1].value]=H[2]?.value??null}function LQD(H,$,A){if(H.length<2||H.length>3)throw Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${H.length-1}.`);if(!H.every(LZA))throw Error('Arguments to `#set!` predicate must be strings.".');if(!A[$])A[$]={};A[$][H[1].value]=H[2]?.value??null}function IQD(H,$,A,L,I,D,B,f,E,M,G){if($===RH1){let U=L[A];D.push({type:"capture",name:U})}else if($===yH1)D.push({type:"string",value:I[A]});else if(D.length>0){if(D[0].type!=="string")throw Error("Predicates must begin with a literal value");let U=D[0].value;switch(U){case"any-not-eq?":case"not-eq?":case"any-eq?":case"eq?":eKD(D,H,U,B);break;case"any-not-match?":case"not-match?":case"any-match?":case"match?":HQD(D,H,U,B);break;case"not-any-of?":case"any-of?":$QD(D,H,U,B);break;case"is?":case"is-not?":AQD(D,H,U,M,G);break;case"set!":LQD(D,H,E);break;default:f[H].push({operator:U,operands:D.slice(1)})}D.length=0}}async function DQD(H){if(!Z_$)Z_$=await uH1(H);return Z_$}function BQD(){return!!Z_$}var NH1,GA=(H,$)=>NH1(H,"name",{value:$,configurable:!0}),nKD=2,$B=4,swA,oC,qh,ibH,oo,to,D$,OH1,xH1,SH1,jH1,RH1=1,yH1=2,vH1,xgE,rKD,LZA,PS,cbH,hH1,bH1,T_$,kH1,uH1,Z_$=null,bD,ewA,HZA,nbH;var fQD=K(()=>{NH1=Object.defineProperty,swA=4*$B,oC=5*$B,qh=2*$B,ibH=2*$B+2*qh,oo={row:0,column:0},to=Symbol("INTERNAL");GA(b7H,"assertInternal");GA(lbH,"isPoint");GA(aKD,"setModule");OH1=class{static{GA(this,"LookaheadIterator")}[0]=0;language;constructor(H,$,A){b7H(H),this[0]=$,this.language=A}get currentTypeId(){return D$._ts_lookahead_iterator_current_symbol(this[0])}get currentType(){return this.language.types[this.currentTypeId]||"ERROR"}delete(){D$._ts_lookahead_iterator_delete(this[0]),this[0]=0}reset(H,$){if(D$._ts_lookahead_iterator_reset(this[0],H[0],$))return this.language=H,!0;return!1}resetState(H){return Boolean(D$._ts_lookahead_iterator_reset_state(this[0],H))}[Symbol.iterator](){return{next:GA(()=>{if(D$._ts_lookahead_iterator_next(this[0]))return{done:!1,value:this.currentType};return{done:!0,value:""}},"next")}}};GA(AZA,"getText");xH1=class H{static{GA(this,"Tree")}[0]=0;textCallback;language;constructor($,A,L,I){b7H($),this[0]=A,this.language=L,this.textCallback=I}copy(){let $=D$._ts_tree_copy(this[0]);return new H(to,$,this.language,this.textCallback)}delete(){D$._ts_tree_delete(this[0]),this[0]=0}get rootNode(){return D$._ts_tree_root_node_wasm(this[0]),k4(this)}rootNodeWithOffset($,A){let L=bD+oC;return D$.setValue(L,$,"i32"),$z(L+$B,A),D$._ts_tree_root_node_with_offset_wasm(this[0]),k4(this)}edit($){tKD($),D$._ts_tree_edit_wasm(this[0])}walk(){return this.rootNode.walk()}getChangedRanges($){if(!($ instanceof H))throw TypeError("Argument must be a Tree");D$._ts_tree_get_changed_ranges_wasm(this[0],$[0]);let A=D$.getValue(bD,"i32"),L=D$.getValue(bD+$B,"i32"),I=Array(A);if(A>0){let D=L;for(let B=0;B<A;B++)I[B]=q_$(D),D+=ibH;D$._free(L)}return I}getIncludedRanges(){D$._ts_tree_included_ranges_wasm(this[0]);let $=D$.getValue(bD,"i32"),A=D$.getValue(bD+$B,"i32"),L=Array($);if($>0){let I=A;for(let D=0;D<$;D++)L[D]=q_$(I),I+=ibH;D$._free(A)}return L}},SH1=class H{static{GA(this,"TreeCursor")}[0]=0;[1]=0;[2]=0;[3]=0;tree;constructor($,A){b7H($),this.tree=A,Zw(this)}copy(){let $=new H(to,this.tree);return D$._ts_tree_cursor_copy_wasm(this.tree[0]),Zw($),$}delete(){zG(this),D$._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}get currentNode(){return zG(this),D$._ts_tree_cursor_current_node_wasm(this.tree[0]),k4(this.tree)}get currentFieldId(){return zG(this),D$._ts_tree_cursor_current_field_id_wasm(this.tree[0])}get currentFieldName(){return this.tree.language.fields[this.currentFieldId]}get currentDepth(){return zG(this),D$._ts_tree_cursor_current_depth_wasm(this.tree[0])}get currentDescendantIndex(){return zG(this),D$._ts_tree_cursor_current_descendant_index_wasm(this.tree[0])}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return zG(this),D$._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeStateId(){return zG(this),D$._ts_tree_cursor_current_node_state_id_wasm(this.tree[0])}get nodeId(){return zG(this),D$._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return zG(this),D$._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return zG(this),D$._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){zG(this);let $=D$._ts_tree_cursor_start_index_wasm(this.tree[0]),A=D$._ts_tree_cursor_end_index_wasm(this.tree[0]);D$._ts_tree_cursor_start_position_wasm(this.tree[0]);let L=L9H(bD);return AZA(this.tree,$,A,L)}get startPosition(){return zG(this),D$._ts_tree_cursor_start_position_wasm(this.tree[0]),L9H(bD)}get endPosition(){return zG(this),D$._ts_tree_cursor_end_position_wasm(this.tree[0]),L9H(bD)}get startIndex(){return zG(this),D$._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return zG(this),D$._ts_tree_cursor_end_index_wasm(this.tree[0])}gotoFirstChild(){zG(this);let $=D$._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return Zw(this),$===1}gotoLastChild(){zG(this);let $=D$._ts_tree_cursor_goto_last_child_wasm(this.tree[0]);return Zw(this),$===1}gotoParent(){zG(this);let $=D$._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return Zw(this),$===1}gotoNextSibling(){zG(this);let $=D$._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return Zw(this),$===1}gotoPreviousSibling(){zG(this);let $=D$._ts_tree_cursor_goto_previous_sibling_wasm(this.tree[0]);return Zw(this),$===1}gotoDescendant($){zG(this),D$._ts_tree_cursor_goto_descendant_wasm(this.tree[0],$),Zw(this)}gotoFirstChildForIndex($){zG(this),D$.setValue(bD+swA,$,"i32");let A=D$._ts_tree_cursor_goto_first_child_for_index_wasm(this.tree[0]);return Zw(this),A===1}gotoFirstChildForPosition($){zG(this),$z(bD+swA,$);let A=D$._ts_tree_cursor_goto_first_child_for_position_wasm(this.tree[0]);return Zw(this),A===1}reset($){e9($),zG(this,bD+oC),D$._ts_tree_cursor_reset_wasm(this.tree[0]),Zw(this)}resetTo($){zG(this,bD),zG($,bD+swA),D$._ts_tree_cursor_reset_to_wasm(this.tree[0],$.tree[0]),Zw(this)}},jH1=class{static{GA(this,"Node")}[0]=0;_children;_namedChildren;constructor(H,{id:$,tree:A,startIndex:L,startPosition:I,other:D}){b7H(H),this[0]=D,this.id=$,this.tree=A,this.startIndex=L,this.startPosition=I}id;startIndex;startPosition;tree;get typeId(){return e9(this),D$._ts_node_symbol_wasm(this.tree[0])}get grammarId(){return e9(this),D$._ts_node_grammar_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get grammarType(){return this.tree.language.types[this.grammarId]||"ERROR"}get isNamed(){return e9(this),D$._ts_node_is_named_wasm(this.tree[0])===1}get isExtra(){return e9(this),D$._ts_node_is_extra_wasm(this.tree[0])===1}get isError(){return e9(this),D$._ts_node_is_error_wasm(this.tree[0])===1}get isMissing(){return e9(this),D$._ts_node_is_missing_wasm(this.tree[0])===1}get hasChanges(){return e9(this),D$._ts_node_has_changes_wasm(this.tree[0])===1}get hasError(){return e9(this),D$._ts_node_has_error_wasm(this.tree[0])===1}get endIndex(){return e9(this),D$._ts_node_end_index_wasm(this.tree[0])}get endPosition(){return e9(this),D$._ts_node_end_point_wasm(this.tree[0]),L9H(bD)}get text(){return AZA(this.tree,this.startIndex,this.endIndex,this.startPosition)}get parseState(){return e9(this),D$._ts_node_parse_state_wasm(this.tree[0])}get nextParseState(){return e9(this),D$._ts_node_next_parse_state_wasm(this.tree[0])}equals(H){return this.tree===H.tree&&this.id===H.id}child(H){return e9(this),D$._ts_node_child_wasm(this.tree[0],H),k4(this.tree)}namedChild(H){return e9(this),D$._ts_node_named_child_wasm(this.tree[0],H),k4(this.tree)}childForFieldId(H){return e9(this),D$._ts_node_child_by_field_id_wasm(this.tree[0],H),k4(this.tree)}childForFieldName(H){let $=this.tree.language.fields.indexOf(H);if($!==-1)return this.childForFieldId($);return null}fieldNameForChild(H){e9(this);let $=D$._ts_node_field_name_for_child_wasm(this.tree[0],H);if(!$)return null;return D$.AsciiToString($)}fieldNameForNamedChild(H){e9(this);let $=D$._ts_node_field_name_for_named_child_wasm(this.tree[0],H);if(!$)return null;return D$.AsciiToString($)}childrenForFieldName(H){let $=this.tree.language.fields.indexOf(H);if($!==-1&&$!==0)return this.childrenForFieldId($);return[]}childrenForFieldId(H){e9(this),D$._ts_node_children_by_field_id_wasm(this.tree[0],H);let $=D$.getValue(bD,"i32"),A=D$.getValue(bD+$B,"i32"),L=Array($);if($>0){let I=A;for(let D=0;D<$;D++)L[D]=k4(this.tree,I),I+=oC;D$._free(A)}return L}firstChildForIndex(H){e9(this);let $=bD+oC;return D$.setValue($,H,"i32"),D$._ts_node_first_child_for_byte_wasm(this.tree[0]),k4(this.tree)}firstNamedChildForIndex(H){e9(this);let $=bD+oC;return D$.setValue($,H,"i32"),D$._ts_node_first_named_child_for_byte_wasm(this.tree[0]),k4(this.tree)}get childCount(){return e9(this),D$._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return e9(this),D$._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){e9(this),D$._ts_node_children_wasm(this.tree[0]);let H=D$.getValue(bD,"i32"),$=D$.getValue(bD+$B,"i32");if(this._children=Array(H),H>0){let A=$;for(let L=0;L<H;L++)this._children[L]=k4(this.tree,A),A+=oC;D$._free($)}}return this._children}get namedChildren(){if(!this._namedChildren){e9(this),D$._ts_node_named_children_wasm(this.tree[0]);let H=D$.getValue(bD,"i32"),$=D$.getValue(bD+$B,"i32");if(this._namedChildren=Array(H),H>0){let A=$;for(let L=0;L<H;L++)this._namedChildren[L]=k4(this.tree,A),A+=oC;D$._free($)}}return this._namedChildren}descendantsOfType(H,$=oo,A=oo){if(!Array.isArray(H))H=[H];let L=[],I=this.tree.language.types;for(let M of H)if(M=="ERROR")L.push(65535);for(let M=0,G=I.length;M<G;M++)if(H.includes(I[M]))L.push(M);let D=D$._malloc($B*L.length);for(let M=0,G=L.length;M<G;M++)D$.setValue(D+M*$B,L[M],"i32");e9(this),D$._ts_node_descendants_of_type_wasm(this.tree[0],D,L.length,$.row,$.column,A.row,A.column);let B=D$.getValue(bD,"i32"),f=D$.getValue(bD+$B,"i32"),E=Array(B);if(B>0){let M=f;for(let G=0;G<B;G++)E[G]=k4(this.tree,M),M+=oC}return D$._free(f),D$._free(D),E}get nextSibling(){return e9(this),D$._ts_node_next_sibling_wasm(this.tree[0]),k4(this.tree)}get previousSibling(){return e9(this),D$._ts_node_prev_sibling_wasm(this.tree[0]),k4(this.tree)}get nextNamedSibling(){return e9(this),D$._ts_node_next_named_sibling_wasm(this.tree[0]),k4(this.tree)}get previousNamedSibling(){return e9(this),D$._ts_node_prev_named_sibling_wasm(this.tree[0]),k4(this.tree)}get descendantCount(){return e9(this),D$._ts_node_descendant_count_wasm(this.tree[0])}get parent(){return e9(this),D$._ts_node_parent_wasm(this.tree[0]),k4(this.tree)}childWithDescendant(H){return e9(this),e9(H,1),D$._ts_node_child_with_descendant_wasm(this.tree[0]),k4(this.tree)}descendantForIndex(H,$=H){if(typeof H!=="number"||typeof $!=="number")throw Error("Arguments must be numbers");e9(this);let A=bD+oC;return D$.setValue(A,H,"i32"),D$.setValue(A+$B,$,"i32"),D$._ts_node_descendant_for_index_wasm(this.tree[0]),k4(this.tree)}namedDescendantForIndex(H,$=H){if(typeof H!=="number"||typeof $!=="number")throw Error("Arguments must be numbers");e9(this);let A=bD+oC;return D$.setValue(A,H,"i32"),D$.setValue(A+$B,$,"i32"),D$._ts_node_named_descendant_for_index_wasm(this.tree[0]),k4(this.tree)}descendantForPosition(H,$=H){if(!lbH(H)||!lbH($))throw Error("Arguments must be {row, column} objects");e9(this);let A=bD+oC;return $z(A,H),$z(A+qh,$),D$._ts_node_descendant_for_position_wasm(this.tree[0]),k4(this.tree)}namedDescendantForPosition(H,$=H){if(!lbH(H)||!lbH($))throw Error("Arguments must be {row, column} objects");e9(this);let A=bD+oC;return $z(A,H),$z(A+qh,$),D$._ts_node_named_descendant_for_position_wasm(this.tree[0]),k4(this.tree)}walk(){return e9(this),D$._ts_tree_cursor_new_wasm(this.tree[0]),new SH1(to,this.tree)}edit(H){if(this.startIndex>=H.oldEndIndex){this.startIndex=H.newEndIndex+(this.startIndex-H.oldEndIndex);let $,A;if(this.startPosition.row>H.oldEndPosition.row)$=this.startPosition.row-H.oldEndPosition.row,A=this.startPosition.column;else if($=0,A=this.startPosition.column,this.startPosition.column>=H.oldEndPosition.column)A=this.startPosition.column-H.oldEndPosition.column;if($>0)this.startPosition.row+=$,this.startPosition.column=A;else this.startPosition.column+=A}else if(this.startIndex>H.startIndex)this.startIndex=H.newEndIndex,this.startPosition.row=H.newEndPosition.row,this.startPosition.column=H.newEndPosition.column}toString(){e9(this);let H=D$._ts_node_to_string_wasm(this.tree[0]),$=D$.AsciiToString(H);return D$._free(H),$}};GA($ZA,"unmarshalCaptures");GA(e9,"marshalNode");GA(k4,"unmarshalNode");GA(zG,"marshalTreeCursor");GA(Zw,"unmarshalTreeCursor");GA($z,"marshalPoint");GA(L9H,"unmarshalPoint");GA(oKD,"marshalRange");GA(q_$,"unmarshalRange");GA(tKD,"marshalEdit");GA(sKD,"unmarshalLanguageMetadata");vH1=/[\w-]+/g,xgE={Zero:0,ZeroOrOne:1,ZeroOrMore:2,One:3,OneOrMore:4},rKD=GA((H)=>H.type==="capture","isCaptureStep"),LZA=GA((H)=>H.type==="string","isStringStep"),PS={Syntax:1,NodeName:2,FieldName:3,CaptureName:4,PatternStructure:5},cbH=class H extends Error{constructor($,A,L,I){super(H.formatMessage($,A));this.kind=$,this.info=A,this.index=L,this.length=I,this.name="QueryError"}static{GA(this,"QueryError")}static formatMessage($,A){switch($){case PS.NodeName:return`Bad node name '${A.word}'`;case PS.FieldName:return`Bad field name '${A.word}'`;case PS.CaptureName:return`Bad capture name @${A.word}`;case PS.PatternStructure:return`Bad pattern structure at offset ${A.suffix}`;case PS.Syntax:return`Bad syntax at offset ${A.suffix}`}}};GA(eKD,"parseAnyPredicate");GA(HQD,"parseMatchPredicate");GA($QD,"parseAnyOfPredicate");GA(AQD,"parseIsPredicate");GA(LQD,"parseSetDirective");GA(IQD,"parsePattern");hH1=class{static{GA(this,"Query")}[0]=0;exceededMatchLimit;textPredicates;captureNames;captureQuantifiers;predicates;setProperties;assertedProperties;refutedProperties;matchLimit;constructor(H,$){let A=D$.lengthBytesUTF8($),L=D$._malloc(A+1);D$.stringToUTF8($,L,A+1);let I=D$._ts_query_new(H[0],L,A,bD,bD+$B);if(!I){let W=D$.getValue(bD+$B,"i32"),P=D$.getValue(bD,"i32"),Y=D$.UTF8ToString(L,P).length,C=$.slice(Y,Y+100).split(`
${I}`:I;return q=ZKH(q,C,!0,f),q=q.replace(/\$\{CLAUDE_SESSION_ID\}/g,j$()),q=await Ia(q,{...Z,async getAppState(){let O=await Z.getAppState();return{...O,toolPermissionContext:{...O.toolPermissionContext,alwaysAllowRules:{...O.toolPermissionContext.alwaysAllowRules,command:D}}}}},`/${H}`),[{type:"text",text:q}]}}}async function qkH(H,$){let A=zH(),L=[];try{let I=A.readdirSync(H);for(let D of I)try{if(D.isDirectory()||D.isSymbolicLink()){let B=XM.join(H,D.name),f=XM.join(B,"SKILL.md");try{let E=A.readFileSync(f,{encoding:"utf-8"}),{frontmatter:M,content:G}=IK(E,f),U=D.name,X=M.description??Am(G,"Skill"),J=Yx(M["allowed-tools"]),F=M["user-invocable"]===void 0?!0:bC$(M["user-invocable"]),Q=bC$(M["disable-model-invocation"]),W=M.model==="inherit"?void 0:M.model?t8(M.model):void 0,P=S3D(M,U),Y=M.context==="fork"?"fork":void 0,C=M.agent,Z=PRH(M.arguments);L.push({skill:j3D({skillName:U,displayName:M.name,description:X,hasUserSpecifiedDescription:!!M.description,markdownContent:G,allowedTools:J,argumentHint:M["argument-hint"],argumentNames:Z,whenToUse:M.when_to_use,version:M.version,model:W,disableModelInvocation:Q,userInvocable:F,source:$,baseDir:B,loadedFrom:"skills",hooks:P,executionContext:Y,agent:C}),filePath:f})}catch{}}}catch(B){r(B instanceof Error?B:Error(String(B)))}}catch(I){let D=I.code;if(D!=="ENOENT"&&D!=="EACCES"&&D!=="EPERM")r(I instanceof Error?I:Error(String(I)))}return L}function ATA(H){return/^skill\.md$/i.test(XM.basename(H))}function sL1(H){let $=new Map;for(let L of H){let I=XM.dirname(L.filePath),D=$.get(I)??[];D.push(L),$.set(I,D)}let A=[];for(let[L,I]of $){let D=I.filter((B)=>ATA(B.filePath));if(D.length>0){let B=D[0];if(D.length>1)N(`Multiple skill files found in ${L}, using ${XM.basename(B.filePath)}`);A.push(B)}else A.push(...I)}return A}function R3D(H,$){let A=$.endsWith(XM.sep)?$.slice(0,-1):$;if(H===A)return"";let L=H.slice(A.length+1);return L?L.split(XM.sep).join(":"):""}function eL1(H,$){let A=XM.dirname(H),L=XM.dirname(A),I=XM.basename(A),D=R3D(L,$);return D?`${D}:${I}`:I}function HI1(H,$){let A=XM.basename(H),L=XM.dirname(H),I=A.replace(/\.md$/,""),D=R3D(L,$);return D?`${D}:${I}`:I}function $I1(H){return ATA(H.filePath)?eL1(H.filePath,H.baseDir):HI1(H.filePath,H.baseDir)}async function AI1(H){try{let $=await wm("commands",H),A=sL1($),L=[];for(let{baseDir:I,filePath:D,frontmatter:B,content:f,source:E}of A)try{let M=B.description??Am(f,"Custom command"),G=Yx(B["allowed-tools"]),U=B["user-invocable"]===void 0?!0:bC$(B["user-invocable"]),X=bC$(B["disable-model-invocation"]),J=B.model==="inherit"?void 0:B.model?t8(B.model):void 0,F=B.context==="fork"?"fork":void 0,Q=B.agent,P=ATA(D)?XM.dirname(D):void 0,Y=$I1({baseDir:I,filePath:D,frontmatter:B,content:f,source:E}),C=S3D(B,Y),Z=PRH(B.arguments);L.push({skill:j3D({skillName:Y,displayName:void 0,description:M,hasUserSpecifiedDescription:!!B.description,markdownContent:f,allowedTools:G,argumentHint:B["argument-hint"],argumentNames:Z,whenToUse:B.when_to_use,version:B.version,model:J,disableModelInvocation:X,userInvocable:U,source:E,baseDir:P,loadedFrom:"commands_DEPRECATED",hooks:C,executionContext:F,agent:Q}),filePath:D})}catch(M){r(M instanceof Error?M:Error(String(M)))}return L}catch($){return r($ instanceof Error?$:Error(String($))),[]}}function kC$(){LTA.cache?.clear?.(),wm.cache?.clear?.()}function v3D(H){y3D.push(H)}function V6H(H,$){let A=zH(),L=$.endsWith(XM.sep)?$.slice(0,-1):$,I=[];for(let D of H){let B=XM.dirname(D);while(B.startsWith(L+XM.sep)){let f=XM.join(B,".claude","skills");if(!O3D.has(f))try{A.statSync(f),I.push(f),O3D.add(f)}catch{}let E=XM.dirname(B);if(E===B)break;B=E}}return I.sort((D,B)=>B.split(XM.sep).length-D.split(XM.sep).length)}async function P6H(H){if(H.length===0)return;let $=new Set(TkH.keys()),A=await Promise.all(H.map((I)=>qkH(I,"projectSettings")));for(let I=A.length-1;I>=0;I--)for(let{skill:D}of A[I]??[])if(D.type==="prompt")TkH.set(D.name,D);let L=A.flat().length;if(L>0){let I=[...TkH.keys()].filter((D)=>!$.has(D));if(N(`[skills] Dynamically discovered ${L} skills from ${H.length} directories`),I.length>0)c("tengu_dynamic_skills_changed",{source:"file_operation",previousCount:$.size,newCount:TkH.size,addedCount:I.length,directoryCount:H.length})}for(let I of y3D)try{I()}catch(D){r(D instanceof Error?D:Error(String(D)))}}function h3D(){return Array.from(TkH.values())}var x3D,XM,LTA,O3D,TkH,y3D;var qt=K(()=>{aD();_$();E$();z$();tFH();Lm();DL();Mu();NA();w$H();K4();iI();Nk();s2();p$();_RH();x3D=require("fs"),XM=require("path");LTA=o$(async(H)=>{let $=XM.join(UL(),"skills"),A=XM.join(x_(),".claude","skills"),L=ITA("skills",H);N(`Loading skills from: managed=${A}, user=${$}, project=[${L.join(", ")}]`);let[I,D,B]=await Promise.all([qkH(A,"policySettings"),oJ("userSettings")?qkH($,"userSettings"):Promise.resolve([]),oJ("projectSettings")?Promise.all(L.map((F)=>qkH(F,"projectSettings"))):Promise.resolve([])]),f=QN(),E=oJ("projectSettings")?await Promise.all(f.map((F)=>qkH(XM.join(F,".claude","skills"),"projectSettings"))):[],M=await AI1(H),G=[...I,...D,...B.flat(),...E.flat(),...M],U=new Map,X=[];for(let{skill:F,filePath:Q}of G){if(F.type!=="prompt")continue;let W=tL1(Q);if(W===null){X.push(F);continue}let P=U.get(W);if(P!==void 0){N(`Skipping duplicate skill '${F.name}' from ${F.source} (same file already loaded from ${P})`);continue}U.set(W,F.source),X.push(F)}let J=G.length-X.length;if(J>0)N(`Deduplicated ${J} skills (same file)`);return N(`Loaded ${X.length} unique skills (managed: ${I.length}, user: ${D.length}, project: ${B.flat().length}, additional: ${E.flat().length}, legacy commands: ${M.length})`),X});O3D=new Set,TkH=new Map,y3D=[]});var Tt,q3;var F9H=K(()=>{z$();X4$();lD();VI();p$();yg();sWD();sDH();AM();CM();DL();e0H();Wt();_kH();_$();E$();U4$();d6D();sC();X6H();eqA();jD();ZkH();qt();Tt=require("path"),q3={name:ZB,maxResultSizeChars:1e5,strict:!0,async description(){return"A tool for editing files"},async prompt(){return tWD()},userFacingName:yC$,getToolUseSummary:sqA,getActivityDescription(H){let $=sqA(H);return $?`Editing ${$}`:"Editing file"},isEnabled(){return!0},inputSchema:G4$,outputSchema:RPI,isConcurrencySafe(){return!1},isReadOnly(){return!1},getPath(H){return H.file_path},async checkPermissions(H,$){let A=await $.getAppState();return K9H(q3,H,A.toolPermissionContext)},renderToolUseMessage:P3D,renderToolUseProgressMessage:_3D,renderToolResultMessage:C3D,renderToolUseRejectedMessage:Y3D,renderToolUseErrorMessage:w3D,async validateInput({file_path:H,old_string:$,new_string:A,replace_all:L=!1},I){if($===A)return{result:!1,behavior:"ask",message:"No changes to make: old_string and new_string are exactly the same.",errorCode:1};let D=OD(H),B=await I.getAppState();if(oQ(D,B.toolPermissionContext,"edit","deny")!==null)return{result:!1,behavior:"ask",message:"File is in a directory that is denied by your permission settings.",errorCode:2};let E=zH();if(E.existsSync(D)&&$===""){if(E.readFileSync(D,{encoding:aJ(D)}).replaceAll(`\r
${JSON.stringify(I,null,2)}`),Error("Language.load failed: no language function found in WASM file");let B=L[D]();return new H(to,B)}},kH1=(()=>{var _scriptName="file:///home/runner/work/claude-cli-internal/claude-cli-internal/node_modules/web-tree-sitter/tree-sitter.js";return async function(moduleArg={}){var moduleRtn,Module=moduleArg,readyPromiseResolve,readyPromiseReject,readyPromise=new Promise((H,$)=>{readyPromiseResolve=H,readyPromiseReject=$}),ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof WorkerGlobalScope<"u",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer",ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;if(ENVIRONMENT_IS_NODE){let{createRequire:H}=await import("module");var require=H("file:///home/runner/work/claude-cli-internal/claude-cli-internal/node_modules/web-tree-sitter/tree-sitter.js")}Module.currentQueryProgressCallback=null,Module.currentProgressCallback=null,Module.currentLogCallback=null,Module.currentParseCallback=null;var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=GA((H,$)=>{throw $},"quit_"),scriptDirectory="";function locateFile(H){if(Module.locateFile)return Module.locateFile(H,scriptDirectory);return scriptDirectory+H}GA(locateFile,"locateFile");var readAsync,readBinary;if(ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");if(!"file:///home/runner/work/claude-cli-internal/claude-cli-internal/node_modules/web-tree-sitter/tree-sitter.js".startsWith("data:"))scriptDirectory=nodePath.dirname(require("url").fileURLToPath("file:///home/runner/work/claude-cli-internal/claude-cli-internal/node_modules/web-tree-sitter/tree-sitter.js"))+"/";if(readBinary=GA((H)=>{H=isFileURI(H)?new URL(H):H;var $=fs.readFileSync(H);return $},"readBinary"),readAsync=GA(async(H,$=!0)=>{H=isFileURI(H)?new URL(H):H;var A=fs.readFileSync(H,$?void 0:"utf8");return A},"readAsync"),!Module.thisProgram&&process.argv.length>1)thisProgram=process.argv[1].replace(/\\/g,"/");arguments_=process.argv.slice(2),quit_=GA((H,$)=>{throw process.exitCode=H,$},"quit_")}else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(ENVIRONMENT_IS_WORKER)scriptDirectory=self.location.href;else if(typeof document<"u"&&document.currentScript)scriptDirectory=document.currentScript.src;if(_scriptName)scriptDirectory=_scriptName;if(scriptDirectory.startsWith("blob:"))scriptDirectory="";else scriptDirectory=scriptDirectory.slice(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1);{if(ENVIRONMENT_IS_WORKER)readBinary=GA((H)=>{var $=new XMLHttpRequest;return $.open("GET",H,!1),$.responseType="arraybuffer",$.send(null),new Uint8Array($.response)},"readBinary");readAsync=GA(async(H)=>{if(isFileURI(H))return new Promise((A,L)=>{var I=new XMLHttpRequest;I.open("GET",H,!0),I.responseType="arraybuffer",I.onload=()=>{if(I.status==200||I.status==0&&I.response){A(I.response);return}L(I.status)},I.onerror=L,I.send(null)});var $=await fetch(H,{credentials:"same-origin"});if($.ok)return $.arrayBuffer();throw Error($.status+" : "+$.url)},"readAsync")}}var out=Module.print||console.log.bind(console),err=Module.printErr||console.error.bind(console);if(Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments)arguments_=Module.arguments;if(Module.thisProgram)thisProgram=Module.thisProgram;var dynamicLibraries=Module.dynamicLibraries||[],wasmBinary=Module.wasmBinary,wasmMemory,ABORT=!1,EXITSTATUS;function assert(H,$){if(!H)abort($)}GA(assert,"assert");var HEAP,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAP64,HEAPU64,HEAPF64,HEAP_DATA_VIEW,runtimeInitialized=!1,isFileURI=GA((H)=>H.startsWith("file://"),"isFileURI");function updateMemoryViews(){var H=wasmMemory.buffer;Module.HEAP_DATA_VIEW=HEAP_DATA_VIEW=new DataView(H),Module.HEAP8=HEAP8=new Int8Array(H),Module.HEAP16=HEAP16=new Int16Array(H),Module.HEAPU8=HEAPU8=new Uint8Array(H),Module.HEAPU16=HEAPU16=new Uint16Array(H),Module.HEAP32=HEAP32=new Int32Array(H),Module.HEAPU32=HEAPU32=new Uint32Array(H),Module.HEAPF32=HEAPF32=new Float32Array(H),Module.HEAPF64=HEAPF64=new Float64Array(H),Module.HEAP64=HEAP64=new BigInt64Array(H),Module.HEAPU64=HEAPU64=new BigUint64Array(H)}if(GA(updateMemoryViews,"updateMemoryViews"),Module.wasmMemory)wasmMemory=Module.wasmMemory;else{var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768})}updateMemoryViews();var __RELOC_FUNCS__=[];function preRun(){if(Module.preRun){if(typeof Module.preRun=="function")Module.preRun=[Module.preRun];while(Module.preRun.length)addOnPreRun(Module.preRun.shift())}callRuntimeCallbacks(onPreRuns)}GA(preRun,"preRun");function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),wasmExports.__wasm_call_ctors(),callRuntimeCallbacks(onPostCtors)}GA(initRuntime,"initRuntime");function preMain(){}GA(preMain,"preMain");function postRun(){if(Module.postRun){if(typeof Module.postRun=="function")Module.postRun=[Module.postRun];while(Module.postRun.length)addOnPostRun(Module.postRun.shift())}callRuntimeCallbacks(onPostRuns)}GA(postRun,"postRun");var runDependencies=0,dependenciesFulfilled=null;function getUniqueRunDependency(H){return H}GA(getUniqueRunDependency,"getUniqueRunDependency");function addRunDependency(H){runDependencies++,Module.monitorRunDependencies?.(runDependencies)}GA(addRunDependency,"addRunDependency");function removeRunDependency(H){if(runDependencies--,Module.monitorRunDependencies?.(runDependencies),runDependencies==0){if(dependenciesFulfilled){var $=dependenciesFulfilled;dependenciesFulfilled=null,$()}}}GA(removeRunDependency,"removeRunDependency");function abort(H){Module.onAbort?.(H),H="Aborted("+H+")",err(H),ABORT=!0,H+=". Build with -sASSERTIONS for more info.";var $=new WebAssembly.RuntimeError(H);throw readyPromiseReject($),$}GA(abort,"abort");var wasmBinaryFile;function findWasmBinary(){if(Module.locateFile)return locateFile("tree-sitter.wasm");return new URL("tree-sitter.wasm","file:///home/runner/work/claude-cli-internal/claude-cli-internal/node_modules/web-tree-sitter/tree-sitter.js").href}GA(findWasmBinary,"findWasmBinary");function getBinarySync(H){if(H==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(H);throw"both async and sync fetching of the wasm failed"}GA(getBinarySync,"getBinarySync");async function getWasmBinary(H){if(!wasmBinary)try{var $=await readAsync(H);return new Uint8Array($)}catch{}return getBinarySync(H)}GA(getWasmBinary,"getWasmBinary");async function instantiateArrayBuffer(H,$){try{var A=await getWasmBinary(H),L=await WebAssembly.instantiate(A,$);return L}catch(I){err(`failed to asynchronously prepare wasm: ${I}`),abort(I)}}GA(instantiateArrayBuffer,"instantiateArrayBuffer");async function instantiateAsync(H,$,A){if(!H&&typeof WebAssembly.instantiateStreaming=="function"&&!isFileURI($)&&!ENVIRONMENT_IS_NODE)try{var L=fetch($,{credentials:"same-origin"}),I=await WebAssembly.instantiateStreaming(L,A);return I}catch(D){err(`wasm streaming compile failed: ${D}`),err("falling back to ArrayBuffer instantiation")}return instantiateArrayBuffer($,A)}GA(instantiateAsync,"instantiateAsync");function getWasmImports(){return{env:wasmImports,wasi_snapshot_preview1:wasmImports,"GOT.mem":new Proxy(wasmImports,GOTHandler),"GOT.func":new Proxy(wasmImports,GOTHandler)}}GA(getWasmImports,"getWasmImports");async function createWasm(){function H(D,B){wasmExports=D.exports,wasmExports=relocateExports(wasmExports,1024);var f=getDylinkMetadata(B);if(f.neededDynlibs)dynamicLibraries=f.neededDynlibs.concat(dynamicLibraries);return mergeLibSymbols(wasmExports,"main"),LDSO.init(),loadDylibs(),__RELOC_FUNCS__.push(wasmExports.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate"),wasmExports}GA(H,"receiveInstance"),addRunDependency("wasm-instantiate");function $(D){return H(D.instance,D.module)}GA($,"receiveInstantiationResult");var A=getWasmImports();if(Module.instantiateWasm)return new Promise((D,B)=>{Module.instantiateWasm(A,(f,E)=>{H(f,E),D(f.exports)})});wasmBinaryFile??=findWasmBinary();try{var L=await instantiateAsync(wasmBinary,wasmBinaryFile,A),I=$(L);return I}catch(D){return readyPromiseReject(D),Promise.reject(D)}}GA(createWasm,"createWasm");var ASM_CONSTS={};class ExitStatus{static{GA(this,"ExitStatus")}name="ExitStatus";constructor(H){this.message=`Program terminated with exit(${H})`,this.status=H}}var GOT={},currentModuleWeakSymbols=new Set([]),GOTHandler={get(H,$){var A=GOT[$];if(!A)A=GOT[$]=new WebAssembly.Global({value:"i32",mutable:!0});if(!currentModuleWeakSymbols.has($))A.required=!0;return A}},LE_HEAP_LOAD_F32=GA((H)=>HEAP_DATA_VIEW.getFloat32(H,!0),"LE_HEAP_LOAD_F32"),LE_HEAP_LOAD_F64=GA((H)=>HEAP_DATA_VIEW.getFloat64(H,!0),"LE_HEAP_LOAD_F64"),LE_HEAP_LOAD_I16=GA((H)=>HEAP_DATA_VIEW.getInt16(H,!0),"LE_HEAP_LOAD_I16"),LE_HEAP_LOAD_I32=GA((H)=>HEAP_DATA_VIEW.getInt32(H,!0),"LE_HEAP_LOAD_I32"),LE_HEAP_LOAD_U16=GA((H)=>HEAP_DATA_VIEW.getUint16(H,!0),"LE_HEAP_LOAD_U16"),LE_HEAP_LOAD_U32=GA((H)=>HEAP_DATA_VIEW.getUint32(H,!0),"LE_HEAP_LOAD_U32"),LE_HEAP_STORE_F32=GA((H,$)=>HEAP_DATA_VIEW.setFloat32(H,$,!0),"LE_HEAP_STORE_F32"),LE_HEAP_STORE_F64=GA((H,$)=>HEAP_DATA_VIEW.setFloat64(H,$,!0),"LE_HEAP_STORE_F64"),LE_HEAP_STORE_I16=GA((H,$)=>HEAP_DATA_VIEW.setInt16(H,$,!0),"LE_HEAP_STORE_I16"),LE_HEAP_STORE_I32=GA((H,$)=>HEAP_DATA_VIEW.setInt32(H,$,!0),"LE_HEAP_STORE_I32"),LE_HEAP_STORE_U16=GA((H,$)=>HEAP_DATA_VIEW.setUint16(H,$,!0),"LE_HEAP_STORE_U16"),LE_HEAP_STORE_U32=GA((H,$)=>HEAP_DATA_VIEW.setUint32(H,$,!0),"LE_HEAP_STORE_U32"),callRuntimeCallbacks=GA((H)=>{while(H.length>0)H.shift()(Module)},"callRuntimeCallbacks"),onPostRuns=[],addOnPostRun=GA((H)=>onPostRuns.unshift(H),"addOnPostRun"),onPreRuns=[],addOnPreRun=GA((H)=>onPreRuns.unshift(H),"addOnPreRun"),UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder:void 0,UTF8ArrayToString=GA((H,$=0,A=NaN)=>{var L=$+A,I=$;while(H[I]&&!(I>=L))++I;if(I-$>16&&H.buffer&&UTF8Decoder)return UTF8Decoder.decode(H.subarray($,I));var D="";while($<I){var B=H[$++];if(!(B&128)){D+=String.fromCharCode(B);continue}var f=H[$++]&63;if((B&224)==192){D+=String.fromCharCode((B&31)<<6|f);continue}var E=H[$++]&63;if((B&240)==224)B=(B&15)<<12|f<<6|E;else B=(B&7)<<18|f<<12|E<<6|H[$++]&63;if(B<65536)D+=String.fromCharCode(B);else{var M=B-65536;D+=String.fromCharCode(55296|M>>10,56320|M&1023)}}return D},"UTF8ArrayToString"),getDylinkMetadata=GA((H)=>{var $=0,A=0;function L(){return H[$++]}GA(L,"getU8");function I(){var d=0,k=1;while(!0){var n=H[$++];if(d+=(n&127)*k,k*=128,!(n&128))break}return d}GA(I,"getLEB");function D(){var d=I();return $+=d,UTF8ArrayToString(H,$-d,d)}GA(D,"getString");function B(d,k){if(d)throw Error(k)}GA(B,"failIf");var f="dylink.0";if(H instanceof WebAssembly.Module){var E=WebAssembly.Module.customSections(H,f);if(E.length===0)f="dylink",E=WebAssembly.Module.customSections(H,f);B(E.length===0,"need dylink section"),H=new Uint8Array(E[0]),A=H.length}else{var M=new Uint32Array(new Uint8Array(H.subarray(0,24)).buffer),G=M[0]==1836278016||M[0]==6386541;B(!G,"need to see wasm magic number"),B(H[8]!==0,"need the dylink section to be first"),$=9;var U=I();A=$+U,f=D()}var X={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(f=="dylink"){X.memorySize=I(),X.memoryAlign=I(),X.tableSize=I(),X.tableAlign=I();var J=I();for(var F=0;F<J;++F){var Q=D();X.neededDynlibs.push(Q)}}else{B(f!=="dylink.0");var W=1,P=2,Y=3,C=4,Z=256,q=3,O=1;while($<A){var j=L(),u=I();if(j===W)X.memorySize=I(),X.memoryAlign=I(),X.tableSize=I(),X.tableAlign=I();else if(j===P){var J=I();for(var F=0;F<J;++F)Q=D(),X.neededDynlibs.push(Q)}else if(j===Y){var y=I();while(y--){var g=D(),v=I();if(v&Z)X.tlsExports.add(g)}}else if(j===C){var y=I();while(y--){var p=D(),g=D(),v=I();if((v&q)==O)X.weakImports.add(g)}}else $+=u}}return X},"getDylinkMetadata");function getValue(H,$="i8"){if($.endsWith("*"))$="*";switch($){case"i1":return HEAP8[H];case"i8":return HEAP8[H];case"i16":return LE_HEAP_LOAD_I16((H>>1)*2);case"i32":return LE_HEAP_LOAD_I32((H>>2)*4);case"i64":return HEAP64[H>>3];case"float":return LE_HEAP_LOAD_F32((H>>2)*4);case"double":return LE_HEAP_LOAD_F64((H>>3)*8);case"*":return LE_HEAP_LOAD_U32((H>>2)*4);default:abort(`invalid type for getValue: ${$}`)}}GA(getValue,"getValue");var newDSO=GA((H,$,A)=>{var L={refcount:1/0,name:H,exports:A,global:!0};if(LDSO.loadedLibsByName[H]=L,$!=null)LDSO.loadedLibsByHandle[$]=L;return L},"newDSO"),LDSO={loadedLibsByName:{},loadedLibsByHandle:{},init(){newDSO("__main__",0,wasmImports)}},___heap_base=78224,alignMemory=GA((H,$)=>Math.ceil(H/$)*$,"alignMemory"),getMemory=GA((H)=>{if(runtimeInitialized)return _calloc(H,1);var $=___heap_base,A=$+alignMemory(H,16);return ___heap_base=A,GOT.__heap_base.value=A,$},"getMemory"),isInternalSym=GA((H)=>["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm","__start_em_js","__stop_em_js"].includes(H)||H.startsWith("__em_js__"),"isInternalSym"),uleb128Encode=GA((H,$)=>{if(H<128)$.push(H);else $.push(H%128|128,H>>7)},"uleb128Encode"),sigToWasmTypes=GA((H)=>{var $={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},A={parameters:[],results:H[0]=="v"?[]:[$[H[0]]]};for(var L=1;L<H.length;++L)A.parameters.push($[H[L]]);return A},"sigToWasmTypes"),generateFuncType=GA((H,$)=>{var A=H.slice(0,1),L=H.slice(1),I={i:127,p:127,j:126,f:125,d:124,e:111};$.push(96),uleb128Encode(L.length,$);for(var D=0;D<L.length;++D)$.push(I[L[D]]);if(A=="v")$.push(0);else $.push(1,I[A])},"generateFuncType"),convertJsFunctionToWasm=GA((H,$)=>{if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes($),H);var A=[1];generateFuncType($,A);var L=[0,97,115,109,1,0,0,0,1];uleb128Encode(A.length,L),L.push(...A),L.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var I=new WebAssembly.Module(new Uint8Array(L)),D=new WebAssembly.Instance(I,{e:{f:H}}),B=D.exports.f;return B},"convertJsFunctionToWasm"),wasmTableMirror=[],wasmTable=new WebAssembly.Table({initial:31,element:"anyfunc"}),getWasmTableEntry=GA((H)=>{var $=wasmTableMirror[H];if(!$){if(H>=wasmTableMirror.length)wasmTableMirror.length=H+1;wasmTableMirror[H]=$=wasmTable.get(H)}return $},"getWasmTableEntry"),updateTableMap=GA((H,$)=>{if(functionsInTableMap)for(var A=H;A<H+$;A++){var L=getWasmTableEntry(A);if(L)functionsInTableMap.set(L,A)}},"updateTableMap"),functionsInTableMap,getFunctionAddress=GA((H)=>{if(!functionsInTableMap)functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length);return functionsInTableMap.get(H)||0},"getFunctionAddress"),freeTableIndexes=[],getEmptyTableSlot=GA(()=>{if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(H){if(!(H instanceof RangeError))throw H;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}return wasmTable.length-1},"getEmptyTableSlot"),setWasmTableEntry=GA((H,$)=>{wasmTable.set(H,$),wasmTableMirror[H]=wasmTable.get(H)},"setWasmTableEntry"),addFunction=GA((H,$)=>{var A=getFunctionAddress(H);if(A)return A;var L=getEmptyTableSlot();try{setWasmTableEntry(L,H)}catch(D){if(!(D instanceof TypeError))throw D;var I=convertJsFunctionToWasm(H,$);setWasmTableEntry(L,I)}return functionsInTableMap.set(H,L),L},"addFunction"),updateGOT=GA((H,$)=>{for(var A in H){if(isInternalSym(A))continue;var L=H[A];if(GOT[A]||=new WebAssembly.Global({value:"i32",mutable:!0}),$||GOT[A].value==0)if(typeof L=="function")GOT[A].value=addFunction(L);else if(typeof L=="number")GOT[A].value=L;else err(`unhandled export type for '${A}': ${typeof L}`)}},"updateGOT"),relocateExports=GA((H,$,A)=>{var L={};for(var I in H){var D=H[I];if(typeof D=="object")D=D.value;if(typeof D=="number")D+=$;L[I]=D}return updateGOT(L,A),L},"relocateExports"),isSymbolDefined=GA((H)=>{var $=wasmImports[H];if(!$||$.stub)return!1;return!0},"isSymbolDefined"),dynCall=GA((H,$,A=[])=>{var L=getWasmTableEntry($)(...A);return L},"dynCall"),stackSave=GA(()=>_emscripten_stack_get_current(),"stackSave"),stackRestore=GA((H)=>__emscripten_stack_restore(H),"stackRestore"),createInvokeFunction=GA((H)=>($,...A)=>{var L=stackSave();try{return dynCall(H,$,A)}catch(I){if(stackRestore(L),I!==I+0)throw I;if(_setThrew(1,0),H[0]=="j")return 0n}},"createInvokeFunction"),resolveGlobalSymbol=GA((H,$=!1)=>{var A;if(isSymbolDefined(H))A=wasmImports[H];else if(H.startsWith("invoke_"))A=wasmImports[H]=createInvokeFunction(H.split("_")[1]);return{sym:A,name:H}},"resolveGlobalSymbol"),onPostCtors=[],addOnPostCtor=GA((H)=>onPostCtors.unshift(H),"addOnPostCtor"),UTF8ToString=GA((H,$)=>H?UTF8ArrayToString(HEAPU8,H,$):"","UTF8ToString"),loadWebAssemblyModule=GA((binary,flags,libName,localScope,handle)=>{var metadata=getDylinkMetadata(binary);currentModuleWeakSymbols=metadata.weakImports;function loadModule(){var memAlign=Math.pow(2,metadata.memoryAlign),memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;if(handle)HEAP8[handle+8]=1,LE_HEAP_STORE_U32((handle+12>>2)*4,memoryBase),LE_HEAP_STORE_I32((handle+16>>2)*4,metadata.memorySize),LE_HEAP_STORE_U32((handle+20>>2)*4,tableBase),LE_HEAP_STORE_I32((handle+24>>2)*4,metadata.tableSize);if(metadata.tableSize)wasmTable.grow(metadata.tableSize);var moduleExports;function resolveSymbol(H){var $=resolveGlobalSymbol(H).sym;if(!$&&localScope)$=localScope[H];if(!$)$=moduleExports[H];return $}GA(resolveSymbol,"resolveSymbol");var proxyHandler={get(H,$){switch($){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if($ in wasmImports&&!wasmImports[$].stub){var A=wasmImports[$];return A}if(!($ in H)){var L;H[$]=(...I)=>{return L||=resolveSymbol($),L(...I)}}return H[$]}},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(module,instance){if(updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),!flags.allowUndefined)reportUndefinedSymbols();function addEmAsm(addr,body){var args=[],arity=0;for(;arity<16;arity++)if(body.indexOf("$"+arity)!=-1)args.push("$"+arity);else break;args=args.join(",");var func=`(${args}) => { ${body} };`;ASM_CONSTS[start]=eval(func)}if(GA(addEmAsm,"addEmAsm"),"__start_em_asm"in moduleExports){var{__start_em_asm:start,__stop_em_asm:stop}=moduleExports;while(start<stop){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}}function addEmJs(name,cSig,body){var jsArgs=[];if(cSig=cSig.slice(1,-1),cSig!="void"){cSig=cSig.split(",");for(var i in cSig){var jsArg=cSig[i].split(" ").pop();jsArgs.push(jsArg.replace("*",""))}}var func=`(${jsArgs}) => ${body};`;moduleExports[name]=eval(func)}GA(addEmJs,"addEmJs");for(var name in moduleExports)if(name.startsWith("__em_js__")){var start=moduleExports[name],jsString=UTF8ToString(start),parts=jsString.split("<::>");addEmJs(name.replace("__em_js__",""),parts[0],parts[1]),delete moduleExports[name]}var applyRelocs=moduleExports.__wasm_apply_data_relocs;if(applyRelocs)if(runtimeInitialized)applyRelocs();else __RELOC_FUNCS__.push(applyRelocs);var init=moduleExports.__wasm_call_ctors;if(init)if(runtimeInitialized)init();else addOnPostCtor(init);return moduleExports}if(GA(postInstantiation,"postInstantiation"),flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(binary,instance))}return WebAssembly.instantiate(binary,info).then((H)=>postInstantiation(H.module,H.instance))}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(module,instance)}if(GA(loadModule,"loadModule"),flags.loadAsync)return metadata.neededDynlibs.reduce((H,$)=>H.then(()=>loadDynamicLibrary($,flags,localScope)),Promise.resolve()).then(loadModule);return metadata.neededDynlibs.forEach((H)=>loadDynamicLibrary(H,flags,localScope)),loadModule()},"loadWebAssemblyModule"),mergeLibSymbols=GA((H,$)=>{for(var[A,L]of Object.entries(H)){let I=GA((B)=>{if(!isSymbolDefined(B))wasmImports[B]=L},"setImport");I(A);let D="__main_argc_argv";if(A=="main")I(D);if(A==D)I("main")}},"mergeLibSymbols"),asyncLoad=GA(async(H)=>{var $=await readAsync(H);return new Uint8Array($)},"asyncLoad");function loadDynamicLibrary(H,$={global:!0,nodelete:!0},A,L){var I=LDSO.loadedLibsByName[H];if(I){if(!$.global){if(A)Object.assign(A,I.exports)}else if(!I.global)I.global=!0,mergeLibSymbols(I.exports,H);if($.nodelete&&I.refcount!==1/0)I.refcount=1/0;if(I.refcount++,L)LDSO.loadedLibsByHandle[L]=I;return $.loadAsync?Promise.resolve(!0):!0}I=newDSO(H,L,"loading"),I.refcount=$.nodelete?1/0:1,I.global=$.global;function D(){if(L){var E=LE_HEAP_LOAD_U32((L+28>>2)*4),M=LE_HEAP_LOAD_U32((L+32>>2)*4);if(E&&M){var G=HEAP8.slice(E,E+M);return $.loadAsync?Promise.resolve(G):G}}var U=locateFile(H);if($.loadAsync)return asyncLoad(U);if(!readBinary)throw Error(`${U}: file not found, and synchronous loading of external files is not available`);return readBinary(U)}GA(D,"loadLibData");function B(){if($.loadAsync)return D().then((E)=>loadWebAssemblyModule(E,$,H,A,L));return loadWebAssemblyModule(D(),$,H,A,L)}GA(B,"getExports");function f(E){if(I.global)mergeLibSymbols(E,H);else if(A)Object.assign(A,E);I.exports=E}if(GA(f,"moduleLoaded"),$.loadAsync)return B().then((E)=>{return f(E),!0});return f(B()),!0}GA(loadDynamicLibrary,"loadDynamicLibrary");var reportUndefinedSymbols=GA(()=>{for(var[H,$]of Object.entries(GOT))if($.value==0){var A=resolveGlobalSymbol(H,!0).sym;if(!A&&!$.required)continue;if(typeof A=="function")$.value=addFunction(A,A.sig);else if(typeof A=="number")$.value=A;else throw Error(`bad export type for '${H}': ${typeof A}`)}},"reportUndefinedSymbols"),loadDylibs=GA(()=>{if(!dynamicLibraries.length){reportUndefinedSymbols();return}addRunDependency("loadDylibs"),dynamicLibraries.reduce((H,$)=>H.then(()=>loadDynamicLibrary($,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})),Promise.resolve()).then(()=>{reportUndefinedSymbols(),removeRunDependency("loadDylibs")})},"loadDylibs"),noExitRuntime=Module.noExitRuntime||!0;function setValue(H,$,A="i8"){if(A.endsWith("*"))A="*";switch(A){case"i1":HEAP8[H]=$;break;case"i8":HEAP8[H]=$;break;case"i16":LE_HEAP_STORE_I16((H>>1)*2,$);break;case"i32":LE_HEAP_STORE_I32((H>>2)*4,$);break;case"i64":HEAP64[H>>3]=BigInt($);break;case"float":LE_HEAP_STORE_F32((H>>2)*4,$);break;case"double":LE_HEAP_STORE_F64((H>>3)*8,$);break;case"*":LE_HEAP_STORE_U32((H>>2)*4,$);break;default:abort(`invalid type for setValue: ${A}`)}}GA(setValue,"setValue");var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78224),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),__abort_js=GA(()=>abort(""),"__abort_js");__abort_js.sig="v";var _emscripten_get_now=GA(()=>performance.now(),"_emscripten_get_now");_emscripten_get_now.sig="d";var _emscripten_date_now=GA(()=>Date.now(),"_emscripten_date_now");_emscripten_date_now.sig="d";var nowIsMonotonic=1,checkWasiClock=GA((H)=>H>=0&&H<=3,"checkWasiClock"),INT53_MAX=9007199254740992,INT53_MIN=-9007199254740992,bigintToI53Checked=GA((H)=>H<INT53_MIN||H>INT53_MAX?NaN:Number(H),"bigintToI53Checked");function _clock_time_get(H,$,A){if($=bigintToI53Checked($),!checkWasiClock(H))return 28;var L;if(H===0)L=_emscripten_date_now();else if(nowIsMonotonic)L=_emscripten_get_now();else return 52;var I=Math.round(L*1000*1000);return HEAP64[A>>3]=BigInt(I),0}GA(_clock_time_get,"_clock_time_get"),_clock_time_get.sig="iijp";var getHeapMax=GA(()=>2147483648,"getHeapMax"),growMemory=GA((H)=>{var $=wasmMemory.buffer,A=(H-$.byteLength+65535)/65536|0;try{return wasmMemory.grow(A),updateMemoryViews(),1}catch(L){}},"growMemory"),_emscripten_resize_heap=GA((H)=>{var $=HEAPU8.length;H>>>=0;var A=getHeapMax();if(H>A)return!1;for(var L=1;L<=4;L*=2){var I=$*(1+0.2/L);I=Math.min(I,H+100663296);var D=Math.min(A,alignMemory(Math.max(H,I),65536)),B=growMemory(D);if(B)return!0}return!1},"_emscripten_resize_heap");_emscripten_resize_heap.sig="ip";var _fd_close=GA((H)=>52,"_fd_close");_fd_close.sig="ii";function _fd_seek(H,$,A,L){return $=bigintToI53Checked($),70}GA(_fd_seek,"_fd_seek"),_fd_seek.sig="iijip";var printCharBuffers=[null,[],[]],printChar=GA((H,$)=>{var A=printCharBuffers[H];if($===0||$===10)(H===1?out:err)(UTF8ArrayToString(A)),A.length=0;else A.push($)},"printChar"),flush_NO_FILESYSTEM=GA(()=>{if(printCharBuffers[1].length)printChar(1,10);if(printCharBuffers[2].length)printChar(2,10)},"flush_NO_FILESYSTEM"),SYSCALLS={varargs:void 0,getStr(H){var $=UTF8ToString(H);return $}},_fd_write=GA((H,$,A,L)=>{var I=0;for(var D=0;D<A;D++){var B=LE_HEAP_LOAD_U32(($>>2)*4),f=LE_HEAP_LOAD_U32(($+4>>2)*4);$+=8;for(var E=0;E<f;E++)printChar(H,HEAPU8[B+E]);I+=f}return LE_HEAP_STORE_U32((L>>2)*4,I),0},"_fd_write");_fd_write.sig="iippp";function _tree_sitter_log_callback(H,$){if(Module.currentLogCallback){let A=UTF8ToString($);Module.currentLogCallback(A,H!==0)}}GA(_tree_sitter_log_callback,"_tree_sitter_log_callback");function _tree_sitter_parse_callback(H,$,A,L,I){let B=Module.currentParseCallback($,{row:A,column:L});if(typeof B==="string")setValue(I,B.length,"i32"),stringToUTF16(B,H,10240);else setValue(I,0,"i32")}GA(_tree_sitter_parse_callback,"_tree_sitter_parse_callback");function _tree_sitter_progress_callback(H,$){if(Module.currentProgressCallback)return Module.currentProgressCallback({currentOffset:H,hasError:$});return!1}GA(_tree_sitter_progress_callback,"_tree_sitter_progress_callback");function _tree_sitter_query_progress_callback(H){if(Module.currentQueryProgressCallback)return Module.currentQueryProgressCallback({currentOffset:H});return!1}GA(_tree_sitter_query_progress_callback,"_tree_sitter_query_progress_callback");var runtimeKeepaliveCounter=0,keepRuntimeAlive=GA(()=>noExitRuntime||runtimeKeepaliveCounter>0,"keepRuntimeAlive"),_proc_exit=GA((H)=>{if(EXITSTATUS=H,!keepRuntimeAlive())Module.onExit?.(H),ABORT=!0;quit_(H,new ExitStatus(H))},"_proc_exit");_proc_exit.sig="vi";var exitJS=GA((H,$)=>{EXITSTATUS=H,_proc_exit(H)},"exitJS"),handleException=GA((H)=>{if(H instanceof ExitStatus||H=="unwind")return EXITSTATUS;quit_(1,H)},"handleException"),lengthBytesUTF8=GA((H)=>{var $=0;for(var A=0;A<H.length;++A){var L=H.charCodeAt(A);if(L<=127)$++;else if(L<=2047)$+=2;else if(L>=55296&&L<=57343)$+=4,++A;else $+=3}return $},"lengthBytesUTF8"),stringToUTF8Array=GA((H,$,A,L)=>{if(!(L>0))return 0;var I=A,D=A+L-1;for(var B=0;B<H.length;++B){var f=H.charCodeAt(B);if(f>=55296&&f<=57343){var E=H.charCodeAt(++B);f=65536+((f&1023)<<10)|E&1023}if(f<=127){if(A>=D)break;$[A++]=f}else if(f<=2047){if(A+1>=D)break;$[A++]=192|f>>6,$[A++]=128|f&63}else if(f<=65535){if(A+2>=D)break;$[A++]=224|f>>12,$[A++]=128|f>>6&63,$[A++]=128|f&63}else{if(A+3>=D)break;$[A++]=240|f>>18,$[A++]=128|f>>12&63,$[A++]=128|f>>6&63,$[A++]=128|f&63}}return $[A]=0,A-I},"stringToUTF8Array"),stringToUTF8=GA((H,$,A)=>stringToUTF8Array(H,HEAPU8,$,A),"stringToUTF8"),stackAlloc=GA((H)=>__emscripten_stack_alloc(H),"stackAlloc"),stringToUTF8OnStack=GA((H)=>{var $=lengthBytesUTF8(H)+1,A=stackAlloc($);return stringToUTF8(H,A,$),A},"stringToUTF8OnStack"),AsciiToString=GA((H)=>{var $="";while(!0){var A=HEAPU8[H++];if(!A)return $;$+=String.fromCharCode(A)}},"AsciiToString"),stringToUTF16=GA((H,$,A)=>{if(A??=2147483647,A<2)return 0;A-=2;var L=$,I=A<H.length*2?A/2:H.length;for(var D=0;D<I;++D){var B=H.charCodeAt(D);LE_HEAP_STORE_I16(($>>1)*2,B),$+=2}return LE_HEAP_STORE_I16(($>>1)*2,0),$-L},"stringToUTF16"),wasmImports={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_abort_js:__abort_js,clock_time_get:_clock_time_get,emscripten_resize_heap:_emscripten_resize_heap,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback,tree_sitter_progress_callback:_tree_sitter_progress_callback,tree_sitter_query_progress_callback:_tree_sitter_query_progress_callback},wasmExports=await createWasm(),___wasm_call_ctors=wasmExports.__wasm_call_ctors,_malloc=Module._malloc=wasmExports.malloc,_calloc=Module._calloc=wasmExports.calloc,_realloc=Module._realloc=wasmExports.realloc,_free=Module._free=wasmExports.free,_memcmp=Module._memcmp=wasmExports.memcmp,_ts_language_symbol_count=Module._ts_language_symbol_count=wasmExports.ts_language_symbol_count,_ts_language_state_count=Module._ts_language_state_count=wasmExports.ts_language_state_count,_ts_language_version=Module._ts_language_version=wasmExports.ts_language_version,_ts_language_abi_version=Module._ts_language_abi_version=wasmExports.ts_language_abi_version,_ts_language_metadata=Module._ts_language_metadata=wasmExports.ts_language_metadata,_ts_language_name=Module._ts_language_name=wasmExports.ts_language_name,_ts_language_field_count=Module._ts_language_field_count=wasmExports.ts_language_field_count,_ts_language_next_state=Module._ts_language_next_state=wasmExports.ts_language_next_state,_ts_language_symbol_name=Module._ts_language_symbol_name=wasmExports.ts_language_symbol_name,_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=wasmExports.ts_language_symbol_for_name,_strncmp=Module._strncmp=wasmExports.strncmp,_ts_language_symbol_type=Module._ts_language_symbol_type=wasmExports.ts_language_symbol_type,_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=wasmExports.ts_language_field_name_for_id,_ts_lookahead_iterator_new=Module._ts_lookahead_iterator_new=wasmExports.ts_lookahead_iterator_new,_ts_lookahead_iterator_delete=Module._ts_lookahead_iterator_delete=wasmExports.ts_lookahead_iterator_delete,_ts_lookahead_iterator_reset_state=Module._ts_lookahead_iterator_reset_state=wasmExports.ts_lookahead_iterator_reset_state,_ts_lookahead_iterator_reset=Module._ts_lookahead_iterator_reset=wasmExports.ts_lookahead_iterator_reset,_ts_lookahead_iterator_next=Module._ts_lookahead_iterator_next=wasmExports.ts_lookahead_iterator_next,_ts_lookahead_iterator_current_symbol=Module._ts_lookahead_iterator_current_symbol=wasmExports.ts_lookahead_iterator_current_symbol,_ts_parser_delete=Module._ts_parser_delete=wasmExports.ts_parser_delete,_ts_parser_reset=Module._ts_parser_reset=wasmExports.ts_parser_reset,_ts_parser_set_language=Module._ts_parser_set_language=wasmExports.ts_parser_set_language,_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=wasmExports.ts_parser_timeout_micros,_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=wasmExports.ts_parser_set_timeout_micros,_ts_parser_set_included_ranges=Module._ts_parser_set_included_ranges=wasmExports.ts_parser_set_included_ranges,_ts_query_new=Module._ts_query_new=wasmExports.ts_query_new,_ts_query_delete=Module._ts_query_delete=wasmExports.ts_query_delete,_iswspace=Module._iswspace=wasmExports.iswspace,_iswalnum=Module._iswalnum=wasmExports.iswalnum,_ts_query_pattern_count=Module._ts_query_pattern_count=wasmExports.ts_query_pattern_count,_ts_query_capture_count=Module._ts_query_capture_count=wasmExports.ts_query_capture_count,_ts_query_string_count=Module._ts_query_string_count=wasmExports.ts_query_string_count,_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=wasmExports.ts_query_capture_name_for_id,_ts_query_capture_quantifier_for_id=Module._ts_query_capture_quantifier_for_id=wasmExports.ts_query_capture_quantifier_for_id,_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=wasmExports.ts_query_string_value_for_id,_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=wasmExports.ts_query_predicates_for_pattern,_ts_query_start_byte_for_pattern=Module._ts_query_start_byte_for_pattern=wasmExports.ts_query_start_byte_for_pattern,_ts_query_end_byte_for_pattern=Module._ts_query_end_byte_for_pattern=wasmExports.ts_query_end_byte_for_pattern,_ts_query_is_pattern_rooted=Module._ts_query_is_pattern_rooted=wasmExports.ts_query_is_pattern_rooted,_ts_query_is_pattern_non_local=Module._ts_query_is_pattern_non_local=wasmExports.ts_query_is_pattern_non_local,_ts_query_is_pattern_guaranteed_at_step=Module._ts_query_is_pattern_guaranteed_at_step=wasmExports.ts_query_is_pattern_guaranteed_at_step,_ts_query_disable_capture=Module._ts_query_disable_capture=wasmExports.ts_query_disable_capture,_ts_query_disable_pattern=Module._ts_query_disable_pattern=wasmExports.ts_query_disable_pattern,_ts_tree_copy=Module._ts_tree_copy=wasmExports.ts_tree_copy,_ts_tree_delete=Module._ts_tree_delete=wasmExports.ts_tree_delete,_ts_init=Module._ts_init=wasmExports.ts_init,_ts_parser_new_wasm=Module._ts_parser_new_wasm=wasmExports.ts_parser_new_wasm,_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=wasmExports.ts_parser_enable_logger_wasm,_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=wasmExports.ts_parser_parse_wasm,_ts_parser_included_ranges_wasm=Module._ts_parser_included_ranges_wasm=wasmExports.ts_parser_included_ranges_wasm,_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=wasmExports.ts_language_type_is_named_wasm,_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=wasmExports.ts_language_type_is_visible_wasm,_ts_language_supertypes_wasm=Module._ts_language_supertypes_wasm=wasmExports.ts_language_supertypes_wasm,_ts_language_subtypes_wasm=Module._ts_language_subtypes_wasm=wasmExports.ts_language_subtypes_wasm,_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=wasmExports.ts_tree_root_node_wasm,_ts_tree_root_node_with_offset_wasm=Module._ts_tree_root_node_with_offset_wasm=wasmExports.ts_tree_root_node_with_offset_wasm,_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=wasmExports.ts_tree_edit_wasm,_ts_tree_included_ranges_wasm=Module._ts_tree_included_ranges_wasm=wasmExports.ts_tree_included_ranges_wasm,_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=wasmExports.ts_tree_get_changed_ranges_wasm,_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=wasmExports.ts_tree_cursor_new_wasm,_ts_tree_cursor_copy_wasm=Module._ts_tree_cursor_copy_wasm=wasmExports.ts_tree_cursor_copy_wasm,_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=wasmExports.ts_tree_cursor_delete_wasm,_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=wasmExports.ts_tree_cursor_reset_wasm,_ts_tree_cursor_reset_to_wasm=Module._ts_tree_cursor_reset_to_wasm=wasmExports.ts_tree_cursor_reset_to_wasm,_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=wasmExports.ts_tree_cursor_goto_first_child_wasm,_ts_tree_cursor_goto_last_child_wasm=Module._ts_tree_cursor_goto_last_child_wasm=wasmExports.ts_tree_cursor_goto_last_child_wasm,_ts_tree_cursor_goto_first_child_for_index_wasm=Module._ts_tree_cursor_goto_first_child_for_index_wasm=wasmExports.ts_tree_cursor_goto_first_child_for_index_wasm,_ts_tree_cursor_goto_first_child_for_position_wasm=Module._ts_tree_cursor_goto_first_child_for_position_wasm=wasmExports.ts_tree_cursor_goto_first_child_for_position_wasm,_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=wasmExports.ts_tree_cursor_goto_next_sibling_wasm,_ts_tree_cursor_goto_previous_sibling_wasm=Module._ts_tree_cursor_goto_previous_sibling_wasm=wasmExports.ts_tree_cursor_goto_previous_sibling_wasm,_ts_tree_cursor_goto_descendant_wasm=Module._ts_tree_cursor_goto_descendant_wasm=wasmExports.ts_tree_cursor_goto_descendant_wasm,_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=wasmExports.ts_tree_cursor_goto_parent_wasm,_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=wasmExports.ts_tree_cursor_current_node_type_id_wasm,_ts_tree_cursor_current_node_state_id_wasm=Module._ts_tree_cursor_current_node_state_id_wasm=wasmExports.ts_tree_cursor_current_node_state_id_wasm,_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=wasmExports.ts_tree_cursor_current_node_is_named_wasm,_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=wasmExports.ts_tree_cursor_current_node_is_missing_wasm,_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=wasmExports.ts_tree_cursor_current_node_id_wasm,_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=wasmExports.ts_tree_cursor_start_position_wasm,_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=wasmExports.ts_tree_cursor_end_position_wasm,_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=wasmExports.ts_tree_cursor_start_index_wasm,_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=wasmExports.ts_tree_cursor_end_index_wasm,_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=wasmExports.ts_tree_cursor_current_field_id_wasm,_ts_tree_cursor_current_depth_wasm=Module._ts_tree_cursor_current_depth_wasm=wasmExports.ts_tree_cursor_current_depth_wasm,_ts_tree_cursor_current_descendant_index_wasm=Module._ts_tree_cursor_current_descendant_index_wasm=wasmExports.ts_tree_cursor_current_descendant_index_wasm,_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=wasmExports.ts_tree_cursor_current_node_wasm,_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=wasmExports.ts_node_symbol_wasm,_ts_node_field_name_for_child_wasm=Module._ts_node_field_name_for_child_wasm=wasmExports.ts_node_field_name_for_child_wasm,_ts_node_field_name_for_named_child_wasm=Module._ts_node_field_name_for_named_child_wasm=wasmExports.ts_node_field_name_for_named_child_wasm,_ts_node_children_by_field_id_wasm=Module._ts_node_children_by_field_id_wasm=wasmExports.ts_node_children_by_field_id_wasm,_ts_node_first_child_for_byte_wasm=Module._ts_node_first_child_for_byte_wasm=wasmExports.ts_node_first_child_for_byte_wasm,_ts_node_first_named_child_for_byte_wasm=Module._ts_node_first_named_child_for_byte_wasm=wasmExports.ts_node_first_named_child_for_byte_wasm,_ts_node_grammar_symbol_wasm=Module._ts_node_grammar_symbol_wasm=wasmExports.ts_node_grammar_symbol_wasm,_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=wasmExports.ts_node_child_count_wasm,_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=wasmExports.ts_node_named_child_count_wasm,_ts_node_child_wasm=Module._ts_node_child_wasm=wasmExports.ts_node_child_wasm,_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=wasmExports.ts_node_named_child_wasm,_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=wasmExports.ts_node_child_by_field_id_wasm,_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=wasmExports.ts_node_next_sibling_wasm,_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=wasmExports.ts_node_prev_sibling_wasm,_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=wasmExports.ts_node_next_named_sibling_wasm,_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=wasmExports.ts_node_prev_named_sibling_wasm,_ts_node_descendant_count_wasm=Module._ts_node_descendant_count_wasm=wasmExports.ts_node_descendant_count_wasm,_ts_node_parent_wasm=Module._ts_node_parent_wasm=wasmExports.ts_node_parent_wasm,_ts_node_child_with_descendant_wasm=Module._ts_node_child_with_descendant_wasm=wasmExports.ts_node_child_with_descendant_wasm,_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=wasmExports.ts_node_descendant_for_index_wasm,_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=wasmExports.ts_node_named_descendant_for_index_wasm,_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=wasmExports.ts_node_descendant_for_position_wasm,_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=wasmExports.ts_node_named_descendant_for_position_wasm,_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=wasmExports.ts_node_start_point_wasm,_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=wasmExports.ts_node_end_point_wasm,_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=wasmExports.ts_node_start_index_wasm,_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=wasmExports.ts_node_end_index_wasm,_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=wasmExports.ts_node_to_string_wasm,_ts_node_children_wasm=Module._ts_node_children_wasm=wasmExports.ts_node_children_wasm,_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=wasmExports.ts_node_named_children_wasm,_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=wasmExports.ts_node_descendants_of_type_wasm,_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=wasmExports.ts_node_is_named_wasm,_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=wasmExports.ts_node_has_changes_wasm,_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=wasmExports.ts_node_has_error_wasm,_ts_node_is_error_wasm=Module._ts_node_is_error_wasm=wasmExports.ts_node_is_error_wasm,_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=wasmExports.ts_node_is_missing_wasm,_ts_node_is_extra_wasm=Module._ts_node_is_extra_wasm=wasmExports.ts_node_is_extra_wasm,_ts_node_parse_state_wasm=Module._ts_node_parse_state_wasm=wasmExports.ts_node_parse_state_wasm,_ts_node_next_parse_state_wasm=Module._ts_node_next_parse_state_wasm=wasmExports.ts_node_next_parse_state_wasm,_ts_query_matches_wasm=Module._ts_query_matches_wasm=wasmExports.ts_query_matches_wasm,_ts_query_captures_wasm=Module._ts_query_captures_wasm=wasmExports.ts_query_captures_wasm,_memset=Module._memset=wasmExports.memset,_memcpy=Module._memcpy=wasmExports.memcpy,_memmove=Module._memmove=wasmExports.memmove,_iswalpha=Module._iswalpha=wasmExports.iswalpha,_iswblank=Module._iswblank=wasmExports.iswblank,_iswdigit=Module._iswdigit=wasmExports.iswdigit,_iswlower=Module._iswlower=wasmExports.iswlower,_iswupper=Module._iswupper=wasmExports.iswupper,_iswxdigit=Module._iswxdigit=wasmExports.iswxdigit,_memchr=Module._memchr=wasmExports.memchr,_strlen=Module._strlen=wasmExports.strlen,_strcmp=Module._strcmp=wasmExports.strcmp,_strncat=Module._strncat=wasmExports.strncat,_strncpy=Module._strncpy=wasmExports.strncpy,_towlower=Module._towlower=wasmExports.towlower,_towupper=Module._towupper=wasmExports.towupper,_setThrew=wasmExports.setThrew,__emscripten_stack_restore=wasmExports._emscripten_stack_restore,__emscripten_stack_alloc=wasmExports._emscripten_stack_alloc,_emscripten_stack_get_current=wasmExports.emscripten_stack_get_current,___wasm_apply_data_relocs=wasmExports.__wasm_apply_data_relocs;Module.setValue=setValue,Module.getValue=getValue,Module.UTF8ToString=UTF8ToString,Module.stringToUTF8=stringToUTF8,Module.lengthBytesUTF8=lengthBytesUTF8,Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,Module.loadWebAssemblyModule=loadWebAssemblyModule;function callMain(H=[]){var $=resolveGlobalSymbol("main").sym;if(!$)return;H.unshift(thisProgram);var A=H.length,L=stackAlloc((A+1)*4),I=L;H.forEach((B)=>{LE_HEAP_STORE_U32((I>>2)*4,stringToUTF8OnStack(B)),I+=4}),LE_HEAP_STORE_U32((I>>2)*4,0);try{var D=$(A,L);return exitJS(D,!0),D}catch(B){return handleException(B)}}GA(callMain,"callMain");function run(H=arguments_){if(runDependencies>0){dependenciesFulfilled=run;return}if(preRun(),runDependencies>0){dependenciesFulfilled=run;return}function $(){if(Module.calledRun=!0,ABORT)return;initRuntime(),preMain(),readyPromiseResolve(Module),Module.onRuntimeInitialized?.();var A=Module.noInitialRun;if(!A)callMain(H);postRun()}if(GA($,"doRun"),Module.setStatus)Module.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>Module.setStatus(""),1),$()},1);else $()}if(GA(run,"run"),Module.preInit){if(typeof Module.preInit=="function")Module.preInit=[Module.preInit];while(Module.preInit.length>0)Module.preInit.pop()()}return run(),moduleRtn=readyPromise,moduleRtn}})(),uH1=kH1;GA(DQD,"initializeBinding");GA(BQD,"checkModule");nbH=class{static{GA(this,"Parser")}[0]=0;[1]=0;logCallback=null;language=null;static async init(H){aKD(await DQD(H)),bD=D$._ts_init(),ewA=D$.getValue(bD,"i32"),HZA=D$.getValue(bD+$B,"i32")}constructor(){this.initialize()}initialize(){if(!BQD())throw Error("cannot construct a Parser before calling `init()`");D$._ts_parser_new_wasm(),this[0]=D$.getValue(bD,"i32"),this[1]=D$.getValue(bD+$B,"i32")}delete(){D$._ts_parser_delete(this[0]),D$._free(this[1]),this[0]=0,this[1]=0}setLanguage(H){let $;if(!H)$=0,this.language=null;else if(H.constructor===T_$){$=H[0];let A=D$._ts_language_version($);if(A<HZA||ewA<A)throw Error(`Incompatible language version ${A}. Compatibility range ${HZA} through ${ewA}.`);this.language=H}else throw Error("Argument must be a Language");return D$._ts_parser_set_language(this[0],$),this}parse(H,$,A){if(typeof H==="string")D$.currentParseCallback=(f)=>H.slice(f);else if(typeof H==="function")D$.currentParseCallback=H;else throw Error("Argument must be a string or a function");if(A?.progressCallback)D$.currentProgressCallback=A.progressCallback;else D$.currentProgressCallback=null;if(this.logCallback)D$.currentLogCallback=this.logCallback,D$._ts_parser_enable_logger_wasm(this[0],1);else D$.currentLogCallback=null,D$._ts_parser_enable_logger_wasm(this[0],0);let L=0,I=0;if(A?.includedRanges){L=A.includedRanges.length,I=D$._calloc(L,ibH);let f=I;for(let E=0;E<L;E++)oKD(f,A.includedRanges[E]),f+=ibH}let D=D$._ts_parser_parse_wasm(this[0],this[1],$?$[0]:0,I,L);if(!D)return D$.currentParseCallback=null,D$.currentLogCallback=null,D$.currentProgressCallback=null,null;if(!this.language)throw Error("Parser must have a language to parse");let B=new xH1(to,D,this.language,D$.currentParseCallback);return D$.currentParseCallback=null,D$.currentLogCallback=null,D$.currentProgressCallback=null,B}reset(){D$._ts_parser_reset(this[0])}getIncludedRanges(){D$._ts_parser_included_ranges_wasm(this[0]);let H=D$.getValue(bD,"i32"),$=D$.getValue(bD+$B,"i32"),A=Array(H);if(H>0){let L=$;for(let I=0;I<H;I++)A[I]=q_$(L),L+=ibH;D$._free($)}return A}getTimeoutMicros(){return D$._ts_parser_timeout_micros(this[0])}setTimeoutMicros(H){D$._ts_parser_set_timeout_micros(this[0],0,H)}setLogger(H){if(!H)this.logCallback=null;else if(typeof H!=="function")throw Error("Logger callback must be a function");else this.logCallback=H;return this}getLogger(){return this.logCallback}}});function GQD(){return(process.argv[1]||"").includes("/.claude/local/node_modules/")}async function gH1(){try{if(!zH().existsSync(so))zH().mkdirSync(so);if(!zH().existsSync(EQD))iL(EQD,vH({name:"claude-local",version:"0.0.1",private:!0},null,2),{encoding:"utf8",flush:!1});let H=k7H.join(so,"claude");if(!zH().existsSync(H)){let $=`#!/bin/sh
`),$(L);else if(B==="\x03")process.stdin.setRawMode?.(!1),process.stdin.removeListener("data",I),A(Error("Cancelled"));else if(B==="\x7F"||B==="\b")L=L.slice(0,-1);else L+=B};process.stdin.on("data",I)})}function JgH(H,$,A){let L=jW(),I=L.read()||{},D=lh(H,$);L.update({...I,mcpOAuthClientConfig:{...I.mcpOAuthClientConfig,[D]:{clientSecret:A}}})}function qxD(H,$){let A=jW(),L=A.read();if(!L?.mcpOAuthClientConfig)return;let I=lh(H,$);if(L.mcpOAuthClientConfig[I])delete L.mcpOAuthClientConfig[I],A.update(L)}function FSA(H,$){let L=jW().read(),I=lh(H,$);return L?.mcpOAuthClientConfig?.[I]}function XSA(H){if(!H)return;if("scope"in H&&typeof H.scope==="string")return H.scope;if("default_scope"in H&&typeof H.default_scope==="string")return H.default_scope;if(H.scopes_supported&&Array.isArray(H.scopes_supported))return H.scopes_supported.join(" ");return}var cw$,wxD,GSA,lw$,fX1=30000,EX1,y3H,GX1,USA=3118;var s9H=K(()=>{HeH();z$();j5$();CjH();YFA();M3();C1();_$();yF();C9();Z$();cw$=require("http"),wxD=require("url"),GSA=h(_xD(),1),lw$=require("crypto"),EX1=["state","nonce","code_challenge","code_verifier","code"];y3H=class y3H extends Error{constructor(){super("Authentication was cancelled");this.name="AuthenticationCancelledError"}};GX1=oA()==="windows"?{min:39152,max:49151}:{min:49152,max:65535}});function JX1(H){return H.scope==="project"||H.scope==="local"}async function FX1(H,$){if(!$.headersHelper)return null;if("scope"in $&&JX1($)&&!eI()){if(!GG(!0)){let L=Error(`Security: headersHelper for MCP server '${H}' executed before workspace trust is confirmed. If you see this message, post in ${{ISSUES_EXPLAINER:"report the issue at https://github.com/anthropics/claude-code/issues",PACKAGE_URL:"@anthropic-ai/claude-code",README_URL:"https://code.claude.com/docs/en/overview",VERSION:"2.1.33",FEEDBACK_CHANNEL:"https://github.com/anthropics/claude-code/issues",BUILD_TIME:"2026-02-06T00:15:09Z"}.FEEDBACK_CHANNEL}.`);return bZ("MCP headersHelper invoked before trust check",L),c("tengu_mcp_headersHelper_missing_trust",{}),null}}try{TA(H,"Executing headersHelper to get dynamic headers");let A=await mD($.headersHelper,[],{shell:!0,timeout:1e4});if(A.code!==0||!A.stdout)throw Error(`headersHelper for MCP server '${H}' did not return a valid value`);let L=A.stdout.trim(),I=DA(L);if(typeof I!=="object"||I===null||Array.isArray(I))throw Error(`headersHelper for MCP server '${H}' must return a JSON object with string key-value pairs`);for(let[D,B]of Object.entries(I))if(typeof B!=="string")throw Error(`headersHelper for MCP server '${H}' returned non-string value for key "${D}": ${typeof B}`);return TA(H,`Successfully retrieved ${Object.keys(I).length} headers from headersHelper`),I}catch(A){return BE(H,`Error getting headers from headersHelper: ${A instanceof Error?A.message:String(A)}`),r(Error(`Error getting MCP headers from headersHelper for server '${H}': ${A instanceof Error?A.message:String(A)}`)),null}}async function rw$(H,$){let A=$.headers||{},L=await FX1(H,$)||{};return{...A,...L}}var TxD=K(()=>{D0();vA();_$();E$();z$();p$();Z$()});class KSA{serverName;sendMcpMessage;isClosed=!1;onclose;onerror;onmessage;constructor(H,$){this.serverName=H;this.sendMcpMessage=$}async start(){}async send(H){if(this.isClosed)throw Error("Transport is closed");let $=await this.sendMcpMessage(this.serverName,H);if(this.onmessage)this.onmessage($)}async close(){if(this.isClosed)return;this.isClosed=!0,this.onclose?.()}}function QX1(H,$,A){let L=H.tabId;if(typeof L==="number")KOD(L);let I=[];switch($){case"navigate":if(typeof H.url==="string")try{let D=new URL(H.url);I.push(D.hostname)}catch{I.push(FgH(H.url,30))}break;case"find":if(typeof H.query==="string")I.push(`pattern: ${FgH(H.query,30)}`);break;case"computer":if(typeof H.action==="string"){let D=H.action;if(D==="left_click"||D==="right_click"||D==="double_click"||D==="middle_click")if(typeof H.ref==="string")I.push(`${D} on ${H.ref}`);else if(Array.isArray(H.coordinate))I.push(`${D} at (${H.coordinate.join(", ")})`);else I.push(D);else if(D==="type"&&typeof H.text==="string")I.push(`type "${FgH(H.text,15)}"`);else if(D==="key"&&typeof H.text==="string")I.push(`key ${H.text}`);else if(D==="scroll"&&typeof H.scroll_direction==="string")I.push(`scroll ${H.scroll_direction}`);else if(D==="wait"&&typeof H.duration==="number")I.push(`wait ${H.duration}s`);else if(D==="left_click_drag")I.push("drag");else I.push(D)}break;case"gif_creator":if(typeof H.action==="string")I.push(`${H.action}`);break;case"resize_window":if(typeof H.width==="number"&&typeof H.height==="number")I.push(`${H.width}x${H.height}`);break;case"read_console_messages":if(typeof H.pattern==="string")I.push(`pattern: ${FgH(H.pattern,20)}`);if(H.onlyErrors===!0)I.push("errors only");break;case"read_network_requests":if(typeof H.urlPattern==="string")I.push(`pattern: ${FgH(H.urlPattern,20)}`);break;case"shortcuts_execute":if(typeof H.shortcutId==="string")I.push(`shortcut_id: ${H.shortcutId}`);break;case"javascript_tool":if(A&&typeof H.text==="string")return H.text;return"";case"tabs_create_mcp":case"tabs_context_mcp":case"form_input":case"shortcuts_list":case"read_page":case"upload_image":case"get_page_text":case"update_plan":return""}return I.join(", ")||null}function WX1(H){if(!n2())return null;if(typeof H!=="object"||H===null||!("tabId"in H))return null;let $=typeof H.tabId==="number"?H.tabId:typeof H.tabId==="string"?parseInt(H.tabId,10):NaN;if(isNaN($))return null;let A=`${KX1}${$}`;return oS.createElement(V,null," ",oS.createElement(aI,{url:A},oS.createElement(V,{color:"subtle"},"[View Tab]")))}function VX1(H,$,A){if(A)return Rw$(H,[],{verbose:A});let L=null;switch($){case"navigate":L="Navigation completed";break;case"tabs_create_mcp":L="Tab created";break;case"tabs_context_mcp":L="Tabs read";break;case"form_input":L="Input completed";break;case"computer":L="Action completed";break;case"resize_window":L="Window resized";break;case"find":L="Search completed";break;case"gif_creator":L="GIF action completed";break;case"read_console_messages":L="Console messages retrieved";break;case"read_network_requests":L="Network requests retrieved";break;case"shortcuts_list":L="Shortcuts retrieved";break;case"shortcuts_execute":L="Shortcut executed";break;case"javascript_tool":L="Script executed";break;case"read_page":L="Page read";break;case"upload_image":L="Image uploaded";break;case"get_page_text":L="Page text retrieved";break;case"update_plan":L="Plan updated";break}if(L)return oS.createElement(HA,{height:1},oS.createElement(V,{dimColor:!0},L));return null}function zxD(H){return{userFacingName($){return`Claude in Chrome[${H.replace(/_mcp$/,"")}]`},renderToolUseMessage($,{verbose:A}){return QX1($,H,A)},renderToolUseTag($){return WX1($)},renderToolResultMessage($,A,{verbose:L}){if(!PX1($))return null;return VX1($,H,L)}}}function FgH(H,$){return H.length>$?H.slice(0,$)+"\u2026":H}function PX1(H){return typeof H==="object"&&H!==null}var oS,KX1="https://clau.de/chrome/tab/";var NxD=K(()=>{xH();cB();Yr();LSA();aS();oS=h(t(),1)});async function OxD(H,$){return new(await import("ws")).default(H,["mcp"],$)}function aw$(){return parseInt(process.env.MCP_TIMEOUT||"",10)||30000}function QSA(H){return async($,A)=>{if((A?.method??"GET").toUpperCase()==="GET")return H($,A);let I=AbortSignal.timeout(jxD);if(!A?.signal)return H($,{...A,signal:I});let D=new AbortController,B=()=>D.abort();A.signal.addEventListener("abort",B),I.addEventListener("abort",B);let f=()=>{A.signal?.removeEventListener("abort",B),I.removeEventListener("abort",B)};if(A.signal.aborted)D.abort();try{let E=await H($,{...A,signal:D.signal});return f(),E}catch(E){throw f(),E}}}function VSA(){return parseInt(process.env.MCP_SERVER_CONNECTION_BATCH_SIZE||"",10)||3}function CX1(){return parseInt(process.env.MCP_REMOTE_SERVER_CONNECTION_BATCH_SIZE||"",10)||20}function xxD(H){return!H.type||H.type==="stdio"||H.type==="sdk"}function wX1(H){return!H.name.startsWith("mcp__ide__")||YX1.includes(H.name)}function WSA(H,$){return`${H}-${vH($)}`}async function ih(H,$){let A=WSA(H,$);try{let L=await Uz(H,$);if(L.type==="connected")await L.cleanup()}catch{}Uz.cache.delete(A)}async function g6H(H){if(H.config.type==="sdk")return H;let $=await Uz(H.name,H.config);if($.type!=="connected")throw new pZ(`MCP server "${H.name}" is not connected`,"MCP server not connected");return $}function RxD(H,$){if(H.type!==$.type)return!1;let{scope:A,...L}=H,{scope:I,...D}=$;return vH(L)===vH(D)}async function Gx(H,$,A){return(await vxD({client:A,tool:H,args:$,signal:cD().signal})).content}async function nh(H,$){try{await ih(H,$);let A=await Uz(H,$);if(A.type!=="connected")return{client:A,tools:[],commands:[]};let L=!!A.capabilities?.resources,[I,D,B]=await Promise.all([kS(A),QgH(A),L?KgH(A):Promise.resolve([])]),f=[];if(L){if(![Rp,yp].some((M)=>I.some((G)=>G.name===M.name)))f.push(Rp,yp)}return{client:A,tools:[...I,...f],commands:D,resources:B.length>0?B:void 0}}catch(A){return BE(H,`Error during reconnection: ${A instanceof Error?A.message:String(A)}`),{client:{name:H,type:"failed",config:$},tools:[],commands:[]}}}async function SxD(H,$,A){for(let L=0;L<H.length;L+=$){let I=H.slice(L,L+$);await Promise.all(I.map(A))}}async function tw$(H,$){let A=!1,L=Object.entries($??(await dh()).servers),I=L.length,D=L.filter(([F,Q])=>Q.type==="stdio").length,B=L.filter(([F,Q])=>Q.type==="sse").length,f=L.filter(([F,Q])=>Q.type==="http").length,E=L.filter(([F,Q])=>Q.type==="sse-ide").length,M=L.filter(([F,Q])=>Q.type==="ws-ide").length,G=L.filter(([F,Q])=>xxD(Q)),U=L.filter(([F,Q])=>!xxD(Q)),X={totalServers:I,stdioCount:D,sseCount:B,httpCount:f,sseIdeCount:E,wsIdeCount:M},J=async([F,Q])=>{try{if(fgH(F)){H({client:{name:F,type:"disabled",config:Q},tools:[],commands:[]});return}let W=await Uz(F,Q,X);if(W.type!=="connected"){H({client:W,tools:[],commands:[]});return}let P=!!W.capabilities?.resources,[Y,C,Z]=await Promise.all([kS(W),QgH(W),P?KgH(W):Promise.resolve([])]),q=[];if(P&&!A)A=!0,q.push(Rp,yp);H({client:W,tools:[...Y,...q],commands:C,resources:Z.length>0?Z:void 0})}catch(W){BE(F,`Error fetching tools/commands/resources: ${W instanceof Error?W.message:String(W)}`),H({client:{name:F,type:"failed",config:Q},tools:[],commands:[]})}};await Promise.all([SxD(G,VSA(),J),SxD(U,CX1(),J)])}async function yxD(H,$){switch(H.type){case"text":return[{type:"text",text:H.text}];case"image":{let A=Buffer.from(String(H.data),"base64"),L=await pIH(A,void 0,H.mimeType);return[{type:"image",source:{data:L.base64,media_type:L.mediaType,type:"base64"}}]}case"resource":{let A=H.resource,L=`[Resource from ${$} at ${A.uri}] `;if("text"in A)return[{type:"text",text:`${L}${A.text}`}];else if("blob"in A)if(_X1.has(A.mimeType??"")){let D=Buffer.from(A.blob,"base64"),B=await pIH(D,void 0,A.mimeType),f=[];if(L)f.push({type:"text",text:L});return f.push({type:"image",source:{data:B.base64,media_type:B.mediaType,type:"base64"}}),f}else return[{type:"text",text:`${L}Base64 data (${A.mimeType||"unknown type"}) ${A.blob}`}];return[]}case"resource_link":{let A=H,L=`[Resource link: ${A.name}] ${A.uri}`;if(A.description)L+=` (${A.description})`;return[{type:"text",text:L}]}default:return[]}}function ow$(H,$=2){if(H===null)return"null";if(Array.isArray(H)){if(H.length===0)return"[]";return`[${ow$(H[0],$-1)}]`}if(typeof H==="object"){if($<=0)return"{...}";let L=Object.entries(H).slice(0,10).map(([D,B])=>`${D}: ${ow$(B,$-1)}`),I=Object.keys(H).length>10?", ...":"";return`{${L.join(", ")}${I}}`}return typeof H}async function PSA(H,$,A){if(H&&typeof H==="object"){if("toolResult"in H)return{content:String(H.toolResult),type:"toolResult"};if("structuredContent"in H&&H.structuredContent!==void 0)return{content:vH(H.structuredContent),type:"structuredContent",schema:ow$(H.structuredContent)};if("content"in H&&Array.isArray(H.content)){let I=(await Promise.all(H.content.map((D)=>yxD(D,A)))).flat();return{content:I,type:"contentArray",schema:ow$(I)}}}let L=`MCP server "${A}" tool "${$}": unexpected response format`;throw BE(A,L),new pZ(L,"MCP tool unexpected response format")}function ZX1(H){if(!H||typeof H==="string")return!1;return H.some(($)=>$.type==="image")}async function qX1(H,$,A){let{content:L,type:I,schema:D}=await PSA(H,$,A);if(A==="ide")return L;if(!await NjH(L))return L;if(LE(process.env.ENABLE_MCP_LARGE_OUTPUT_FILES))return await aFA(L);if(!L)return L;if(ZX1(L))return await aFA(L);let B=Date.now(),f=`mcp-${B1(A)}-${B1($)}-${B}`,E=typeof L==="string"?L:vH(L,null,2),M=await WDH(E,f);if(VDH(M))return`Error: result (${E.length.toLocaleString()} characters) exceeds maximum allowed tokens. Failed to save output to file: ${M.error}. If this MCP server provides pagination or filtering tools, use them to retrieve specific portions of the data.`;let G=IX$(I,D);return DX$(M.filepath,M.originalSize,G)}async function vxD({client:{client:H,name:$},tool:A,args:L,meta:I,signal:D,onProgress:B}){let f=Date.now(),E,M;try{if(TA($,`Calling MCP tool: ${A}`),E=setInterval(()=>{let Y=Date.now()-f,Z=`${Math.floor(Y/1000)}s`;TA($,`Tool '${A}' still running (${Z} elapsed)`)},30000),lwI())M=setInterval(()=>{cwI()},50000);let G=$s(),U,X=new Promise((Y,C)=>{U=setTimeout(()=>{C(new pZ(`MCP server "${$}" tool "${A}" timed out after ${Math.floor(G/1000)}s`,"MCP tool timeout"))},G)}),J=await Promise.race([H.callTool({name:A,arguments:L,_meta:I},sV,{signal:D,timeout:G,onprogress:B?(Y)=>{B({type:"mcp_progress",status:"progress",serverName:$,toolName:A,progress:Y.progress,total:Y.total,progressMessage:Y.message})}:void 0}),X]).finally(()=>{if(U)clearTimeout(U)});if("isError"in J&&J.isError){let Y="Unknown error";if("content"in J&&Array.isArray(J.content)&&J.content.length>0){let C=J.content[0];if(C&&typeof C==="object"&&"text"in C)Y=C.text}else if("error"in J)Y=String(J.error);throw BE($,Y),new pZ(Y,"MCP tool returned error")}let F=Date.now()-f,Q=F<1000?`${F}ms`:F<60000?`${Math.floor(F/1000)}s`:`${Math.floor(F/60000)}m ${Math.floor(F%60000/1000)}s`;TA($,`Tool '${A}' completed successfully in ${Q}`);let W=SOD($);if(W)c("tengu_code_indexing_tool_used",{tool:W,source:"mcp",success:!0});return{content:await qX1(J,A,$),_meta:J._meta,structuredContent:J.structuredContent}}catch(G){if(E!==void 0)clearInterval(E);if(M!==void 0)clearInterval(M);let U=Date.now()-f;if(G instanceof Error&&G.name!=="AbortError")TA($,`Tool '${A}' failed after ${Math.floor(U/1000)}s: ${G.message}`);if(G instanceof Error){if(("code"in G?G.code:void 0)===401||G instanceof ZQ)throw TA($,"Tool call returned 401 Unauthorized - token may have expired"),c("tengu_mcp_tool_call_auth_error",{}),new y2$($,`MCP server "${$}" requires re-authorization (token expired)`)}if(!(G instanceof Error)||G.name!=="AbortError")throw G;return{content:void 0}}finally{if(E!==void 0)clearInterval(E);if(M!==void 0)clearInterval(M)}}function TX1(H){if(H.message.content[0]?.type!=="tool_use")return;return H.message.content[0].id}async function hxD(H,$){let A=[],L=[],I=await Promise.allSettled(Object.entries(H).map(async([D,B])=>{let f=new KSA(D,$),E=new T5$({name:"claude-code",version:{ISSUES_EXPLAINER:"report the issue at https://github.com/anthropics/claude-code/issues",PACKAGE_URL:"@anthropic-ai/claude-code",README_URL:"https://code.claude.com/docs/en/overview",VERSION:"2.1.33",FEEDBACK_CHANNEL:"https://github.com/anthropics/claude-code/issues",BUILD_TIME:"2026-02-06T00:15:09Z"}.VERSION??"unknown"},{capabilities:{}});try{await E.connect(f);let M=E.getServerCapabilities(),G={type:"connected",name:D,capabilities:M||{},client:E,config:{...B,scope:"dynamic"},cleanup:async()=>{await E.close()}},U=[];if(M?.tools){let X=await kS(G);U.push(...X)}return{client:G,tools:U}}catch(M){return BE(D,`Failed to connect SDK MCP server: ${M}`),{client:{type:"failed",name:D,config:{...B,scope:"user"}},tools:[]}}}));for(let D of I)if(D.status==="fulfilled")A.push(D.value.client),L.push(...D.value.tools);return{clients:A,tools:L}}var y2$,_X1,jxD=60000,YX1,Uz,kS,KgH,QgH,O2$;var $3=K(()=>{aD();i2I();a2I();JwI();KwI();QK();NnA();_$();dG();KQ();z$();lU();p$();fI();YE();CE();tr();LX$();oFA();lg();NA();yF();$SA();jOD();gUH();gR();aE();tq();mOD();hY$();bY$();s9H();S3();TxD();CjH();tQ();aS();NxD();Z$();y2$=class y2$ extends Error{serverName;constructor(H,$){super($);this.name="McpAuthError",this.serverName=H}};_X1=new Set(["image/jpeg","image/png","image/gif","image/webp"]);YX1=["mcp__ide__executeCode","mcp__ide__getDiagnostics"];Uz=o$(async(H,$,A)=>{let L=Date.now();try{let I,D=WC();if($.type==="sse"){let y=new t9H(H,$),g=await rw$(H,$),v={authProvider:y,fetch:QSA(KDH()),requestInit:{headers:{"User-Agent":$n(),...g}}};v.eventSourceInit={fetch:async(p,d)=>{let k={},n=await y.tokens();if(n)k.Authorization=`Bearer ${n.access_token}`;let GH=MAH();return fetch(p,{...d,...GH,headers:{"User-Agent":$n(),...k,...d?.headers,...g,Accept:"text/event-stream"}})}},I=new d5$(new URL($.url),v),TA(H,"SSE transport initialized, awaiting connection")}else if($.type==="sse-ide"){TA(H,`Setting up SSE-IDE transport to ${$.url}`);let y=MAH(),g=y.dispatcher?{eventSourceInit:{fetch:async(v,p)=>{return fetch(v,{...p,...y,headers:{"User-Agent":$n(),...p?.headers}})}}}:{};I=new d5$(new URL($.url),Object.keys(g).length>0?g:void 0)}else if($.type==="ws-ide"){let y=P$A(),g={"User-Agent":$n(),...$.authToken&&{"X-Claude-Code-Ide-Authorization":$.authToken}},v;if(typeof Bun<"u")v=new globalThis.WebSocket($.url,{protocols:["mcp"],headers:g,proxy:EAH($.url),tls:y||void 0});else v=await OxD($.url,{headers:g,agent:fAH($.url),...y||{}});I=new jw$(v)}else if($.type==="ws"){TA(H,`Initializing WebSocket transport to ${$.url}`);let y=await rw$(H,$),g=P$A(),v={"User-Agent":$n(),...D&&{Authorization:`Bearer ${D}`},...y},p=Object.fromEntries(Object.entries(v).map(([k,n])=>k.toLowerCase()==="authorization"?[k,"[REDACTED]"]:[k,n]));TA(H,`WebSocket transport options: ${vH({url:$.url,headers:p,hasSessionAuth:!!D})}`);let d;if(typeof Bun<"u")d=new globalThis.WebSocket($.url,{protocols:["mcp"],headers:v,proxy:EAH($.url),tls:g||void 0});else d=await OxD($.url,{headers:v,agent:fAH($.url),...g||{}});I=new jw$(d)}else if($.type==="http"){TA(H,`Initializing HTTP transport to ${$.url}`),TA(H,`Node version: ${process.version}, Platform: linux`),TA(H,`Environment: ${vH({NODE_OPTIONS:process.env.NODE_OPTIONS||"not set",UV_THREADPOOL_SIZE:process.env.UV_THREADPOOL_SIZE||"default",HTTP_PROXY:process.env.HTTP_PROXY||"not set",HTTPS_PROXY:process.env.HTTPS_PROXY||"not set",NO_PROXY:process.env.NO_PROXY||"not set"})}`);let y=new t9H(H,$),g=await rw$(H,$),v=MAH();TA(H,`Proxy options: ${v.dispatcher?"custom dispatcher":"default"}`);let p={authProvider:y,fetch:QSA(KDH()),requestInit:{...v,headers:{"User-Agent":$n(),...D&&{Authorization:`Bearer ${D}`},...g}}},d=p.requestInit?.headers?Object.fromEntries(Object.entries(p.requestInit.headers).map(([k,n])=>k.toLowerCase()==="authorization"?[k,"[REDACTED]"]:[k,n])):void 0;TA(H,`HTTP transport options: ${vH({url:$.url,headers:d,hasAuthProvider:!!y,timeoutMs:jxD})}`),I=new c5$(new URL($.url),p),TA(H,"HTTP transport created successfully")}else if($.type==="sdk")throw Error("SDK servers should be handled in print.ts");else if($.type==="claudeai-proxy"){if(TA(H,`Initializing claude.ai proxy transport for server ${$.id}`),!iD())throw Error("No claude.ai OAuth token found");let g=UD(),v=`${g.MCP_PROXY_URL}${g.MCP_PROXY_PATH.replace("{server_id}",$.id)}`;TA(H,`Using claude.ai proxy at ${v}`);let p=async(n,GH)=>{await pW();let e=iD();if(!e)throw Error("No claude.ai OAuth token available");let BH=new Headers(GH?.headers);return BH.set("Authorization",`Bearer ${e.accessToken}`),globalThis.fetch(n,{...GH,headers:BH})},d=MAH(),k={fetch:QSA(p),requestInit:{...d,headers:{"User-Agent":$n(),"X-Mcp-Client-Session-Id":j$()}}};I=new c5$(new URL(v),k),TA(H,"claude.ai proxy transport created successfully")}else if($.type==="stdio"||!$.type){let y=process.env.CLAUDE_CODE_SHELL_PREFIX||$.command,g=process.env.CLAUDE_CODE_SHELL_PREFIX?[[$.command,...$.args].join(" ")]:$.args;I=new DFA({command:y,args:g,env:{...process.env,...$.env},stderr:"pipe"})}else throw Error(`Unsupported server type: ${$.type}. claude.ai MCP servers require ENABLE_CLAUDEAI_MCP_SERVERS=true.`);let B,f="";if($.type==="stdio"||!$.type){let y=I;if(y.stderr)B=(g)=>{f+=g.toString()},y.stderr.on("data",B)}let E=new T5$({name:"claude-code",version:{ISSUES_EXPLAINER:"report the issue at https://github.com/anthropics/claude-code/issues",PACKAGE_URL:"@anthropic-ai/claude-code",README_URL:"https://code.claude.com/docs/en/overview",VERSION:"2.1.33",FEEDBACK_CHANNEL:"https://github.com/anthropics/claude-code/issues",BUILD_TIME:"2026-02-06T00:15:09Z"}.VERSION??"unknown"},{capabilities:{roots:{},...{}}});if($.type==="http")TA(H,"Client created, setting up request handler");if(E.setRequestHandler(r5A,async()=>{return TA(H,"Received ListRoots request from server"),{roots:[{uri:`file://${zL()}`}]}}),TA(H,`Starting connection with timeout of ${aw$()}ms`),$.type==="http"){TA(H,`Testing basic HTTP connectivity to ${$.url}`);try{let y=new URL($.url);if(TA(H,`Parsed URL: host=${y.hostname}, port=${y.port||"default"}, protocol=${y.protocol}`),y.hostname==="127.0.0.1"||y.hostname==="localhost")TA(H,`Using loopback address: ${y.hostname}`)}catch(y){TA(H,`Failed to parse URL: ${y}`)}}let M=E.connect(I),G=new Promise((y,g)=>{let v=setTimeout(()=>{let p=Date.now()-L;TA(H,`Connection timeout triggered after ${p}ms (limit: ${aw$()}ms)`),I.close().catch(()=>{}),g(new pZ(`MCP server "${H}" connection timed out after ${aw$()}ms`,"MCP connection timeout"))},aw$());M.then(()=>{clearTimeout(v)},(p)=>{clearTimeout(v)})});try{if(await Promise.race([M,G]),f)BE(H,`Server stderr: ${f}`);let y=Date.now()-L;TA(H,`Successfully connected to ${$.type} server in ${y}ms`)}catch(y){let g=Date.now()-L;if($.type==="sse"&&y instanceof Error){if(TA(H,`SSE Connection failed after ${g}ms: ${vH({url:$.url,error:y.message,errorType:y.constructor.name,stack:y.stack})}`),BE(H,y),y instanceof ZQ)return c("tengu_mcp_server_needs_auth",{transportType:"sse",...SX($)?{mcpServerBaseUrl:SX($)}:{}}),TA(H,"Authentication required for SSE server"),{name:H,type:"needs-auth",config:$}}else if($.type==="http"&&y instanceof Error){let v=y;if(TA(H,`HTTP Connection failed after ${g}ms: ${y.message} (code: ${v.code||"none"}, errno: ${v.errno||"none"})`),BE(H,y),y instanceof ZQ)return c("tengu_mcp_server_needs_auth",{transportType:"http",...SX($)?{mcpServerBaseUrl:SX($)}:{}}),TA(H,"Authentication required for HTTP server"),{name:H,type:"needs-auth",config:$}}else if($.type==="claudeai-proxy"&&y instanceof Error){if(TA(H,`claude.ai proxy connection failed after ${g}ms: ${y.message}`),BE(H,y),y.code===401)return c("tengu_mcp_server_needs_auth",{transportType:"claudeai-proxy",...SX($)?{mcpServerBaseUrl:SX($)}:{}}),TA(H,"Authentication required for claude.ai proxy server"),{name:H,type:"needs-auth",config:$}}else if($.type==="sse-ide"||$.type==="ws-ide")c("tengu_mcp_ide_server_connection_failed",{connectionDurationMs:g});if(I.close().catch(()=>{}),f)BE(H,`Server stderr: ${f}`);throw y}let U=E.getServerCapabilities(),X=E.getServerVersion(),J=E.getInstructions();if(TA(H,`Connection established with capabilities: ${vH({hasTools:!!U?.tools,hasPrompts:!!U?.prompts,hasResources:!!U?.resources,serverVersion:X||"unknown"})}`),$.type==="sse-ide"||$.type==="ws-ide"){let y=Date.now()-L;c("tengu_mcp_ide_server_connection_succeeded",{connectionDurationMs:y,serverVersion:X});try{ywI(E)}catch(g){BE(H,`Failed to send ide_connected notification: ${g}`)}}let F=Date.now(),Q=!1,W=E.onerror,P=E.onclose,Y=0,C=3,Z=(y)=>{return y.includes("ECONNRESET")||y.includes("ETIMEDOUT")||y.includes("EPIPE")||y.includes("EHOSTUNREACH")||y.includes("ECONNREFUSED")||y.includes("Body Timeout Error")||y.includes("terminated")};E.onerror=(y)=>{let g=Date.now()-F;Q=!0;let v=$.type||"stdio";if(TA(H,`${v.toUpperCase()} connection dropped after ${Math.floor(g/1000)}s uptime`),y.message)if(y.message.includes("ECONNRESET"))TA(H,"Connection reset - server may have crashed or restarted");else if(y.message.includes("ETIMEDOUT"))TA(H,"Connection timeout - network issue or server unresponsive");else if(y.message.includes("ECONNREFUSED"))TA(H,"Connection refused - server may be down");else if(y.message.includes("EPIPE"))TA(H,"Broken pipe - server closed connection unexpectedly");else if(y.message.includes("EHOSTUNREACH"))TA(H,"Host unreachable - network connectivity issue");else if(y.message.includes("ESRCH"))TA(H,"Process not found - stdio server process terminated");else if(y.message.includes("spawn"))TA(H,"Failed to spawn process - check command and permissions");else TA(H,`Connection error: ${y.message}`);if(v==="sse"||v==="http"||v==="claudeai-proxy")if(Z(y.message)){if(Y++,TA(H,`Terminal connection error ${Y}/${C}`),Y>=C)TA(H,"Max consecutive errors reached, triggering reconnection via onclose"),Y=0,E.onclose?.()}else Y=0;if(W)W(y)},E.onclose=()=>{let y=Date.now()-F,g=$.type??"unknown";TA(H,`${g.toUpperCase()} connection closed after ${Math.floor(y/1000)}s (${Q?"with errors":"cleanly"})`);let v=WSA(H,$);if(Uz.cache.delete(v),TA(H,"Cleared connection cache for reconnection"),P)P()};let q=async()=>{if(B&&($.type==="stdio"||!$.type))I.stderr?.off("data",B);if($.type==="stdio")try{let g=I.pid;if(g){TA(H,"Sending SIGINT to MCP server process");try{process.kill(g,"SIGINT")}catch(v){TA(H,`Error sending SIGINT: ${v}`);return}await new Promise(async(v)=>{let p=!1,d=setInterval(()=>{try{process.kill(g,0)}catch{if(!p)p=!0,clearInterval(d),clearTimeout(k),TA(H,"MCP server process exited cleanly"),v()}},50),k=setTimeout(()=>{if(!p)p=!0,clearInterval(d),TA(H,"Cleanup timeout reached, stopping process monitoring"),v()},600);try{if(await new Promise((n)=>setTimeout(n,100)),!p){try{process.kill(g,0),TA(H,"SIGINT failed, sending SIGTERM to MCP server process");try{process.kill(g,"SIGTERM")}catch(n){TA(H,`Error sending SIGTERM: ${n}`),p=!0,clearInterval(d),clearTimeout(k),v();return}}catch{p=!0,clearInterval(d),clearTimeout(k),v();return}if(await new Promise((n)=>setTimeout(n,400)),!p)try{process.kill(g,0),TA(H,"SIGTERM failed, sending SIGKILL to MCP server process");try{process.kill(g,"SIGKILL")}catch(n){TA(H,`Error sending SIGKILL: ${n}`)}}catch{p=!0,clearInterval(d),clearTimeout(k),v()}}if(!p)p=!0,clearInterval(d),clearTimeout(k),v()}catch{if(!p)p=!0,clearInterval(d),clearTimeout(k),v()}})}}catch(y){TA(H,`Error terminating process: ${y}`)}try{await E.close()}catch(y){TA(H,`Error closing client: ${y}`)}},O=WB(q),j=async()=>{O?.(),await q()},u=Date.now()-L;return c("tengu_mcp_server_connection_succeeded",{connectionDurationMs:u,transportType:$.type??"stdio",totalServers:A?.totalServers,stdioCount:A?.stdioCount,sseCount:A?.sseCount,httpCount:A?.httpCount,sseIdeCount:A?.sseIdeCount,wsIdeCount:A?.wsIdeCount,...SX($)?{mcpServerBaseUrl:SX($)}:{}}),{name:H,client:E,type:"connected",capabilities:U??{},serverInfo:X,instructions:J,config:$,cleanup:j}}catch(I){let D=Date.now()-L;return c("tengu_mcp_server_connection_failed",{connectionDurationMs:D,totalServers:A?.totalServers||1,stdioCount:A?.stdioCount||($.type==="stdio"?1:0),sseCount:A?.sseCount||($.type==="sse"?1:0),httpCount:A?.httpCount||($.type==="http"?1:0),sseIdeCount:A?.sseIdeCount||($.type==="sse-ide"?1:0),wsIdeCount:A?.wsIdeCount||($.type==="ws-ide"?1:0),transportType:$.type??"stdio",...SX($)?{mcpServerBaseUrl:SX($)}:{}}),TA(H,`Connection failed after ${D}ms: ${I instanceof Error?I.message:String(I)}`),BE(H,`Connection failed: ${I instanceof Error?I.message:String(I)}`),{name:H,type:"failed",config:$,error:I instanceof Error?I.message:String(I)}}},WSA);kS=o$(async(H)=>{if(H.type!=="connected")return[];try{if(!H.capabilities?.tools)return[];let $=await H.client.request({method:"tools/list"},bSH),A=sr($.tools),L=H.config.type==="sdk"&&A$(process.env.CLAUDE_AGENT_SDK_MCP_NO_PREFIX);return A.map((I)=>({...gOD,name:L?I.name:`mcp__${B1(H.name)}__${B1(I.name)}`,originalMcpToolName:I.name,isMcp:!0,async description(){return I.description??""},async prompt(){return I.description??""},isConcurrencySafe(){return I.annotations?.readOnlyHint??!1},isReadOnly(){return I.annotations?.readOnlyHint??!1},isDestructive(){return I.annotations?.destructiveHint??!1},isOpenWorld(){return I.annotations?.openWorldHint??!1},inputJSONSchema:I.inputSchema,async checkPermissions(){return{behavior:"passthrough",message:"MCPTool requires permission.",suggestions:[{type:"addRules",rules:[{toolName:L?I.name:`mcp__${B1(H.name)}__${B1(I.name)}`,ruleContent:void 0}],behavior:"allow",destination:"localSettings"}]}},async call(D,B,f,E,M){let G=TX1(E),U=G?{"claudecode/toolUseId":G}:{};if(M&&G)M({toolUseID:G,data:{type:"mcp_progress",status:"started",serverName:H.name,toolName:I.name}});let X=Date.now();try{let J=await g6H(H),F=await vxD({client:J,tool:I.name,args:D,meta:U,signal:B.abortController.signal,onProgress:M&&G?(Q)=>{M({toolUseID:G,data:Q})}:void 0});if(M&&G)M({toolUseID:G,data:{type:"mcp_progress",status:"completed",serverName:H.name,toolName:I.name,elapsedTimeMs:Date.now()-X}});return{data:F.content,...F._meta||F.structuredContent?{mcpMeta:{...F._meta&&{_meta:F._meta},...F.structuredContent&&{structuredContent:F.structuredContent}}}:{}}}catch(J){if(M&&G)M({toolUseID:G,data:{type:"mcp_progress",status:"failed",serverName:H.name,toolName:I.name,elapsedTimeMs:Date.now()-X}});if(J instanceof Error&&!(J instanceof pZ)){let F=J.constructor.name;if(F==="Error")throw new pZ(J.message,J.message.slice(0,200));if(F==="McpError"&&"code"in J&&typeof J.code==="number")throw new pZ(J.message,`McpError ${J.code}`)}throw J}},userFacingName(){let D=I.annotations?.title||I.name;return`${H.name} - ${D} (MCP)`},...z3H(H.name)?zxD(I.name):{}})).filter(wX1)}catch($){return BE(H.name,`Failed to fetch tools: ${$ instanceof Error?$.message:String($)}`),[]}}),KgH=o$(async(H)=>{if(H.type!=="connected")return[];try{if(!H.capabilities?.resources)return[];let $=await H.client.request({method:"resources/list"},IDH);if(!$.resources)return[];return $.resources.map((A)=>({...A,server:H.name}))}catch($){return BE(H.name,`Failed to fetch resources: ${$ instanceof Error?$.message:String($)}`),[]}}),QgH=o$(async(H)=>{if(H.type!=="connected")return[];try{if(!H.capabilities?.prompts)return[];let $=await H.client.request({method:"prompts/list"},vSH);if(!$.prompts)return[];return sr($.prompts).map((L)=>{let I=Object.values(L.arguments??{}).map((D)=>D.name);return{type:"prompt",name:"mcp__"+B1(H.name)+"__"+L.name,description:L.description??"",hasUserSpecifiedDescription:!!L.description,contentLength:0,isEnabled:()=>!0,isHidden:!1,isMcp:!0,progressMessage:"running",userFacingName(){return`${H.name}:${L.name} (MCP)`},argNames:I,source:"mcp",async getPromptForCommand(D){let B=D.split(" ");try{let f=await g6H(H),E=await f.client.getPrompt({name:L.name,arguments:znA(I,B)});return(await Promise.all(E.messages.map((G)=>yxD(G.content,f.name)))).flat()}catch(f){throw BE(H.name,`Error running command '${L.name}': ${f instanceof Error?f.message:String(f)}`),f}}}})}catch($){return BE(H.name,`Failed to fetch commands: ${$ instanceof Error?$.message:String($)}`),[]}});O2$=o$(async(H)=>{return new Promise(($)=>{let A=0,L=0;if(A=Object.keys(H).length,A===0){$({clients:[],tools:[],commands:[]});return}let I=[],D=[],B=[];tw$((f)=>{if(I.push(f.client),D.push(...f.tools),B.push(...f.commands),L++,L>=A){let E=B.reduce((M,G)=>{let U=G.name.length+(G.description??"").length+(G.argumentHint??"").length;return M+U},0);c("tengu_mcp_tools_commands_loaded",{tools_count:D.length,commands_count:B.length,commands_metadata_length:E}),$({clients:I,tools:D,commands:B})}},H).catch((f)=>{BE("prefetchAllMcpResources",`Failed to get MCP resources: ${f instanceof Error?f.message:String(f)}`),$({clients:[],tools:[],commands:[]})})})})});class KS{static instance;baseline=new Map;initialized=!1;mcpClient;lastProcessedTimestamps=new Map;rightFileDiagnosticsState=new Map;static getInstance(){if(!KS.instance)KS.instance=new KS;return KS.instance}initialize(H){if(this.initialized)return;this.mcpClient=H,this.initialized=!0}async shutdown(){this.initialized=!1,this.baseline.clear()}reset(){this.baseline.clear(),this.rightFileDiagnosticsState.clear()}normalizeFileUri(H){let $=["file://","_claude_fs_right:","_claude_fs_left:"],A=H;for(let L of $)if(H.startsWith(L)){A=H.slice(L.length);break}return sw$(A)}async ensureFileOpened(H){if(!this.initialized||!this.mcpClient||this.mcpClient.type!=="connected")return;try{await Gx("openFile",{filePath:H,preview:!1,startText:"",endText:"",selectToEndOfLine:!1,makeFrontmost:!1},this.mcpClient)}catch($){r($)}}async beforeFileEdited(H){if(!this.initialized||!this.mcpClient||this.mcpClient.type!=="connected")return;let $=Date.now();try{let A=await Gx("getDiagnostics",{uri:`file://${H}`},this.mcpClient),L=this.parseDiagnosticResult(A)[0];if(L){if(!uxD(this.normalizeFileUri(H),this.normalizeFileUri(L.uri))){r(new kxD(`Diagnostics file path mismatch: expected ${H}, got ${L.uri})`));return}let I=this.normalizeFileUri(H);this.baseline.set(I,L.diagnostics),this.lastProcessedTimestamps.set(I,$)}else{let I=this.normalizeFileUri(H);this.baseline.set(I,[]),this.lastProcessedTimestamps.set(I,$)}}catch(A){}}async getNewDiagnostics(){if(!this.initialized||!this.mcpClient||this.mcpClient.type!=="connected")return[];let H=[];try{let I=await Gx("getDiagnostics",{},this.mcpClient);H=this.parseDiagnosticResult(I)}catch(I){return[]}let $=H.filter((I)=>this.baseline.has(this.normalizeFileUri(I.uri))).filter((I)=>I.uri.startsWith("file://")),A=new Map;H.filter((I)=>this.baseline.has(this.normalizeFileUri(I.uri))).filter((I)=>I.uri.startsWith("_claude_fs_right:")).forEach((I)=>{A.set(this.normalizeFileUri(I.uri),I)});let L=[];for(let I of $){let D=this.normalizeFileUri(I.uri),B=this.baseline.get(D)||[],f=A.get(D),E=I;if(f){let G=this.rightFileDiagnosticsState.get(D);if(!G||!this.areDiagnosticArraysEqual(G,f.diagnostics))E=f;this.rightFileDiagnosticsState.set(D,f.diagnostics)}let M=E.diagnostics.filter((G)=>!B.some((U)=>this.areDiagnosticsEqual(G,U)));if(M.length>0)L.push({uri:I.uri,diagnostics:M});this.baseline.set(D,E.diagnostics)}return L}parseDiagnosticResult(H){if(Array.isArray(H)){let $=H.find((A)=>A.type==="text");if($&&"text"in $)return DA($.text)}return[]}areDiagnosticsEqual(H,$){return H.message===$.message&&H.severity===$.severity&&H.source===$.source&&H.code===$.code&&H.range.start.line===$.range.start.line&&H.range.start.character===$.range.start.character&&H.range.end.line===$.range.end.line&&H.range.end.character===$.range.end.character}areDiagnosticArraysEqual(H,$){if(H.length!==$.length)return!1;return H.every((A)=>$.some((L)=>this.areDiagnosticsEqual(A,L)))&&$.every((A)=>H.some((L)=>this.areDiagnosticsEqual(L,A)))}isLinterDiagnostic(H){let $=["eslint","eslint-plugin","tslint","prettier","stylelint","jshint","standardjs","xo","rome","biome","deno-lint","rubocop","pylint","flake8","black","ruff","clippy","rustfmt","golangci-lint","gofmt","swiftlint","detekt","ktlint","checkstyle","pmd","sonarqube","sonarjs"];if(!H.source)return!1;let A=H.source.toLowerCase();return $.some((L)=>A.includes(L))}async handleQueryStart(H){if(!this.initialized){let $=QC(H);if($)this.initialize($)}else this.reset()}static formatDiagnosticsSummary(H){let A=H.map((L)=>{let I=L.uri.split("/").pop()||L.uri,D=L.diagnostics.map((B)=>{return`  ${KS.getSeveritySymbol(B.severity)} [Line ${B.range.start.line+1}:${B.range.start.character+1}] ${B.message}${B.code?` [${B.code}]`:""}${B.source?` (${B.source})`:""}`}).join(`
`+$);let A;try{A=tm.Metadata.fromHttp2Headers(H)}catch(D){A=new tm.Metadata}let L=A.getMap(),I;if(typeof L["grpc-status"]==="string"){let D=Number(L["grpc-status"]);this.trace("received status code "+D+" from server"),A.remove("grpc-status");let B="";if(typeof L["grpc-message"]==="string"){try{B=decodeURI(L["grpc-message"])}catch(f){B=L["grpc-message"]}A.remove("grpc-message"),this.trace('received status details string "'+B+'" from server')}I={code:D,details:B,metadata:A}}else if(this.httpStatusCode)I=kCA(this.httpStatusCode),I.metadata=A;else I={code:kM.Status.UNKNOWN,details:"No status information received",metadata:A};this.endCall(I)}destroyHttp2Stream(){var H;if(this.http2Stream.destroyed)return;if(this.serverEndedCall)this.http2Stream.end();else{let $;if(((H=this.finalStatus)===null||H===void 0?void 0:H.code)===kM.Status.OK)$=om.constants.NGHTTP2_NO_ERROR;else $=om.constants.NGHTTP2_CANCEL;this.trace("close http2 stream with code "+$),this.http2Stream.close($)}}cancelWithStatus(H,$){this.trace("cancelWithStatus code: "+H+' details: "'+$+'"'),this.endCall({code:H,details:$,metadata:new tm.Metadata})}getStatus(){return this.finalStatus}getPeer(){return this.transport.getPeerName()}getCallNumber(){return this.callId}getAuthContext(){return this.transport.getAuthContext()}startRead(){if(this.finalStatus!==null&&this.finalStatus.code!==kM.Status.OK){this.readsClosed=!0,this.maybeOutputStatus();return}if(this.canPush=!0,this.unpushedReadMessages.length>0){let H=this.unpushedReadMessages.shift();this.push(H);return}this.http2Stream.resume()}sendMessageWithContext(H,$){this.trace("write() called with message of length "+$.length);let A=(L)=>{process.nextTick(()=>{var I;let D=kM.Status.UNAVAILABLE;if((L===null||L===void 0?void 0:L.code)==="ERR_STREAM_WRITE_AFTER_END")D=kM.Status.INTERNAL;if(L)this.cancelWithStatus(D,`Write error: ${L.message}`);(I=H.callback)===null||I===void 0||I.call(H)})};this.trace("sending data chunk of length "+$.length),this.callEventTracker.addMessageSent();try{this.http2Stream.write($,A)}catch(L){this.endCall({code:kM.Status.UNAVAILABLE,details:`Write failed with error ${L.message}`,metadata:new tm.Metadata})}}halfClose(){this.trace("end() called"),this.trace("calling end() on HTTP/2 stream"),this.http2Stream.end()}}b3$.Http2SubchannelCall=sfD});var AED=z((g3$)=>{Object.defineProperty(g3$,"__esModule",{value:!0});g3$.Http2SubchannelConnector=void 0;var K0H=require("http2"),nl9=require("tls"),k3$=Zo(),QhH=I8(),rl9=hCA(),yWH=wG(),al9=sx(),u3$=gC(),uCA=CP(),ol9=require("net"),tl9=efD(),sl9=T3$(),gCA="transport",el9="transport_flowctrl",Hi9=sPA().version,{HTTP2_HEADER_AUTHORITY:$i9,HTTP2_HEADER_CONTENT_TYPE:Ai9,HTTP2_HEADER_METHOD:Li9,HTTP2_HEADER_PATH:Ii9,HTTP2_HEADER_TE:Di9,HTTP2_HEADER_USER_AGENT:Bi9}=K0H.constants,fi9=20000,Ei9=Buffer.from("too_many_pings","ascii");class HED{constructor(H,$,A,L){if(this.session=H,this.options=A,this.remoteName=L,this.keepaliveTimer=null,this.pendingSendKeepalivePing=!1,this.activeCalls=new Set,this.disconnectListeners=[],this.disconnectHandled=!1,this.channelzEnabled=!0,this.keepalivesSent=0,this.messagesSent=0,this.messagesReceived=0,this.lastMessageSentTimestamp=null,this.lastMessageReceivedTimestamp=null,this.subchannelAddressString=(0,u3$.subchannelAddressToString)($),A["grpc.enable_channelz"]===0)this.channelzEnabled=!1,this.streamTracker=new k3$.ChannelzCallTrackerStub;else this.streamTracker=new k3$.ChannelzCallTracker;if(this.channelzRef=(0,k3$.registerChannelzSocket)(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.userAgent=[A["grpc.primary_user_agent"],`grpc-node-js/${Hi9}`,A["grpc.secondary_user_agent"]].filter((I)=>I).join(" "),"grpc.keepalive_time_ms"in A)this.keepaliveTimeMs=A["grpc.keepalive_time_ms"];else this.keepaliveTimeMs=-1;if("grpc.keepalive_timeout_ms"in A)this.keepaliveTimeoutMs=A["grpc.keepalive_timeout_ms"];else this.keepaliveTimeoutMs=fi9;if("grpc.keepalive_permit_without_calls"in A)this.keepaliveWithoutCalls=A["grpc.keepalive_permit_without_calls"]===1;else this.keepaliveWithoutCalls=!1;if(H.once("close",()=>{this.trace("session closed"),this.handleDisconnect()}),H.once("goaway",(I,D,B)=>{let f=!1;if(I===K0H.constants.NGHTTP2_ENHANCE_YOUR_CALM&&B&&B.equals(Ei9))f=!0;this.trace("connection closed by GOAWAY with code "+I+" and data "+(B===null||B===void 0?void 0:B.toString())),this.reportDisconnectToOwner(f)}),H.once("error",(I)=>{this.trace("connection closed with error "+I.message),this.handleDisconnect()}),H.socket.once("close",(I)=>{this.trace("connection closed. hadError="+I),this.handleDisconnect()}),yWH.isTracerEnabled(gCA))H.on("remoteSettings",(I)=>{this.trace("new settings received"+(this.session!==H?" on the old connection":"")+": "+JSON.stringify(I))}),H.on("localSettings",(I)=>{this.trace("local settings acknowledged by remote"+(this.session!==H?" on the old connection":"")+": "+JSON.stringify(I))});if(this.keepaliveWithoutCalls)this.maybeStartKeepalivePingTimer();if(H.socket instanceof nl9.TLSSocket)this.authContext={transportSecurityType:"ssl",sslPeerCertificate:H.socket.getPeerCertificate()};else this.authContext={}}getChannelzInfo(){var H,$,A;let L=this.session.socket,I=L.remoteAddress?(0,u3$.stringToSubchannelAddress)(L.remoteAddress,L.remotePort):null,D=L.localAddress?(0,u3$.stringToSubchannelAddress)(L.localAddress,L.localPort):null,B;if(this.session.encrypted){let E=L,M=E.getCipher(),G=E.getCertificate(),U=E.getPeerCertificate();B={cipherSuiteStandardName:(H=M.standardName)!==null&&H!==void 0?H:null,cipherSuiteOtherName:M.standardName?null:M.name,localCertificate:G&&"raw"in G?G.raw:null,remoteCertificate:U&&"raw"in U?U.raw:null}}else B=null;return{remoteAddress:I,localAddress:D,security:B,remoteName:this.remoteName,streamsStarted:this.streamTracker.callsStarted,streamsSucceeded:this.streamTracker.callsSucceeded,streamsFailed:this.streamTracker.callsFailed,messagesSent:this.messagesSent,messagesReceived:this.messagesReceived,keepAlivesSent:this.keepalivesSent,lastLocalStreamCreatedTimestamp:this.streamTracker.lastCallStartedTimestamp,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:this.lastMessageSentTimestamp,lastMessageReceivedTimestamp:this.lastMessageReceivedTimestamp,localFlowControlWindow:($=this.session.state.localWindowSize)!==null&&$!==void 0?$:null,remoteFlowControlWindow:(A=this.session.state.remoteWindowSize)!==null&&A!==void 0?A:null}}trace(H){yWH.trace(QhH.LogVerbosity.DEBUG,gCA,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+H)}keepaliveTrace(H){yWH.trace(QhH.LogVerbosity.DEBUG,"keepalive","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+H)}flowControlTrace(H){yWH.trace(QhH.LogVerbosity.DEBUG,el9,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+H)}internalsTrace(H){yWH.trace(QhH.LogVerbosity.DEBUG,"transport_internals","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+H)}reportDisconnectToOwner(H){if(this.disconnectHandled)return;this.disconnectHandled=!0,this.disconnectListeners.forEach(($)=>$(H))}handleDisconnect(){this.clearKeepaliveTimeout(),this.reportDisconnectToOwner(!1);for(let H of this.activeCalls)H.onDisconnect();setImmediate(()=>{this.session.destroy()})}addDisconnectListener(H){this.disconnectListeners.push(H)}canSendPing(){return!this.session.destroyed&&this.keepaliveTimeMs>0&&(this.keepaliveWithoutCalls||this.activeCalls.size>0)}maybeSendPing(){var H,$;if(!this.canSendPing()){this.pendingSendKeepalivePing=!0;return}if(this.keepaliveTimer){console.error("keepaliveTimeout is not null");return}if(this.channelzEnabled)this.keepalivesSent+=1;this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms"),this.keepaliveTimer=setTimeout(()=>{this.keepaliveTimer=null,this.keepaliveTrace("Ping timeout passed without response"),this.handleDisconnect()},this.keepaliveTimeoutMs),($=(H=this.keepaliveTimer).unref)===null||$===void 0||$.call(H);let A="";try{if(!this.session.ping((I,D,B)=>{if(this.clearKeepaliveTimeout(),I)this.keepaliveTrace("Ping failed with error "+I.message),this.handleDisconnect();else this.keepaliveTrace("Received ping response"),this.maybeStartKeepalivePingTimer()}))A="Ping returned false"}catch(L){A=(L instanceof Error?L.message:"")||"Unknown error"}if(A)this.keepaliveTrace("Ping send failed: "+A),this.handleDisconnect()}maybeStartKeepalivePingTimer(){var H,$;if(!this.canSendPing())return;if(this.pendingSendKeepalivePing)this.pendingSendKeepalivePing=!1,this.maybeSendPing();else if(!this.keepaliveTimer)this.keepaliveTrace("Starting keepalive timer for "+this.keepaliveTimeMs+"ms"),this.keepaliveTimer=setTimeout(()=>{this.keepaliveTimer=null,this.maybeSendPing()},this.keepaliveTimeMs),($=(H=this.keepaliveTimer).unref)===null||$===void 0||$.call(H)}clearKeepaliveTimeout(){if(this.keepaliveTimer)clearTimeout(this.keepaliveTimer),this.keepaliveTimer=null}removeActiveCall(H){if(this.activeCalls.delete(H),this.activeCalls.size===0)this.session.unref()}addActiveCall(H){if(this.activeCalls.add(H),this.activeCalls.size===1){if(this.session.ref(),!this.keepaliveWithoutCalls)this.maybeStartKeepalivePingTimer()}}createCall(H,$,A,L,I){let D=H.toHttp2Headers();D[$i9]=$,D[Bi9]=this.userAgent,D[Ai9]="application/grpc",D[Li9]="POST",D[Ii9]=A,D[Di9]="trailers";let B;try{B=this.session.request(D)}catch(M){throw this.handleDisconnect(),M}this.flowControlTrace("local window size: "+this.session.state.localWindowSize+" remote window size: "+this.session.state.remoteWindowSize),this.internalsTrace("session.closed="+this.session.closed+" session.destroyed="+this.session.destroyed+" session.socket.destroyed="+this.session.socket.destroyed);let f,E;if(this.channelzEnabled)this.streamTracker.addCallStarted(),f={addMessageSent:()=>{var M;this.messagesSent+=1,this.lastMessageSentTimestamp=new Date,(M=I.addMessageSent)===null||M===void 0||M.call(I)},addMessageReceived:()=>{var M;this.messagesReceived+=1,this.lastMessageReceivedTimestamp=new Date,(M=I.addMessageReceived)===null||M===void 0||M.call(I)},onCallEnd:(M)=>{var G;(G=I.onCallEnd)===null||G===void 0||G.call(I,M),this.removeActiveCall(E)},onStreamEnd:(M)=>{var G;if(M)this.streamTracker.addCallSucceeded();else this.streamTracker.addCallFailed();(G=I.onStreamEnd)===null||G===void 0||G.call(I,M)}};else f={addMessageSent:()=>{var M;(M=I.addMessageSent)===null||M===void 0||M.call(I)},addMessageReceived:()=>{var M;(M=I.addMessageReceived)===null||M===void 0||M.call(I)},onCallEnd:(M)=>{var G;(G=I.onCallEnd)===null||G===void 0||G.call(I,M),this.removeActiveCall(E)},onStreamEnd:(M)=>{var G;(G=I.onStreamEnd)===null||G===void 0||G.call(I,M)}};return E=new tl9.Http2SubchannelCall(B,f,L,this,(0,sl9.getNextCallNumber)()),this.addActiveCall(E),E}getChannelzRef(){return this.channelzRef}getPeerName(){return this.subchannelAddressString}getOptions(){return this.options}getAuthContext(){return this.authContext}shutdown(){this.session.close(),(0,k3$.unregisterChannelzRef)(this.channelzRef)}}class $ED{constructor(H){this.channelTarget=H,this.session=null,this.isShutdown=!1}trace(H){yWH.trace(QhH.LogVerbosity.DEBUG,gCA,(0,uCA.uriToString)(this.channelTarget)+" "+H)}createSession(H,$,A){if(this.isShutdown)return Promise.reject();if(H.socket.closed)return Promise.reject("Connection closed before starting HTTP/2 handshake");return new Promise((L,I)=>{var D,B,f,E,M,G,U;let X=null,J=this.channelTarget;if("grpc.http_connect_target"in A){let u=(0,uCA.parseUri)(A["grpc.http_connect_target"]);if(u)J=u,X=(0,uCA.uriToString)(u)}let F=H.secure?"https":"http",Q=(0,al9.getDefaultAuthority)(J),W=()=>{var u;(u=this.session)===null||u===void 0||u.destroy(),this.session=null,setImmediate(()=>{if(!j)j=!0,I(`${O.trim()} (${new Date().toISOString()})`)})},P=(u)=>{var y;if((y=this.session)===null||y===void 0||y.destroy(),O=u.message,this.trace("connection failed with error "+O),!j)j=!0,I(`${O} (${new Date().toISOString()})`)},Y={createConnection:(u,y)=>{return H.socket},settings:{initialWindowSize:(E=(D=A["grpc-node.flow_control_window"])!==null&&D!==void 0?D:(f=(B=K0H.getDefaultSettings)===null||B===void 0?void 0:B.call(K0H))===null||f===void 0?void 0:f.initialWindowSize)!==null&&E!==void 0?E:65535}},C=K0H.connect(`${F}://${Q}`,Y),Z=(U=(G=(M=K0H.getDefaultSettings)===null||M===void 0?void 0:M.call(K0H))===null||G===void 0?void 0:G.initialWindowSize)!==null&&U!==void 0?U:65535,q=A["grpc-node.flow_control_window"];this.session=C;let O="Failed to connect",j=!1;C.unref(),C.once("remoteSettings",()=>{var u;if(q&&q>Z)try{C.setLocalWindowSize(q)}catch(y){let g=q-((u=C.state.localWindowSize)!==null&&u!==void 0?u:Z);if(g>0)C.incrementWindowSize(g)}C.removeAllListeners(),H.socket.removeListener("close",W),H.socket.removeListener("error",P),L(new HED(C,$,A,X)),this.session=null}),C.once("close",W),C.once("error",P),H.socket.once("close",W),H.socket.once("error",P)})}tcpConnect(H,$){return(0,rl9.getProxiedConnection)(H,$).then((A)=>{if(A)return A;else return new Promise((L,I)=>{let D=()=>{I(Error("Socket closed"))},B=(E)=>{I(E)},f=ol9.connect(H,()=>{f.removeListener("close",D),f.removeListener("error",B),L(f)});f.once("close",D),f.once("error",B)})})}async connect(H,$,A){if(this.isShutdown)return Promise.reject();let L=null,I=null,D=(0,u3$.subchannelAddressToString)(H);try{return this.trace(D+" Waiting for secureConnector to be ready"),await $.waitForReady(),this.trace(D+" secureConnector is ready"),L=await this.tcpConnect(H,A),L.setNoDelay(),this.trace(D+" Established TCP connection"),I=await $.connect(L),this.trace(D+" Established secure connection"),this.createSession(I,H,A)}catch(B){throw L===null||L===void 0||L.destroy(),I===null||I===void 0||I.socket.destroy(),B}}shutdown(){var H;this.isShutdown=!0,(H=this.session)===null||H===void 0||H.close(),this.session=null}}g3$.Http2SubchannelConnector=$ED});var LED=z((WhH)=>{Object.defineProperty(WhH,"__esModule",{value:!0});WhH.SubchannelPool=void 0;WhH.getSubchannelPool=Qi9;var Mi9=r9D(),Gi9=mfD(),Ui9=gC(),Xi9=CP(),Ji9=AED(),Fi9=1e4;class m3${constructor(){this.pool=Object.create(null),this.cleanupTimer=null}unrefUnusedSubchannels(){let H=!0;for(let $ in this.pool){let L=this.pool[$].filter((I)=>!I.subchannel.unrefIfOneRef());if(L.length>0)H=!1;this.pool[$]=L}if(H&&this.cleanupTimer!==null)clearInterval(this.cleanupTimer),this.cleanupTimer=null}ensureCleanupTask(){var H,$;if(this.cleanupTimer===null)this.cleanupTimer=setInterval(()=>{this.unrefUnusedSubchannels()},Fi9),($=(H=this.cleanupTimer).unref)===null||$===void 0||$.call(H)}getOrCreateSubchannel(H,$,A,L){this.ensureCleanupTask();let I=(0,Xi9.uriToString)(H);if(I in this.pool){let B=this.pool[I];for(let f of B)if((0,Ui9.subchannelAddressEqual)($,f.subchannelAddress)&&(0,Mi9.channelOptionsEqual)(A,f.channelArguments)&&L._equals(f.channelCredentials))return f.subchannel}let D=new Gi9.Subchannel(H,$,A,L,new Ji9.Http2SubchannelConnector(H));if(!(I in this.pool))this.pool[I]=[];return this.pool[I].push({subchannelAddress:$,channelArguments:A,channelCredentials:L,subchannel:D}),D.ref(),D}}WhH.SubchannelPool=m3$;var Ki9=new m3$;function Qi9(H){if(H)return Ki9;else return new m3$}});var fED=z((c3$)=>{Object.defineProperty(c3$,"__esModule",{value:!0});c3$.LoadBalancingCall=void 0;var IED=YP(),p3$=I8(),DED=OWH(),d3$=dQ(),VhH=pm(),Wi9=CP(),Vi9=wG(),mCA=GhH(),Pi9=require("http2"),_i9="load_balancing_call";class BED{constructor(H,$,A,L,I,D,B){var f,E;this.channel=H,this.callConfig=$,this.methodName=A,this.host=L,this.credentials=I,this.deadline=D,this.callNumber=B,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.metadata=null,this.listener=null,this.onCallEnded=null,this.childStartTime=null;let M=this.methodName.split("/"),G="";if(M.length>=2)G=M[1];let U=(E=(f=(0,Wi9.splitHostPort)(this.host))===null||f===void 0?void 0:f.host)!==null&&E!==void 0?E:"localhost";this.serviceUrl=`https://${U}/${G}`,this.startTime=new Date}getDeadlineInfo(){var H,$;let A=[];if(this.childStartTime){if(this.childStartTime>this.startTime){if((H=this.metadata)===null||H===void 0?void 0:H.getOptions().waitForReady)A.push("wait_for_ready");A.push(`LB pick: ${(0,DED.formatDateDifference)(this.startTime,this.childStartTime)}`)}return A.push(...this.child.getDeadlineInfo()),A}else{if(($=this.metadata)===null||$===void 0?void 0:$.getOptions().waitForReady)A.push("wait_for_ready");A.push("Waiting for LB pick")}return A}trace(H){Vi9.trace(p3$.LogVerbosity.DEBUG,_i9,"["+this.callNumber+"] "+H)}outputStatus(H,$){var A,L;if(!this.ended){this.ended=!0,this.trace("ended with status: code="+H.code+' details="'+H.details+'" start time='+this.startTime.toISOString());let I=Object.assign(Object.assign({},H),{progress:$});(A=this.listener)===null||A===void 0||A.onReceiveStatus(I),(L=this.onCallEnded)===null||L===void 0||L.call(this,I.code,I.details,I.metadata)}}doPick(){var H,$;if(this.ended)return;if(!this.metadata)throw Error("doPick called before start");this.trace("Pick called");let A=this.metadata.clone(),L=this.channel.doPick(A,this.callConfig.pickInformation),I=L.subchannel?"("+L.subchannel.getChannelzRef().id+") "+L.subchannel.getAddress():""+L.subchannel;switch(this.trace("Pick result: "+VhH.PickResultType[L.pickResultType]+" subchannel: "+I+" status: "+((H=L.status)===null||H===void 0?void 0:H.code)+" "+(($=L.status)===null||$===void 0?void 0:$.details)),L.pickResultType){case VhH.PickResultType.COMPLETE:this.credentials.compose(L.subchannel.getCallCredentials()).generateMetadata({method_name:this.methodName,service_url:this.serviceUrl}).then((E)=>{var M;if(this.ended){this.trace("Credentials metadata generation finished after call ended");return}if(A.merge(E),A.get("authorization").length>1)this.outputStatus({code:p3$.Status.INTERNAL,details:'"authorization" metadata cannot have multiple values',metadata:new d3$.Metadata},"PROCESSED");if(L.subchannel.getConnectivityState()!==IED.ConnectivityState.READY){this.trace("Picked subchannel "+I+" has state "+IED.ConnectivityState[L.subchannel.getConnectivityState()]+" after getting credentials metadata. Retrying pick"),this.doPick();return}if(this.deadline!==1/0)A.set("grpc-timeout",(0,DED.getDeadlineTimeoutString)(this.deadline));try{this.child=L.subchannel.getRealSubchannel().createCall(A,this.host,this.methodName,{onReceiveMetadata:(G)=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(G)},onReceiveMessage:(G)=>{this.trace("Received message"),this.listener.onReceiveMessage(G)},onReceiveStatus:(G)=>{if(this.trace("Received status"),G.rstCode===Pi9.constants.NGHTTP2_REFUSED_STREAM)this.outputStatus(G,"REFUSED");else this.outputStatus(G,"PROCESSED")}}),this.childStartTime=new Date}catch(G){this.trace("Failed to start call on picked subchannel "+I+" with error "+G.message),this.outputStatus({code:p3$.Status.INTERNAL,details:"Failed to start HTTP/2 stream with error "+G.message,metadata:new d3$.Metadata},"NOT_STARTED");return}if((M=L.onCallStarted)===null||M===void 0||M.call(L),this.onCallEnded=L.onCallEnded,this.trace("Created child call ["+this.child.getCallNumber()+"]"),this.readPending)this.child.startRead();if(this.pendingMessage)this.child.sendMessageWithContext(this.pendingMessage.context,this.pendingMessage.message);if(this.pendingHalfClose)this.child.halfClose()},(E)=>{let{code:M,details:G}=(0,mCA.restrictControlPlaneStatusCode)(typeof E.code==="number"?E.code:p3$.Status.UNKNOWN,`Getting metadata from plugin failed with error: ${E.message}`);this.outputStatus({code:M,details:G,metadata:new d3$.Metadata},"PROCESSED")});break;case VhH.PickResultType.DROP:let{code:B,details:f}=(0,mCA.restrictControlPlaneStatusCode)(L.status.code,L.status.details);setImmediate(()=>{this.outputStatus({code:B,details:f,metadata:L.status.metadata},"DROP")});break;case VhH.PickResultType.TRANSIENT_FAILURE:if(this.metadata.getOptions().waitForReady)this.channel.queueCallForPick(this);else{let{code:E,details:M}=(0,mCA.restrictControlPlaneStatusCode)(L.status.code,L.status.details);setImmediate(()=>{this.outputStatus({code:E,details:M,metadata:L.status.metadata},"PROCESSED")})}break;case VhH.PickResultType.QUEUE:this.channel.queueCallForPick(this)}}cancelWithStatus(H,$){var A;this.trace("cancelWithStatus code: "+H+' details: "'+$+'"'),(A=this.child)===null||A===void 0||A.cancelWithStatus(H,$),this.outputStatus({code:H,details:$,metadata:new d3$.Metadata},"PROCESSED")}getPeer(){var H,$;return($=(H=this.child)===null||H===void 0?void 0:H.getPeer())!==null&&$!==void 0?$:this.channel.getTarget()}start(H,$){this.trace("start called"),this.listener=$,this.metadata=H,this.doPick()}sendMessageWithContext(H,$){if(this.trace("write() called with message of length "+$.length),this.child)this.child.sendMessageWithContext(H,$);else this.pendingMessage={context:H,message:$}}startRead(){if(this.trace("startRead called"),this.child)this.child.startRead();else this.readPending=!0}halfClose(){if(this.trace("halfClose called"),this.child)this.child.halfClose();else this.pendingHalfClose=!0}setCredentials(H){throw Error("Method not implemented.")}getCallNumber(){return this.callNumber}getAuthContext(){if(this.child)return this.child.getAuthContext();else return null}}c3$.LoadBalancingCall=BED});var GED=z((l3$)=>{Object.defineProperty(l3$,"__esModule",{value:!0});l3$.ResolvingCall=void 0;var Ci9=j6$(),Q0H=I8(),W0H=OWH(),EED=dQ(),Yi9=wG(),wi9=GhH(),Zi9="resolving_call";class MED{constructor(H,$,A,L,I){if(this.channel=H,this.method=$,this.filterStackFactory=L,this.callNumber=I,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.readFilterPending=!1,this.writeFilterPending=!1,this.pendingChildStatus=null,this.metadata=null,this.listener=null,this.statusWatchers=[],this.deadlineTimer=setTimeout(()=>{},0),this.filterStack=null,this.deadlineStartTime=null,this.configReceivedTime=null,this.childStartTime=null,this.credentials=Ci9.CallCredentials.createEmpty(),this.deadline=A.deadline,this.host=A.host,A.parentCall){if(A.flags&Q0H.Propagate.CANCELLATION)A.parentCall.on("cancelled",()=>{this.cancelWithStatus(Q0H.Status.CANCELLED,"Cancelled by parent call")});if(A.flags&Q0H.Propagate.DEADLINE)this.trace("Propagating deadline from parent: "+A.parentCall.getDeadline()),this.deadline=(0,W0H.minDeadline)(this.deadline,A.parentCall.getDeadline())}this.trace("Created"),this.runDeadlineTimer()}trace(H){Yi9.trace(Q0H.LogVerbosity.DEBUG,Zi9,"["+this.callNumber+"] "+H)}runDeadlineTimer(){clearTimeout(this.deadlineTimer),this.deadlineStartTime=new Date,this.trace("Deadline: "+(0,W0H.deadlineToString)(this.deadline));let H=(0,W0H.getRelativeTimeout)(this.deadline);if(H!==1/0){this.trace("Deadline will be reached in "+H+"ms");let $=()=>{if(!this.deadlineStartTime){this.cancelWithStatus(Q0H.Status.DEADLINE_EXCEEDED,"Deadline exceeded");return}let A=[],L=new Date;if(A.push(`Deadline exceeded after ${(0,W0H.formatDateDifference)(this.deadlineStartTime,L)}`),this.configReceivedTime){if(this.configReceivedTime>this.deadlineStartTime)A.push(`name resolution: ${(0,W0H.formatDateDifference)(this.deadlineStartTime,this.configReceivedTime)}`);if(this.childStartTime){if(this.childStartTime>this.configReceivedTime)A.push(`metadata filters: ${(0,W0H.formatDateDifference)(this.configReceivedTime,this.childStartTime)}`)}else A.push("waiting for metadata filters")}else A.push("waiting for name resolution");if(this.child)A.push(...this.child.getDeadlineInfo());this.cancelWithStatus(Q0H.Status.DEADLINE_EXCEEDED,A.join(","))};if(H<=0)process.nextTick($);else this.deadlineTimer=setTimeout($,H)}}outputStatus(H){if(!this.ended){if(this.ended=!0,!this.filterStack)this.filterStack=this.filterStackFactory.createFilter();clearTimeout(this.deadlineTimer);let $=this.filterStack.receiveTrailers(H);this.trace("ended with status: code="+$.code+' details="'+$.details+'"'),this.statusWatchers.forEach((A)=>A($)),process.nextTick(()=>{var A;(A=this.listener)===null||A===void 0||A.onReceiveStatus($)})}}sendMessageOnChild(H,$){if(!this.child)throw Error("sendMessageonChild called with child not populated");let A=this.child;this.writeFilterPending=!0,this.filterStack.sendMessage(Promise.resolve({message:$,flags:H.flags})).then((L)=>{if(this.writeFilterPending=!1,A.sendMessageWithContext(H,L.message),this.pendingHalfClose)A.halfClose()},(L)=>{this.cancelWithStatus(L.code,L.details)})}getConfig(){if(this.ended)return;if(!this.metadata||!this.listener)throw Error("getConfig called before start");let H=this.channel.getConfig(this.method,this.metadata);if(H.type==="NONE"){this.channel.queueCallForConfig(this);return}else if(H.type==="ERROR"){if(this.metadata.getOptions().waitForReady)this.channel.queueCallForConfig(this);else this.outputStatus(H.error);return}this.configReceivedTime=new Date;let $=H.config;if($.status!==Q0H.Status.OK){let{code:A,details:L}=(0,wi9.restrictControlPlaneStatusCode)($.status,"Failed to route call to method "+this.method);this.outputStatus({code:A,details:L,metadata:new EED.Metadata});return}if($.methodConfig.timeout){let A=new Date;A.setSeconds(A.getSeconds()+$.methodConfig.timeout.seconds),A.setMilliseconds(A.getMilliseconds()+$.methodConfig.timeout.nanos/1e6),this.deadline=(0,W0H.minDeadline)(this.deadline,A),this.runDeadlineTimer()}this.filterStackFactory.push($.dynamicFilterFactories),this.filterStack=this.filterStackFactory.createFilter(),this.filterStack.sendMetadata(Promise.resolve(this.metadata)).then((A)=>{if(this.child=this.channel.createRetryingCall($,this.method,this.host,this.credentials,this.deadline),this.trace("Created child ["+this.child.getCallNumber()+"]"),this.childStartTime=new Date,this.child.start(A,{onReceiveMetadata:(L)=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(this.filterStack.receiveMetadata(L))},onReceiveMessage:(L)=>{this.trace("Received message"),this.readFilterPending=!0,this.filterStack.receiveMessage(L).then((I)=>{if(this.trace("Finished filtering received message"),this.readFilterPending=!1,this.listener.onReceiveMessage(I),this.pendingChildStatus)this.outputStatus(this.pendingChildStatus)},(I)=>{this.cancelWithStatus(I.code,I.details)})},onReceiveStatus:(L)=>{if(this.trace("Received status"),this.readFilterPending)this.pendingChildStatus=L;else this.outputStatus(L)}}),this.readPending)this.child.startRead();if(this.pendingMessage)this.sendMessageOnChild(this.pendingMessage.context,this.pendingMessage.message);else if(this.pendingHalfClose)this.child.halfClose()},(A)=>{this.outputStatus(A)})}reportResolverError(H){var $;if(($=this.metadata)===null||$===void 0?void 0:$.getOptions().waitForReady)this.channel.queueCallForConfig(this);else this.outputStatus(H)}cancelWithStatus(H,$){var A;this.trace("cancelWithStatus code: "+H+' details: "'+$+'"'),(A=this.child)===null||A===void 0||A.cancelWithStatus(H,$),this.outputStatus({code:H,details:$,metadata:new EED.Metadata})}getPeer(){var H,$;return($=(H=this.child)===null||H===void 0?void 0:H.getPeer())!==null&&$!==void 0?$:this.channel.getTarget()}start(H,$){this.trace("start called"),this.metadata=H.clone(),this.listener=$,this.getConfig()}sendMessageWithContext(H,$){if(this.trace("write() called with message of length "+$.length),this.child)this.sendMessageOnChild(H,$);else this.pendingMessage={context:H,message:$}}startRead(){if(this.trace("startRead called"),this.child)this.child.startRead();else this.readPending=!0}halfClose(){if(this.trace("halfClose called"),this.child&&!this.writeFilterPending)this.child.halfClose();else this.pendingHalfClose=!0}setCredentials(H){this.credentials=H}addStatusWatcher(H){this.statusWatchers.push(H)}getCallNumber(){return this.callNumber}getAuthContext(){if(this.child)return this.child.getAuthContext();else return null}}l3$.ResolvingCall=MED});var FED=z((To)=>{Object.defineProperty(To,"__esModule",{value:!0});To.RetryingCall=To.MessageBufferTracker=To.RetryThrottler=void 0;var i3$=I8(),qi9=OWH(),Ti9=dQ(),zi9=wG(),Ni9="retrying_call";class UED{constructor(H,$,A){if(this.maxTokens=H,this.tokenRatio=$,A)this.tokens=A.tokens*(H/A.maxTokens);else this.tokens=H}addCallSucceeded(){this.tokens=Math.min(this.tokens+this.tokenRatio,this.maxTokens)}addCallFailed(){this.tokens=Math.max(this.tokens-1,0)}canRetryCall(){return this.tokens>this.maxTokens/2}}To.RetryThrottler=UED;class XED{constructor(H,$){this.totalLimit=H,this.limitPerCall=$,this.totalAllocated=0,this.allocatedPerCall=new Map}allocate(H,$){var A;let L=(A=this.allocatedPerCall.get($))!==null&&A!==void 0?A:0;if(this.limitPerCall-L<H||this.totalLimit-this.totalAllocated<H)return!1;return this.allocatedPerCall.set($,L+H),this.totalAllocated+=H,!0}free(H,$){var A;if(this.totalAllocated<H)throw Error(`Invalid buffer allocation state: call ${$} freed ${H} > total allocated ${this.totalAllocated}`);this.totalAllocated-=H;let L=(A=this.allocatedPerCall.get($))!==null&&A!==void 0?A:0;if(L<H)throw Error(`Invalid buffer allocation state: call ${$} freed ${H} > allocated for call ${L}`);this.allocatedPerCall.set($,L-H)}freeAll(H){var $;let A=($=this.allocatedPerCall.get(H))!==null&&$!==void 0?$:0;if(this.totalAllocated<A)throw Error(`Invalid buffer allocation state: call ${H} allocated ${A} > total allocated ${this.totalAllocated}`);this.totalAllocated-=A,this.allocatedPerCall.delete(H)}}To.MessageBufferTracker=XED;var pCA="grpc-previous-rpc-attempts",Oi9=5;class JED{constructor(H,$,A,L,I,D,B,f,E){var M;this.channel=H,this.callConfig=$,this.methodName=A,this.host=L,this.credentials=I,this.deadline=D,this.callNumber=B,this.bufferTracker=f,this.retryThrottler=E,this.listener=null,this.initialMetadata=null,this.underlyingCalls=[],this.writeBuffer=[],this.writeBufferOffset=0,this.readStarted=!1,this.transparentRetryUsed=!1,this.attempts=0,this.hedgingTimer=null,this.committedCallIndex=null,this.initialRetryBackoffSec=0,this.nextRetryBackoffSec=0;let G=(M=H.getOptions()["grpc-node.retry_max_attempts_limit"])!==null&&M!==void 0?M:Oi9;if(H.getOptions()["grpc.enable_retries"]===0)this.state="NO_RETRY",this.maxAttempts=1;else if($.methodConfig.retryPolicy){this.state="RETRY";let U=$.methodConfig.retryPolicy;this.nextRetryBackoffSec=this.initialRetryBackoffSec=Number(U.initialBackoff.substring(0,U.initialBackoff.length-1)),this.maxAttempts=Math.min(U.maxAttempts,G)}else if($.methodConfig.hedgingPolicy)this.state="HEDGING",this.maxAttempts=Math.min($.methodConfig.hedgingPolicy.maxAttempts,G);else this.state="TRANSPARENT_ONLY",this.maxAttempts=1;this.startTime=new Date}getDeadlineInfo(){if(this.underlyingCalls.length===0)return[];let H=[],$=this.underlyingCalls[this.underlyingCalls.length-1];if(this.underlyingCalls.length>1)H.push(`previous attempts: ${this.underlyingCalls.length-1}`);if($.startTime>this.startTime)H.push(`time to current attempt start: ${(0,qi9.formatDateDifference)(this.startTime,$.startTime)}`);return H.push(...$.call.getDeadlineInfo()),H}getCallNumber(){return this.callNumber}trace(H){zi9.trace(i3$.LogVerbosity.DEBUG,Ni9,"["+this.callNumber+"] "+H)}reportStatus(H){this.trace("ended with status: code="+H.code+' details="'+H.details+'" start time='+this.startTime.toISOString()),this.bufferTracker.freeAll(this.callNumber),this.writeBufferOffset=this.writeBufferOffset+this.writeBuffer.length,this.writeBuffer=[],process.nextTick(()=>{var $;($=this.listener)===null||$===void 0||$.onReceiveStatus({code:H.code,details:H.details,metadata:H.metadata})})}cancelWithStatus(H,$){this.trace("cancelWithStatus code: "+H+' details: "'+$+'"'),this.reportStatus({code:H,details:$,metadata:new Ti9.Metadata});for(let{call:A}of this.underlyingCalls)A.cancelWithStatus(H,$)}getPeer(){if(this.committedCallIndex!==null)return this.underlyingCalls[this.committedCallIndex].call.getPeer();else return"unknown"}getBufferEntry(H){var $;return($=this.writeBuffer[H-this.writeBufferOffset])!==null&&$!==void 0?$:{entryType:"FREED",allocated:!1}}getNextBufferIndex(){return this.writeBufferOffset+this.writeBuffer.length}clearSentMessages(){if(this.state!=="COMMITTED")return;let H;if(this.underlyingCalls[this.committedCallIndex].state==="COMPLETED")H=this.getNextBufferIndex();else H=this.underlyingCalls[this.committedCallIndex].nextMessageToSend;for(let $=this.writeBufferOffset;$<H;$++){let A=this.getBufferEntry($);if(A.allocated)this.bufferTracker.free(A.message.message.length,this.callNumber)}this.writeBuffer=this.writeBuffer.slice(H-this.writeBufferOffset),this.writeBufferOffset=H}commitCall(H){var $,A;if(this.state==="COMMITTED")return;this.trace("Committing call ["+this.underlyingCalls[H].call.getCallNumber()+"] at index "+H),this.state="COMMITTED",(A=($=this.callConfig).onCommitted)===null||A===void 0||A.call($),this.committedCallIndex=H;for(let L=0;L<this.underlyingCalls.length;L++){if(L===H)continue;if(this.underlyingCalls[L].state==="COMPLETED")continue;this.underlyingCalls[L].state="COMPLETED",this.underlyingCalls[L].call.cancelWithStatus(i3$.Status.CANCELLED,"Discarded in favor of other hedged attempt")}this.clearSentMessages()}commitCallWithMostMessages(){if(this.state==="COMMITTED")return;let H=-1,$=-1;for(let[A,L]of this.underlyingCalls.entries())if(L.state==="ACTIVE"&&L.nextMessageToSend>H)H=L.nextMessageToSend,$=A;if($===-1)this.state="TRANSPARENT_ONLY";else this.commitCall($)}isStatusCodeInList(H,$){return H.some((A)=>{var L;return A===$||A.toString().toLowerCase()===((L=i3$.Status[$])===null||L===void 0?void 0:L.toLowerCase())})}getNextRetryJitter(){return Math.random()*0.3999999999999999+0.8}getNextRetryBackoffMs(){var H;let $=(H=this.callConfig)===null||H===void 0?void 0:H.methodConfig.retryPolicy;if(!$)return 0;let L=this.getNextRetryJitter()*this.nextRetryBackoffSec*1000,I=Number($.maxBackoff.substring(0,$.maxBackoff.length-1));return this.nextRetryBackoffSec=Math.min(this.nextRetryBackoffSec*$.backoffMultiplier,I),L}maybeRetryCall(H,$){if(this.state!=="RETRY"){$(!1);return}if(this.attempts>=this.maxAttempts){$(!1);return}let A;if(H===null)A=this.getNextRetryBackoffMs();else if(H<0){this.state="TRANSPARENT_ONLY",$(!1);return}else A=H,this.nextRetryBackoffSec=this.initialRetryBackoffSec;setTimeout(()=>{var L,I;if(this.state!=="RETRY"){$(!1);return}if((I=(L=this.retryThrottler)===null||L===void 0?void 0:L.canRetryCall())!==null&&I!==void 0?I:!0)$(!0),this.attempts+=1,this.startNewAttempt();else this.trace("Retry attempt denied by throttling policy"),$(!1)},A)}countActiveCalls(){let H=0;for(let $ of this.underlyingCalls)if(($===null||$===void 0?void 0:$.state)==="ACTIVE")H+=1;return H}handleProcessedStatus(H,$,A){var L,I,D;switch(this.state){case"COMMITTED":case"NO_RETRY":case"TRANSPARENT_ONLY":this.commitCall($),this.reportStatus(H);break;case"HEDGING":if(this.isStatusCodeInList((L=this.callConfig.methodConfig.hedgingPolicy.nonFatalStatusCodes)!==null&&L!==void 0?L:[],H.code)){(I=this.retryThrottler)===null||I===void 0||I.addCallFailed();let B;if(A===null)B=0;else if(A<0){this.state="TRANSPARENT_ONLY",this.commitCall($),this.reportStatus(H);return}else B=A;setTimeout(()=>{if(this.maybeStartHedgingAttempt(),this.countActiveCalls()===0)this.commitCall($),this.reportStatus(H)},B)}else this.commitCall($),this.reportStatus(H);break;case"RETRY":if(this.isStatusCodeInList(this.callConfig.methodConfig.retryPolicy.retryableStatusCodes,H.code))(D=this.retryThrottler)===null||D===void 0||D.addCallFailed(),this.maybeRetryCall(A,(B)=>{if(!B)this.commitCall($),this.reportStatus(H)});else this.commitCall($),this.reportStatus(H);break}}getPushback(H){let $=H.get("grpc-retry-pushback-ms");if($.length===0)return null;try{return parseInt($[0])}catch(A){return-1}}handleChildStatus(H,$){var A;if(this.underlyingCalls[$].state==="COMPLETED")return;if(this.trace("state="+this.state+" handling status with progress "+H.progress+" from child ["+this.underlyingCalls[$].call.getCallNumber()+"] in state "+this.underlyingCalls[$].state),this.underlyingCalls[$].state="COMPLETED",H.code===i3$.Status.OK){(A=this.retryThrottler)===null||A===void 0||A.addCallSucceeded(),this.commitCall($),this.reportStatus(H);return}if(this.state==="NO_RETRY"){this.commitCall($),this.reportStatus(H);return}if(this.state==="COMMITTED"){this.reportStatus(H);return}let L=this.getPushback(H.metadata);switch(H.progress){case"NOT_STARTED":this.startNewAttempt();break;case"REFUSED":if(this.transparentRetryUsed)this.handleProcessedStatus(H,$,L);else this.transparentRetryUsed=!0,this.startNewAttempt();break;case"DROP":this.commitCall($),this.reportStatus(H);break;case"PROCESSED":this.handleProcessedStatus(H,$,L);break}}maybeStartHedgingAttempt(){if(this.state!=="HEDGING")return;if(!this.callConfig.methodConfig.hedgingPolicy)return;if(this.attempts>=this.maxAttempts)return;this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer()}maybeStartHedgingTimer(){var H,$,A;if(this.hedgingTimer)clearTimeout(this.hedgingTimer);if(this.state!=="HEDGING")return;if(!this.callConfig.methodConfig.hedgingPolicy)return;let L=this.callConfig.methodConfig.hedgingPolicy;if(this.attempts>=this.maxAttempts)return;let I=(H=L.hedgingDelay)!==null&&H!==void 0?H:"0s",D=Number(I.substring(0,I.length-1));this.hedgingTimer=setTimeout(()=>{this.maybeStartHedgingAttempt()},D*1000),(A=($=this.hedgingTimer).unref)===null||A===void 0||A.call($)}startNewAttempt(){let H=this.channel.createLoadBalancingCall(this.callConfig,this.methodName,this.host,this.credentials,this.deadline);this.trace("Created child call ["+H.getCallNumber()+"] for attempt "+this.attempts);let $=this.underlyingCalls.length;this.underlyingCalls.push({state:"ACTIVE",call:H,nextMessageToSend:0,startTime:new Date});let A=this.attempts-1,L=this.initialMetadata.clone();if(A>0)L.set(pCA,`${A}`);let I=!1;if(H.start(L,{onReceiveMetadata:(D)=>{if(this.trace("Received metadata from child ["+H.getCallNumber()+"]"),this.commitCall($),I=!0,A>0)D.set(pCA,`${A}`);if(this.underlyingCalls[$].state==="ACTIVE")this.listener.onReceiveMetadata(D)},onReceiveMessage:(D)=>{if(this.trace("Received message from child ["+H.getCallNumber()+"]"),this.commitCall($),this.underlyingCalls[$].state==="ACTIVE")this.listener.onReceiveMessage(D)},onReceiveStatus:(D)=>{if(this.trace("Received status from child ["+H.getCallNumber()+"]"),!I&&A>0)D.metadata.set(pCA,`${A}`);this.handleChildStatus(D,$)}}),this.sendNextChildMessage($),this.readStarted)H.startRead()}start(H,$){this.trace("start called"),this.listener=$,this.initialMetadata=H,this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer()}handleChildWriteCompleted(H){var $,A;let L=this.underlyingCalls[H],I=L.nextMessageToSend;(A=($=this.getBufferEntry(I)).callback)===null||A===void 0||A.call($),this.clearSentMessages(),L.nextMessageToSend+=1,this.sendNextChildMessage(H)}sendNextChildMessage(H){let $=this.underlyingCalls[H];if($.state==="COMPLETED")return;if(this.getBufferEntry($.nextMessageToSend)){let A=this.getBufferEntry($.nextMessageToSend);switch(A.entryType){case"MESSAGE":$.call.sendMessageWithContext({callback:(L)=>{this.handleChildWriteCompleted(H)}},A.message.message);break;case"HALF_CLOSE":$.nextMessageToSend+=1,$.call.halfClose();break;case"FREED":break}}}sendMessageWithContext(H,$){var A;this.trace("write() called with message of length "+$.length);let L={message:$,flags:H.flags},I=this.getNextBufferIndex(),D={entryType:"MESSAGE",message:L,allocated:this.bufferTracker.allocate($.length,this.callNumber)};if(this.writeBuffer.push(D),D.allocated){(A=H.callback)===null||A===void 0||A.call(H);for(let[B,f]of this.underlyingCalls.entries())if(f.state==="ACTIVE"&&f.nextMessageToSend===I)f.call.sendMessageWithContext({callback:(E)=>{this.handleChildWriteCompleted(B)}},$)}else{if(this.commitCallWithMostMessages(),this.committedCallIndex===null)return;let B=this.underlyingCalls[this.committedCallIndex];if(D.callback=H.callback,B.state==="ACTIVE"&&B.nextMessageToSend===I)B.call.sendMessageWithContext({callback:(f)=>{this.handleChildWriteCompleted(this.committedCallIndex)}},$)}}startRead(){this.trace("startRead called"),this.readStarted=!0;for(let H of this.underlyingCalls)if((H===null||H===void 0?void 0:H.state)==="ACTIVE")H.call.startRead()}halfClose(){this.trace("halfClose called");let H=this.getNextBufferIndex();this.writeBuffer.push({entryType:"HALF_CLOSE",allocated:!1});for(let $ of this.underlyingCalls)if(($===null||$===void 0?void 0:$.state)==="ACTIVE"&&$.nextMessageToSend===H)$.nextMessageToSend+=1,$.call.halfClose()}setCredentials(H){throw Error("Method not implemented.")}getMethod(){return this.methodName}getHost(){return this.host}getAuthContext(){if(this.committedCallIndex!==null)return this.underlyingCalls[this.committedCallIndex].call.getAuthContext();else return null}}To.RetryingCall=JED});var PhH=z((n3$)=>{Object.defineProperty(n3$,"__esModule",{value:!0});n3$.BaseSubchannelWrapper=void 0;class KED{constructor(H){this.child=H,this.healthy=!0,this.healthListeners=new Set,this.refcount=0,this.dataWatchers=new Set,H.addHealthStateWatcher(($)=>{if(this.healthy)this.updateHealthListeners()})}updateHealthListeners(){for(let H of this.healthListeners)H(this.isHealthy())}getConnectivityState(){return this.child.getConnectivityState()}addConnectivityStateListener(H){this.child.addConnectivityStateListener(H)}removeConnectivityStateListener(H){this.child.removeConnectivityStateListener(H)}startConnecting(){this.child.startConnecting()}getAddress(){return this.child.getAddress()}throttleKeepalive(H){this.child.throttleKeepalive(H)}ref(){this.child.ref(),this.refcount+=1}unref(){if(this.child.unref(),this.refcount-=1,this.refcount===0)this.destroy()}destroy(){for(let H of this.dataWatchers)H.destroy()}getChannelzRef(){return this.child.getChannelzRef()}isHealthy(){return this.healthy&&this.child.isHealthy()}addHealthStateWatcher(H){this.healthListeners.add(H)}removeHealthStateWatcher(H){this.healthListeners.delete(H)}addDataWatcher(H){H.setSubchannel(this.getRealSubchannel()),this.dataWatchers.add(H)}setHealthy(H){if(H!==this.healthy){if(this.healthy=H,this.child.isHealthy())this.updateHealthListeners()}}getRealSubchannel(){return this.child.getRealSubchannel()}realSubchannelEquals(H){return this.getRealSubchannel()===H.getRealSubchannel()}getCallCredentials(){return this.child.getCallCredentials()}getChannel(){return this.child.getChannel()}}n3$.BaseSubchannelWrapper=KED});var iCA=z((V0H)=>{Object.defineProperty(V0H,"__esModule",{value:!0});V0H.InternalChannel=V0H.SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX=void 0;var xi9=JWH(),Si9=n9D(),ji9=LED(),lCA=pm(),Ri9=dQ(),zo=I8(),yi9=x3$(),vi9=TCA(),QED=sx(),r3$=wG(),hi9=hCA(),a3$=CP(),rT=YP(),_hH=Zo(),bi9=fED(),ki9=OWH(),ui9=GED(),dCA=T3$(),gi9=GhH(),cCA=FED(),mi9=PhH(),pi9=2147483647,di9=1000,ci9=1800000,o3$=new Map,li9=16777216,ii9=1048576;class WED extends mi9.BaseSubchannelWrapper{constructor(H,$){super(H);this.channel=$,this.refCount=0,this.subchannelStateListener=(A,L,I,D)=>{$.throttleKeepalive(D)}}ref(){if(this.refCount===0)this.child.addConnectivityStateListener(this.subchannelStateListener),this.channel.addWrappedSubchannel(this);this.child.ref(),this.refCount+=1}unref(){if(this.child.unref(),this.refCount-=1,this.refCount<=0)this.child.removeConnectivityStateListener(this.subchannelStateListener),this.channel.removeWrappedSubchannel(this)}}class VED{pick(H){return{pickResultType:lCA.PickResultType.DROP,status:{code:zo.Status.UNAVAILABLE,details:"Channel closed before call started",metadata:new Ri9.Metadata},subchannel:null,onCallStarted:null,onCallEnded:null}}}V0H.SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX="grpc.internal.no_subchannel";class PED{constructor(H){this.target=H,this.trace=new _hH.ChannelzTrace,this.callTracker=new _hH.ChannelzCallTracker,this.childrenTracker=new _hH.ChannelzChildrenTracker,this.state=rT.ConnectivityState.IDLE}getChannelzInfoCallback(){return()=>{return{target:this.target,state:this.state,trace:this.trace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists()}}}}class _ED{constructor(H,$,A){var L,I,D,B,f,E;if(this.credentials=$,this.options=A,this.connectivityState=rT.ConnectivityState.IDLE,this.currentPicker=new lCA.UnavailablePicker,this.configSelectionQueue=[],this.pickQueue=[],this.connectivityStateWatchers=[],this.callRefTimer=null,this.configSelector=null,this.currentResolutionError=null,this.wrappedSubchannels=new Set,this.callCount=0,this.idleTimer=null,this.channelzEnabled=!0,this.randomChannelId=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER),typeof H!=="string")throw TypeError("Channel target must be a string");if(!($ instanceof xi9.ChannelCredentials))throw TypeError("Channel credentials must be a ChannelCredentials object");if(A){if(typeof A!=="object")throw TypeError("Channel options must be an object")}this.channelzInfoTracker=new PED(H);let M=(0,a3$.parseUri)(H);if(M===null)throw Error(`Could not parse target name "${H}"`);let G=(0,QED.mapUriDefaultScheme)(M);if(G===null)throw Error(`Could not find a default scheme for target name "${H}"`);if(this.options["grpc.enable_channelz"]===0)this.channelzEnabled=!1;if(this.channelzRef=(0,_hH.registerChannelzChannel)(H,this.channelzInfoTracker.getChannelzInfoCallback(),this.channelzEnabled),this.channelzEnabled)this.channelzInfoTracker.trace.addTrace("CT_INFO","Channel created");if(this.options["grpc.default_authority"])this.defaultAuthority=this.options["grpc.default_authority"];else this.defaultAuthority=(0,QED.getDefaultAuthority)(G);let U=(0,hi9.mapProxyName)(G,A);this.target=U.target,this.options=Object.assign({},this.options,U.extraOptions),this.subchannelPool=(0,ji9.getSubchannelPool)(((L=this.options["grpc.use_local_subchannel_pool"])!==null&&L!==void 0?L:0)===0),this.retryBufferTracker=new cCA.MessageBufferTracker((I=this.options["grpc.retry_buffer_size"])!==null&&I!==void 0?I:li9,(D=this.options["grpc.per_rpc_retry_buffer_size"])!==null&&D!==void 0?D:ii9),this.keepaliveTime=(B=this.options["grpc.keepalive_time_ms"])!==null&&B!==void 0?B:-1,this.idleTimeoutMs=Math.max((f=this.options["grpc.client_idle_timeout_ms"])!==null&&f!==void 0?f:ci9,di9);let X={createSubchannel:(F,Q)=>{let W={};for(let[C,Z]of Object.entries(Q))if(!C.startsWith(V0H.SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX))W[C]=Z;let P=this.subchannelPool.getOrCreateSubchannel(this.target,F,W,this.credentials);if(P.throttleKeepalive(this.keepaliveTime),this.channelzEnabled)this.channelzInfoTracker.trace.addTrace("CT_INFO","Created subchannel or used existing subchannel",P.getChannelzRef());return new WED(P,this)},updateState:(F,Q)=>{this.currentPicker=Q;let W=this.pickQueue.slice();if(this.pickQueue=[],W.length>0)this.callRefTimerUnref();for(let P of W)P.doPick();this.updateState(F)},requestReresolution:()=>{throw Error("Resolving load balancer should never call requestReresolution")},addChannelzChild:(F)=>{if(this.channelzEnabled)this.channelzInfoTracker.childrenTracker.refChild(F)},removeChannelzChild:(F)=>{if(this.channelzEnabled)this.channelzInfoTracker.childrenTracker.unrefChild(F)}};this.resolvingLoadBalancer=new Si9.ResolvingLoadBalancer(this.target,X,this.options,(F,Q)=>{var W;if(F.retryThrottling)o3$.set(this.getTarget(),new cCA.RetryThrottler(F.retryThrottling.maxTokens,F.retryThrottling.tokenRatio,o3$.get(this.getTarget())));else o3$.delete(this.getTarget());if(this.channelzEnabled)this.channelzInfoTracker.trace.addTrace("CT_INFO","Address resolution succeeded");(W=this.configSelector)===null||W===void 0||W.unref(),this.configSelector=Q,this.currentResolutionError=null,process.nextTick(()=>{let P=this.configSelectionQueue;if(this.configSelectionQueue=[],P.length>0)this.callRefTimerUnref();for(let Y of P)Y.getConfig()})},(F)=>{if(this.channelzEnabled)this.channelzInfoTracker.trace.addTrace("CT_WARNING","Address resolution failed with code "+F.code+' and details "'+F.details+'"');if(this.configSelectionQueue.length>0)this.trace("Name resolution failed with calls queued for config selection");if(this.configSelector===null)this.currentResolutionError=Object.assign(Object.assign({},(0,gi9.restrictControlPlaneStatusCode)(F.code,F.details)),{metadata:F.metadata});let Q=this.configSelectionQueue;if(this.configSelectionQueue=[],Q.length>0)this.callRefTimerUnref();for(let W of Q)W.reportResolverError(F)}),this.filterStackFactory=new yi9.FilterStackFactory([new vi9.CompressionFilterFactory(this,this.options)]),this.trace("Channel constructed with options "+JSON.stringify(A,void 0,2));let J=Error();if((0,r3$.isTracerEnabled)("channel_stacktrace"))(0,r3$.trace)(zo.LogVerbosity.DEBUG,"channel_stacktrace","("+this.channelzRef.id+`) Channel constructed 
${L}`;throw new JR(I)}var qZI,m59,p59;var tFH=K(()=>{TQ();dG();E$();UJ();_L();lg();qZI=require("crypto"),m59=/```!\s*\n?([\s\S]*?)\n?```/g,p59=/(?<!\w|\$)!`([^`]+)`/g});var zZI,c59,l59,i59,n59,r59,a59,o59,t59,s59,iDE,JX$,nDE;var vjH=K(()=>{tTH();zZI=N2({command:bL(),args:UX(bL()).optional(),env:MO(bL(),bL()).optional()}),c59=N2({name:bL(),email:bL().email().optional(),url:bL().url().optional()}),l59=N2({type:bL(),url:bL().url()}),i59=zZI.partial(),n59=zZI.extend({platform_overrides:MO(bL(),i59).optional()}),r59=N2({type:GO(["python","node","binary"]),entry_point:bL(),mcp_config:n59}),a59=N2({claude_desktop:bL().optional(),platforms:UX(GO(["darwin","win32","linux"])).optional(),runtimes:N2({python:bL().optional(),node:bL().optional()}).optional()}).passthrough(),o59=N2({name:bL(),description:bL().optional()}),t59=N2({name:bL(),description:bL().optional(),arguments:UX(bL()).optional(),text:bL()}),s59=N2({type:GO(["string","number","boolean","directory","file"]),title:bL(),description:bL(),required:FQ().optional(),default:gAH([bL(),Cq(),FQ(),UX(bL())]).optional(),multiple:FQ().optional(),sensitive:FQ().optional(),min:Cq().optional(),max:Cq().optional()}),iDE=MO(bL(),gAH([bL(),Cq(),FQ(),UX(bL())])),JX$=N2({$schema:bL().optional(),dxt_version:bL().optional().describe("@deprecated Use manifest_version instead"),manifest_version:bL().optional(),name:bL(),display_name:bL().optional(),version:bL(),description:bL(),long_description:bL().optional(),author:c59,repository:l59.optional(),homepage:bL().url().optional(),documentation:bL().url().optional(),support:bL().url().optional(),icon:bL().optional(),screenshots:UX(bL()).optional(),server:r59,tools:UX(o59).optional(),tools_generated:FQ().optional(),prompts:UX(t59).optional(),prompts_generated:FQ().optional(),keywords:UX(bL()).optional(),license:bL().optional(),privacy_policies:UX(bL()).optional(),compatibility:a59.optional(),user_config:MO(bL(),s59).optional()}).refine((H)=>!!(H.dxt_version||H.manifest_version),{message:"Either 'dxt_version' (deprecated) or 'manifest_version' must be provided"}),nDE=N2({status:GO(["signed","unsigned","self-signed"]),publisher:bL().optional(),issuer:bL().optional(),valid_from:bL().optional(),valid_to:bL().optional(),fingerprint:bL().optional()})});var JKA=K(()=>{vjH()});function XX9(H,$){return GX9(H,{i:2},$&&$.out,$&&$.dictionary)}function KX9(H,$){if($){var A="";for(var L=0;L<H.length;L+=16384)A+=String.fromCharCode.apply(null,H.subarray(L,L+16384));return A}else if(VKA)return VKA.decode(H);else{var I=FX9(H),D=I.s,A=I.r;if(A.length)JT(8);return D}}function hZI(H,$){var A={},L=H.length-22;for(;Jx(H,L)!=101010256;--L)if(!L||H.length-L>65558)JT(13);var I=Xv(H,L+8);if(!I)return{};var D=Jx(H,L+16),B=D==4294967295||I==65535;if(B){var f=Jx(H,L-12);if(B=Jx(H,f)==101075792,B)I=Jx(H,f+32),D=Jx(H,f+48)}var E=$&&$.filter;for(var M=0;M<I;++M){var G=WX9(H,D,B),U=G[0],X=G[1],J=G[2],F=G[3],Q=G[4],W=G[5],P=QX9(H,W);if(D=Q,!E||E({name:F,size:X,originalSize:J,compression:U}))if(!U)A[F]=PKA(H,P,P+X);else if(U==8)A[F]=XX9(H.subarray(P,P+X),{out:new Hw(J)});else JT(14,"unknown compression type "+U)}return A}var NZI,HX9,$X9,Hw,sFH,AX9,OZI,xZI,LX9,SZI=function(H,$){var A=new sFH(31);for(var L=0;L<31;++L)A[L]=$+=1<<H[L-1];var I=new AX9(A[30]);for(var L=1;L<30;++L)for(var D=A[L];D<A[L+1];++D)I[D]=D-A[L]<<5|L;return{b:A,r:I}},jZI,RZI,IX9,yZI,DX9,tDE,WKA,Uv,O8,hjH=function(H,$,A){var L=H.length,I=0,D=new sFH($);for(;I<L;++I)if(H[I])++D[H[I]-1];var B=new sFH($);for(I=1;I<$;++I)B[I]=B[I-1]+D[I-1]<<1;var f;if(A){f=new sFH(1<<$);var E=15-$;for(I=0;I<L;++I)if(H[I]){var M=I<<4|H[I],G=$-H[I],U=B[H[I]-1]++<<G;for(var X=U|(1<<G)-1;U<=X;++U)f[WKA[U]>>E]=M}}else{f=new sFH(L);for(I=0;I<L;++I)if(H[I])f[I]=WKA[B[H[I]-1]++]>>15-H[I]}return f},bjH,O8,O8,O8,O8,vZI,O8,BX9,fX9,FKA=function(H){var $=H[0];for(var A=1;A<H.length;++A)if(H[A]>$)$=H[A];return $},Xx=function(H,$,A){var L=$/8|0;return(H[L]|H[L+1]<<8)>>($&7)&A},KKA=function(H,$){var A=$/8|0;return(H[A]|H[A+1]<<8|H[A+2]<<16)>>($&7)},EX9=function(H){return(H+7)/8|0},PKA=function(H,$,A){if($==null||$<0)$=0;if(A==null||A>H.length)A=H.length;return new Hw(H.subarray($,A))},MX9,JT=function(H,$,A){var L=Error($||MX9[H]);if(L.code=H,Error.captureStackTrace)Error.captureStackTrace(L,JT);if(!A)throw L;return L},GX9=function(H,$,A,L){var I=H.length,D=L?L.length:0;if(!I||$.f&&!$.l)return A||new Hw(0);var B=!A,f=B||$.i!=2,E=$.i;if(B)A=new Hw(I*3);var M=function(DH){var MH=A.length;if(DH>MH){var AH=new Hw(Math.max(MH*2,DH));AH.set(A),A=AH}},G=$.f||0,U=$.p||0,X=$.b||0,J=$.l,F=$.d,Q=$.m,W=$.n,P=I*8;do{if(!J){G=Xx(H,U,1);var Y=Xx(H,U+1,3);if(U+=3,!Y){var C=EX9(U)+4,Z=H[C-4]|H[C-3]<<8,q=C+Z;if(q>I){if(E)JT(0);break}if(f)M(X+Z);A.set(H.subarray(C,q),X),$.b=X+=Z,$.p=U=q*8,$.f=G;continue}else if(Y==1)J=BX9,F=fX9,Q=9,W=5;else if(Y==2){var O=Xx(H,U,31)+257,j=Xx(H,U+10,15)+4,u=O+Xx(H,U+5,31)+1;U+=14;var y=new Hw(u),g=new Hw(19);for(var v=0;v<j;++v)g[LX9[v]]=Xx(H,U+v*3,7);U+=j*3;var p=FKA(g),d=(1<<p)-1,k=hjH(g,p,1);for(var v=0;v<u;){var n=k[Xx(H,U,d)];U+=n&15;var C=n>>4;if(C<16)y[v++]=C;else{var GH=0,e=0;if(C==16)e=3+Xx(H,U,3),U+=2,GH=y[v-1];else if(C==17)e=3+Xx(H,U,7),U+=3;else if(C==18)e=11+Xx(H,U,127),U+=7;while(e--)y[v++]=GH}}var BH=y.subarray(0,O),VH=y.subarray(O);Q=FKA(BH),W=FKA(VH),J=hjH(BH,Q,1),F=hjH(VH,W,1)}else JT(1);if(U>P){if(E)JT(0);break}}if(f)M(X+131072);var wH=(1<<Q)-1,WH=(1<<W)-1,qH=U;for(;;qH=U){var GH=J[KKA(H,U)&wH],s=GH>>4;if(U+=GH&15,U>P){if(E)JT(0);break}if(!GH)JT(2);if(s<256)A[X++]=s;else if(s==256){qH=U,J=null;break}else{var IH=s-254;if(s>264){var v=s-257,FH=OZI[v];IH=Xx(H,U,(1<<FH)-1)+RZI[v],U+=FH}var EH=F[KKA(H,U)&WH],YH=EH>>4;if(!EH)JT(3);U+=EH&15;var VH=DX9[YH];if(YH>3){var FH=xZI[YH];VH+=KKA(H,U)&(1<<FH)-1,U+=FH}if(U>P){if(E)JT(0);break}if(f)M(X+131072);var OH=X+IH;if(X<VH){var HH=D-VH,$H=Math.min(VH,OH);if(HH+X<0)JT(3);for(;X<$H;++X)A[X]=L[HH+X]}for(;X<OH;++X)A[X]=A[X-VH]}}if($.l=J,$.p=qH,$.b=X,$.f=G,J)G=1,$.m=Q,$.d=F,$.n=W}while(!G);return X!=A.length&&B?PKA(A,0,X):A.subarray(0,X)},UX9,Xv=function(H,$){return H[$]|H[$+1]<<8},Jx=function(H,$){return(H[$]|H[$+1]<<8|H[$+2]<<16|H[$+3]<<24)>>>0},QKA=function(H,$){return Jx(H,$)+Jx(H,$+4)*4294967296},VKA,JX9=0,FX9=function(H){for(var $="",A=0;;){var L=H[A++],I=(L>127)+(L>223)+(L>239);if(A+I>H.length)return{s:$,r:PKA(H,A-1)};if(!I)$+=String.fromCharCode(L);else if(I==3)L=((L&15)<<18|(H[A++]&63)<<12|(H[A++]&63)<<6|H[A++]&63)-65536,$+=String.fromCharCode(55296|L>>10,56320|L&1023);else if(I&1)$+=String.fromCharCode((L&31)<<6|H[A++]&63);else $+=String.fromCharCode((L&15)<<12|(H[A++]&63)<<6|H[A++]&63)}},QX9=function(H,$){return $+30+Xv(H,$+26)+Xv(H,$+28)},WX9=function(H,$,A){var L=Xv(H,$+28),I=KX9(H.subarray($+46,$+46+L),!(Xv(H,$+8)&2048)),D=$+46+L,B=Jx(H,$+20),f=A&&B==4294967295?VX9(H,D):[B,Jx(H,$+24),Jx(H,$+42)],E=f[0],M=f[1],G=f[2];return[Xv(H,$+10),E,M,I,D+Xv(H,$+30)+Xv(H,$+32),G]},VX9=function(H,$){for(;Xv(H,$)!=1;$+=4+Xv(H,$+2));return[QKA(H,$+12),QKA(H,$+4),QKA(H,$+20)]};var bZI=K(()=>{NZI=require("module"),HX9=NZI.createRequire("/");try{$X9=HX9("worker_threads").Worker}catch(H){}Hw=Uint8Array,sFH=Uint16Array,AX9=Int32Array,OZI=new Hw([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),xZI=new Hw([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),LX9=new Hw([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),jZI=SZI(OZI,2),RZI=jZI.b,IX9=jZI.r;RZI[28]=258,IX9[258]=28;yZI=SZI(xZI,0),DX9=yZI.b,tDE=yZI.r,WKA=new sFH(32768);for(O8=0;O8<32768;++O8)Uv=(O8&43690)>>1|(O8&21845)<<1,Uv=(Uv&52428)>>2|(Uv&13107)<<2,Uv=(Uv&61680)>>4|(Uv&3855)<<4,WKA[O8]=((Uv&65280)>>8|(Uv&255)<<8)>>1;bjH=new Hw(288);for(O8=0;O8<144;++O8)bjH[O8]=8;for(O8=144;O8<256;++O8)bjH[O8]=9;for(O8=256;O8<280;++O8)bjH[O8]=7;for(O8=280;O8<288;++O8)bjH[O8]=8;vZI=new Hw(32);for(O8=0;O8<32;++O8)vZI[O8]=5;BX9=hjH(bjH,9,1),fX9=hjH(vZI,5,1),MX9=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],UX9=new Hw(0);VKA=typeof TextDecoder<"u"&&new TextDecoder;try{VKA.decode(UX9,{stream:!0}),JX9=1}catch(H){}});var ujH=z((eDE,QX$)=>{function gZI(H){return Array.isArray(H)?H:[H]}var PX9=void 0,CKA="",kZI=" ",_KA="\\",_X9=/^\s+$/,CX9=/(?:[^\\]|^)\\$/,YX9=/^\\!/,wX9=/^\\#/,ZX9=/\r?\n/g,qX9=/^\.{0,2}\/|^\.{1,2}$/,TX9=/\/$/,eFH="/",mZI="node-ignore";if(typeof Symbol<"u")mZI=Symbol.for("node-ignore");var pZI=mZI,HKH=(H,$,A)=>{return Object.defineProperty(H,$,{value:A}),A},zX9=/([0-z])-([0-z])/g,dZI=()=>!1,NX9=(H)=>H.replace(zX9,($,A,L)=>A.charCodeAt(0)<=L.charCodeAt(0)?$:CKA),OX9=(H)=>{let{length:$}=H;return H.slice(0,$-$%2)},xX9=[[/^\uFEFF/,()=>CKA],[/((?:\\\\)*?)(\\?\s+)$/,(H,$,A)=>$+(A.indexOf("\\")===0?kZI:CKA)],[/(\\+?)\s/g,(H,$)=>{let{length:A}=$;return $.slice(0,A-A%2)+kZI}],[/[\\$.|*+(){^]/g,(H)=>`\\${H}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return!/\/(?!$)/.test(this)?"(?:^|\\/)":"^"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(H,$,A)=>$+6<A.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(H,$,A)=>{let L=A.replace(/\\\*/g,"[^\\/]*");return $+L}],[/\\\\\\(?=[$.|*+(){^])/g,()=>_KA],[/\\\\/g,()=>_KA],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(H,$,A,L,I)=>$===_KA?`\\[${A}${OX9(L)}${I}`:I==="]"?L.length%2===0?`[${NX9(A)}${L}]`:"[]":"[]"],[/(?:[^*])$/,(H)=>/\/$/.test(H)?`${H}$`:`${H}(?=$|\\/$)`]],SX9=/(^|\\\/)?\\\*$/,kjH="regex",FX$="checkRegex",uZI="_",jX9={[kjH](H,$){return`${$?`${$}[^/]+`:"[^/]*"}(?=$|\\/$)`},[FX$](H,$){return`${$?`${$}[^/]*`:"[^/]*"}(?=$|\\/$)`}},RX9=(H)=>xX9.reduce(($,[A,L])=>$.replace(A,L.bind(H)),H),KX$=(H)=>typeof H==="string",yX9=(H)=>H&&KX$(H)&&!_X9.test(H)&&!CX9.test(H)&&H.indexOf("#")!==0,vX9=(H)=>H.split(ZX9).filter(Boolean);class cZI{constructor(H,$,A,L,I,D){this.pattern=H,this.mark=$,this.negative=I,HKH(this,"body",A),HKH(this,"ignoreCase",L),HKH(this,"regexPrefix",D)}get regex(){let H=uZI+kjH;if(this[H])return this[H];return this._make(kjH,H)}get checkRegex(){let H=uZI+FX$;if(this[H])return this[H];return this._make(FX$,H)}_make(H,$){let A=this.regexPrefix.replace(SX9,jX9[H]),L=this.ignoreCase?new RegExp(A,"i"):new RegExp(A);return HKH(this,$,L)}}var hX9=({pattern:H,mark:$},A)=>{let L=!1,I=H;if(I.indexOf("!")===0)L=!0,I=I.substr(1);I=I.replace(YX9,"!").replace(wX9,"#");let D=RX9(I);return new cZI(H,$,I,A,L,D)};class lZI{constructor(H){this._ignoreCase=H,this._rules=[]}_add(H){if(H&&H[pZI]){this._rules=this._rules.concat(H._rules._rules),this._added=!0;return}if(KX$(H))H={pattern:H};if(yX9(H.pattern)){let $=hX9(H,this._ignoreCase);this._added=!0,this._rules.push($)}}add(H){return this._added=!1,gZI(KX$(H)?vX9(H):H).forEach(this._add,this),this._added}test(H,$,A){let L=!1,I=!1,D;this._rules.forEach((f)=>{let{negative:E}=f;if(I===E&&L!==I||E&&!L&&!I&&!$)return;if(!f[A].test(H))return;L=!E,I=E,D=E?PX9:f});let B={ignored:L,unignored:I};if(D)B.rule=D;return B}}var bX9=(H,$)=>{throw new $(H)},ag=(H,$,A)=>{if(!KX$(H))return A(`path must be a string, but got \`${$}\``,TypeError);if(!H)return A("path must not be empty",TypeError);if(ag.isNotRelative(H))return A(`path should be a \`path.relative()\`d string, but got "${$}"`,RangeError);return!0},iZI=(H)=>qX9.test(H);ag.isNotRelative=iZI;ag.convert=(H)=>H;class nZI{constructor({ignorecase:H=!0,ignoreCase:$=H,allowRelativePaths:A=!1}={}){HKH(this,pZI,!0),this._rules=new lZI($),this._strictPathCheck=!A,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}add(H){if(this._rules.add(H))this._initCache();return this}addPattern(H){return this.add(H)}_test(H,$,A,L){let I=H&&ag.convert(H);return ag(I,H,this._strictPathCheck?bX9:dZI),this._t(I,$,A,L)}checkIgnore(H){if(!TX9.test(H))return this.test(H);let $=H.split(eFH).filter(Boolean);if($.pop(),$.length){let A=this._t($.join(eFH)+eFH,this._testCache,!0,$);if(A.ignored)return A}return this._rules.test(H,!1,FX$)}_t(H,$,A,L){if(H in $)return $[H];if(!L)L=H.split(eFH).filter(Boolean);if(L.pop(),!L.length)return $[H]=this._rules.test(H,A,kjH);let I=this._t(L.join(eFH)+eFH,$,A,L);return $[H]=I.ignored?I:this._rules.test(H,A,kjH)}ignores(H){return this._test(H,this._ignoreCache,!1).ignored}createFilter(){return(H)=>!this.ignores(H)}filter(H){return gZI(H).filter(this.createFilter())}test(H){return this._test(H,this._testCache,!0)}}var YKA=(H)=>new nZI(H),kX9=(H)=>ag(H&&ag.convert(H),H,dZI),uX9=()=>{let H=(A)=>/^\\\\\?\\/.test(A)||/["<>|\u0000-\u001F]+/u.test(A)?A:A.replace(/\\/g,"/");ag.convert=H;let $=/^[a-z]:\//i;ag.isNotRelative=(A)=>$.test(A)||iZI(A)};QX$.exports=YKA;YKA.default=YKA;QX$.exports.isPathValid=kX9;HKH(QX$.exports,Symbol.for("setupWindows"),uX9)});var gX9;var wKA=K(()=>{gX9=h(ujH(),1)});var IU=z((ZKA)=>{ZKA.fromCallback=function(H){return Object.defineProperty(function(...$){if(typeof $[$.length-1]==="function")H.apply(this,$);else return new Promise((A,L)=>{$.push((I,D)=>I!=null?L(I):A(D)),H.apply(this,$)})},"name",{value:H.name})};ZKA.fromPromise=function(H){return Object.defineProperty(function(...$){let A=$[$.length-1];if(typeof A!=="function")return H.apply(this,$);else $.pop(),H.apply(this,$).then((L)=>A(null,L),A)},"name",{value:H.name})}});var YDH=z((Da)=>{var rZI=IU().fromCallback,VC=ZE(),mX9=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter((H)=>{return typeof VC[H]==="function"});Object.assign(Da,VC);mX9.forEach((H)=>{Da[H]=rZI(VC[H])});Da.exists=function(H,$){if(typeof $==="function")return VC.exists(H,$);return new Promise((A)=>{return VC.exists(H,A)})};Da.read=function(H,$,A,L,I,D){if(typeof D==="function")return VC.read(H,$,A,L,I,D);return new Promise((B,f)=>{VC.read(H,$,A,L,I,(E,M,G)=>{if(E)return f(E);B({bytesRead:M,buffer:G})})})};Da.write=function(H,$,...A){if(typeof A[A.length-1]==="function")return VC.write(H,$,...A);return new Promise((L,I)=>{VC.write(H,$,...A,(D,B,f)=>{if(D)return I(D);L({bytesWritten:B,buffer:f})})})};if(typeof VC.writev==="function")Da.writev=function(H,$,...A){if(typeof A[A.length-1]==="function")return VC.writev(H,$,...A);return new Promise((L,I)=>{VC.writev(H,$,...A,(D,B,f)=>{if(D)return I(D);L({bytesWritten:B,buffers:f})})})};if(typeof VC.realpath.native==="function")Da.realpath.native=rZI(VC.realpath.native);else process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var oZI=z((IBE,aZI)=>{var LBE=require("path");aZI.exports.checkPath=function($){}});var HqI=z((DBE,qKA)=>{var tZI=YDH(),{checkPath:sZI}=oZI(),eZI=(H)=>{let $={mode:511};if(typeof H==="number")return H;return{...$,...H}.mode};qKA.exports.makeDir=async(H,$)=>{return sZI(H),tZI.mkdir(H,{mode:eZI($),recursive:!0})};qKA.exports.makeDirSync=(H,$)=>{return sZI(H),tZI.mkdirSync(H,{mode:eZI($),recursive:!0})}});var Fx=z((BBE,$qI)=>{var pX9=IU().fromPromise,{makeDir:dX9,makeDirSync:TKA}=HqI(),zKA=pX9(dX9);$qI.exports={mkdirs:zKA,mkdirsSync:TKA,mkdirp:zKA,mkdirpSync:TKA,ensureDir:zKA,ensureDirSync:TKA}});var Ba=z((fBE,LqI)=>{var cX9=IU().fromPromise,AqI=YDH();function lX9(H){return AqI.access(H).then(()=>!0).catch(()=>!1)}LqI.exports={pathExists:cX9(lX9),pathExistsSync:AqI.existsSync}});var NKA=z((EBE,IqI)=>{var $KH=ZE();function iX9(H,$,A,L){$KH.open(H,"r+",(I,D)=>{if(I)return L(I);$KH.futimes(D,$,A,(B)=>{$KH.close(D,(f)=>{if(L)L(B||f)})})})}function nX9(H,$,A){let L=$KH.openSync(H,"r+");return $KH.futimesSync(L,$,A),$KH.closeSync(L)}IqI.exports={utimesMillis:iX9,utimesMillisSync:nX9}});var wDH=z((MBE,fqI)=>{var AKH=YDH(),zQ=require("path"),rX9=require("util");function aX9(H,$,A){let L=A.dereference?(I)=>AKH.stat(I,{bigint:!0}):(I)=>AKH.lstat(I,{bigint:!0});return Promise.all([L(H),L($).catch((I)=>{if(I.code==="ENOENT")return null;throw I})]).then(([I,D])=>({srcStat:I,destStat:D}))}function oX9(H,$,A){let L,I=A.dereference?(B)=>AKH.statSync(B,{bigint:!0}):(B)=>AKH.lstatSync(B,{bigint:!0}),D=I(H);try{L=I($)}catch(B){if(B.code==="ENOENT")return{srcStat:D,destStat:null};throw B}return{srcStat:D,destStat:L}}function tX9(H,$,A,L,I){rX9.callbackify(aX9)(H,$,L,(D,B)=>{if(D)return I(D);let{srcStat:f,destStat:E}=B;if(E){if(gjH(f,E)){let M=zQ.basename(H),G=zQ.basename($);if(A==="move"&&M!==G&&M.toLowerCase()===G.toLowerCase())return I(null,{srcStat:f,destStat:E,isChangingCase:!0});return I(Error("Source and destination must not be the same."))}if(f.isDirectory()&&!E.isDirectory())return I(Error(`Cannot overwrite non-directory '${$}' with directory '${H}'.`));if(!f.isDirectory()&&E.isDirectory())return I(Error(`Cannot overwrite directory '${$}' with non-directory '${H}'.`))}if(f.isDirectory()&&OKA(H,$))return I(Error(WX$(H,$,A)));return I(null,{srcStat:f,destStat:E})})}function sX9(H,$,A,L){let{srcStat:I,destStat:D}=oX9(H,$,L);if(D){if(gjH(I,D)){let B=zQ.basename(H),f=zQ.basename($);if(A==="move"&&B!==f&&B.toLowerCase()===f.toLowerCase())return{srcStat:I,destStat:D,isChangingCase:!0};throw Error("Source and destination must not be the same.")}if(I.isDirectory()&&!D.isDirectory())throw Error(`Cannot overwrite non-directory '${$}' with directory '${H}'.`);if(!I.isDirectory()&&D.isDirectory())throw Error(`Cannot overwrite directory '${$}' with non-directory '${H}'.`)}if(I.isDirectory()&&OKA(H,$))throw Error(WX$(H,$,A));return{srcStat:I,destStat:D}}function DqI(H,$,A,L,I){let D=zQ.resolve(zQ.dirname(H)),B=zQ.resolve(zQ.dirname(A));if(B===D||B===zQ.parse(B).root)return I();AKH.stat(B,{bigint:!0},(f,E)=>{if(f){if(f.code==="ENOENT")return I();return I(f)}if(gjH($,E))return I(Error(WX$(H,A,L)));return DqI(H,$,B,L,I)})}function BqI(H,$,A,L){let I=zQ.resolve(zQ.dirname(H)),D=zQ.resolve(zQ.dirname(A));if(D===I||D===zQ.parse(D).root)return;let B;try{B=AKH.statSync(D,{bigint:!0})}catch(f){if(f.code==="ENOENT")return;throw f}if(gjH($,B))throw Error(WX$(H,A,L));return BqI(H,$,D,L)}function gjH(H,$){return $.ino&&$.dev&&$.ino===H.ino&&$.dev===H.dev}function OKA(H,$){let A=zQ.resolve(H).split(zQ.sep).filter((I)=>I),L=zQ.resolve($).split(zQ.sep).filter((I)=>I);return A.reduce((I,D,B)=>I&&L[B]===D,!0)}function WX$(H,$,A){return`Cannot ${A} '${H}' to a subdirectory of itself, '${$}'.`}fqI.exports={checkPaths:tX9,checkPathsSync:sX9,checkParentPaths:DqI,checkParentPathsSync:BqI,isSrcSubdir:OKA,areIdentical:gjH}});var KqI=z((GBE,FqI)=>{var PC=ZE(),mjH=require("path"),eX9=Fx().mkdirs,HJ9=Ba().pathExists,$J9=NKA().utimesMillis,pjH=wDH();function AJ9(H,$,A,L){if(typeof A==="function"&&!L)L=A,A={};else if(typeof A==="function")A={filter:A};L=L||function(){},A=A||{},A.clobber="clobber"in A?!!A.clobber:!0,A.overwrite="overwrite"in A?!!A.overwrite:A.clobber,A.preserveTimestamps,pjH.checkPaths(H,$,"copy",A,(I,D)=>{if(I)return L(I);let{srcStat:B,destStat:f}=D;pjH.checkParentPaths(H,B,$,"copy",(E)=>{if(E)return L(E);if(A.filter)return GqI(EqI,f,H,$,A,L);return EqI(f,H,$,A,L)})})}function EqI(H,$,A,L,I){let D=mjH.dirname(A);HJ9(D,(B,f)=>{if(B)return I(B);if(f)return VX$(H,$,A,L,I);eX9(D,(E)=>{if(E)return I(E);return VX$(H,$,A,L,I)})})}function GqI(H,$,A,L,I,D){Promise.resolve(I.filter(A,L)).then((B)=>{if(B)return H($,A,L,I,D);return D()},(B)=>D(B))}function LJ9(H,$,A,L,I){if(L.filter)return GqI(VX$,H,$,A,L,I);return VX$(H,$,A,L,I)}function VX$(H,$,A,L,I){(L.dereference?PC.stat:PC.lstat)($,(B,f)=>{if(B)return I(B);if(f.isDirectory())return GJ9(f,H,$,A,L,I);else if(f.isFile()||f.isCharacterDevice()||f.isBlockDevice())return IJ9(f,H,$,A,L,I);else if(f.isSymbolicLink())return JJ9(H,$,A,L,I);else if(f.isSocket())return I(Error(`Cannot copy a socket file: ${$}`));else if(f.isFIFO())return I(Error(`Cannot copy a FIFO pipe: ${$}`));return I(Error(`Unknown file: ${$}`))})}function IJ9(H,$,A,L,I,D){if(!$)return UqI(H,A,L,I,D);return DJ9(H,A,L,I,D)}function DJ9(H,$,A,L,I){if(L.overwrite)PC.unlink(A,(D)=>{if(D)return I(D);return UqI(H,$,A,L,I)});else if(L.errorOnExist)return I(Error(`'${A}' already exists`));else return I()}function UqI(H,$,A,L,I){PC.copyFile($,A,(D)=>{if(D)return I(D);if(L.preserveTimestamps)return BJ9(H.mode,$,A,I);return PX$(A,H.mode,I)})}function BJ9(H,$,A,L){if(fJ9(H))return EJ9(A,H,(I)=>{if(I)return L(I);return MqI(H,$,A,L)});return MqI(H,$,A,L)}function fJ9(H){return(H&128)===0}function EJ9(H,$,A){return PX$(H,$|128,A)}function MqI(H,$,A,L){MJ9($,A,(I)=>{if(I)return L(I);return PX$(A,H,L)})}function PX$(H,$,A){return PC.chmod(H,$,A)}function MJ9(H,$,A){PC.stat(H,(L,I)=>{if(L)return A(L);return $J9($,I.atime,I.mtime,A)})}function GJ9(H,$,A,L,I,D){if(!$)return UJ9(H.mode,A,L,I,D);return XqI(A,L,I,D)}function UJ9(H,$,A,L,I){PC.mkdir(A,(D)=>{if(D)return I(D);XqI($,A,L,(B)=>{if(B)return I(B);return PX$(A,H,I)})})}function XqI(H,$,A,L){PC.readdir(H,(I,D)=>{if(I)return L(I);return JqI(D,H,$,A,L)})}function JqI(H,$,A,L,I){let D=H.pop();if(!D)return I();return XJ9(H,D,$,A,L,I)}function XJ9(H,$,A,L,I,D){let B=mjH.join(A,$),f=mjH.join(L,$);pjH.checkPaths(B,f,"copy",I,(E,M)=>{if(E)return D(E);let{destStat:G}=M;LJ9(G,B,f,I,(U)=>{if(U)return D(U);return JqI(H,A,L,I,D)})})}function JJ9(H,$,A,L,I){PC.readlink($,(D,B)=>{if(D)return I(D);if(L.dereference)B=mjH.resolve(process.cwd(),B);if(!H)return PC.symlink(B,A,I);else PC.readlink(A,(f,E)=>{if(f){if(f.code==="EINVAL"||f.code==="UNKNOWN")return PC.symlink(B,A,I);return I(f)}if(L.dereference)E=mjH.resolve(process.cwd(),E);if(pjH.isSrcSubdir(B,E))return I(Error(`Cannot copy '${B}' to a subdirectory of itself, '${E}'.`));if(H.isDirectory()&&pjH.isSrcSubdir(E,B))return I(Error(`Cannot overwrite '${E}' with '${B}'.`));return FJ9(B,A,I)})})}function FJ9(H,$,A){PC.unlink($,(L)=>{if(L)return A(L);return PC.symlink(H,$,A)})}FqI.exports=AJ9});var _qI=z((UBE,PqI)=>{var A3=ZE(),djH=require("path"),KJ9=Fx().mkdirsSync,QJ9=NKA().utimesMillisSync,cjH=wDH();function WJ9(H,$,A){if(typeof A==="function")A={filter:A};A=A||{},A.clobber="clobber"in A?!!A.clobber:!0,A.overwrite="overwrite"in A?!!A.overwrite:A.clobber,A.preserveTimestamps;let{srcStat:L,destStat:I}=cjH.checkPathsSync(H,$,"copy",A);return cjH.checkParentPathsSync(H,L,$,"copy"),VJ9(I,H,$,A)}function VJ9(H,$,A,L){if(L.filter&&!L.filter($,A))return;let I=djH.dirname(A);if(!A3.existsSync(I))KJ9(I);return QqI(H,$,A,L)}function PJ9(H,$,A,L){if(L.filter&&!L.filter($,A))return;return QqI(H,$,A,L)}function QqI(H,$,A,L){let D=(L.dereference?A3.statSync:A3.lstatSync)($);if(D.isDirectory())return TJ9(D,H,$,A,L);else if(D.isFile()||D.isCharacterDevice()||D.isBlockDevice())return _J9(D,H,$,A,L);else if(D.isSymbolicLink())return OJ9(H,$,A,L);else if(D.isSocket())throw Error(`Cannot copy a socket file: ${$}`);else if(D.isFIFO())throw Error(`Cannot copy a FIFO pipe: ${$}`);throw Error(`Unknown file: ${$}`)}function _J9(H,$,A,L,I){if(!$)return WqI(H,A,L,I);return CJ9(H,A,L,I)}function CJ9(H,$,A,L){if(L.overwrite)return A3.unlinkSync(A),WqI(H,$,A,L);else if(L.errorOnExist)throw Error(`'${A}' already exists`)}function WqI(H,$,A,L){if(A3.copyFileSync($,A),L.preserveTimestamps)YJ9(H.mode,$,A);return xKA(A,H.mode)}function YJ9(H,$,A){if(wJ9(H))ZJ9(A,H);return qJ9($,A)}function wJ9(H){return(H&128)===0}function ZJ9(H,$){return xKA(H,$|128)}function xKA(H,$){return A3.chmodSync(H,$)}function qJ9(H,$){let A=A3.statSync(H);return QJ9($,A.atime,A.mtime)}function TJ9(H,$,A,L,I){if(!$)return zJ9(H.mode,A,L,I);return VqI(A,L,I)}function zJ9(H,$,A,L){return A3.mkdirSync(A),VqI($,A,L),xKA(A,H)}function VqI(H,$,A){A3.readdirSync(H).forEach((L)=>NJ9(L,H,$,A))}function NJ9(H,$,A,L){let I=djH.join($,H),D=djH.join(A,H),{destStat:B}=cjH.checkPathsSync(I,D,"copy",L);return PJ9(B,I,D,L)}function OJ9(H,$,A,L){let I=A3.readlinkSync($);if(L.dereference)I=djH.resolve(process.cwd(),I);if(!H)return A3.symlinkSync(I,A);else{let D;try{D=A3.readlinkSync(A)}catch(B){if(B.code==="EINVAL"||B.code==="UNKNOWN")return A3.symlinkSync(I,A);throw B}if(L.dereference)D=djH.resolve(process.cwd(),D);if(cjH.isSrcSubdir(I,D))throw Error(`Cannot copy '${I}' to a subdirectory of itself, '${D}'.`);if(A3.statSync(A).isDirectory()&&cjH.isSrcSubdir(D,I))throw Error(`Cannot overwrite '${D}' with '${I}'.`);return xJ9(I,A)}}function xJ9(H,$){return A3.unlinkSync($),A3.symlinkSync(H,$)}PqI.exports=WJ9});var _X$=z((XBE,CqI)=>{var SJ9=IU().fromCallback;CqI.exports={copy:SJ9(KqI()),copySync:_qI()}});var NqI=z((JBE,zqI)=>{var YqI=ZE(),ZqI=require("path"),VX=require("assert");function qqI(H){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach((A)=>{H[A]=H[A]||YqI[A],A=A+"Sync",H[A]=H[A]||YqI[A]}),H.maxBusyTries=H.maxBusyTries||3}function RKA(H,$,A){let L=0;if(typeof $==="function")A=$,$={};VX(H,"rimraf: missing path"),VX.strictEqual(typeof H,"string","rimraf: path should be a string"),VX.strictEqual(typeof A,"function","rimraf: callback function required"),VX($,"rimraf: invalid options argument provided"),VX.strictEqual(typeof $,"object","rimraf: options should be object"),qqI($),wqI(H,$,function I(D){if(D){if((D.code==="EBUSY"||D.code==="ENOTEMPTY"||D.code==="EPERM")&&L<$.maxBusyTries){L++;let B=L*100;return setTimeout(()=>wqI(H,$,I),B)}if(D.code==="ENOENT")D=null}A(D)})}function wqI(H,$,A){VX(H),VX($),VX(typeof A==="function"),$.lstat(H,(L,I)=>{if(L&&L.code==="ENOENT")return A(null);if(L&&L.code,I&&I.isDirectory())return SKA(H,$,L,A);$.unlink(H,(D)=>{if(D){if(D.code==="ENOENT")return A(null);if(D.code==="EPERM")return SKA(H,$,D,A);if(D.code==="EISDIR")return SKA(H,$,D,A)}return A(D)})})}function SKA(H,$,A,L){VX(H),VX($),VX(typeof L==="function"),$.rmdir(H,(I)=>{if(I&&(I.code==="ENOTEMPTY"||I.code==="EEXIST"||I.code==="EPERM"))jJ9(H,$,L);else if(I&&I.code==="ENOTDIR")L(A);else L(I)})}function jJ9(H,$,A){VX(H),VX($),VX(typeof A==="function"),$.readdir(H,(L,I)=>{if(L)return A(L);let D=I.length,B;if(D===0)return $.rmdir(H,A);I.forEach((f)=>{RKA(ZqI.join(H,f),$,(E)=>{if(B)return;if(E)return A(B=E);if(--D===0)$.rmdir(H,A)})})})}function TqI(H,$){let A;$=$||{},qqI($),VX(H,"rimraf: missing path"),VX.strictEqual(typeof H,"string","rimraf: path should be a string"),VX($,"rimraf: missing options"),VX.strictEqual(typeof $,"object","rimraf: options should be object");try{A=$.lstatSync(H)}catch(L){if(L.code==="ENOENT")return;L.code}try{if(A&&A.isDirectory())jKA(H,$,null);else $.unlinkSync(H)}catch(L){if(L.code==="ENOENT")return;else if(L.code==="EPERM")return jKA(H,$,L);else if(L.code!=="EISDIR")throw L;jKA(H,$,L)}}function jKA(H,$,A){VX(H),VX($);try{$.rmdirSync(H)}catch(L){if(L.code==="ENOTDIR")throw A;else if(L.code==="ENOTEMPTY"||L.code==="EEXIST"||L.code==="EPERM")RJ9(H,$);else if(L.code!=="ENOENT")throw L}}function RJ9(H,$){return VX(H),VX($),$.readdirSync(H).forEach((A)=>TqI(ZqI.join(H,A),$)),$.rmdirSync(H,$)}zqI.exports=RKA;RKA.sync=TqI});var ljH=z((FBE,xqI)=>{var CX$=ZE(),yJ9=IU().fromCallback,OqI=NqI();function vJ9(H,$){if(CX$.rm)return CX$.rm(H,{recursive:!0,force:!0},$);OqI(H,$)}function hJ9(H){if(CX$.rmSync)return CX$.rmSync(H,{recursive:!0,force:!0});OqI.sync(H)}xqI.exports={remove:yJ9(vJ9),removeSync:hJ9}});var kqI=z((KBE,bqI)=>{var bJ9=IU().fromPromise,RqI=YDH(),yqI=require("path"),vqI=Fx(),hqI=ljH(),SqI=bJ9(async function($){let A;try{A=await RqI.readdir($)}catch{return vqI.mkdirs($)}return Promise.all(A.map((L)=>hqI.remove(yqI.join($,L))))});function jqI(H){let $;try{$=RqI.readdirSync(H)}catch{return vqI.mkdirsSync(H)}$.forEach((A)=>{A=yqI.join(H,A),hqI.removeSync(A)})}bqI.exports={emptyDirSync:jqI,emptydirSync:jqI,emptyDir:SqI,emptydir:SqI}});var pqI=z((QBE,mqI)=>{var kJ9=IU().fromCallback,uqI=require("path"),fa=ZE(),gqI=Fx();function uJ9(H,$){function A(){fa.writeFile(H,"",(L)=>{if(L)return $(L);$()})}fa.stat(H,(L,I)=>{if(!L&&I.isFile())return $();let D=uqI.dirname(H);fa.stat(D,(B,f)=>{if(B){if(B.code==="ENOENT")return gqI.mkdirs(D,(E)=>{if(E)return $(E);A()});return $(B)}if(f.isDirectory())A();else fa.readdir(D,(E)=>{if(E)return $(E)})})})}function gJ9(H){let $;try{$=fa.statSync(H)}catch{}if($&&$.isFile())return;let A=uqI.dirname(H);try{if(!fa.statSync(A).isDirectory())fa.readdirSync(A)}catch(L){if(L&&L.code==="ENOENT")gqI.mkdirsSync(A);else throw L}fa.writeFileSync(H,"")}mqI.exports={createFile:kJ9(uJ9),createFileSync:gJ9}});var nqI=z((WBE,iqI)=>{var mJ9=IU().fromCallback,dqI=require("path"),Ea=ZE(),cqI=Fx(),pJ9=Ba().pathExists,{areIdentical:lqI}=wDH();function dJ9(H,$,A){function L(I,D){Ea.link(I,D,(B)=>{if(B)return A(B);A(null)})}Ea.lstat($,(I,D)=>{Ea.lstat(H,(B,f)=>{if(B)return B.message=B.message.replace("lstat","ensureLink"),A(B);if(D&&lqI(f,D))return A(null);let E=dqI.dirname($);pJ9(E,(M,G)=>{if(M)return A(M);if(G)return L(H,$);cqI.mkdirs(E,(U)=>{if(U)return A(U);L(H,$)})})})})}function cJ9(H,$){let A;try{A=Ea.lstatSync($)}catch{}try{let D=Ea.lstatSync(H);if(A&&lqI(D,A))return}catch(D){throw D.message=D.message.replace("lstat","ensureLink"),D}let L=dqI.dirname($);if(Ea.existsSync(L))return Ea.linkSync(H,$);return cqI.mkdirsSync(L),Ea.linkSync(H,$)}iqI.exports={createLink:mJ9(dJ9),createLinkSync:cJ9}});var aqI=z((VBE,rqI)=>{var Ma=require("path"),ijH=ZE(),lJ9=Ba().pathExists;function iJ9(H,$,A){if(Ma.isAbsolute(H))return ijH.lstat(H,(L)=>{if(L)return L.message=L.message.replace("lstat","ensureSymlink"),A(L);return A(null,{toCwd:H,toDst:H})});else{let L=Ma.dirname($),I=Ma.join(L,H);return lJ9(I,(D,B)=>{if(D)return A(D);if(B)return A(null,{toCwd:I,toDst:H});else return ijH.lstat(H,(f)=>{if(f)return f.message=f.message.replace("lstat","ensureSymlink"),A(f);return A(null,{toCwd:H,toDst:Ma.relative(L,H)})})})}}function nJ9(H,$){let A;if(Ma.isAbsolute(H)){if(A=ijH.existsSync(H),!A)throw Error("absolute srcpath does not exist");return{toCwd:H,toDst:H}}else{let L=Ma.dirname($),I=Ma.join(L,H);if(A=ijH.existsSync(I),A)return{toCwd:I,toDst:H};else{if(A=ijH.existsSync(H),!A)throw Error("relative srcpath does not exist");return{toCwd:H,toDst:Ma.relative(L,H)}}}}rqI.exports={symlinkPaths:iJ9,symlinkPathsSync:nJ9}});var sqI=z((PBE,tqI)=>{var oqI=ZE();function rJ9(H,$,A){if(A=typeof $==="function"?$:A,$=typeof $==="function"?!1:$,$)return A(null,$);oqI.lstat(H,(L,I)=>{if(L)return A(null,"file");$=I&&I.isDirectory()?"dir":"file",A(null,$)})}function aJ9(H,$){let A;if($)return $;try{A=oqI.lstatSync(H)}catch{return"file"}return A&&A.isDirectory()?"dir":"file"}tqI.exports={symlinkType:rJ9,symlinkTypeSync:aJ9}});var BTI=z((_BE,DTI)=>{var oJ9=IU().fromCallback,HTI=require("path"),Kx=YDH(),$TI=Fx(),tJ9=$TI.mkdirs,sJ9=$TI.mkdirsSync,ATI=aqI(),eJ9=ATI.symlinkPaths,HF9=ATI.symlinkPathsSync,LTI=sqI(),$F9=LTI.symlinkType,AF9=LTI.symlinkTypeSync,LF9=Ba().pathExists,{areIdentical:ITI}=wDH();function IF9(H,$,A,L){L=typeof A==="function"?A:L,A=typeof A==="function"?!1:A,Kx.lstat($,(I,D)=>{if(!I&&D.isSymbolicLink())Promise.all([Kx.stat(H),Kx.stat($)]).then(([B,f])=>{if(ITI(B,f))return L(null);eqI(H,$,A,L)});else eqI(H,$,A,L)})}function eqI(H,$,A,L){eJ9(H,$,(I,D)=>{if(I)return L(I);H=D.toDst,$F9(D.toCwd,A,(B,f)=>{if(B)return L(B);let E=HTI.dirname($);LF9(E,(M,G)=>{if(M)return L(M);if(G)return Kx.symlink(H,$,f,L);tJ9(E,(U)=>{if(U)return L(U);Kx.symlink(H,$,f,L)})})})})}function DF9(H,$,A){let L;try{L=Kx.lstatSync($)}catch{}if(L&&L.isSymbolicLink()){let f=Kx.statSync(H),E=Kx.statSync($);if(ITI(f,E))return}let I=HF9(H,$);H=I.toDst,A=AF9(I.toCwd,A);let D=HTI.dirname($);if(Kx.existsSync(D))return Kx.symlinkSync(H,$,A);return sJ9(D),Kx.symlinkSync(H,$,A)}DTI.exports={createSymlink:oJ9(IF9),createSymlinkSync:DF9}});var FTI=z((CBE,JTI)=>{var{createFile:fTI,createFileSync:ETI}=pqI(),{createLink:MTI,createLinkSync:GTI}=nqI(),{createSymlink:UTI,createSymlinkSync:XTI}=BTI();JTI.exports={createFile:fTI,createFileSync:ETI,ensureFile:fTI,ensureFileSync:ETI,createLink:MTI,createLinkSync:GTI,ensureLink:MTI,ensureLinkSync:GTI,createSymlink:UTI,createSymlinkSync:XTI,ensureSymlink:UTI,ensureSymlinkSync:XTI}});var LKH=z((YBE,KTI)=>{function BF9(H,{EOL:$=`
${O}${KH}${TH}${yH}`}),planContent:O},clearContext:!0,mode:AH,allowedPrompts:C}})),cY(!0),$(),A(),H.onReject();return}let $H={"yes-accept-edits-keep-context":I.isBypassPermissionsModeAvailable?"bypassPermissions":"acceptEdits","yes-default-keep-context":"default"}[EH];if($H){c("tengu_plan_exit",{planLengthChars:O.length,outcome:EH,clearContext:!1,interviewPhaseEnabled:m5()}),cY(!0),rj(!0),$(),H.onAllow(YH,RpH($H,C));return}let MH={"yes-bypass-permissions":"bypassPermissions","yes-accept-edits":"acceptEdits"}[EH];if(MH){c("tengu_plan_exit",{planLengthChars:O.length,outcome:EH,interviewPhaseEnabled:m5()}),cY(!0),rj(!0),$(),H.onAllow(YH,RpH(MH,C));return}if(EH==="no"){let AH=f.trim();if(!AH&&!Q)return;c("tengu_plan_exit",{planLengthChars:O.length,outcome:"no",interviewPhaseEnabled:m5()});let KH;if(Q)KH=await Promise.all(F.map(async(CH)=>{let TH={type:"image",source:{type:"base64",media_type:CH.mediaType||"image/png",data:CH.content}};return(await mIH(TH)).block}));$(),A(),H.onReject(AH||(Q?"(See attached image)":void 0),KH&&KH.length>0?KH:void 0)}}let IH=Hj(),FH=IH?QX(IH):null;if(g==="git-dialog"&&GH)return L1.default.createElement(jpH,{issue:GH,branchName:BH,onDone:qH,color:"planMode"});if(g==="eligibility-error"){let EH=p.map((YH)=>{let OH=YH.match(/(https?:\/\/[^\s]+)/i),HH=YH.split(`
${U}`)}return B},_4;var vi=K(()=>{TV();wcL=Object.freeze(Object.create(null)),_4=aw0(ZcL)});var ITH;var TLA=K(()=>{rR();Qq();B4H();vi();ITH=class ITH extends _5{list(H={},$){let{betas:A,...L}=H??{};return this._client.getAPIList("/v1/files",sN,{query:L,...$,headers:Z9([{"anthropic-beta":[...A??[],"files-api-2025-04-14"].toString()},$?.headers])})}delete(H,$={},A){let{betas:L}=$??{};return this._client.delete(_4`/v1/files/${H}`,{...A,headers:Z9([{"anthropic-beta":[...L??[],"files-api-2025-04-14"].toString()},A?.headers])})}download(H,$={},A){let{betas:L}=$??{};return this._client.get(_4`/v1/files/${H}/content`,{...A,headers:Z9([{"anthropic-beta":[...L??[],"files-api-2025-04-14"].toString(),Accept:"application/binary"},A?.headers]),__binaryResponse:!0})}retrieveMetadata(H,$={},A){let{betas:L}=$??{};return this._client.get(_4`/v1/files/${H}`,{...A,headers:Z9([{"anthropic-beta":[...L??[],"files-api-2025-04-14"].toString()},A?.headers])})}upload(H,$){let{betas:A,...L}=H;return this._client.post("/v1/files",D4H({body:L,...$,headers:Z9([{"anthropic-beta":[...A??[],"files-api-2025-04-14"].toString()},$?.headers])},this._client))}}});var DTH;var zLA=K(()=>{rR();Qq();vi();DTH=class DTH extends _5{retrieve(H,$={},A){let{betas:L}=$??{};return this._client.get(_4`/v1/models/${H}?beta=true`,{...A,headers:Z9([{...L?.toString()!=null?{"anthropic-beta":L?.toString()}:void 0},A?.headers])})}list(H={},$){let{betas:A,...L}=H??{};return this._client.getAPIList("/v1/models?beta=true",sN,{query:L,...$,headers:Z9([{...A?.toString()!=null?{"anthropic-beta":A?.toString()}:void 0},$?.headers])})}}});var jB$;var NLA=K(()=>{jB$={"claude-opus-4-20250514":8192,"claude-opus-4-0":8192,"claude-4-opus-20250514":8192,"anthropic.claude-opus-4-20250514-v1:0":8192,"claude-opus-4@20250514":8192,"claude-opus-4-1-20250805":8192,"anthropic.claude-opus-4-1-20250805-v1:0":8192,"claude-opus-4-1@20250805":8192}});function OLA(H,$){if(!$||!("parse"in($.output_format??{})))return{...H,content:H.content.map((A)=>{if(A.type==="text")return{...A,parsed:null};return A}),parsed_output:null};return xLA(H,$)}function xLA(H,$){let A=null,L=H.content.map((I)=>{if(I.type==="text"){let D=sw0($,I.text);if(A===null)A=D;return{...I,parsed:D}}return I});return{...H,content:L,parsed_output:A}}function sw0(H,$){if(H.output_format?.type!=="json_schema")return null;try{if("parse"in H.output_format)return H.output_format.parse($);return JSON.parse($)}catch(A){throw new LD(`Failed to parse structured output: ${A}`)}}var SLA=K(()=>{TV()});var ew0=(H)=>{let $=0,A=[];while($<H.length){let L=H[$];if(L==="\\"){$++;continue}if(L==="{"){A.push({type:"brace",value:"{"}),$++;continue}if(L==="}"){A.push({type:"brace",value:"}"}),$++;continue}if(L==="["){A.push({type:"paren",value:"["}),$++;continue}if(L==="]"){A.push({type:"paren",value:"]"}),$++;continue}if(L===":"){A.push({type:"separator",value:":"}),$++;continue}if(L===","){A.push({type:"delimiter",value:","}),$++;continue}if(L==='"'){let f="",E=!1;L=H[++$];while(L!=='"'){if($===H.length){E=!0;break}if(L==="\\"){if($++,$===H.length){E=!0;break}f+=L+H[$],L=H[++$]}else f+=L,L=H[++$]}if(L=H[++$],!E)A.push({type:"string",value:f});continue}if(L&&/\s/.test(L)){$++;continue}let D=/[0-9]/;if(L&&D.test(L)||L==="-"||L==="."){let f="";if(L==="-")f+=L,L=H[++$];while(L&&D.test(L)||L===".")f+=L,L=H[++$];A.push({type:"number",value:f});continue}let B=/[a-z]/i;if(L&&B.test(L)){let f="";while(L&&B.test(L)){if($===H.length)break;f+=L,L=H[++$]}if(f=="true"||f=="false"||f==="null")A.push({type:"name",value:f});else{$++;continue}continue}$++}return A},f4H=(H)=>{if(H.length===0)return H;let $=H[H.length-1];switch($.type){case"separator":return H=H.slice(0,H.length-1),f4H(H);break;case"number":let A=$.value[$.value.length-1];if(A==="."||A==="-")return H=H.slice(0,H.length-1),f4H(H);case"string":let L=H[H.length-2];if(L?.type==="delimiter")return H=H.slice(0,H.length-1),f4H(H);else if(L?.type==="brace"&&L.value==="{")return H=H.slice(0,H.length-1),f4H(H);break;case"delimiter":return H=H.slice(0,H.length-1),f4H(H);break}return H},HZ0=(H)=>{let $=[];if(H.map((A)=>{if(A.type==="brace")if(A.value==="{")$.push("}");else $.splice($.lastIndexOf("}"),1);if(A.type==="paren")if(A.value==="[")$.push("]");else $.splice($.lastIndexOf("]"),1)}),$.length>0)$.reverse().map((A)=>{if(A==="}")H.push({type:"brace",value:"}"});else if(A==="]")H.push({type:"paren",value:"]"})});return H},$Z0=(H)=>{let $="";return H.map((A)=>{switch(A.type){case"string":$+='"'+A.value+'"';break;default:$+=A.value;break}}),$},RB$=(H)=>JSON.parse($Z0(HZ0(f4H(ew0(H)))));var jLA=()=>{};var zAH=K(()=>{TV()});var yB$=K(()=>{WLA()});function NcL(H){return H.type==="tool_use"||H.type==="server_tool_use"||H.type==="mcp_tool_use"}function OcL(H){}var Wq,hi,E4H,BTH,vB$,fTH,ETH,hB$,MTH,Fu,GTH,bB$,kB$,M4H,uB$,gB$,RLA,qcL,mB$,yLA,vLA,hLA,TcL,zcL="__json_buf",UTH;var xcL=K(()=>{Uu();jLA();zAH();yB$();SLA();UTH=class UTH{constructor(H){Wq.add(this),this.messages=[],this.receivedMessages=[],hi.set(this,void 0),E4H.set(this,null),this.controller=new AbortController,BTH.set(this,void 0),vB$.set(this,()=>{}),fTH.set(this,()=>{}),ETH.set(this,void 0),hB$.set(this,()=>{}),MTH.set(this,()=>{}),Fu.set(this,{}),GTH.set(this,!1),bB$.set(this,!1),kB$.set(this,!1),M4H.set(this,!1),uB$.set(this,void 0),gB$.set(this,void 0),mB$.set(this,($)=>{if(ED(this,bB$,!0,"f"),Xu($))$=new lf;if($ instanceof lf)return ED(this,kB$,!0,"f"),this._emit("abort",$);if($ instanceof LD)return this._emit("error",$);if($ instanceof Error){let A=new LD($.message);return A.cause=$,this._emit("error",A)}return this._emit("error",new LD(String($)))}),ED(this,BTH,new Promise(($,A)=>{ED(this,vB$,$,"f"),ED(this,fTH,A,"f")}),"f"),ED(this,ETH,new Promise(($,A)=>{ED(this,hB$,$,"f"),ED(this,MTH,A,"f")}),"f"),xA(this,BTH,"f").catch(()=>{}),xA(this,ETH,"f").catch(()=>{}),ED(this,E4H,H,"f")}get response(){return xA(this,uB$,"f")}get request_id(){return xA(this,gB$,"f")}async withResponse(){let H=await xA(this,BTH,"f");if(!H)throw Error("Could not resolve a `Response` object");return{data:this,response:H,request_id:H.headers.get("request-id")}}static fromReadableStream(H){let $=new UTH(null);return $._run(()=>$._fromReadableStream(H)),$}static createMessage(H,$,A){let L=new UTH($);for(let I of $.messages)L._addMessageParam(I);return ED(L,E4H,{...$,stream:!0},"f"),L._run(()=>L._createMessage(H,{...$,stream:!0},{...A,headers:{...A?.headers,"X-Stainless-Helper-Method":"stream"}})),L}_run(H){H().then(()=>{this._emitFinal(),this._emit("end")},xA(this,mB$,"f"))}_addMessageParam(H){this.messages.push(H)}_addMessage(H,$=!0){if(this.receivedMessages.push(H),$)this._emit("message",H)}async _createMessage(H,$,A){let L=A?.signal,I;if(L){if(L.aborted)this.controller.abort();I=this.controller.abort.bind(this.controller),L.addEventListener("abort",I)}try{xA(this,Wq,"m",yLA).call(this);let{response:D,data:B}=await H.create({...$,stream:!0},{...A,signal:this.controller.signal}).withResponse();this._connected(D);for await(let f of B)xA(this,Wq,"m",vLA).call(this,f);if(B.controller.signal?.aborted)throw new lf;xA(this,Wq,"m",hLA).call(this)}finally{if(L&&I)L.removeEventListener("abort",I)}}_connected(H){if(this.ended)return;ED(this,uB$,H,"f"),ED(this,gB$,H?.headers.get("request-id"),"f"),xA(this,vB$,"f").call(this,H),this._emit("connect")}get ended(){return xA(this,GTH,"f")}get errored(){return xA(this,bB$,"f")}get aborted(){return xA(this,kB$,"f")}abort(){this.controller.abort()}on(H,$){return(xA(this,Fu,"f")[H]||(xA(this,Fu,"f")[H]=[])).push({listener:$}),this}off(H,$){let A=xA(this,Fu,"f")[H];if(!A)return this;let L=A.findIndex((I)=>I.listener===$);if(L>=0)A.splice(L,1);return this}once(H,$){return(xA(this,Fu,"f")[H]||(xA(this,Fu,"f")[H]=[])).push({listener:$,once:!0}),this}emitted(H){return new Promise(($,A)=>{if(ED(this,M4H,!0,"f"),H!=="error")this.once("error",A);this.once(H,$)})}async done(){ED(this,M4H,!0,"f"),await xA(this,ETH,"f")}get currentMessage(){return xA(this,hi,"f")}async finalMessage(){return await this.done(),xA(this,Wq,"m",RLA).call(this)}async finalText(){return await this.done(),xA(this,Wq,"m",qcL).call(this)}_emit(H,...$){if(xA(this,GTH,"f"))return;if(H==="end")ED(this,GTH,!0,"f"),xA(this,hB$,"f").call(this);let A=xA(this,Fu,"f")[H];if(A)xA(this,Fu,"f")[H]=A.filter((L)=>!L.once),A.forEach(({listener:L})=>L(...$));if(H==="abort"){let L=$[0];if(!xA(this,M4H,"f")&&!A?.length)Promise.reject(L);xA(this,fTH,"f").call(this,L),xA(this,MTH,"f").call(this,L),this._emit("end");return}if(H==="error"){let L=$[0];if(!xA(this,M4H,"f")&&!A?.length)Promise.reject(L);xA(this,fTH,"f").call(this,L),xA(this,MTH,"f").call(this,L),this._emit("end")}}_emitFinal(){if(this.receivedMessages.at(-1))this._emit("finalMessage",xA(this,Wq,"m",RLA).call(this))}async _fromReadableStream(H,$){let A=$?.signal,L;if(A){if(A.aborted)this.controller.abort();L=this.controller.abort.bind(this.controller),A.addEventListener("abort",L)}try{xA(this,Wq,"m",yLA).call(this),this._connected(null);let I=zV.fromReadableStream(H,this.controller);for await(let D of I)xA(this,Wq,"m",vLA).call(this,D);if(I.controller.signal?.aborted)throw new lf;xA(this,Wq,"m",hLA).call(this)}finally{if(A&&L)A.removeEventListener("abort",L)}}[(hi=new WeakMap,E4H=new WeakMap,BTH=new WeakMap,vB$=new WeakMap,fTH=new WeakMap,ETH=new WeakMap,hB$=new WeakMap,MTH=new WeakMap,Fu=new WeakMap,GTH=new WeakMap,bB$=new WeakMap,kB$=new WeakMap,M4H=new WeakMap,uB$=new WeakMap,gB$=new WeakMap,mB$=new WeakMap,Wq=new WeakSet,RLA=function(){if(this.receivedMessages.length===0)throw new LD("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},qcL=function(){if(this.receivedMessages.length===0)throw new LD("stream ended without producing a Message with role=assistant");let $=this.receivedMessages.at(-1).content.filter((A)=>A.type==="text").map((A)=>A.text);if($.length===0)throw new LD("stream ended without producing a content block with type=text");return $.join(" ")},yLA=function(){if(this.ended)return;ED(this,hi,void 0,"f")},vLA=function($){if(this.ended)return;let A=xA(this,Wq,"m",TcL).call(this,$);switch(this._emit("streamEvent",$,A),$.type){case"content_block_delta":{let L=A.content.at(-1);switch($.delta.type){case"text_delta":{if(L.type==="text")this._emit("text",$.delta.text,L.text||"");break}case"citations_delta":{if(L.type==="text")this._emit("citation",$.delta.citation,L.citations??[]);break}case"input_json_delta":{if(NcL(L)&&L.input)this._emit("inputJson",$.delta.partial_json,L.input);break}case"thinking_delta":{if(L.type==="thinking")this._emit("thinking",$.delta.thinking,L.thinking);break}case"signature_delta":{if(L.type==="thinking")this._emit("signature",L.signature);break}default:OcL($.delta)}break}case"message_stop":{this._addMessageParam(A),this._addMessage(OLA(A,xA(this,E4H,"f")),!0);break}case"content_block_stop":{this._emit("contentBlock",A.content.at(-1));break}case"message_start":{ED(this,hi,A,"f");break}case"content_block_start":case"message_delta":break}},hLA=function(){if(this.ended)throw new LD("stream has ended, this shouldn't happen");let $=xA(this,hi,"f");if(!$)throw new LD("request ended without sending any chunks");return ED(this,hi,void 0,"f"),OLA($,xA(this,E4H,"f"))},TcL=function($){let A=xA(this,hi,"f");if($.type==="message_start"){if(A)throw new LD(`Unexpected event order, got ${$.type} before receiving "message_stop"`);return $.message}if(!A)throw new LD(`Unexpected event order, got ${$.type} before "message_start"`);switch($.type){case"message_stop":return A;case"message_delta":if(A.container=$.delta.container,A.stop_reason=$.delta.stop_reason,A.stop_sequence=$.delta.stop_sequence,A.usage.output_tokens=$.usage.output_tokens,A.context_management=$.context_management,$.usage.input_tokens!=null)A.usage.input_tokens=$.usage.input_tokens;if($.usage.cache_creation_input_tokens!=null)A.usage.cache_creation_input_tokens=$.usage.cache_creation_input_tokens;if($.usage.cache_read_input_tokens!=null)A.usage.cache_read_input_tokens=$.usage.cache_read_input_tokens;if($.usage.server_tool_use!=null)A.usage.server_tool_use=$.usage.server_tool_use;return A;case"content_block_start":return A.content.push($.content_block),A;case"content_block_delta":{let L=A.content.at($.index);switch($.delta.type){case"text_delta":{if(L?.type==="text")A.content[$.index]={...L,text:(L.text||"")+$.delta.text};break}case"citations_delta":{if(L?.type==="text")A.content[$.index]={...L,citations:[...L.citations??[],$.delta.citation]};break}case"input_json_delta":{if(L&&NcL(L)){let I=L[zcL]||"";I+=$.delta.partial_json;let D={...L};if(Object.defineProperty(D,zcL,{value:I,enumerable:!1,writable:!0}),I)try{D.input=RB$(I)}catch(B){let f=new LD(`Unable to parse tool parameter JSON from model. Please retry your request or adjust your prompt. Error: ${B}. JSON: ${I}`);xA(this,mB$,"f").call(this,f)}A.content[$.index]=D}break}case"thinking_delta":{if(L?.type==="thinking")A.content[$.index]={...L,thinking:L.thinking+$.delta.thinking};break}case"signature_delta":{if(L?.type==="thinking")A.content[$.index]={...L,signature:$.delta.signature};break}default:OcL($.delta)}return A}case"content_block_stop":return A}},Symbol.asyncIterator)](){let H=[],$=[],A=!1;return this.on("streamEvent",(L)=>{let I=$.shift();if(I)I.resolve(L);else H.push(L)}),this.on("end",()=>{A=!0;for(let L of $)L.resolve(void 0);$.length=0}),this.on("abort",(L)=>{A=!0;for(let I of $)I.reject(L);$.length=0}),this.on("error",(L)=>{A=!0;for(let I of $)I.reject(L);$.length=0}),{next:async()=>{if(!H.length){if(A)return{value:void 0,done:!0};return new Promise((I,D)=>$.push({resolve:I,reject:D})).then((I)=>I?{value:I,done:!1}:{value:void 0,done:!0})}return{value:H.shift(),done:!1}},return:async()=>{return this.abort(),{value:void 0,done:!0}}}}toReadableStream(){return new zV(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}});function ScL(){let H,$;return{promise:new Promise((L,I)=>{H=L,$=I}),resolve:H,reject:$}}async function AZ0(H,$=H.messages.at(-1)){if(!$||$.role!=="assistant"||!$.content||typeof $.content==="string")return null;let A=$.content.filter((I)=>I.type==="tool_use");if(A.length===0)return null;return{role:"user",content:await Promise.all(A.map(async(I)=>{let D=H.tools.find((B)=>B.name===I.name);if(!D||!("run"in D))return{type:"tool_result",tool_use_id:I.id,content:`Error: Tool '${I.name}' not found`,is_error:!0};try{let B=I.input;if("parse"in D&&D.parse)B=D.parse(B);let f=await D.run(B);return{type:"tool_result",tool_use_id:I.id,content:f}}catch(B){return{type:"tool_result",tool_use_id:I.id,content:`Error: ${B instanceof Error?B.message:String(B)}`,is_error:!0}}}))}}var pB$,G4H,NAH,m_,XTH,eN,Ku,bi,JTH,bLA,FTH;var kLA=K(()=>{Uu();TV();Qq();FTH=class FTH{constructor(H,$,A){pB$.add(this),this.client=H,G4H.set(this,!1),NAH.set(this,!1),m_.set(this,void 0),XTH.set(this,void 0),eN.set(this,void 0),Ku.set(this,void 0),bi.set(this,void 0),JTH.set(this,0),ED(this,m_,{params:{...$,messages:structuredClone($.messages)}},"f"),ED(this,XTH,{...A,headers:Z9([{"x-stainless-helper":"BetaToolRunner"},A?.headers])},"f"),ED(this,bi,ScL(),"f")}async*[(G4H=new WeakMap,NAH=new WeakMap,m_=new WeakMap,XTH=new WeakMap,eN=new WeakMap,Ku=new WeakMap,bi=new WeakMap,JTH=new WeakMap,pB$=new WeakSet,Symbol.asyncIterator)](){var H;if(xA(this,G4H,"f"))throw new LD("Cannot iterate over a consumed stream");ED(this,G4H,!0,"f"),ED(this,NAH,!0,"f"),ED(this,Ku,void 0,"f");try{while(!0){let $;try{if(xA(this,m_,"f").params.max_iterations&&xA(this,JTH,"f")>=xA(this,m_,"f").params.max_iterations)break;ED(this,NAH,!1,"f"),ED(this,eN,void 0,"f"),ED(this,Ku,void 0,"f"),ED(this,JTH,(H=xA(this,JTH,"f"),H++,H),"f");let{max_iterations:A,...L}=xA(this,m_,"f").params;if(L.stream)$=this.client.beta.messages.stream({...L},xA(this,XTH,"f")),ED(this,eN,$.finalMessage(),"f"),xA(this,eN,"f").catch(()=>{}),yield $;else ED(this,eN,this.client.beta.messages.create({...L,stream:!1},xA(this,XTH,"f")),"f"),yield xA(this,eN,"f");if(!xA(this,NAH,"f")){let{role:D,content:B}=await xA(this,eN,"f");xA(this,m_,"f").params.messages.push({role:D,content:B})}let I=await xA(this,pB$,"m",bLA).call(this,xA(this,m_,"f").params.messages.at(-1));if(I)xA(this,m_,"f").params.messages.push(I);if(!I&&!xA(this,NAH,"f"))break}finally{if($)$.abort()}}if(!xA(this,eN,"f"))throw new LD("ToolRunner concluded without a message from the server");xA(this,bi,"f").resolve(await xA(this,eN,"f"))}catch($){throw ED(this,G4H,!1,"f"),xA(this,bi,"f").promise.catch(()=>{}),xA(this,bi,"f").reject($),ED(this,bi,ScL(),"f"),$}}setMessagesParams(H){if(typeof H==="function")xA(this,m_,"f").params=H(xA(this,m_,"f").params);else xA(this,m_,"f").params=H;ED(this,NAH,!0,"f"),ED(this,Ku,void 0,"f")}async generateToolResponse(){let H=await xA(this,eN,"f")??this.params.messages.at(-1);if(!H)return null;return xA(this,pB$,"m",bLA).call(this,H)}done(){return xA(this,bi,"f").promise}async runUntilDone(){if(!xA(this,G4H,"f"))for await(let H of this);return this.done()}get params(){return xA(this,m_,"f").params}pushMessages(...H){this.setMessagesParams(($)=>({...$,messages:[...$.messages,...H]}))}then(H,$){return this.runUntilDone().then(H,$)}};bLA=async function($){if(xA(this,Ku,"f")!==void 0)return xA(this,Ku,"f");return ED(this,Ku,AZ0(xA(this,m_,"f").params,$),"f"),xA(this,Ku,"f")}});var U4H;var uLA=K(()=>{TV();KLA();U4H=class U4H{constructor(H,$){this.iterator=H,this.controller=$}async*decoder(){let H=new yi;for await(let $ of this.iterator)for(let A of H.decode($))yield JSON.parse(A);for(let $ of H.flush())yield JSON.parse($)}[Symbol.asyncIterator](){return this.decoder()}static fromResponse(H,$){if(!H.body){if($.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative")throw new LD("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new LD("Attempted to iterate over a response with no body")}return new U4H(tqH(H.body),$)}}});var KTH;var gLA=K(()=>{rR();Qq();uLA();zAH();vi();KTH=class KTH extends _5{create(H,$){let{betas:A,...L}=H;return this._client.post("/v1/messages/batches?beta=true",{body:L,...$,headers:Z9([{"anthropic-beta":[...A??[],"message-batches-2024-09-24"].toString()},$?.headers])})}retrieve(H,$={},A){let{betas:L}=$??{};return this._client.get(_4`/v1/messages/batches/${H}?beta=true`,{...A,headers:Z9([{"anthropic-beta":[...L??[],"message-batches-2024-09-24"].toString()},A?.headers])})}list(H={},$){let{betas:A,...L}=H??{};return this._client.getAPIList("/v1/messages/batches?beta=true",sN,{query:L,...$,headers:Z9([{"anthropic-beta":[...A??[],"message-batches-2024-09-24"].toString()},$?.headers])})}delete(H,$={},A){let{betas:L}=$??{};return this._client.delete(_4`/v1/messages/batches/${H}?beta=true`,{...A,headers:Z9([{"anthropic-beta":[...L??[],"message-batches-2024-09-24"].toString()},A?.headers])})}cancel(H,$={},A){let{betas:L}=$??{};return this._client.post(_4`/v1/messages/batches/${H}/cancel?beta=true`,{...A,headers:Z9([{"anthropic-beta":[...L??[],"message-batches-2024-09-24"].toString()},A?.headers])})}async results(H,$={},A){let L=await this.retrieve(H);if(!L.results_url)throw new LD(`No batch \`results_url\`; Has it finished processing? ${L.processing_status} - ${L.id}`);let{betas:I}=$??{};return this._client.get(L.results_url,{...A,headers:Z9([{"anthropic-beta":[...I??[],"message-batches-2024-09-24"].toString(),Accept:"application/binary"},A?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((D,B)=>U4H.fromResponse(B.response,B.controller))}}});var jcL,OAH;var mLA=K(()=>{NLA();Qq();SLA();xcL();kLA();gLA();gLA();kLA();jcL={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-7-sonnet-latest":"February 19th, 2026","claude-3-7-sonnet-20250219":"February 19th, 2026"};OAH=class OAH extends _5{constructor(){super(...arguments);this.batches=new KTH(this._client)}create(H,$){let{betas:A,...L}=H;if(L.model in jcL)console.warn(`The model '${L.model}' is deprecated and will reach end-of-life on ${jcL[L.model]}
${U}`)}return B},M1A;var Y1I=K(()=>{L1A();_1I=Object.freeze(Object.create(null)),M1A=ak0(C1I)});function sk0(H){let $=new w2(H);return delete $.batches,delete $.countTokens,$}function ek0(H){let $=new y6(H);return delete $.promptCaching,delete $.messages.batches,delete $.messages.countTokens,$}var ok0="bedrock-2023-05-31",tk0,S8$;var G1A=K(()=>{Wu();ZTH();Y0I();W1I();JNH();P1I();Y1I();Wu();tk0=new Set(["/v1/complete","/v1/messages","/v1/messages?beta=true"]);S8$=class S8$ extends LM{constructor({awsRegion:H=f1A("AWS_REGION")??"us-east-1",baseURL:$=f1A("ANTHROPIC_BEDROCK_BASE_URL")??`https://bedrock-runtime.${H}.amazonaws.com`,awsSecretKey:A=null,awsAccessKey:L=null,awsSessionToken:I=null,providerChainResolver:D=null,...B}={}){super({baseURL:$,...B});this.skipAuth=!1,this.messages=sk0(this),this.completions=new ki(this),this.beta=ek0(this),this.awsSecretKey=A,this.awsAccessKey=L,this.awsRegion=H,this.awsSessionToken=I,this.skipAuth=B.skipAuth??!1,this.providerChainResolver=D}validateHeaders(){}async prepareRequest(H,{url:$,options:A}){if(this.skipAuth)return;let L=this.awsRegion;if(!L)throw Error("Expected `awsRegion` option to be passed to the client or the `AWS_REGION` environment variable to be present");let I=await C0I(H,{url:$,regionName:L,awsAccessKey:this.awsAccessKey,awsSecretKey:this.awsSecretKey,awsSessionToken:this.awsSessionToken,fetchOptions:this.fetchOptions,providerChainResolver:this.providerChainResolver});H.headers=E1A([I,H.headers]).values}async buildRequest(H){if(H.__streamClass=x8$,N8$(H.body))H.body={...H.body};if(N8$(H.body)){if(!H.body.anthropic_version)H.body.anthropic_version=ok0;if(H.headers&&!H.body.anthropic_beta){let $=E1A([H.headers]).values.get("anthropic-beta");if($!=null)H.body.anthropic_beta=$.split(",")}}if(tk0.has(H.path)&&H.method==="post"){if(!N8$(H.body))throw Error("Expected request body to be an object for post /v1/messages");let $=H.body.model;H.body.model=void 0;let A=H.body.stream;if(H.body.stream=void 0,A)H.path=M1A`/model/${$}/invoke-with-response-stream`;else H.path=M1A`/model/${$}/invoke`}return super.buildRequest(H)}}});var w1I=K(()=>{G1A();G1A()});var j8$=K(()=>{TV()});var U1A=(H)=>(U1A=Array.isArray,U1A(H)),X1A;var R8$=K(()=>{j8$();X1A=U1A});function*$u0(H){if(!H)return;if(Z1I in H){let{values:L,nulls:I}=H;yield*L.entries();for(let D of I)yield[D,null];return}let $=!1,A;if(H instanceof Headers)A=H.entries();else if(X1A(H))A=H;else $=!0,A=Object.entries(H??{});for(let L of A){let I=L[0];if(typeof I!=="string")throw TypeError("expected header name to be a string");let D=X1A(L[1])?L[1]:[L[1]],B=!1;for(let f of D){if(f===void 0)continue;if($&&!B)B=!0,yield[I,null];yield[I,f]}}}var Z1I,J1A=(H)=>{let $=new Headers,A=new Set;for(let L of H){let I=new Set;for(let[D,B]of $u0(L)){let f=D.toLowerCase();if(!I.has(f))$.delete(D),I.add(f);if(B===null)$.delete(D),A.add(f);else $.append(D,B),A.delete(f)}}return{[Z1I]:!0,values:$,nulls:A}};var q1I=K(()=>{R8$();Z1I=Symbol.for("brand.privateNullableHeaders")});var T1I=K(()=>{j8$()});var y8$=(H)=>{if(typeof globalThis.process<"u")return globalThis.process.env?.[H]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(H)?.trim();return};var z1I=K(()=>{R8$()});var N1I=K(()=>{R8$();T1I();z1I()});function Au0(H){let $=new w2(H);return delete $.batches,$}function Lu0(H){let $=new y6(H);return delete $.messages.batches,$}var v8$;var F1A=K(()=>{q1I();j8$();N1I();Wu();Wu();ZTH();v8$=class v8$ extends HO{constructor({baseURL:H=y8$("ANTHROPIC_FOUNDRY_BASE_URL"),apiKey:$=y8$("ANTHROPIC_FOUNDRY_API_KEY"),resource:A=y8$("ANTHROPIC_FOUNDRY_RESOURCE"),azureADTokenProvider:L,dangerouslyAllowBrowser:I,...D}={}){if(typeof L==="function")I=!0;if(!L&&!$)throw new LD("Missing credentials. Please pass one of `apiKey` and `azureTokenProvider`, or set the `ANTHROPIC_FOUNDRY_API_KEY` environment variable.");if(L&&$)throw new LD("The `apiKey` and `azureADTokenProvider` arguments are mutually exclusive; only one can be passed at a time.");if(!H){if(!A)throw new LD("Must provide one of the `baseURL` or `resource` arguments, or the `ANTHROPIC_FOUNDRY_RESOURCE` environment variable");H=`https://${A}.services.ai.azure.com/anthropic/`}else if(A)throw new LD("baseURL and resource are mutually exclusive");super({apiKey:L??$,baseURL:H,...D,...I!==void 0?{dangerouslyAllowBrowser:I}:{}});this.resource=null,this.messages=Au0(this),this.beta=Lu0(this),this.models=void 0}async authHeaders(){if(typeof this._options.apiKey==="function"){let H;try{H=await this._options.apiKey()}catch($){if($ instanceof LD)throw $;throw new LD(`Failed to get token from azureADTokenProvider: ${$.message}`,{cause:$})}if(typeof H!=="string"||!H)throw new LD(`Expected azureADTokenProvider function argument to return a string but it returned ${H}`);return J1A([{Authorization:`Bearer ${H}`}])}if(typeof this._options.apiKey==="string")return J1A([{"x-api-key":this.apiKey}]);return}validateHeaders(){return}}});var O1I=K(()=>{F1A();F1A()});var K1A=z((M_f,b1I)=>{var h8$=Object.prototype.hasOwnProperty,h1I=Object.prototype.toString,x1I=Object.defineProperty,S1I=Object.getOwnPropertyDescriptor,j1I=function($){if(typeof Array.isArray==="function")return Array.isArray($);return h1I.call($)==="[object Array]"},R1I=function($){if(!$||h1I.call($)!=="[object Object]")return!1;var A=h8$.call($,"constructor"),L=$.constructor&&$.constructor.prototype&&h8$.call($.constructor.prototype,"isPrototypeOf");if($.constructor&&!A&&!L)return!1;var I;for(I in $);return typeof I>"u"||h8$.call($,I)},y1I=function($,A){if(x1I&&A.name==="__proto__")x1I($,A.name,{enumerable:!0,configurable:!0,value:A.newValue,writable:!0});else $[A.name]=A.newValue},v1I=function($,A){if(A==="__proto__"){if(!h8$.call($,A))return;else if(S1I)return S1I($,A).value}return $[A]};b1I.exports=function H(){var $,A,L,I,D,B,f=arguments[0],E=1,M=arguments.length,G=!1;if(typeof f==="boolean")G=f,f=arguments[1]||{},E=2;if(f==null||typeof f!=="object"&&typeof f!=="function")f={};for(;E<M;++E)if($=arguments[E],$!=null){for(A in $)if(L=v1I(f,A),I=v1I($,A),f!==I){if(G&&I&&(R1I(I)||(D=j1I(I)))){if(D)D=!1,B=L&&j1I(L)?L:[];else B=L&&R1I(L)?L:{};y1I(f,{name:A,newValue:H(G,B,I)})}else if(typeof I<"u")y1I(f,{name:A,newValue:I})}}return f}});var u1I=z((G_f,k1I)=>{var Jy=(H)=>H!==null&&typeof H==="object"&&typeof H.pipe==="function";Jy.writable=(H)=>Jy(H)&&H.writable!==!1&&typeof H._write==="function"&&typeof H._writableState==="object";Jy.readable=(H)=>Jy(H)&&H.readable!==!1&&typeof H._read==="function"&&typeof H._readableState==="object";Jy.duplex=(H)=>Jy.writable(H)&&Jy.readable(H);Jy.transform=(H)=>Jy.duplex(H)&&typeof H._transform==="function";k1I.exports=Jy});var g1I=z((U_f,Iu0)=>{Iu0.exports={name:"gaxios",version:"6.7.1",description:"A simple common HTTP client specifically for Google APIs and services.",main:"build/src/index.js",types:"build/src/index.d.ts",files:["build/src"],scripts:{lint:"gts check",test:"c8 mocha build/test","presystem-test":"npm run compile","system-test":"mocha build/system-test --timeout 80000",compile:"tsc -p .",fix:"gts fix",prepare:"npm run compile",pretest:"npm run compile",webpack:"webpack","prebrowser-test":"npm run compile","browser-test":"node build/browser-test/browser-test-runner.js",docs:"compodoc src/","docs-test":"linkinator docs","predocs-test":"npm run docs","samples-test":"cd samples/ && npm link ../ && npm test && cd ../",prelint:"cd samples; npm link ../; npm install",clean:"gts clean",precompile:"gts clean"},repository:"googleapis/gaxios",keywords:["google"],engines:{node:">=14"},author:"Google, LLC",license:"Apache-2.0",devDependencies:{"@babel/plugin-proposal-private-methods":"^7.18.6","@compodoc/compodoc":"1.1.19","@types/cors":"^2.8.6","@types/express":"^4.16.1","@types/extend":"^3.0.1","@types/mocha":"^9.0.0","@types/multiparty":"0.0.36","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^20.0.0","@types/node-fetch":"^2.5.7","@types/sinon":"^17.0.0","@types/tmp":"0.2.6","@types/uuid":"^10.0.0","abort-controller":"^3.0.0",assert:"^2.0.0",browserify:"^17.0.0",c8:"^8.0.0",cheerio:"1.0.0-rc.10",cors:"^2.8.5",execa:"^5.0.0",express:"^4.16.4","form-data":"^4.0.0",gts:"^5.0.0","is-docker":"^2.0.0",karma:"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-remap-coverage":"^0.1.5","karma-sourcemap-loader":"^0.4.0","karma-webpack":"5.0.0",linkinator:"^3.0.0",mocha:"^8.0.0",multiparty:"^4.2.1",mv:"^2.1.1",ncp:"^2.0.0",nock:"^13.0.0","null-loader":"^4.0.0",puppeteer:"^19.0.0",sinon:"^18.0.0","stream-browserify":"^3.0.0",tmp:"0.2.3","ts-loader":"^8.0.0",typescript:"^5.1.6",webpack:"^5.35.0","webpack-cli":"^4.0.0"},dependencies:{extend:"^3.0.2","https-proxy-agent":"^7.0.1","is-stream":"^2.0.0","node-fetch":"^2.6.9",uuid:"^9.0.1"}}});var m1I=z((b8$)=>{Object.defineProperty(b8$,"__esModule",{value:!0});b8$.pkg=void 0;b8$.pkg=g1I()});var V1A=z((hq)=>{var Du0=hq&&hq.__importDefault||function(H){return H&&H.__esModule?H:{default:H}},p1I;Object.defineProperty(hq,"__esModule",{value:!0});hq.GaxiosError=hq.GAXIOS_ERROR_SYMBOL=void 0;hq.defaultErrorRedactor=c1I;var Bu0=require("url"),Q1A=m1I(),d1I=Du0(K1A());hq.GAXIOS_ERROR_SYMBOL=Symbol.for(`${Q1A.pkg.name}-gaxios-error`);class W1A extends Error{static[(p1I=hq.GAXIOS_ERROR_SYMBOL,Symbol.hasInstance)](H){if(H&&typeof H==="object"&&hq.GAXIOS_ERROR_SYMBOL in H&&H[hq.GAXIOS_ERROR_SYMBOL]===Q1A.pkg.version)return!0;return Function.prototype[Symbol.hasInstance].call(W1A,H)}constructor(H,$,A,L){var I;super(H);if(this.config=$,this.response=A,this.error=L,this[p1I]=Q1A.pkg.version,this.config=(0,d1I.default)(!0,{},$),this.response)this.response.config=(0,d1I.default)(!0,{},this.response.config);if(this.response){try{this.response.data=fu0(this.config.responseType,(I=this.response)===null||I===void 0?void 0:I.data)}catch(D){}this.status=this.response.status}if(L&&"code"in L&&L.code)this.code=L.code;if($.errorRedactor)$.errorRedactor({config:this.config,response:this.response})}}hq.GaxiosError=W1A;function fu0(H,$){switch(H){case"stream":return $;case"json":return JSON.parse(JSON.stringify($));case"arraybuffer":return JSON.parse(Buffer.from($).toString("utf8"));case"blob":return JSON.parse($.text());default:return $}}function c1I(H){function A(D){if(!D)return;for(let B of Object.keys(D)){if(/^authentication$/i.test(B))D[B]="<<REDACTED> - See `errorRedactor` option in `gaxios` for configuration>.";if(/^authorization$/i.test(B))D[B]="<<REDACTED> - See `errorRedactor` option in `gaxios` for configuration>.";if(/secret/i.test(B))D[B]="<<REDACTED> - See `errorRedactor` option in `gaxios` for configuration>."}}function L(D,B){if(typeof D==="object"&&D!==null&&typeof D[B]==="string"){let f=D[B];if(/grant_type=/i.test(f)||/assertion=/i.test(f)||/secret/i.test(f))D[B]="<<REDACTED> - See `errorRedactor` option in `gaxios` for configuration>."}}function I(D){if(typeof D==="object"&&D!==null){if("grant_type"in D)D.grant_type="<<REDACTED> - See `errorRedactor` option in `gaxios` for configuration>.";if("assertion"in D)D.assertion="<<REDACTED> - See `errorRedactor` option in `gaxios` for configuration>.";if("client_secret"in D)D.client_secret="<<REDACTED> - See `errorRedactor` option in `gaxios` for configuration>."}}if(H.config){A(H.config.headers),L(H.config,"data"),I(H.config.data),L(H.config,"body"),I(H.config.body);try{let D=new Bu0.URL("",H.config.url);if(D.searchParams.has("token"))D.searchParams.set("token","<<REDACTED> - See `errorRedactor` option in `gaxios` for configuration>.");if(D.searchParams.has("client_secret"))D.searchParams.set("client_secret","<<REDACTED> - See `errorRedactor` option in `gaxios` for configuration>.");H.config.url=D.toString()}catch(D){}}if(H.response)c1I({config:H.response.config}),A(H.response.headers),L(H.response,"data"),I(H.response.data);return H}});var i1I=z((P1A)=>{Object.defineProperty(P1A,"__esModule",{value:!0});P1A.getRetryConfig=Eu0;async function Eu0(H){let $=l1I(H);if(!H||!H.config||!$&&!H.config.retry)return{shouldRetry:!1};$=$||{},$.currentRetryAttempt=$.currentRetryAttempt||0,$.retry=$.retry===void 0||$.retry===null?3:$.retry,$.httpMethodsToRetry=$.httpMethodsToRetry||["GET","HEAD","PUT","OPTIONS","DELETE"],$.noResponseRetries=$.noResponseRetries===void 0||$.noResponseRetries===null?2:$.noResponseRetries,$.retryDelayMultiplier=$.retryDelayMultiplier?$.retryDelayMultiplier:2,$.timeOfFirstRequest=$.timeOfFirstRequest?$.timeOfFirstRequest:Date.now(),$.totalTimeout=$.totalTimeout?$.totalTimeout:Number.MAX_SAFE_INTEGER,$.maxRetryDelay=$.maxRetryDelay?$.maxRetryDelay:Number.MAX_SAFE_INTEGER;let A=[[100,199],[408,408],[429,429],[500,599]];if($.statusCodesToRetry=$.statusCodesToRetry||A,H.config.retryConfig=$,!await($.shouldRetry||Mu0)(H))return{shouldRetry:!1,config:H.config};let I=Gu0($);H.config.retryConfig.currentRetryAttempt+=1;let D=$.retryBackoff?$.retryBackoff(H,I):new Promise((B)=>{setTimeout(B,I)});if($.onRetryAttempt)$.onRetryAttempt(H);return await D,{shouldRetry:!0,config:H.config}}function Mu0(H){var $;let A=l1I(H);if(H.name==="AbortError"||(($=H.error)===null||$===void 0?void 0:$.name)==="AbortError")return!1;if(!A||A.retry===0)return!1;if(!H.response&&(A.currentRetryAttempt||0)>=A.noResponseRetries)return!1;if(!H.config.method||A.httpMethodsToRetry.indexOf(H.config.method.toUpperCase())<0)return!1;if(H.response&&H.response.status){let L=!1;for(let[I,D]of A.statusCodesToRetry){let B=H.response.status;if(B>=I&&B<=D){L=!0;break}}if(!L)return!1}if(A.currentRetryAttempt=A.currentRetryAttempt||0,A.currentRetryAttempt>=A.retry)return!1;return!0}function l1I(H){if(H&&H.config&&H.config.retryConfig)return H.config.retryConfig;return}function Gu0(H){var $;let L=(H.currentRetryAttempt?0:($=H.retryDelay)!==null&&$!==void 0?$:100)+(Math.pow(H.retryDelayMultiplier,H.currentRetryAttempt)-1)/2*1000,I=H.totalTimeout-(Date.now()-H.timeOfFirstRequest);return Math.min(L,I,H.maxRetryDelay)}});var C1A=z((_1A)=>{Object.defineProperty(_1A,"__esModule",{value:!0});_1A.default=Ju0;var Uu0=Xu0(require("crypto"));function Xu0(H){return H&&H.__esModule?H:{default:H}}var u8$=new Uint8Array(256),k8$=u8$.length;function Ju0(){if(k8$>u8$.length-16)Uu0.default.randomFillSync(u8$),k8$=0;return u8$.slice(k8$,k8$+=16)}});var n1I=z((g8$)=>{Object.defineProperty(g8$,"__esModule",{value:!0});g8$.default=void 0;var Fu0=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;g8$.default=Fu0});var KNH=z((m8$)=>{Object.defineProperty(m8$,"__esModule",{value:!0});m8$.default=void 0;var Ku0=Qu0(n1I());function Qu0(H){return H&&H.__esModule?H:{default:H}}function Wu0(H){return typeof H==="string"&&Ku0.default.test(H)}var Vu0=Wu0;m8$.default=Vu0});var WNH=z((QNH)=>{Object.defineProperty(QNH,"__esModule",{value:!0});QNH.default=void 0;QNH.unsafeStringify=r1I;var Pu0=_u0(KNH());function _u0(H){return H&&H.__esModule?H:{default:H}}var tW=[];for(let H=0;H<256;++H)tW.push((H+256).toString(16).slice(1));function r1I(H,$=0){return tW[H[$+0]]+tW[H[$+1]]+tW[H[$+2]]+tW[H[$+3]]+"-"+tW[H[$+4]]+tW[H[$+5]]+"-"+tW[H[$+6]]+tW[H[$+7]]+"-"+tW[H[$+8]]+tW[H[$+9]]+"-"+tW[H[$+10]]+tW[H[$+11]]+tW[H[$+12]]+tW[H[$+13]]+tW[H[$+14]]+tW[H[$+15]]}function Cu0(H,$=0){let A=r1I(H,$);if(!(0,Pu0.default)(A))throw TypeError("Stringified UUID is invalid");return A}var Yu0=Cu0;QNH.default=Yu0});var o1I=z((p8$)=>{Object.defineProperty(p8$,"__esModule",{value:!0});p8$.default=void 0;var wu0=qu0(C1A()),Zu0=WNH();function qu0(H){return H&&H.__esModule?H:{default:H}}var a1I,Y1A,w1A=0,Z1A=0;function Tu0(H,$,A){let L=$&&A||0,I=$||Array(16);H=H||{};let D=H.node||a1I,B=H.clockseq!==void 0?H.clockseq:Y1A;if(D==null||B==null){let X=H.random||(H.rng||wu0.default)();if(D==null)D=a1I=[X[0]|1,X[1],X[2],X[3],X[4],X[5]];if(B==null)B=Y1A=(X[6]<<8|X[7])&16383}let f=H.msecs!==void 0?H.msecs:Date.now(),E=H.nsecs!==void 0?H.nsecs:Z1A+1,M=f-w1A+(E-Z1A)/1e4;if(M<0&&H.clockseq===void 0)B=B+1&16383;if((M<0||f>w1A)&&H.nsecs===void 0)E=0;if(E>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");w1A=f,Z1A=E,Y1A=B,f+=12219292800000;let G=((f&268435455)*1e4+E)%4294967296;I[L++]=G>>>24&255,I[L++]=G>>>16&255,I[L++]=G>>>8&255,I[L++]=G&255;let U=f/4294967296*1e4&268435455;I[L++]=U>>>8&255,I[L++]=U&255,I[L++]=U>>>24&15|16,I[L++]=U>>>16&255,I[L++]=B>>>8|128,I[L++]=B&255;for(let X=0;X<6;++X)I[L+X]=D[X];return $||(0,Zu0.unsafeStringify)(I)}var zu0=Tu0;p8$.default=zu0});var q1A=z((d8$)=>{Object.defineProperty(d8$,"__esModule",{value:!0});d8$.default=void 0;var Nu0=Ou0(KNH());function Ou0(H){return H&&H.__esModule?H:{default:H}}function xu0(H){if(!(0,Nu0.default)(H))throw TypeError("Invalid UUID");let $,A=new Uint8Array(16);return A[0]=($=parseInt(H.slice(0,8),16))>>>24,A[1]=$>>>16&255,A[2]=$>>>8&255,A[3]=$&255,A[4]=($=parseInt(H.slice(9,13),16))>>>8,A[5]=$&255,A[6]=($=parseInt(H.slice(14,18),16))>>>8,A[7]=$&255,A[8]=($=parseInt(H.slice(19,23),16))>>>8,A[9]=$&255,A[10]=($=parseInt(H.slice(24,36),16))/1099511627776&255,A[11]=$/4294967296&255,A[12]=$>>>24&255,A[13]=$>>>16&255,A[14]=$>>>8&255,A[15]=$&255,A}var Su0=xu0;d8$.default=Su0});var T1A=z((PLH)=>{Object.defineProperty(PLH,"__esModule",{value:!0});PLH.URL=PLH.DNS=void 0;PLH.default=hu0;var ju0=WNH(),Ru0=yu0(q1A());function yu0(H){return H&&H.__esModule?H:{default:H}}function vu0(H){H=unescape(encodeURIComponent(H));let $=[];for(let A=0;A<H.length;++A)$.push(H.charCodeAt(A));return $}var t1I="6ba7b810-9dad-11d1-80b4-00c04fd430c8";PLH.DNS=t1I;var s1I="6ba7b811-9dad-11d1-80b4-00c04fd430c8";PLH.URL=s1I;function hu0(H,$,A){function L(I,D,B,f){var E;if(typeof I==="string")I=vu0(I);if(typeof D==="string")D=(0,Ru0.default)(D);if(((E=D)===null||E===void 0?void 0:E.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let M=new Uint8Array(16+I.length);if(M.set(D),M.set(I,D.length),M=A(M),M[6]=M[6]&15|$,M[8]=M[8]&63|128,B){f=f||0;for(let G=0;G<16;++G)B[f+G]=M[G];return B}return(0,ju0.unsafeStringify)(M)}try{L.name=H}catch(I){}return L.DNS=t1I,L.URL=s1I,L}});var e1I=z((c8$)=>{Object.defineProperty(c8$,"__esModule",{value:!0});c8$.default=void 0;var bu0=ku0(require("crypto"));function ku0(H){return H&&H.__esModule?H:{default:H}}function uu0(H){if(Array.isArray(H))H=Buffer.from(H);else if(typeof H==="string")H=Buffer.from(H,"utf8");return bu0.default.createHash("md5").update(H).digest()}var gu0=uu0;c8$.default=gu0});var $8I=z((l8$)=>{Object.defineProperty(l8$,"__esModule",{value:!0});l8$.default=void 0;var mu0=H8I(T1A()),pu0=H8I(e1I());function H8I(H){return H&&H.__esModule?H:{default:H}}var du0=(0,mu0.default)("v3",48,pu0.default),cu0=du0;l8$.default=cu0});var A8I=z((i8$)=>{Object.defineProperty(i8$,"__esModule",{value:!0});i8$.default=void 0;var lu0=iu0(require("crypto"));function iu0(H){return H&&H.__esModule?H:{default:H}}var nu0={randomUUID:lu0.default.randomUUID};i8$.default=nu0});var D8I=z((n8$)=>{Object.defineProperty(n8$,"__esModule",{value:!0});n8$.default=void 0;var L8I=I8I(A8I()),ru0=I8I(C1A()),au0=WNH();function I8I(H){return H&&H.__esModule?H:{default:H}}function ou0(H,$,A){if(L8I.default.randomUUID&&!$&&!H)return L8I.default.randomUUID();H=H||{};let L=H.random||(H.rng||ru0.default)();if(L[6]=L[6]&15|64,L[8]=L[8]&63|128,$){A=A||0;for(let I=0;I<16;++I)$[A+I]=L[I];return $}return(0,au0.unsafeStringify)(L)}var tu0=ou0;n8$.default=tu0});var B8I=z((r8$)=>{Object.defineProperty(r8$,"__esModule",{value:!0});r8$.default=void 0;var su0=eu0(require("crypto"));function eu0(H){return H&&H.__esModule?H:{default:H}}function Hg0(H){if(Array.isArray(H))H=Buffer.from(H);else if(typeof H==="string")H=Buffer.from(H,"utf8");return su0.default.createHash("sha1").update(H).digest()}var $g0=Hg0;r8$.default=$g0});var E8I=z((a8$)=>{Object.defineProperty(a8$,"__esModule",{value:!0});a8$.default=void 0;var Ag0=f8I(T1A()),Lg0=f8I(B8I());function f8I(H){return H&&H.__esModule?H:{default:H}}var Ig0=(0,Ag0.default)("v5",80,Lg0.default),Dg0=Ig0;a8$.default=Dg0});var M8I=z((o8$)=>{Object.defineProperty(o8$,"__esModule",{value:!0});o8$.default=void 0;var Bg0="00000000-0000-0000-0000-000000000000";o8$.default=Bg0});var G8I=z((t8$)=>{Object.defineProperty(t8$,"__esModule",{value:!0});t8$.default=void 0;var fg0=Eg0(KNH());function Eg0(H){return H&&H.__esModule?H:{default:H}}function Mg0(H){if(!(0,fg0.default)(H))throw TypeError("Invalid UUID");return parseInt(H.slice(14,15),16)}var Gg0=Mg0;t8$.default=Gg0});var U8I=z((wO)=>{Object.defineProperty(wO,"__esModule",{value:!0});Object.defineProperty(wO,"NIL",{enumerable:!0,get:function(){return Kg0.default}});Object.defineProperty(wO,"parse",{enumerable:!0,get:function(){return Pg0.default}});Object.defineProperty(wO,"stringify",{enumerable:!0,get:function(){return Vg0.default}});Object.defineProperty(wO,"v1",{enumerable:!0,get:function(){return Ug0.default}});Object.defineProperty(wO,"v3",{enumerable:!0,get:function(){return Xg0.default}});Object.defineProperty(wO,"v4",{enumerable:!0,get:function(){return Jg0.default}});Object.defineProperty(wO,"v5",{enumerable:!0,get:function(){return Fg0.default}});Object.defineProperty(wO,"validate",{enumerable:!0,get:function(){return Wg0.default}});Object.defineProperty(wO,"version",{enumerable:!0,get:function(){return Qg0.default}});var Ug0=mu(o1I()),Xg0=mu($8I()),Jg0=mu(D8I()),Fg0=mu(E8I()),Kg0=mu(M8I()),Qg0=mu(G8I()),Wg0=mu(KNH()),Vg0=mu(WNH()),Pg0=mu(q1A());function mu(H){return H&&H.__esModule?H:{default:H}}});var z1A=z((s8$)=>{Object.defineProperty(s8$,"__esModule",{value:!0});s8$.GaxiosInterceptorManager=void 0;class X8I extends Set{}s8$.GaxiosInterceptorManager=X8I});var w8I=z((m6)=>{var _g0=m6&&m6.__createBinding||(Object.create?function(H,$,A,L){if(L===void 0)L=A;var I=Object.getOwnPropertyDescriptor($,A);if(!I||("get"in I?!$.__esModule:I.writable||I.configurable))I={enumerable:!0,get:function(){return $[A]}};Object.defineProperty(H,L,I)}:function(H,$,A,L){if(L===void 0)L=A;H[L]=$[A]}),Cg0=m6&&m6.__setModuleDefault||(Object.create?function(H,$){Object.defineProperty(H,"default",{enumerable:!0,value:$})}:function(H,$){H.default=$}),Yg0=m6&&m6.__importStar||function(H){if(H&&H.__esModule)return H;var $={};if(H!=null){for(var A in H)if(A!=="default"&&Object.prototype.hasOwnProperty.call(H,A))_g0($,H,A)}return Cg0($,H),$},CLH=m6&&m6.__classPrivateFieldGet||function(H,$,A,L){if(A==="a"&&!L)throw TypeError("Private accessor was defined without a getter");if(typeof $==="function"?H!==$||!L:!$.has(H))throw TypeError("Cannot read private member from an object whose class did not declare it");return A==="m"?L:A==="a"?L.call(H):L?L.value:$.get(H)},wg0=m6&&m6.__classPrivateFieldSet||function(H,$,A,L,I){if(L==="m")throw TypeError("Private method is not writable");if(L==="a"&&!I)throw TypeError("Private accessor was defined without a setter");if(typeof $==="function"?H!==$||!I:!$.has(H))throw TypeError("Cannot write private member to an object whose class did not declare it");return L==="a"?I.call(H,A):I?I.value=A:$.set(H,A),A},$f$=m6&&m6.__importDefault||function(H){return H&&H.__esModule?H:{default:H}},n5H,_LH,J8I,P8I,_8I,C8I,e8$,F8I;Object.defineProperty(m6,"__esModule",{value:!0});m6.Gaxios=void 0;var Zg0=$f$(K1A()),qg0=require("https"),Tg0=$f$(require("node-fetch")),zg0=$f$(require("querystring")),Ng0=$f$(u1I()),K8I=require("url"),Hf$=V1A(),Og0=i1I(),Q8I=require("stream"),xg0=U8I(),W8I=z1A(),Sg0=Rg0()?window.fetch:Tg0.default;function jg0(){return typeof window<"u"&&!!window}function Rg0(){return jg0()&&!!window.fetch}function yg0(){return typeof Buffer<"u"}function V8I(H,$){return!!Y8I(H,$)}function Y8I(H,$){$=$.toLowerCase();for(let A of Object.keys((H===null||H===void 0?void 0:H.headers)||{}))if($===A.toLowerCase())return H.headers[A];return}class N1A{constructor(H){n5H.add(this),this.agentCache=new Map,this.defaults=H||{},this.interceptors={request:new W8I.GaxiosInterceptorManager,response:new W8I.GaxiosInterceptorManager}}async request(H={}){return H=await CLH(this,n5H,"m",C8I).call(this,H),H=await CLH(this,n5H,"m",P8I).call(this,H),CLH(this,n5H,"m",_8I).call(this,this._request(H))}async _defaultAdapter(H){let A=await(H.fetchImplementation||Sg0)(H.url,H),L=await this.getResponseData(H,A);return this.translateResponse(H,A,L)}async _request(H={}){var $;try{let A;if(H.adapter)A=await H.adapter(H,this._defaultAdapter.bind(this));else A=await this._defaultAdapter(H);if(!H.validateStatus(A.status)){if(H.responseType==="stream"){let L="";await new Promise((I)=>{(A===null||A===void 0?void 0:A.data).on("data",(D)=>{L+=D}),(A===null||A===void 0?void 0:A.data).on("end",I)}),A.data=L}throw new Hf$.GaxiosError(`Request failed with status code ${A.status}`,H,A)}return A}catch(A){let L=A instanceof Hf$.GaxiosError?A:new Hf$.GaxiosError(A.message,H,void 0,A),{shouldRetry:I,config:D}=await(0,Og0.getRetryConfig)(L);if(I&&D)return L.config.retryConfig.currentRetryAttempt=D.retryConfig.currentRetryAttempt,H.retryConfig=($=L.config)===null||$===void 0?void 0:$.retryConfig,this._request(H);throw L}}async getResponseData(H,$){switch(H.responseType){case"stream":return $.body;case"json":{let A=await $.text();try{A=JSON.parse(A)}catch(L){}return A}case"arraybuffer":return $.arrayBuffer();case"blob":return $.blob();case"text":return $.text();default:return this.getResponseDataFromContentType($)}}validateStatus(H){return H>=200&&H<300}paramsSerializer(H){return zg0.default.stringify(H)}translateResponse(H,$,A){let L={};return $.headers.forEach((I,D)=>{L[D]=I}),{config:H,data:A,headers:L,status:$.status,statusText:$.statusText,request:{responseURL:$.url}}}async getResponseDataFromContentType(H){let $=H.headers.get("Content-Type");if($===null)return H.text();if($=$.toLowerCase(),$.includes("application/json")){let A=await H.text();try{A=JSON.parse(A)}catch(L){}return A}else if($.match(/^text\//))return H.text();else return H.blob()}async*getMultipartRequest(H,$){let A=`--${$}--`;for(let L of H){let I=L.headers["Content-Type"]||"application/octet-stream";if(yield`--${$}\r
${Zl.toHex(D)}`}getCanonicalPath({path:H}){if(this.uriEscapePath){let $=[];for(let I of H.split("/")){if(I?.length===0)continue;if(I===".")continue;if(I==="..")$.pop();else $.push(I)}let A=`${H?.startsWith("/")?"/":""}${$.join("/")}${$.length>0&&H?.endsWith("/")?"/":""}`;return IH$.escapeUri(A).replace(/%2F/g,"/")}return H}validateResolvedCredentials(H){if(typeof H!=="object"||typeof H.accessKeyId!=="string"||typeof H.secretAccessKey!=="string")throw Error("Resolved credential object is not valid")}formatDate(H){let $=ceB(H).replace(/[\-:]/g,"");return{longDate:$,shortDate:$.slice(0,8)}}getCanonicalHeaderList(H){return Object.keys(H).sort().join(";")}}class fGL extends Gl${headerFormatter=new LGL;constructor({applyChecksum:H,credentials:$,region:A,service:L,sha256:I,uriEscapePath:D=!0}){super({applyChecksum:H,credentials:$,region:A,service:L,sha256:I,uriEscapePath:D})}async presign(H,$={}){let{signingDate:A=new Date,expiresIn:L=3600,unsignableHeaders:I,unhoistableHeaders:D,signableHeaders:B,hoistableHeaders:f,signingRegion:E,signingService:M}=$,G=await this.credentialProvider();this.validateResolvedCredentials(G);let U=E??await this.regionProvider(),{longDate:X,shortDate:J}=this.formatDate(A);if(L>$GL)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let F=fH$(J,U,M??this.service),Q=DGL(Al$(H),{unhoistableHeaders:D,hoistableHeaders:f});if(G.sessionToken)Q.query[Dl$]=G.sessionToken;Q.query[mML]=DH$,Q.query[pML]=`${G.accessKeyId}/${F}`,Q.query[Ll$]=X,Q.query[cML]=L.toString(10);let W=$l$(Q,I,B);return Q.query[dML]=this.getCanonicalHeaderList(W),Q.query[Il$]=await this.getSignature(X,F,this.getSigningKey(G,U,J,M),this.createCanonicalRequest(Q,W,await EH$(H,this.sha256))),Q}async sign(H,$){if(typeof H==="string")return this.signString(H,$);else if(H.headers&&H.payload)return this.signEvent(H,$);else if(H.message)return this.signMessage(H,$);else return this.signRequest(H,$)}async signEvent({headers:H,payload:$},{signingDate:A=new Date,priorSignature:L,signingRegion:I,signingService:D}){let B=I??await this.regionProvider(),{shortDate:f,longDate:E}=this.formatDate(A),M=fH$(f,B,D??this.service),G=await EH$({headers:{},body:$},this.sha256),U=new this.sha256;U.update(H);let X=Zl.toHex(await U.digest()),J=[sML,E,M,L,X,G].join(`
`)[0]??null;return wd.createElement(x,{flexDirection:"column"},wd.createElement(x,{borderDimColor:!0,borderColor:"subtle",borderStyle:"dashed",flexDirection:"column",borderLeft:!1,borderRight:!1},Bz(D.map((f)=>wd.createElement(eC,{key:f.newStart,patch:f,dim:!1,filePath:H,firstLine:B,fileContent:L,width:A})),(f)=>wd.createElement(V,{dimColor:!0,key:`ellipsis-${f}`},"..."))))}var wd,rz$;var XkA=K(()=>{Yt();xH();yg();lD();DL();sDH();zB();wd=h(t(),1),rz$=h(t(),1)});function uX(H){c("tengu_unary_event",{event:H.event,completion_type:H.completion_type,language_name:H.metadata.language_name,message_id:H.metadata.message_id,platform:H.metadata.platform,...H.metadata.hasFeedback!==void 0&&{hasFeedback:H.metadata.hasFeedback}})}var A8H=K(()=>{z$()});function Rz(H,$){let A=RI();ptD.useEffect(()=>{A((I)=>({...I,attribution:{...I.attribution,permissionPromptCount:I.attribution.permissionPromptCount+1}})),c("tengu_tool_use_show_permission_request",{messageID:H.assistantMessage.message.id,toolName:iB(H.tool.name),isMcp:H.tool.isMcp??!1,decisionReasonType:H.permissionResult.decisionReason?.type,sandboxEnabled:kL.isSandboxingEnabled()}),Promise.resolve($.language_name).then((I)=>{uX({completion_type:$.completion_type,event:"response",metadata:{language_name:I,message_id:H.assistantMessage.message.id,platform:OA.platform}})})},[H,$,A])}var ptD;var L8H=K(()=>{z$();x4();TP();TQ();P5();Y1();A8H();zM();Z$();pL();ptD=h(t(),1)});function EZ1(H){let $=OD(H),A=OD(`${zL()}/.claude`),L=_Y($),I=_Y(A);return L.startsWith(I+YpH.sep.toLowerCase())||L.startsWith(I+"/")}function MZ1(H){let $=OD(H),A=`${dtD.homedir()}/.claude`,L=_Y($),I=_Y(A);return L.startsWith(I+YpH.sep.toLowerCase())||L.startsWith(I+"/")}function ctD({filePath:H,toolPermissionContext:$,operationType:A="write",onRejectFeedbackChange:L,onAcceptFeedbackChange:I,yesInputMode:D=!1,noInputMode:B=!1}){let f=[],E=WQ("chat:cycleMode","Chat","shift+tab");if(D&&I)f.push({type:"input",label:"Yes",value:"yes",placeholder:"and tell Claude what to do next",onChange:I,allowEmptySubmitToCancel:!0,option:{type:"accept-once"}});else f.push({label:"Yes",value:"yes",option:{type:"accept-once"}});let M=YS(H,$),G=EZ1(H),U=MZ1(H);if((G||U)&&A!=="read")f.push({label:"Yes, and allow Claude to edit its own settings for this session",value:"yes-claude-folder",option:{type:"accept-session",scope:U?"global-claude-folder":"claude-folder"}});else{let X;if(M)if(A==="read")X="Yes, during this session";else X=He.default.createElement(V,null,"Yes, allow all edits during this session"," ",He.default.createElement(V,{bold:!0},"(",E,")"));else{let J=Qk(H),F=YpH.basename(J)||"this directory";if(A==="read")X=He.default.createElement(V,null,"Yes, allow reading from ",He.default.createElement(V,{bold:!0},F,"/")," during this session");else X=He.default.createElement(V,null,"Yes, allow all edits in ",He.default.createElement(V,{bold:!0},F,"/")," during this session ",He.default.createElement(V,{bold:!0},"(",E,")"))}f.push({label:X,value:"yes-session",option:{type:"accept-session"}})}if(B&&L)f.push({type:"input",label:"No",value:"no",placeholder:"and tell Claude what to do differently",onChange:L,allowEmptySubmitToCancel:!0,option:{type:"reject"}});else f.push({label:"No",value:"no",option:{type:"reject"}});return f}var He,YpH,dtD;var ltD=K(()=>{xH();AM();XG();CM();p$();He=h(t(),1),YpH=require("path"),dtD=require("os")});function JkA(H,$,A,L,I){uX({completion_type:$,event:H,metadata:{language_name:A,message_id:L,platform:OA.platform,hasFeedback:I??!1}})}function GZ1(H,$){let{messageId:A,toolUseConfirm:L,onDone:I,completionType:D,languageName:B}=H;JkA("accept",D,B,A),c("tengu_accept_submitted",{toolName:iB(L.tool.name),isMcp:L.tool.isMcp??!1,has_instructions:!!$?.feedback,instructions_length:$?.feedback?.length??0,entered_feedback_mode:$?.enteredFeedbackMode??!1}),I(),L.onAllow(L.input,[],$?.feedback)}function UZ1(H,$){let{messageId:A,path:L,toolUseConfirm:I,toolPermissionContext:D,onDone:B,completionType:f,languageName:E,operationType:M}=H;if(JkA("accept",f,E,A),$?.scope==="claude-folder"||$?.scope==="global-claude-folder"){let U=$.scope==="global-claude-folder"?a0$:r0$,X=[{type:"addRules",rules:[{toolName:ZB,ruleContent:U}],behavior:"allow",destination:"session"}];B(),I.onAllow(I.input,X);return}let G=L?qz$(L,M,D):[];B(),I.onAllow(I.input,G)}function XZ1(H,$){let{messageId:A,toolUseConfirm:L,onDone:I,onReject:D,completionType:B,languageName:f}=H;JkA("reject",B,f,A,$?.hasFeedback),c("tengu_reject_submitted",{toolName:iB(L.tool.name),isMcp:L.tool.isMcp??!1,has_instructions:!!$?.feedback,instructions_length:$?.feedback?.length??0,entered_feedback_mode:$?.enteredFeedbackMode??!1}),I(),D(),L.onReject($?.feedback)}var itD;var ntD=K(()=>{A8H();Y1();AM();z$();x4();itD={"accept-once":GZ1,"accept-session":UZ1,reject:XZ1}});function rtD({filePath:H,completionType:$,languageName:A,toolUseConfirm:L,onDone:I,onReject:D,parseInput:B,operationType:f="write"}){let E=W$((p)=>p.toolPermissionContext),[M,G]=rP.useState(""),[U,X]=rP.useState(""),[J,F]=rP.useState("yes"),[Q,W]=rP.useState(!1),[P,Y]=rP.useState(!1),[C,Z]=rP.useState(!1),[q,O]=rP.useState(!1),j=rP.useMemo(()=>ctD({filePath:H,toolPermissionContext:E,operationType:f,onRejectFeedbackChange:X,onAcceptFeedbackChange:G,yesInputMode:Q,noInputMode:P}),[H,E,f,Q,P]),u=rP.useCallback((p,d,k)=>{let n={messageId:L.assistantMessage.message.id,path:H,toolUseConfirm:L,toolPermissionContext:E,onDone:I,onReject:D,completionType:$,languageName:A,operationType:f},GH=L.onAllow;L.onAllow=(BH,VH,wH)=>{GH(d,VH,wH)};let e=itD[p.type];e(n,{feedback:k,hasFeedback:!!k,enteredFeedbackMode:p.type==="accept-once"?C:q,scope:p.type==="accept-session"?p.scope:void 0})},[H,$,A,L,E,I,D,f,C,q]),y=rP.useCallback(()=>{let p=j.find((d)=>d.option.type==="accept-session");if(p){let d=B(L.input);u(p.option,d)}},[j,B,L.input,u]);rI({"confirm:cycleMode":y},{context:"Confirmation"});let g=rP.useCallback((p)=>{if(p!=="yes"&&Q&&!M.trim())W(!1);if(p!=="no"&&P&&!U.trim())Y(!1);F(p)},[Q,P,M,U]),v=rP.useCallback((p)=>{let d={toolName:iB(L.tool.name),isMcp:L.tool.isMcp??!1};if(p==="yes")if(Q)W(!1),c("tengu_accept_feedback_mode_collapsed",d);else W(!0),Z(!0),c("tengu_accept_feedback_mode_entered",d);else if(p==="no")if(P)Y(!1),c("tengu_reject_feedback_mode_collapsed",d);else Y(!0),O(!0),c("tengu_reject_feedback_mode_entered",d)},[Q,P,L]);return{options:j,onChange:u,acceptFeedback:M,rejectFeedback:U,focusedOption:J,setFocusedOption:g,handleInputModeToggle:v,yesInputMode:Q,noInputMode:P}}var rP;var atD=K(()=>{LI();ltD();ntD();pL();z$();x4();rP=h(t(),1)});function stD({onChange:H,toolUseContext:$,filePath:A,edits:L,editMode:I}){let D=Zd.useRef(!1),[B,f]=Zd.useState(!1),E=Zd.useMemo(()=>otD.randomUUID().slice(0,6),[]),M=Zd.useMemo(()=>`\u273B [Claude Code] ${ttD.basename(A)} (${E}) \u29C9`,[A,E]),G=o5$($.options.mcpClients)&&M$().diffTool==="auto"&&!A.endsWith(".ipynb"),U=t5$($.options.mcpClients)??"IDE";async function X(){if(!G)return;try{c("tengu_ext_will_show_diff",{});let{oldContent:J,newContent:F}=await FZ1(A,L,$,M);if(D.current)return;c("tengu_ext_diff_accepted",{});let Q=JZ1(A,J,F,I);if(Q.length===0){c("tengu_ext_diff_rejected",{});let W=QC($.options.mcpClients);if(W)await FkA(M,W);H({type:"reject"},{file_path:A,edits:L});return}H({type:"accept-once"},{file_path:A,edits:Q})}catch(J){r(J),f(!0)}}return Zd.useEffect(()=>{return X(),()=>{D.current=!0}},[]),{closeTabInIDE(){let J=QC($.options.mcpClients);if(!J)return Promise.resolve();return FkA(M,J)},showingDiffInIDE:G&&!B,ideName:U,hasError:B}}function JZ1(H,$,A,L){let I=L==="single",D=D_I({filePath:H,oldContent:$,newContent:A,singleHunk:I});if(D.length===0)return[];if(I&&D.length>1)r(Error(`Unexpected number of hunks: ${D.length}. Expected 1 hunk.`));return OjI(D)}async function FZ1(H,$,A,L){let I=!1,D=zH(),B=OD(H),f=D.existsSync(B)?sX(B):"";async function E(){if(I)return;I=!0;try{await FkA(L,M)}catch(G){r(G)}process.off("beforeExit",E),A.abortController.signal.removeEventListener("abort",E)}A.abortController.signal.addEventListener("abort",E),process.on("beforeExit",E);let M=QC(A.options.mcpClients);try{let{updatedFile:G}=gRH({filePath:B,fileContents:f,edits:$});if(!M||M.type!=="connected")throw Error("IDE client not available");let U=B,X=M.config.ideRunningInWindows===!0;if(oA()==="wsl"&&X&&process.env.WSL_DISTRO_NAME)U=new mFH(process.env.WSL_DISTRO_NAME).toIDEPath(B);let J=await Gx("openDiff",{old_file_path:U,new_file_path:U,new_file_contents:G,tab_name:L},M),F=Array.isArray(J)?J:[J];if(WZ1(F))return E(),{oldContent:f,newContent:F[1].text};else if(KZ1(F))return E(),{oldContent:f,newContent:G};else if(QZ1(F))return E(),{oldContent:f,newContent:f};throw Error("Not accepted")}catch(G){throw r(G),E(),G}}async function FkA(H,$){try{if(!$||$.type!=="connected")throw Error("IDE client not available");await Gx("close_tab",{tab_name:H},$)}catch(A){r(A)}}function KZ1(H){return Array.isArray(H)&&typeof H[0]==="object"&&H[0]!==null&&"type"in H[0]&&H[0].type==="text"&&"text"in H[0]&&H[0].text==="TAB_CLOSED"}function QZ1(H){return Array.isArray(H)&&typeof H[0]==="object"&&H[0]!==null&&"type"in H[0]&&H[0].type==="text"&&"text"in H[0]&&H[0].text==="DIFF_REJECTED"}function WZ1(H){return Array.isArray(H)&&H[0]?.type==="text"&&H[0].text==="FILE_SAVED"&&typeof H[1].text==="string"}var otD,ttD,Zd;var etD=K(()=>{DL();sDH();yg();_$();vA();lU();z$();lU();CM();vFA();C9();lD();otD=require("crypto"),ttD=require("path"),Zd=h(t(),1)});function HsD({onChange:H,options:$,input:A,filePath:L,ideName:I,symlinkTarget:D,rejectFeedback:B,acceptFeedback:f,setFocusedOption:E,onInputModeToggle:M,focusedOption:G,yesInputMode:U,noInputMode:X}){return DZ.default.createElement(x,{flexDirection:"column"},DZ.default.createElement(Gf,{dividerColor:"permission"}),DZ.default.createElement(x,{marginX:1,flexDirection:"column",gap:1},DZ.default.createElement(V,{bold:!0,color:"permission"},"Opened changes in ",I," \u29C9"),D&&DZ.default.createElement(V,{color:"warning"},oz$.relative(Y$(),D).startsWith("..")?`This will modify ${D} (outside working directory) via a symlink`:`Symlink target: ${D}`),wjH()&&DZ.default.createElement(V,{dimColor:!0},"Save file to continue\u2026"),DZ.default.createElement(x,{flexDirection:"column"},DZ.default.createElement(V,null,"Do you want to make this edit to"," ",DZ.default.createElement(V,{bold:!0},oz$.basename(L)),"?"),DZ.default.createElement(QA,{options:$,inlineDescriptions:!0,onChange:(J)=>{let F=$.find((Q)=>Q.value===J);if(F){if(F.option.type==="reject"){let Q=B.trim();H(F.option,A,Q||void 0);return}if(F.option.type==="accept-once"){let Q=f.trim();H(F.option,A,Q||void 0);return}H(F.option,A)}},onCancel:()=>H({type:"reject"},A),onFocus:(J)=>E(J),onInputModeToggle:M})),DZ.default.createElement(x,{marginTop:1},DZ.default.createElement(V,{dimColor:!0},"Esc to cancel",(G==="yes"&&!U||G==="no"&&!X)&&" \xB7 Tab to amend"))))}var DZ,oz$;var $sD=K(()=>{xH();p8();lU();s6();VI();DZ=h(t(),1),oz$=require("path")});function Pb({toolUseConfirm:H,toolUseContext:$,onDone:A,onReject:L,title:I,subtitle:D,question:B="Do you want to proceed?",content:f,completionType:E="tool_use_single",languageName:M="none",path:G,parseInput:U,operationType:X="write",ideDiffSupport:J,workerBadge:F}){let Q=KkA.useMemo(()=>({completion_type:E,language_name:M}),[E,M]);Rz(H,Q);let W=KkA.useMemo(()=>{if(!G||X==="read")return null;let VH=OD(G),wH=zH(),{resolvedPath:WH,isSymlink:qH}=zU(wH,VH);if(qH)return WH;return null},[G,X]),P=rtD({filePath:G||"",completionType:E,languageName:M,toolUseConfirm:H,onDone:A,onReject:L,parseInput:U,operationType:X}),{options:Y,acceptFeedback:C,rejectFeedback:Z,setFocusedOption:q,handleInputModeToggle:O,focusedOption:j,yesInputMode:u,noInputMode:y}=P,g=U(H.input),v=J?J.getConfig(g):null,p=v?{onChange:(VH,wH)=>{let WH=J.applyChanges(g,wH.edits);P.onChange(VH,WH)},toolUseContext:$,filePath:v.filePath,edits:(v.edits||[]).map((VH)=>({old_string:VH.old_string,new_string:VH.new_string,replace_all:VH.replace_all||!1})),editMode:v.editMode||"single"}:{onChange:()=>{},toolUseContext:$,filePath:"",edits:[],editMode:"single"},{closeTabInIDE:d,showingDiffInIDE:k,ideName:n}=stD(p),GH=(VH,wH)=>{d?.(),P.onChange(VH,g,wH?.trim())};if(k&&v&&G)return yz.default.createElement(HsD,{onChange:(VH,wH,WH)=>GH(VH,WH),options:Y,filePath:G,input:g,ideName:n,symlinkTarget:W,rejectFeedback:Z,acceptFeedback:C,setFocusedOption:q,onInputModeToggle:O,focusedOption:j,yesInputMode:u,noInputMode:y});let e=W!=null&&AsD.relative(Y$(),W).startsWith(".."),BH=W?yz.default.createElement(x,{paddingX:1,marginBottom:1},yz.default.createElement(V,{color:"warning"},e?`This will modify ${W} (outside working directory) via a symlink`:`Symlink target: ${W}`)):null;return yz.default.createElement(yz.default.Fragment,null,yz.default.createElement(CG,{title:I,subtitle:D,innerPaddingX:0,workerBadge:F},BH,f,yz.default.createElement(x,{flexDirection:"column",paddingX:1},typeof B==="string"?yz.default.createElement(V,null,B):B,yz.default.createElement(QA,{options:Y,inlineDescriptions:!0,onChange:(VH)=>{let wH=Y.find((WH)=>WH.value===VH);if(wH){if(wH.option.type==="reject"){let WH=Z.trim();GH(wH.option,WH||void 0);return}if(wH.option.type==="accept-once"){let WH=C.trim();GH(wH.option,WH||void 0);return}GH(wH.option)}},onCancel:()=>GH({type:"reject"}),onFocus:(VH)=>q(VH),onInputModeToggle:O}))),yz.default.createElement(x,{paddingX:1,marginTop:1},yz.default.createElement(V,{dimColor:!0},"Esc to cancel",(j==="yes"&&!u||j==="no"&&!y)&&" \xB7 Tab to amend")))}var AsD,yz,KkA;var wPH=K(()=>{xH();p8();Bw();L8H();atD();etD();$sD();DL();VI();CM();AsD=require("path"),yz=h(t(),1),KkA=h(t(),1)});function tz$(H,$,A,L){return{filePath:H,edits:[{old_string:$,new_string:A,replace_all:L}],editMode:"single"}}function DsD(H){let $=(f)=>{return q3.inputSchema.parse(f)},A=$(H.toolUseConfirm.input),{file_path:L,old_string:I,new_string:D,replace_all:B}=A;return wpH.default.createElement(Pb,{toolUseConfirm:H.toolUseConfirm,toolUseContext:H.toolUseContext,onDone:H.onDone,onReject:H.onReject,workerBadge:H.workerBadge,title:"Edit file",subtitle:IsD.relative(Y$(),L),question:wpH.default.createElement(V,null,"Do you want to make this edit to"," ",wpH.default.createElement(V,{bold:!0},LsD.basename(L)),"?"),content:wpH.default.createElement(az$,{file_path:L,edits:[{old_string:I,new_string:D,replace_all:B||!1}]}),path:L,completionType:"str_replace_single",languageName:rs(L),parseInput:$,ideDiffSupport:VZ1})}var LsD,wpH,IsD,VZ1;var BsD=K(()=>{xH();F9H();XkA();lD();wPH();VI();LsD=require("path"),wpH=h(t(),1),IsD=require("path"),VZ1={getConfig:(H)=>tz$(H.file_path,H.old_string,H.new_string,H.replace_all),applyChanges:(H,$)=>{let A=$[0];if(A)return{...H,old_string:A.old_string,new_string:A.new_string,replace_all:A.replace_all};return H}}});function $e(H,{assistantMessage:{message:{id:$}}},A,L){uX({completion_type:H,event:A,metadata:{language_name:"none",message_id:$,platform:OA.platform,hasFeedback:L??!1}})}var QkA=K(()=>{Y1();A8H()});function PZ1(H){switch(H.length){case 0:return"";case 1:return yG.default.createElement(V,{bold:!0},H[0]);case 2:return yG.default.createElement(V,null,yG.default.createElement(V,{bold:!0},H[0])," and ",yG.default.createElement(V,{bold:!0},H[1]));default:return yG.default.createElement(V,null,yG.default.createElement(V,{bold:!0},H.slice(0,-1).join(", ")),", and"," ",yG.default.createElement(V,{bold:!0},H.slice(-1)[0]))}}function WkA(H){if(H.join(", ").length>50)return"similar";return PZ1(H)}function ZpH(H){if(H.length===0)return"";let $=H.map((A)=>A.split("/").pop()||A);if($.length===1)return yG.default.createElement(V,null,yG.default.createElement(V,{bold:!0},$[0]),Ae.sep);if($.length===2)return yG.default.createElement(V,null,yG.default.createElement(V,{bold:!0},$[0]),Ae.sep," and ",yG.default.createElement(V,{bold:!0},$[1]),Ae.sep);return yG.default.createElement(V,null,yG.default.createElement(V,{bold:!0},$[0]),Ae.sep,", ",yG.default.createElement(V,{bold:!0},$[1]),Ae.sep," and ",H.length-2," more")}function _Z1(H){let $=H.filter((G)=>G.type==="addRules").flatMap((G)=>G.rules||[]),A=$.filter((G)=>G.toolName==="Read"),L=$.filter((G)=>G.toolName==="Bash"),I=H.filter((G)=>G.type==="addDirectories").flatMap((G)=>G.directories||[]),D=A.map((G)=>G.ruleContent?.replace("/**","")||"").filter((G)=>G),B=[...new Set(L.flatMap((G)=>{if(!G.ruleContent)return[];let U=qZA(G.ruleContent)??G.ruleContent,{commandWithoutRedirections:X,redirections:J}=CS(U);return J.length>0?X:U}))],f=I.length>0,E=D.length>0,M=B.length>0;if(E&&!f&&!M){if(D.length===1){let G=D[0],U=G.split("/").pop()||G;return yG.default.createElement(V,null,"Yes, allow reading from ",yG.default.createElement(V,{bold:!0},U),Ae.sep," from this project")}return yG.default.createElement(V,null,"Yes, allow reading from ",ZpH(D)," from this project")}if(f&&!E&&!M){if(I.length===1){let G=I[0],U=G.split("/").pop()||G;return yG.default.createElement(V,null,"Yes, and always allow access to ",yG.default.createElement(V,{bold:!0},U),Ae.sep," from this project")}return yG.default.createElement(V,null,"Yes, and always allow access to ",ZpH(I)," from this project")}if(M&&!f&&!E)return yG.default.createElement(V,null,"Yes, and don't ask again for ",WkA(B)," commands in"," ",yG.default.createElement(V,{bold:!0},zL()));if((f||E)&&!M){let G=[...I,...D];if(f&&E)return yG.default.createElement(V,null,"Yes, and always allow access to ",ZpH(G)," from this project")}if((f||E)&&M){let G=[...I,...D];if(G.length===1&&B.length===1)return yG.default.createElement(V,null,"Yes, and allow access to ",ZpH(G)," and"," ",WkA(B)," commands");return yG.default.createElement(V,null,"Yes, and allow ",ZpH(G)," access and"," ",WkA(B)," commands")}return null}function fsD({suggestions:H=[],decisionReason:$,onRejectFeedbackChange:A,onAcceptFeedbackChange:L,onClassifierDescriptionChange:I,classifierDescription:D,initialClassifierDescriptionEmpty:B=!1,existingAllowDescriptions:f=[],yesInputMode:E=!1,noInputMode:M=!1}){let G=[];if(E)G.push({type:"input",label:"Yes",value:"yes",placeholder:"and tell Claude what to do next",onChange:L,allowEmptySubmitToCancel:!0});else G.push({label:"Yes",value:"yes"});if(lR()){if(H.length>0){let U=_Z1(H);if(U)G.push({label:U,value:"yes-apply-suggestions"})}}if(M)G.push({type:"input",label:"No",value:"no",placeholder:"and tell Claude what to do differently",onChange:A,allowEmptySubmitToCancel:!0});else G.push({label:"No",value:"no"});return G}var yG,Ae;var EsD=K(()=>{xH();p$();Vp();TP();Kq();yG=h(t(),1),Ae=h(require("path"))});function MsD(H){switch(H.type){case"rule":return`${oH.bold(M8(H.rule.ruleValue))} rule from ${ZtH(H.rule.source)}`;case"mode":return`${Tk(H.mode)} mode`;case"sandboxOverride":return"Requires permission to bypass sandbox";case"workingDir":return H.reason;case"other":return H.reason;case"permissionPromptTool":return`${oH.bold(H.permissionPromptToolName)} permission prompt tool`;case"hook":return H.reason?`${oH.bold(H.hookName)} hook: ${H.reason}`:`${oH.bold(H.hookName)} hook`;case"asyncAgent":return H.reason}}function CZ1({title:H,decisionReason:$}){let[A]=PI();function L(){switch($.type){case"subcommandResults":return GB.default.createElement(x,{flexDirection:"column"},Array.from($.reasons.entries()).map(([I,D])=>{let B=D.behavior==="allow"?ZL("success",A)(mH.tick):ZL("error",A)(mH.cross);return GB.default.createElement(x,{flexDirection:"column",key:I},GB.default.createElement(V,null,B," ",I),D.decisionReason!==void 0&&D.decisionReason.type!=="subcommandResults"&&GB.default.createElement(V,null,"  ","\u23BF","  ",GB.default.createElement(u9,null,MsD(D.decisionReason))),D.behavior==="ask"&&(()=>{let f=CAH(D.suggestions);return f.length>0?GB.default.createElement(V,null,"  ","\u23BF","  ","Suggested rules:"," ",GB.default.createElement(u9,null,f.map((E)=>oH.bold(M8(E))).join(", "))):null})())}));default:return GB.default.createElement(V,null,GB.default.createElement(u9,null,MsD($)))}}return GB.default.createElement(x,{flexDirection:"column"},H&&GB.default.createElement(V,null,H),L())}function YZ1(H){if(!H)return[];return H.flatMap(($)=>{switch($.type){case"addDirectories":return $.directories;default:return[]}})}function wZ1(H){if(!H)return;for(let $=H.length-1;$>=0;$--){let A=H[$];if(A?.type==="setMode")return A.mode}return}function ZZ1({suggestions:H,width:$}){if(!H||H.length===0)return GB.default.createElement(x,{flexDirection:"row"},GB.default.createElement(x,{justifyContent:"flex-end",minWidth:$},GB.default.createElement(V,{dimColor:!0},"Suggestions ")),GB.default.createElement(V,null,"None"));let A=CAH(H),L=YZ1(H),I=wZ1(H);if(A.length===0&&L.length===0&&!I)return GB.default.createElement(x,{flexDirection:"row"},GB.default.createElement(x,{justifyContent:"flex-end",minWidth:$},GB.default.createElement(V,{dimColor:!0},"Suggestion ")),GB.default.createElement(V,null,"None"));return GB.default.createElement(x,{flexDirection:"column"},GB.default.createElement(x,{flexDirection:"row"},GB.default.createElement(x,{justifyContent:"flex-end",minWidth:$},GB.default.createElement(V,{dimColor:!0},"Suggestions ")),GB.default.createElement(V,null," ")),A.length>0&&GB.default.createElement(x,{flexDirection:"row"},GB.default.createElement(x,{justifyContent:"flex-end",minWidth:$},GB.default.createElement(V,{dimColor:!0}," Rules ")),GB.default.createElement(x,{flexDirection:"column"},A.map((D,B)=>GB.default.createElement(V,{key:B},mH.bullet," ",M8(D))))),L.length>0&&GB.default.createElement(x,{flexDirection:"row"},GB.default.createElement(x,{justifyContent:"flex-end",minWidth:$},GB.default.createElement(V,{dimColor:!0}," Directories ")),GB.default.createElement(x,{flexDirection:"column"},L.map((D,B)=>GB.default.createElement(V,{key:B},mH.bullet," ",D)))),I&&GB.default.createElement(x,{flexDirection:"row"},GB.default.createElement(x,{justifyContent:"flex-end",minWidth:$},GB.default.createElement(V,{dimColor:!0}," Mode ")),GB.default.createElement(V,null,Tk(I))))}function UsD({permissionResult:H,toolName:$}){let A=W$((f)=>f.toolPermissionContext),L=H.decisionReason,I="suggestions"in H?H.suggestions:void 0,D=GsD.useMemo(()=>{let f=kL.isSandboxingEnabled()&&kL.isAutoAllowBashIfSandboxedEnabled(),E=u3H(A,{sandboxAutoAllowEnabled:f}),M=CAH(I);if(M.length>0)return E.filter((G)=>M.some((U)=>U.toolName===G.rule.ruleValue.toolName&&U.ruleContent===G.rule.ruleValue.ruleContent));if($)return E.filter((G)=>G.rule.ruleValue.toolName===$);return E},[A,$,I]),B=10;return GB.default.createElement(x,{flexDirection:"column"},GB.default.createElement(x,{flexDirection:"row"},GB.default.createElement(x,{justifyContent:"flex-end",minWidth:10},GB.default.createElement(V,{dimColor:!0},"Behavior ")),GB.default.createElement(V,null,H.behavior)),H.behavior!=="allow"&&GB.default.createElement(x,{flexDirection:"row"},GB.default.createElement(x,{justifyContent:"flex-end",minWidth:10},GB.default.createElement(V,{dimColor:!0},"Message ")),GB.default.createElement(V,null,H.message)),GB.default.createElement(x,{flexDirection:"row"},GB.default.createElement(x,{justifyContent:"flex-end",minWidth:10},GB.default.createElement(V,{dimColor:!0},"Reason ")),L===void 0?GB.default.createElement(V,null,"undefined"):GB.default.createElement(CZ1,{decisionReason:L})),GB.default.createElement(ZZ1,{suggestions:I,width:10}),D.length>0&&GB.default.createElement(x,{flexDirection:"column",marginTop:1},GB.default.createElement(V,{color:"warning"},mH.warning," Unreachable Rules (",D.length,")"),D.map((f,E)=>GB.default.createElement(x,{key:E,flexDirection:"column",marginLeft:2},GB.default.createElement(V,{color:"warning"},M8(f.rule.ruleValue)),GB.default.createElement(V,{dimColor:!0},"  ",f.reason),GB.default.createElement(V,{dimColor:!0},"  ","Fix: ",f.fix)))))}var GB,GsD;var XsD=K(()=>{xH();s0();SI();xW();P5();K4();pL();YZ$();zM();GB=h(t(),1),GsD=h(t(),1)});function qZ1(H,$){if(!H)return null;switch(H.type){case"rule":return{reasonString:`Permission rule ${oH.bold(M8(H.rule.ruleValue))} requires confirmation for this ${$}.`,configString:H.rule.source==="policySettings"?void 0:"/permissions to update rules"};case"hook":{let A=H.reason?`:
`,(0,Q7$.getConflictResolutionRecipe)(I,H))}return A}}W7$.MetricStorageRegistry=WPA});var VDD=z((V7$)=>{Object.defineProperty(V7$,"__esModule",{value:!0});V7$.MultiMetricStorage=void 0;class WDD{_backingStorages;constructor(H){this._backingStorages=H}record(H,$,A,L){this._backingStorages.forEach((I)=>{I.record(H,$,A,L)})}}V7$.MultiMetricStorage=WDD});var YDD=z((eQH)=>{Object.defineProperty(eQH,"__esModule",{value:!0});eQH.BatchObservableResultImpl=eQH.ObservableResultImpl=void 0;var sQH=hB(),PDD=CvH(),Qh9=G7$();class _DD{_instrumentName;_valueType;_buffer=new PDD.AttributeHashMap;constructor(H,$){this._instrumentName=H,this._valueType=$}observe(H,$={}){if(typeof H!=="number"){sQH.diag.warn(`non-number value provided to metric ${this._instrumentName}: ${H}`);return}if(this._valueType===sQH.ValueType.INT&&!Number.isInteger(H)){if(sQH.diag.warn(`INT value type cannot accept a floating-point value for ${this._instrumentName}, ignoring the fractional digits.`),H=Math.trunc(H),!Number.isInteger(H))return}this._buffer.set($,H)}}eQH.ObservableResultImpl=_DD;class CDD{_buffer=new Map;observe(H,$,A={}){if(!(0,Qh9.isObservableInstrument)(H))return;let L=this._buffer.get(H);if(L==null)L=new PDD.AttributeHashMap,this._buffer.set(H,L);if(typeof $!=="number"){sQH.diag.warn(`non-number value provided to metric ${H._descriptor.name}: ${$}`);return}if(H._descriptor.valueType===sQH.ValueType.INT&&!Number.isInteger($)){if(sQH.diag.warn(`INT value type cannot accept a floating-point value for ${H._descriptor.name}, ignoring the fractional digits.`),$=Math.trunc($),!Number.isInteger($))return}L.set(A,$)}}eQH.BatchObservableResultImpl=CDD});var TDD=z((P7$)=>{Object.defineProperty(P7$,"__esModule",{value:!0});P7$.ObservableRegistry=void 0;var Wh9=hB(),wDD=G7$(),ZDD=YDD(),wvH=ax();class qDD{_callbacks=[];_batchCallbacks=[];addCallback(H,$){if(this._findCallback(H,$)>=0)return;this._callbacks.push({callback:H,instrument:$})}removeCallback(H,$){let A=this._findCallback(H,$);if(A<0)return;this._callbacks.splice(A,1)}addBatchCallback(H,$){let A=new Set($.filter(wDD.isObservableInstrument));if(A.size===0){Wh9.diag.error("BatchObservableCallback is not associated with valid instruments",$);return}if(this._findBatchCallback(H,A)>=0)return;this._batchCallbacks.push({callback:H,instruments:A})}removeBatchCallback(H,$){let A=new Set($.filter(wDD.isObservableInstrument)),L=this._findBatchCallback(H,A);if(L<0)return;this._batchCallbacks.splice(L,1)}async observe(H,$){let A=this._observeCallbacks(H,$),L=this._observeBatchCallbacks(H,$);return(await(0,wvH.PromiseAllSettled)([...A,...L])).filter(wvH.isPromiseAllSettledRejectionResult).map((B)=>B.reason)}_observeCallbacks(H,$){return this._callbacks.map(async({callback:A,instrument:L})=>{let I=new ZDD.ObservableResultImpl(L._descriptor.name,L._descriptor.valueType),D=Promise.resolve(A(I));if($!=null)D=(0,wvH.callWithTimeout)(D,$);await D,L._metricStorages.forEach((B)=>{B.record(I._buffer,H)})})}_observeBatchCallbacks(H,$){return this._batchCallbacks.map(async({callback:A,instruments:L})=>{let I=new ZDD.BatchObservableResultImpl,D=Promise.resolve(A(I));if($!=null)D=(0,wvH.callWithTimeout)(D,$);await D,L.forEach((B)=>{let f=I._buffer.get(B);if(f==null)return;B._metricStorages.forEach((E)=>{E.record(f,H)})})})}_findCallback(H,$){return this._callbacks.findIndex((A)=>{return A.callback===H&&A.instrument===$})}_findBatchCallback(H,$){return this._batchCallbacks.findIndex((A)=>{return A.callback===H&&(0,wvH.setEquals)(A.instruments,$)})}}P7$.ObservableRegistry=qDD});var NDD=z((_7$)=>{Object.defineProperty(_7$,"__esModule",{value:!0});_7$.SyncMetricStorage=void 0;var Vh9=XPA(),Ph9=KPA(),_h9=QPA();class zDD extends Vh9.MetricStorage{_attributesProcessor;_aggregationCardinalityLimit;_deltaMetricStorage;_temporalMetricStorage;constructor(H,$,A,L,I){super(H);this._attributesProcessor=A,this._aggregationCardinalityLimit=I,this._deltaMetricStorage=new Ph9.DeltaMetricProcessor($,this._aggregationCardinalityLimit),this._temporalMetricStorage=new _h9.TemporalMetricProcessor($,L)}record(H,$,A,L){$=this._attributesProcessor.process($,A),this._deltaMetricStorage.record(H,$,A,L)}collect(H,$){let A=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(H,this._instrumentDescriptor,A,$)}}_7$.SyncMetricStorage=zDD});var C7$=z((nv)=>{Object.defineProperty(nv,"__esModule",{value:!0});nv.createDenyListAttributesProcessor=nv.createAllowListAttributesProcessor=nv.createMultiAttributesProcessor=nv.createNoopAttributesProcessor=void 0;class ODD{process(H,$){return H}}class xDD{_processors;constructor(H){this._processors=H}process(H,$){let A=H;for(let L of this._processors)A=L.process(A,$);return A}}class SDD{_allowedAttributeNames;constructor(H){this._allowedAttributeNames=H}process(H,$){let A={};return Object.keys(H).filter((L)=>this._allowedAttributeNames.includes(L)).forEach((L)=>A[L]=H[L]),A}}class jDD{_deniedAttributeNames;constructor(H){this._deniedAttributeNames=H}process(H,$){let A={};return Object.keys(H).filter((L)=>!this._deniedAttributeNames.includes(L)).forEach((L)=>A[L]=H[L]),A}}function Ch9(){return qh9}nv.createNoopAttributesProcessor=Ch9;function Yh9(H){return new xDD(H)}nv.createMultiAttributesProcessor=Yh9;function wh9(H){return new SDD(H)}nv.createAllowListAttributesProcessor=wh9;function Zh9(H){return new jDD(H)}nv.createDenyListAttributesProcessor=Zh9;var qh9=new ODD});var yDD=z((Y7$)=>{Object.defineProperty(Y7$,"__esModule",{value:!0});Y7$.MeterSharedState=void 0;var Th9=_vH(),zh9=IDD(),Nh9=ax(),Oh9=MDD(),xh9=QDD(),Sh9=VDD(),jh9=TDD(),Rh9=NDD(),yh9=C7$();class RDD{_meterProviderSharedState;_instrumentationScope;metricStorageRegistry=new xh9.MetricStorageRegistry;observableRegistry=new jh9.ObservableRegistry;meter;constructor(H,$){this._meterProviderSharedState=H,this._instrumentationScope=$,this.meter=new zh9.Meter(this)}registerMetricStorage(H){let $=this._registerMetricStorage(H,Rh9.SyncMetricStorage);if($.length===1)return $[0];return new Sh9.MultiMetricStorage($)}registerAsyncMetricStorage(H){return this._registerMetricStorage(H,Oh9.AsyncMetricStorage)}async collect(H,$,A){let L=await this.observableRegistry.observe($,A?.timeoutMillis),I=this.metricStorageRegistry.getStorages(H);if(I.length===0)return null;let D=I.map((B)=>{return B.collect(H,$)}).filter(Nh9.isNotNullish);if(D.length===0)return{errors:L};return{scopeMetrics:{scope:this._instrumentationScope,metrics:D},errors:L}}_registerMetricStorage(H,$){let L=this._meterProviderSharedState.viewRegistry.findViews(H,this._instrumentationScope).map((I)=>{let D=(0,Th9.createInstrumentDescriptorWithView)(I,H),B=this.metricStorageRegistry.findOrUpdateCompatibleStorage(D);if(B!=null)return B;let f=I.aggregation.createAggregator(D),E=new $(D,f,I.attributesProcessor,this._meterProviderSharedState.metricCollectors,I.aggregationCardinalityLimit);return this.metricStorageRegistry.register(E),E});if(L.length===0){let D=this._meterProviderSharedState.selectAggregations(H.type).map(([B,f])=>{let E=this.metricStorageRegistry.findOrUpdateCompatibleCollectorStorage(B,H);if(E!=null)return E;let M=f.createAggregator(H),G=B.selectCardinalityLimit(H.type),U=new $(H,M,(0,yh9.createNoopAttributesProcessor)(),[B],G);return this.metricStorageRegistry.registerForCollector(B,U),U});L=L.concat(D)}return L}}Y7$.MeterSharedState=RDD});var hDD=z((w7$)=>{Object.defineProperty(w7$,"__esModule",{value:!0});w7$.MeterProviderSharedState=void 0;var vh9=ax(),hh9=nID(),bh9=yDD(),kh9=PvH();class vDD{resource;viewRegistry=new hh9.ViewRegistry;metricCollectors=[];meterSharedStates=new Map;constructor(H){this.resource=H}getMeterSharedState(H){let $=(0,vh9.instrumentationScopeId)(H),A=this.meterSharedStates.get($);if(A==null)A=new bh9.MeterSharedState(this,H),this.meterSharedStates.set($,A);return A}selectAggregations(H){let $=[];for(let A of this.metricCollectors)$.push([A,(0,kh9.toAggregation)(A.selectAggregation(H))]);return $}}w7$.MeterProviderSharedState=vDD});var kDD=z((Z7$)=>{Object.defineProperty(Z7$,"__esModule",{value:!0});Z7$.MetricCollector=void 0;var uh9=Jf();class bDD{_sharedState;_metricReader;constructor(H,$){this._sharedState=H,this._metricReader=$}async collect(H){let $=(0,uh9.millisToHrTime)(Date.now()),A=[],L=[],I=Array.from(this._sharedState.meterSharedStates.values()).map(async(D)=>{let B=await D.collect(this,$,H);if(B?.scopeMetrics!=null)A.push(B.scopeMetrics);if(B?.errors!=null)L.push(...B.errors)});return await Promise.all(I),{resourceMetrics:{resource:this._sharedState.resource,scopeMetrics:A},errors:L}}async forceFlush(H){await this._metricReader.forceFlush(H)}async shutdown(H){await this._metricReader.shutdown(H)}selectAggregationTemporality(H){return this._metricReader.selectAggregationTemporality(H)}selectAggregation(H){return this._metricReader.selectAggregation(H)}selectCardinalityLimit(H){return this._metricReader.selectCardinalityLimit?.(H)??2000}}Z7$.MetricCollector=bDD});var q7$=z((HWH)=>{Object.defineProperty(HWH,"__esModule",{value:!0});HWH.ExactPredicate=HWH.PatternPredicate=void 0;var gh9=/[\^$\\.+?()[\]{}|]/g;class VPA{_matchAll;_regexp;constructor(H){if(H==="*")this._matchAll=!0,this._regexp=/.*/;else this._matchAll=!1,this._regexp=new RegExp(VPA.escapePattern(H))}match(H){if(this._matchAll)return!0;return this._regexp.test(H)}static escapePattern(H){return`^${H.replace(gh9,"\\$&").replace("*",".*")}$`}static hasWildcard(H){return H.includes("*")}}HWH.PatternPredicate=VPA;class uDD{_matchAll;_pattern;constructor(H){this._matchAll=H===void 0,this._pattern=H}match(H){if(this._matchAll)return!0;if(H===this._pattern)return!0;return!1}}HWH.ExactPredicate=uDD});var pDD=z((T7$)=>{Object.defineProperty(T7$,"__esModule",{value:!0});T7$.InstrumentSelector=void 0;var gDD=q7$();class mDD{_nameFilter;_type;_unitFilter;constructor(H){this._nameFilter=new gDD.PatternPredicate(H?.name??"*"),this._type=H?.type,this._unitFilter=new gDD.ExactPredicate(H?.unit)}getType(){return this._type}getNameFilter(){return this._nameFilter}getUnitFilter(){return this._unitFilter}}T7$.InstrumentSelector=mDD});var cDD=z((z7$)=>{Object.defineProperty(z7$,"__esModule",{value:!0});z7$.MeterSelector=void 0;var PPA=q7$();class dDD{_nameFilter;_versionFilter;_schemaUrlFilter;constructor(H){this._nameFilter=new PPA.ExactPredicate(H?.name),this._versionFilter=new PPA.ExactPredicate(H?.version),this._schemaUrlFilter=new PPA.ExactPredicate(H?.schemaUrl)}getNameFilter(){return this._nameFilter}getVersionFilter(){return this._versionFilter}getSchemaUrlFilter(){return this._schemaUrlFilter}}z7$.MeterSelector=dDD});var rDD=z((N7$)=>{Object.defineProperty(N7$,"__esModule",{value:!0});N7$.View=void 0;var mh9=q7$(),lDD=C7$(),ph9=pDD(),dh9=cDD(),iDD=PvH();function ch9(H){return H.instrumentName==null&&H.instrumentType==null&&H.instrumentUnit==null&&H.meterName==null&&H.meterVersion==null&&H.meterSchemaUrl==null}function lh9(H){if(ch9(H))throw Error("Cannot create view with no selector arguments supplied");if(H.name!=null&&(H?.instrumentName==null||mh9.PatternPredicate.hasWildcard(H.instrumentName)))throw Error("Views with a specified name must be declared with an instrument selector that selects at most one instrument per meter.")}class nDD{name;description;aggregation;attributesProcessor;instrumentSelector;meterSelector;aggregationCardinalityLimit;constructor(H){if(lh9(H),H.attributesProcessors!=null)this.attributesProcessor=(0,lDD.createMultiAttributesProcessor)(H.attributesProcessors);else this.attributesProcessor=(0,lDD.createNoopAttributesProcessor)();this.name=H.name,this.description=H.description,this.aggregation=(0,iDD.toAggregation)(H.aggregation??{type:iDD.AggregationType.DEFAULT}),this.instrumentSelector=new ph9.InstrumentSelector({name:H.instrumentName,type:H.instrumentType,unit:H.instrumentUnit}),this.meterSelector=new dh9.MeterSelector({name:H.meterName,version:H.meterVersion,schemaUrl:H.meterSchemaUrl}),this.aggregationCardinalityLimit=H.aggregationCardinalityLimit}}N7$.View=nDD});var oDD=z((x7$)=>{Object.defineProperty(x7$,"__esModule",{value:!0});x7$.MeterProvider=void 0;var O7$=hB(),ih9=zQH(),nh9=hDD(),rh9=kDD(),ah9=rDD();class aDD{_sharedState;_shutdown=!1;constructor(H){if(this._sharedState=new nh9.MeterProviderSharedState(H?.resource??(0,ih9.defaultResource)()),H?.views!=null&&H.views.length>0)for(let $ of H.views)this._sharedState.viewRegistry.addView(new ah9.View($));if(H?.readers!=null&&H.readers.length>0)for(let $ of H.readers){let A=new rh9.MetricCollector(this._sharedState,$);$.setMetricProducer(A),this._sharedState.metricCollectors.push(A)}}getMeter(H,$="",A={}){if(this._shutdown)return O7$.diag.warn("A shutdown MeterProvider cannot provide a Meter"),(0,O7$.createNoopMeter)();return this._sharedState.getMeterSharedState({name:H,version:$,schemaUrl:A.schemaUrl}).meter}async shutdown(H){if(this._shutdown){O7$.diag.warn("shutdown may only be called once per MeterProvider");return}this._shutdown=!0,await Promise.all(this._sharedState.metricCollectors.map(($)=>{return $.shutdown(H)}))}async forceFlush(H){if(this._shutdown){O7$.diag.warn("invalid attempt to force flush after MeterProvider shutdown");return}await Promise.all(this._sharedState.metricCollectors.map(($)=>{return $.forceFlush(H)}))}}x7$.MeterProvider=aDD});var Mo=z((GU)=>{Object.defineProperty(GU,"__esModule",{value:!0});GU.TimeoutError=GU.createDenyListAttributesProcessor=GU.createAllowListAttributesProcessor=GU.AggregationType=GU.MeterProvider=GU.ConsoleMetricExporter=GU.InMemoryMetricExporter=GU.PeriodicExportingMetricReader=GU.MetricReader=GU.InstrumentType=GU.DataPointType=GU.AggregationTemporality=void 0;var oh9=dW$();Object.defineProperty(GU,"AggregationTemporality",{enumerable:!0,get:function(){return oh9.AggregationTemporality}});var tDD=Eo();Object.defineProperty(GU,"DataPointType",{enumerable:!0,get:function(){return tDD.DataPointType}});Object.defineProperty(GU,"InstrumentType",{enumerable:!0,get:function(){return tDD.InstrumentType}});var th9=MPA();Object.defineProperty(GU,"MetricReader",{enumerable:!0,get:function(){return th9.MetricReader}});var sh9=gID();Object.defineProperty(GU,"PeriodicExportingMetricReader",{enumerable:!0,get:function(){return sh9.PeriodicExportingMetricReader}});var eh9=dID();Object.defineProperty(GU,"InMemoryMetricExporter",{enumerable:!0,get:function(){return eh9.InMemoryMetricExporter}});var Hb9=lID();Object.defineProperty(GU,"ConsoleMetricExporter",{enumerable:!0,get:function(){return Hb9.ConsoleMetricExporter}});var $b9=oDD();Object.defineProperty(GU,"MeterProvider",{enumerable:!0,get:function(){return $b9.MeterProvider}});var Ab9=PvH();Object.defineProperty(GU,"AggregationType",{enumerable:!0,get:function(){return Ab9.AggregationType}});var sDD=C7$();Object.defineProperty(GU,"createAllowListAttributesProcessor",{enumerable:!0,get:function(){return sDD.createAllowListAttributesProcessor}});Object.defineProperty(GU,"createDenyListAttributesProcessor",{enumerable:!0,get:function(){return sDD.createDenyListAttributesProcessor}});var Lb9=ax();Object.defineProperty(GU,"TimeoutError",{enumerable:!0,get:function(){return Lb9.TimeoutError}})});var _PA=z((ZvH)=>{Object.defineProperty(ZvH,"__esModule",{value:!0});ZvH.AggregationTemporalityPreference=void 0;var Ib9;(function(H){H[H.DELTA=0]="DELTA",H[H.CUMULATIVE=1]="CUMULATIVE",H[H.LOWMEMORY=2]="LOWMEMORY"})(Ib9=ZvH.AggregationTemporalityPreference||(ZvH.AggregationTemporalityPreference={}))});var HBD=z((S7$)=>{Object.defineProperty(S7$,"__esModule",{value:!0});S7$.OTLPExporterBase=void 0;class eDD{_delegate;constructor(H){this._delegate=H}export(H,$){this._delegate.export(H,$)}forceFlush(){return this._delegate.forceFlush()}shutdown(){return this._delegate.shutdown()}}S7$.OTLPExporterBase=eDD});var R7$=z((j7$)=>{Object.defineProperty(j7$,"__esModule",{value:!0});j7$.OTLPExporterError=void 0;class $BD extends Error{code;name="OTLPExporterError";data;constructor(H,$,A){super(H);this.data=A,this.code=$}}j7$.OTLPExporterError=$BD});var qvH=z((rv)=>{Object.defineProperty(rv,"__esModule",{value:!0});rv.getSharedConfigurationDefaults=rv.mergeOtlpSharedConfigurationWithDefaults=rv.wrapStaticHeadersInFunction=rv.validateTimeoutMillis=void 0;function ABD(H){if(Number.isFinite(H)&&H>0)return H;throw Error(`Configuration: timeoutMillis is invalid, expected number greater than 0 (actual: '${H}')`)}rv.validateTimeoutMillis=ABD;function Db9(H){if(H==null)return;return async()=>H}rv.wrapStaticHeadersInFunction=Db9;function Bb9(H,$,A){return{timeoutMillis:ABD(H.timeoutMillis??$.timeoutMillis??A.timeoutMillis),concurrencyLimit:H.concurrencyLimit??$.concurrencyLimit??A.concurrencyLimit,compression:H.compression??$.compression??A.compression}}rv.mergeOtlpSharedConfigurationWithDefaults=Bb9;function fb9(){return{timeoutMillis:1e4,concurrencyLimit:30,compression:"none"}}rv.getSharedConfigurationDefaults=fb9});var LBD=z((TvH)=>{Object.defineProperty(TvH,"__esModule",{value:!0});TvH.CompressionAlgorithm=void 0;var Eb9;(function(H){H.NONE="none",H.GZIP="gzip"})(Eb9=TvH.CompressionAlgorithm||(TvH.CompressionAlgorithm={}))});var CPA=z((y7$)=>{Object.defineProperty(y7$,"__esModule",{value:!0});y7$.createBoundedQueueExportPromiseHandler=void 0;class IBD{_concurrencyLimit;_sendingPromises=[];constructor(H){this._concurrencyLimit=H}pushPromise(H){if(this.hasReachedLimit())throw Error("Concurrency Limit reached");this._sendingPromises.push(H);let $=()=>{let A=this._sendingPromises.indexOf(H);this._sendingPromises.splice(A,1)};H.then($,$)}hasReachedLimit(){return this._sendingPromises.length>=this._concurrencyLimit}async awaitAll(){await Promise.all(this._sendingPromises)}}function Mb9(H){return new IBD(H.concurrencyLimit)}y7$.createBoundedQueueExportPromiseHandler=Mb9});var DBD=z((v7$)=>{Object.defineProperty(v7$,"__esModule",{value:!0});v7$.createLoggingPartialSuccessResponseHandler=void 0;var Gb9=hB();function Ub9(H){return Object.prototype.hasOwnProperty.call(H,"partialSuccess")}function Xb9(){return{handleResponse(H){if(H==null||!Ub9(H)||H.partialSuccess==null||Object.keys(H.partialSuccess).length===0)return;Gb9.diag.warn("Received Partial Success response:",JSON.stringify(H.partialSuccess))}}}v7$.createLoggingPartialSuccessResponseHandler=Xb9});var YPA=z((h7$)=>{Object.defineProperty(h7$,"__esModule",{value:!0});h7$.createOtlpExportDelegate=void 0;var H0H=Jf(),BBD=R7$(),Jb9=DBD(),Fb9=hB();class fBD{_transport;_serializer;_responseHandler;_promiseQueue;_timeout;_diagLogger;constructor(H,$,A,L,I){this._transport=H,this._serializer=$,this._responseHandler=A,this._promiseQueue=L,this._timeout=I,this._diagLogger=Fb9.diag.createComponentLogger({namespace:"OTLPExportDelegate"})}export(H,$){if(this._diagLogger.debug("items to be sent",H),this._promiseQueue.hasReachedLimit()){$({code:H0H.ExportResultCode.FAILED,error:Error("Concurrent export limit reached")});return}let A=this._serializer.serializeRequest(H);if(A==null){$({code:H0H.ExportResultCode.FAILED,error:Error("Nothing to send")});return}this._promiseQueue.pushPromise(this._transport.send(A,this._timeout).then((L)=>{if(L.status==="success"){if(L.data!=null)try{this._responseHandler.handleResponse(this._serializer.deserializeResponse(L.data))}catch(I){this._diagLogger.warn("Export succeeded but could not deserialize response - is the response specification compliant?",I,L.data)}$({code:H0H.ExportResultCode.SUCCESS});return}else if(L.status==="failure"&&L.error){$({code:H0H.ExportResultCode.FAILED,error:L.error});return}else if(L.status==="retryable")$({code:H0H.ExportResultCode.FAILED,error:new BBD.OTLPExporterError("Export failed with retryable status")});else $({code:H0H.ExportResultCode.FAILED,error:new BBD.OTLPExporterError("Export failed with unknown error")})},(L)=>$({code:H0H.ExportResultCode.FAILED,error:L})))}forceFlush(){return this._promiseQueue.awaitAll()}async shutdown(){this._diagLogger.debug("shutdown started"),await this.forceFlush(),this._transport.shutdown()}}function Kb9(H,$){return new fBD(H.transport,H.serializer,(0,Jb9.createLoggingPartialSuccessResponseHandler)(),H.promiseHandler,$.timeout)}h7$.createOtlpExportDelegate=Kb9});var EBD=z((b7$)=>{Object.defineProperty(b7$,"__esModule",{value:!0});b7$.createOtlpNetworkExportDelegate=void 0;var Qb9=CPA(),Wb9=YPA();function Vb9(H,$,A){return(0,Wb9.createOtlpExportDelegate)({transport:A,serializer:$,promiseHandler:(0,Qb9.createBoundedQueueExportPromiseHandler)(H)},{timeout:H.timeoutMillis})}b7$.createOtlpNetworkExportDelegate=Vb9});var av=z((vC)=>{Object.defineProperty(vC,"__esModule",{value:!0});vC.createOtlpNetworkExportDelegate=vC.CompressionAlgorithm=vC.getSharedConfigurationDefaults=vC.mergeOtlpSharedConfigurationWithDefaults=vC.OTLPExporterError=vC.OTLPExporterBase=void 0;var Pb9=HBD();Object.defineProperty(vC,"OTLPExporterBase",{enumerable:!0,get:function(){return Pb9.OTLPExporterBase}});var _b9=R7$();Object.defineProperty(vC,"OTLPExporterError",{enumerable:!0,get:function(){return _b9.OTLPExporterError}});var MBD=qvH();Object.defineProperty(vC,"mergeOtlpSharedConfigurationWithDefaults",{enumerable:!0,get:function(){return MBD.mergeOtlpSharedConfigurationWithDefaults}});Object.defineProperty(vC,"getSharedConfigurationDefaults",{enumerable:!0,get:function(){return MBD.getSharedConfigurationDefaults}});var Cb9=LBD();Object.defineProperty(vC,"CompressionAlgorithm",{enumerable:!0,get:function(){return Cb9.CompressionAlgorithm}});var Yb9=EBD();Object.defineProperty(vC,"createOtlpNetworkExportDelegate",{enumerable:!0,get:function(){return Yb9.createOtlpNetworkExportDelegate}})});var wPA=z((z7)=>{Object.defineProperty(z7,"__esModule",{value:!0});z7.OTLPMetricExporterBase=z7.LowMemoryTemporalitySelector=z7.DeltaTemporalitySelector=z7.CumulativeTemporalitySelector=void 0;var wb9=Jf(),NF=Mo(),GBD=_PA(),Zb9=av(),qb9=hB(),Tb9=()=>NF.AggregationTemporality.CUMULATIVE;z7.CumulativeTemporalitySelector=Tb9;var zb9=(H)=>{switch(H){case NF.InstrumentType.COUNTER:case NF.InstrumentType.OBSERVABLE_COUNTER:case NF.InstrumentType.GAUGE:case NF.InstrumentType.HISTOGRAM:case NF.InstrumentType.OBSERVABLE_GAUGE:return NF.AggregationTemporality.DELTA;case NF.InstrumentType.UP_DOWN_COUNTER:case NF.InstrumentType.OBSERVABLE_UP_DOWN_COUNTER:return NF.AggregationTemporality.CUMULATIVE}};z7.DeltaTemporalitySelector=zb9;var Nb9=(H)=>{switch(H){case NF.InstrumentType.COUNTER:case NF.InstrumentType.HISTOGRAM:return NF.AggregationTemporality.DELTA;case NF.InstrumentType.GAUGE:case NF.InstrumentType.UP_DOWN_COUNTER:case NF.InstrumentType.OBSERVABLE_UP_DOWN_COUNTER:case NF.InstrumentType.OBSERVABLE_COUNTER:case NF.InstrumentType.OBSERVABLE_GAUGE:return NF.AggregationTemporality.CUMULATIVE}};z7.LowMemoryTemporalitySelector=Nb9;function Ob9(){let H=((0,wb9.getStringFromEnv)("OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE")??"cumulative").toLowerCase();if(H==="cumulative")return z7.CumulativeTemporalitySelector;if(H==="delta")return z7.DeltaTemporalitySelector;if(H==="lowmemory")return z7.LowMemoryTemporalitySelector;return qb9.diag.warn(`OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE is set to '${H}', but only 'cumulative' and 'delta' are allowed. Using default ('cumulative') instead.`),z7.CumulativeTemporalitySelector}function xb9(H){if(H!=null){if(H===GBD.AggregationTemporalityPreference.DELTA)return z7.DeltaTemporalitySelector;else if(H===GBD.AggregationTemporalityPreference.LOWMEMORY)return z7.LowMemoryTemporalitySelector;return z7.CumulativeTemporalitySelector}return Ob9()}var Sb9=Object.freeze({type:NF.AggregationType.DEFAULT});function jb9(H){return H?.aggregationPreference??(()=>Sb9)}class UBD extends Zb9.OTLPExporterBase{_aggregationTemporalitySelector;_aggregationSelector;constructor(H,$){super(H);this._aggregationSelector=jb9($),this._aggregationTemporalitySelector=xb9($?.temporalityPreference)}selectAggregation(H){return this._aggregationSelector(H)}selectAggregationTemporality(H){return this._aggregationTemporalitySelector(H)}}z7.OTLPMetricExporterBase=UBD});var ZPA=z((wYE,XBD)=>{XBD.exports=Rb9;function Rb9(H,$){var A=Array(arguments.length-1),L=0,I=2,D=!0;while(I<arguments.length)A[L++]=arguments[I++];return new Promise(function(f,E){A[L]=function(G){if(D)if(D=!1,G)E(G);else{var U=Array(arguments.length-1),X=0;while(X<U.length)U[X++]=arguments[X];f.apply(null,U)}};try{H.apply($||null,A)}catch(M){if(D)D=!1,E(M)}})}});var QBD=z((KBD)=>{var k7$=KBD;k7$.length=function($){var A=$.length;if(!A)return 0;var L=0;while(--A%4>1&&$.charAt(A)==="=")++L;return Math.ceil($.length*3)/4-L};var $WH=Array(64),FBD=Array(123);for(mT=0;mT<64;)FBD[$WH[mT]=mT<26?mT+65:mT<52?mT+71:mT<62?mT-4:mT-59|43]=mT++;var mT;k7$.encode=function($,A,L){var I=null,D=[],B=0,f=0,E;while(A<L){var M=$[A++];switch(f){case 0:D[B++]=$WH[M>>2],E=(M&3)<<4,f=1;break;case 1:D[B++]=$WH[E|M>>4],E=(M&15)<<2,f=2;break;case 2:D[B++]=$WH[E|M>>6],D[B++]=$WH[M&63],f=0;break}if(B>8191)(I||(I=[])).push(String.fromCharCode.apply(String,D)),B=0}if(f){if(D[B++]=$WH[E],D[B++]=61,f===1)D[B++]=61}if(I){if(B)I.push(String.fromCharCode.apply(String,D.slice(0,B)));return I.join("")}return String.fromCharCode.apply(String,D.slice(0,B))};var JBD="invalid encoding";k7$.decode=function($,A,L){var I=L,D=0,B;for(var f=0;f<$.length;){var E=$.charCodeAt(f++);if(E===61&&D>1)break;if((E=FBD[E])===void 0)throw Error(JBD);switch(D){case 0:B=E,D=1;break;case 1:A[L++]=B<<2|(E&48)>>4,B=E,D=2;break;case 2:A[L++]=(B&15)<<4|(E&60)>>2,B=E,D=3;break;case 3:A[L++]=(B&3)<<6|E,D=0;break}}if(D===1)throw Error(JBD);return L-I};k7$.test=function($){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test($)}});var VBD=z((qYE,WBD)=>{WBD.exports=u7$;function u7$(){this._listeners={}}u7$.prototype.on=function($,A,L){return(this._listeners[$]||(this._listeners[$]=[])).push({fn:A,ctx:L||this}),this};u7$.prototype.off=function($,A){if($===void 0)this._listeners={};else if(A===void 0)this._listeners[$]=[];else{var L=this._listeners[$];for(var I=0;I<L.length;)if(L[I].fn===A)L.splice(I,1);else++I}return this};u7$.prototype.emit=function($){var A=this._listeners[$];if(A){var L=[],I=1;for(;I<arguments.length;)L.push(arguments[I++]);for(I=0;I<A.length;)A[I].fn.apply(A[I++].ctx,L)}return this}});var qBD=z((TYE,ZBD)=>{ZBD.exports=PBD(PBD);function PBD(H){if(typeof Float32Array<"u")(function(){var $=new Float32Array([-0]),A=new Uint8Array($.buffer),L=A[3]===128;function I(E,M,G){$[0]=E,M[G]=A[0],M[G+1]=A[1],M[G+2]=A[2],M[G+3]=A[3]}function D(E,M,G){$[0]=E,M[G]=A[3],M[G+1]=A[2],M[G+2]=A[1],M[G+3]=A[0]}H.writeFloatLE=L?I:D,H.writeFloatBE=L?D:I;function B(E,M){return A[0]=E[M],A[1]=E[M+1],A[2]=E[M+2],A[3]=E[M+3],$[0]}function f(E,M){return A[3]=E[M],A[2]=E[M+1],A[1]=E[M+2],A[0]=E[M+3],$[0]}H.readFloatLE=L?B:f,H.readFloatBE=L?f:B})();else(function(){function $(L,I,D,B){var f=I<0?1:0;if(f)I=-I;if(I===0)L(1/I>0?0:2147483648,D,B);else if(isNaN(I))L(2143289344,D,B);else if(I>340282346638528860000000000000000000000)L((f<<31|2139095040)>>>0,D,B);else if(I<0.000000000000000000000000000000000000011754943508222875)L((f<<31|Math.round(I/0.000000000000000000000000000000000000000000001401298464324817))>>>0,D,B);else{var E=Math.floor(Math.log(I)/Math.LN2),M=Math.round(I*Math.pow(2,-E)*8388608)&8388607;L((f<<31|E+127<<23|M)>>>0,D,B)}}H.writeFloatLE=$.bind(null,_BD),H.writeFloatBE=$.bind(null,CBD);function A(L,I,D){var B=L(I,D),f=(B>>31)*2+1,E=B>>>23&255,M=B&8388607;return E===255?M?NaN:f*(1/0):E===0?f*0.000000000000000000000000000000000000000000001401298464324817*M:f*Math.pow(2,E-150)*(M+8388608)}H.readFloatLE=A.bind(null,YBD),H.readFloatBE=A.bind(null,wBD)})();if(typeof Float64Array<"u")(function(){var $=new Float64Array([-0]),A=new Uint8Array($.buffer),L=A[7]===128;function I(E,M,G){$[0]=E,M[G]=A[0],M[G+1]=A[1],M[G+2]=A[2],M[G+3]=A[3],M[G+4]=A[4],M[G+5]=A[5],M[G+6]=A[6],M[G+7]=A[7]}function D(E,M,G){$[0]=E,M[G]=A[7],M[G+1]=A[6],M[G+2]=A[5],M[G+3]=A[4],M[G+4]=A[3],M[G+5]=A[2],M[G+6]=A[1],M[G+7]=A[0]}H.writeDoubleLE=L?I:D,H.writeDoubleBE=L?D:I;function B(E,M){return A[0]=E[M],A[1]=E[M+1],A[2]=E[M+2],A[3]=E[M+3],A[4]=E[M+4],A[5]=E[M+5],A[6]=E[M+6],A[7]=E[M+7],$[0]}function f(E,M){return A[7]=E[M],A[6]=E[M+1],A[5]=E[M+2],A[4]=E[M+3],A[3]=E[M+4],A[2]=E[M+5],A[1]=E[M+6],A[0]=E[M+7],$[0]}H.readDoubleLE=L?B:f,H.readDoubleBE=L?f:B})();else(function(){function $(L,I,D,B,f,E){var M=B<0?1:0;if(M)B=-B;if(B===0)L(0,f,E+I),L(1/B>0?0:2147483648,f,E+D);else if(isNaN(B))L(0,f,E+I),L(2146959360,f,E+D);else if(B>179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000)L(0,f,E+I),L((M<<31|2146435072)>>>0,f,E+D);else{var G;if(B<0.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000022250738585072014)G=B/0.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005,L(G>>>0,f,E+I),L((M<<31|G/4294967296)>>>0,f,E+D);else{var U=Math.floor(Math.log(B)/Math.LN2);if(U===1024)U=1023;G=B*Math.pow(2,-U),L(G*4503599627370496>>>0,f,E+I),L((M<<31|U+1023<<20|G*1048576&1048575)>>>0,f,E+D)}}}H.writeDoubleLE=$.bind(null,_BD,0,4),H.writeDoubleBE=$.bind(null,CBD,4,0);function A(L,I,D,B,f){var E=L(B,f+I),M=L(B,f+D),G=(M>>31)*2+1,U=M>>>20&2047,X=4294967296*(M&1048575)+E;return U===2047?X?NaN:G*(1/0):U===0?G*0.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005*X:G*Math.pow(2,U-1075)*(X+4503599627370496)}H.readDoubleLE=A.bind(null,YBD,0,4),H.readDoubleBE=A.bind(null,wBD,4,0)})();return H}function _BD(H,$,A){$[A]=H&255,$[A+1]=H>>>8&255,$[A+2]=H>>>16&255,$[A+3]=H>>>24}function CBD(H,$,A){$[A]=H>>>24,$[A+1]=H>>>16&255,$[A+2]=H>>>8&255,$[A+3]=H&255}function YBD(H,$){return(H[$]|H[$+1]<<8|H[$+2]<<16|H[$+3]<<24)>>>0}function wBD(H,$){return(H[$]<<24|H[$+1]<<16|H[$+2]<<8|H[$+3])>>>0}});var TBD=z((zvH,qPA)=>{(function(H,$){function A(L){return L.default||L}if(typeof define==="function"&&define.amd)define([],function(){var L={};return $(L),A(L)});else if(typeof zvH==="object"){if($(zvH),typeof qPA==="object")qPA.exports=A(zvH)}else(function(){var L={};$(L),H.Long=A(L)})()})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:zvH,function(H){Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var $=null;try{$=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function A(d,k,n){this.low=d|0,this.high=k|0,this.unsigned=!!n}A.prototype.__isLong__,Object.defineProperty(A.prototype,"__isLong__",{value:!0});function L(d){return(d&&d.__isLong__)===!0}function I(d){var k=Math.clz32(d&-d);return d?31-k:k}A.isLong=L;var D={},B={};function f(d,k){var n,GH,e;if(k){if(d>>>=0,e=0<=d&&d<256){if(GH=B[d],GH)return GH}if(n=M(d,0,!0),e)B[d]=n;return n}else{if(d|=0,e=-128<=d&&d<128){if(GH=D[d],GH)return GH}if(n=M(d,d<0?-1:0,!1),e)D[d]=n;return n}}A.fromInt=f;function E(d,k){if(isNaN(d))return k?Z:C;if(k){if(d<0)return Z;if(d>=W)return y}else{if(d<=-P)return g;if(d+1>=P)return u}if(d<0)return E(-d,k).neg();return M(d%Q|0,d/Q|0,k)}A.fromNumber=E;function M(d,k,n){return new A(d,k,n)}A.fromBits=M;var G=Math.pow;function U(d,k,n){if(d.length===0)throw Error("empty string");if(typeof k==="number")n=k,k=!1;else k=!!k;if(d==="NaN"||d==="Infinity"||d==="+Infinity"||d==="-Infinity")return k?Z:C;if(n=n||10,n<2||36<n)throw RangeError("radix");var GH;if((GH=d.indexOf("-"))>0)throw Error("interior hyphen");else if(GH===0)return U(d.substring(1),k,n).neg();var e=E(G(n,8)),BH=C;for(var VH=0;VH<d.length;VH+=8){var wH=Math.min(8,d.length-VH),WH=parseInt(d.substring(VH,VH+wH),n);if(wH<8){var qH=E(G(n,wH));BH=BH.mul(qH).add(E(WH))}else BH=BH.mul(e),BH=BH.add(E(WH))}return BH.unsigned=k,BH}A.fromString=U;function X(d,k){if(typeof d==="number")return E(d,k);if(typeof d==="string")return U(d,k);return M(d.low,d.high,typeof k==="boolean"?k:d.unsigned)}A.fromValue=X;var J=65536,F=16777216,Q=J*J,W=Q*Q,P=W/2,Y=f(F),C=f(0);A.ZERO=C;var Z=f(0,!0);A.UZERO=Z;var q=f(1);A.ONE=q;var O=f(1,!0);A.UONE=O;var j=f(-1);A.NEG_ONE=j;var u=M(-1,2147483647,!1);A.MAX_VALUE=u;var y=M(-1,-1,!0);A.MAX_UNSIGNED_VALUE=y;var g=M(0,-2147483648,!1);A.MIN_VALUE=g;var v=A.prototype;if(v.toInt=function(){return this.unsigned?this.low>>>0:this.low},v.toNumber=function(){if(this.unsigned)return(this.high>>>0)*Q+(this.low>>>0);return this.high*Q+(this.low>>>0)},v.toString=function(k){if(k=k||10,k<2||36<k)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(g)){var n=E(k),GH=this.div(n),e=GH.mul(n).sub(this);return GH.toString(k)+e.toInt().toString(k)}else return"-"+this.neg().toString(k);var BH=E(G(k,6),this.unsigned),VH=this,wH="";while(!0){var WH=VH.div(BH),qH=VH.sub(WH.mul(BH)).toInt()>>>0,s=qH.toString(k);if(VH=WH,VH.isZero())return s+wH;else{while(s.length<6)s="0"+s;wH=""+s+wH}}},v.getHighBits=function(){return this.high},v.getHighBitsUnsigned=function(){return this.high>>>0},v.getLowBits=function(){return this.low},v.getLowBitsUnsigned=function(){return this.low>>>0},v.getNumBitsAbs=function(){if(this.isNegative())return this.eq(g)?64:this.neg().getNumBitsAbs();var k=this.high!=0?this.high:this.low;for(var n=31;n>0;n--)if((k&1<<n)!=0)break;return this.high!=0?n+33:n+1},v.isSafeInteger=function(){var k=this.high>>21;if(!k)return!0;if(this.unsigned)return!1;return k===-1&&!(this.low===0&&this.high===-2097152)},v.isZero=function(){return this.high===0&&this.low===0},v.eqz=v.isZero,v.isNegative=function(){return!this.unsigned&&this.high<0},v.isPositive=function(){return this.unsigned||this.high>=0},v.isOdd=function(){return(this.low&1)===1},v.isEven=function(){return(this.low&1)===0},v.equals=function(k){if(!L(k))k=X(k);if(this.unsigned!==k.unsigned&&this.high>>>31===1&&k.high>>>31===1)return!1;return this.high===k.high&&this.low===k.low},v.eq=v.equals,v.notEquals=function(k){return!this.eq(k)},v.neq=v.notEquals,v.ne=v.notEquals,v.lessThan=function(k){return this.comp(k)<0},v.lt=v.lessThan,v.lessThanOrEqual=function(k){return this.comp(k)<=0},v.lte=v.lessThanOrEqual,v.le=v.lessThanOrEqual,v.greaterThan=function(k){return this.comp(k)>0},v.gt=v.greaterThan,v.greaterThanOrEqual=function(k){return this.comp(k)>=0},v.gte=v.greaterThanOrEqual,v.ge=v.greaterThanOrEqual,v.compare=function(k){if(!L(k))k=X(k);if(this.eq(k))return 0;var n=this.isNegative(),GH=k.isNegative();if(n&&!GH)return-1;if(!n&&GH)return 1;if(!this.unsigned)return this.sub(k).isNegative()?-1:1;return k.high>>>0>this.high>>>0||k.high===this.high&&k.low>>>0>this.low>>>0?-1:1},v.comp=v.compare,v.negate=function(){if(!this.unsigned&&this.eq(g))return g;return this.not().add(q)},v.neg=v.negate,v.add=function(k){if(!L(k))k=X(k);var n=this.high>>>16,GH=this.high&65535,e=this.low>>>16,BH=this.low&65535,VH=k.high>>>16,wH=k.high&65535,WH=k.low>>>16,qH=k.low&65535,s=0,IH=0,FH=0,EH=0;return EH+=BH+qH,FH+=EH>>>16,EH&=65535,FH+=e+WH,IH+=FH>>>16,FH&=65535,IH+=GH+wH,s+=IH>>>16,IH&=65535,s+=n+VH,s&=65535,M(FH<<16|EH,s<<16|IH,this.unsigned)},v.subtract=function(k){if(!L(k))k=X(k);return this.add(k.neg())},v.sub=v.subtract,v.multiply=function(k){if(this.isZero())return this;if(!L(k))k=X(k);if($){var n=$.mul(this.low,this.high,k.low,k.high);return M(n,$.get_high(),this.unsigned)}if(k.isZero())return this.unsigned?Z:C;if(this.eq(g))return k.isOdd()?g:C;if(k.eq(g))return this.isOdd()?g:C;if(this.isNegative())if(k.isNegative())return this.neg().mul(k.neg());else return this.neg().mul(k).neg();else if(k.isNegative())return this.mul(k.neg()).neg();if(this.lt(Y)&&k.lt(Y))return E(this.toNumber()*k.toNumber(),this.unsigned);var GH=this.high>>>16,e=this.high&65535,BH=this.low>>>16,VH=this.low&65535,wH=k.high>>>16,WH=k.high&65535,qH=k.low>>>16,s=k.low&65535,IH=0,FH=0,EH=0,YH=0;return YH+=VH*s,EH+=YH>>>16,YH&=65535,EH+=BH*s,FH+=EH>>>16,EH&=65535,EH+=VH*qH,FH+=EH>>>16,EH&=65535,FH+=e*s,IH+=FH>>>16,FH&=65535,FH+=BH*qH,IH+=FH>>>16,FH&=65535,FH+=VH*WH,IH+=FH>>>16,FH&=65535,IH+=GH*s+e*qH+BH*WH+VH*wH,IH&=65535,M(EH<<16|YH,IH<<16|FH,this.unsigned)},v.mul=v.multiply,v.divide=function(k){if(!L(k))k=X(k);if(k.isZero())throw Error("division by zero");if($){if(!this.unsigned&&this.high===-2147483648&&k.low===-1&&k.high===-1)return this;var n=(this.unsigned?$.div_u:$.div_s)(this.low,this.high,k.low,k.high);return M(n,$.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Z:C;var GH,e,BH;if(!this.unsigned){if(this.eq(g))if(k.eq(q)||k.eq(j))return g;else if(k.eq(g))return q;else{var VH=this.shr(1);if(GH=VH.div(k).shl(1),GH.eq(C))return k.isNegative()?q:j;else return e=this.sub(k.mul(GH)),BH=GH.add(e.div(k)),BH}else if(k.eq(g))return this.unsigned?Z:C;if(this.isNegative()){if(k.isNegative())return this.neg().div(k.neg());return this.neg().div(k).neg()}else if(k.isNegative())return this.div(k.neg()).neg();BH=C}else{if(!k.unsigned)k=k.toUnsigned();if(k.gt(this))return Z;if(k.gt(this.shru(1)))return O;BH=Z}e=this;while(e.gte(k)){GH=Math.max(1,Math.floor(e.toNumber()/k.toNumber()));var wH=Math.ceil(Math.log(GH)/Math.LN2),WH=wH<=48?1:G(2,wH-48),qH=E(GH),s=qH.mul(k);while(s.isNegative()||s.gt(e))GH-=WH,qH=E(GH,this.unsigned),s=qH.mul(k);if(qH.isZero())qH=q;BH=BH.add(qH),e=e.sub(s)}return BH},v.div=v.divide,v.modulo=function(k){if(!L(k))k=X(k);if($){var n=(this.unsigned?$.rem_u:$.rem_s)(this.low,this.high,k.low,k.high);return M(n,$.get_high(),this.unsigned)}return this.sub(this.div(k).mul(k))},v.mod=v.modulo,v.rem=v.modulo,v.not=function(){return M(~this.low,~this.high,this.unsigned)},v.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},v.clz=v.countLeadingZeros,v.countTrailingZeros=function(){return this.low?I(this.low):I(this.high)+32},v.ctz=v.countTrailingZeros,v.and=function(k){if(!L(k))k=X(k);return M(this.low&k.low,this.high&k.high,this.unsigned)},v.or=function(k){if(!L(k))k=X(k);return M(this.low|k.low,this.high|k.high,this.unsigned)},v.xor=function(k){if(!L(k))k=X(k);return M(this.low^k.low,this.high^k.high,this.unsigned)},v.shiftLeft=function(k){if(L(k))k=k.toInt();if((k&=63)===0)return this;else if(k<32)return M(this.low<<k,this.high<<k|this.low>>>32-k,this.unsigned);else return M(0,this.low<<k-32,this.unsigned)},v.shl=v.shiftLeft,v.shiftRight=function(k){if(L(k))k=k.toInt();if((k&=63)===0)return this;else if(k<32)return M(this.low>>>k|this.high<<32-k,this.high>>k,this.unsigned);else return M(this.high>>k-32,this.high>=0?0:-1,this.unsigned)},v.shr=v.shiftRight,v.shiftRightUnsigned=function(k){if(L(k))k=k.toInt();if((k&=63)===0)return this;if(k<32)return M(this.low>>>k|this.high<<32-k,this.high>>>k,this.unsigned);if(k===32)return M(this.high,0,this.unsigned);return M(this.high>>>k-32,0,this.unsigned)},v.shru=v.shiftRightUnsigned,v.shr_u=v.shiftRightUnsigned,v.rotateLeft=function(k){var n;if(L(k))k=k.toInt();if((k&=63)===0)return this;if(k===32)return M(this.high,this.low,this.unsigned);if(k<32)return n=32-k,M(this.low<<k|this.high>>>n,this.high<<k|this.low>>>n,this.unsigned);return k-=32,n=32-k,M(this.high<<k|this.low>>>n,this.low<<k|this.high>>>n,this.unsigned)},v.rotl=v.rotateLeft,v.rotateRight=function(k){var n;if(L(k))k=k.toInt();if((k&=63)===0)return this;if(k===32)return M(this.high,this.low,this.unsigned);if(k<32)return n=32-k,M(this.high<<n|this.low>>>k,this.low<<n|this.high>>>k,this.unsigned);return k-=32,n=32-k,M(this.low<<n|this.high>>>k,this.high<<n|this.low>>>k,this.unsigned)},v.rotr=v.rotateRight,v.toSigned=function(){if(!this.unsigned)return this;return M(this.low,this.high,!1)},v.toUnsigned=function(){if(this.unsigned)return this;return M(this.low,this.high,!0)},v.toBytes=function(k){return k?this.toBytesLE():this.toBytesBE()},v.toBytesLE=function(){var k=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,k&255,k>>>8&255,k>>>16&255,k>>>24]},v.toBytesBE=function(){var k=this.high,n=this.low;return[k>>>24,k>>>16&255,k>>>8&255,k&255,n>>>24,n>>>16&255,n>>>8&255,n&255]},A.fromBytes=function(k,n,GH){return GH?A.fromBytesLE(k,n):A.fromBytesBE(k,n)},A.fromBytesLE=function(k,n){return new A(k[0]|k[1]<<8|k[2]<<16|k[3]<<24,k[4]|k[5]<<8|k[6]<<16|k[7]<<24,n)},A.fromBytesBE=function(k,n){return new A(k[4]<<24|k[5]<<16|k[6]<<8|k[7],k[0]<<24|k[1]<<16|k[2]<<8|k[3],n)},typeof BigInt==="function")A.fromBigInt=function(k,n){var GH=Number(BigInt.asIntN(32,k)),e=Number(BigInt.asIntN(32,k>>BigInt(32)));return M(GH,e,n)},A.fromValue=function(k,n){if(typeof k==="bigint")return A.fromBigInt(k,n);return X(k,n)},v.toBigInt=function(){var k=BigInt(this.low>>>0),n=BigInt(this.unsigned?this.high>>>0:this.high);return n<<BigInt(32)|k};var p=H.default=A})});var zPA=z((zBD,TPA)=>{TPA.exports=yb9;function yb9(moduleName){try{var mod=moduleName==="long"?TBD():moduleName==="buffer"?require("buffer"):moduleName==="fs"?require("fs"):eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(H){}return null}});var OBD=z((NBD)=>{var NPA=NBD;NPA.length=function($){var A=0,L=0;for(var I=0;I<$.length;++I)if(L=$.charCodeAt(I),L<128)A+=1;else if(L<2048)A+=2;else if((L&64512)===55296&&($.charCodeAt(I+1)&64512)===56320)++I,A+=4;else A+=3;return A};NPA.read=function($,A,L){var I=L-A;if(I<1)return"";var D=null,B=[],f=0,E;while(A<L){if(E=$[A++],E<128)B[f++]=E;else if(E>191&&E<224)B[f++]=(E&31)<<6|$[A++]&63;else if(E>239&&E<365)E=((E&7)<<18|($[A++]&63)<<12|($[A++]&63)<<6|$[A++]&63)-65536,B[f++]=55296+(E>>10),B[f++]=56320+(E&1023);else B[f++]=(E&15)<<12|($[A++]&63)<<6|$[A++]&63;if(f>8191)(D||(D=[])).push(String.fromCharCode.apply(String,B)),f=0}if(D){if(f)D.push(String.fromCharCode.apply(String,B.slice(0,f)));return D.join("")}return String.fromCharCode.apply(String,B.slice(0,f))};NPA.write=function($,A,L){var I=L,D,B;for(var f=0;f<$.length;++f)if(D=$.charCodeAt(f),D<128)A[L++]=D;else if(D<2048)A[L++]=D>>6|192,A[L++]=D&63|128;else if((D&64512)===55296&&((B=$.charCodeAt(f+1))&64512)===56320)D=65536+((D&1023)<<10)+(B&1023),++f,A[L++]=D>>18|240,A[L++]=D>>12&63|128,A[L++]=D>>6&63|128,A[L++]=D&63|128;else A[L++]=D>>12|224,A[L++]=D>>6&63|128,A[L++]=D&63|128;return L-I}});var SBD=z((NYE,xBD)=>{xBD.exports=vb9;function vb9(H,$,A){var L=A||8192,I=L>>>1,D=null,B=L;return function(E){if(E<1||E>I)return H(E);if(B+E>L)D=H(L),B=0;var M=$.call(D,B,B+=E);if(B&7)B=(B|7)+1;return M}}});var RBD=z((OYE,jBD)=>{jBD.exports=pQ;var NvH=ov();function pQ(H,$){this.lo=H>>>0,this.hi=$>>>0}var $0H=pQ.zero=new pQ(0,0);$0H.toNumber=function(){return 0};$0H.zzEncode=$0H.zzDecode=function(){return this};$0H.length=function(){return 1};var hb9=pQ.zeroHash="\x00\x00\x00\x00\x00\x00\x00\x00";pQ.fromNumber=function($){if($===0)return $0H;var A=$<0;if(A)$=-$;var L=$>>>0,I=($-L)/4294967296>>>0;if(A){if(I=~I>>>0,L=~L>>>0,++L>4294967295){if(L=0,++I>4294967295)I=0}}return new pQ(L,I)};pQ.from=function($){if(typeof $==="number")return pQ.fromNumber($);if(NvH.isString($))if(NvH.Long)$=NvH.Long.fromString($);else return pQ.fromNumber(parseInt($,10));return $.low||$.high?new pQ($.low>>>0,$.high>>>0):$0H};pQ.prototype.toNumber=function($){if(!$&&this.hi>>>31){var A=~this.lo+1>>>0,L=~this.hi>>>0;if(!A)L=L+1>>>0;return-(A+L*4294967296)}return this.lo+this.hi*4294967296};pQ.prototype.toLong=function($){return NvH.Long?new NvH.Long(this.lo|0,this.hi|0,Boolean($)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean($)}};var Go=String.prototype.charCodeAt;pQ.fromHash=function($){if($===hb9)return $0H;return new pQ((Go.call($,0)|Go.call($,1)<<8|Go.call($,2)<<16|Go.call($,3)<<24)>>>0,(Go.call($,4)|Go.call($,5)<<8|Go.call($,6)<<16|Go.call($,7)<<24)>>>0)};pQ.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};pQ.prototype.zzEncode=function(){var $=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^$)>>>0,this.lo=(this.lo<<1^$)>>>0,this};pQ.prototype.zzDecode=function(){var $=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^$)>>>0,this.hi=(this.hi>>>1^$)>>>0,this};pQ.prototype.length=function(){var $=this.lo,A=(this.lo>>>28|this.hi<<4)>>>0,L=this.hi>>>24;return L===0?A===0?$<16384?$<128?1:2:$<2097152?3:4:A<16384?A<128?5:6:A<2097152?7:8:L<128?9:10}});var ov=z((OPA)=>{var xB=OPA;xB.asPromise=ZPA();xB.base64=QBD();xB.EventEmitter=VBD();xB.float=qBD();xB.inquire=zPA();xB.utf8=OBD();xB.pool=SBD();xB.LongBits=RBD();xB.isNode=Boolean(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node);xB.global=xB.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||OPA;xB.emptyArray=Object.freeze?Object.freeze([]):[];xB.emptyObject=Object.freeze?Object.freeze({}):{};xB.isInteger=Number.isInteger||function($){return typeof $==="number"&&isFinite($)&&Math.floor($)===$};xB.isString=function($){return typeof $==="string"||$ instanceof String};xB.isObject=function($){return $&&typeof $==="object"};xB.isset=xB.isSet=function($,A){var L=$[A];if(L!=null&&$.hasOwnProperty(A))return typeof L!=="object"||(Array.isArray(L)?L.length:Object.keys(L).length)>0;return!1};xB.Buffer=function(){try{var H=xB.inquire("buffer").Buffer;return H.prototype.utf8Write?H:null}catch($){return null}}();xB._Buffer_from=null;xB._Buffer_allocUnsafe=null;xB.newBuffer=function($){return typeof $==="number"?xB.Buffer?xB._Buffer_allocUnsafe($):new xB.Array($):xB.Buffer?xB._Buffer_from($):typeof Uint8Array>"u"?$:new Uint8Array($)};xB.Array=typeof Uint8Array<"u"?Uint8Array:Array;xB.Long=xB.global.dcodeIO&&xB.global.dcodeIO.Long||xB.global.Long||xB.inquire("long");xB.key2Re=/^true|false|0|1$/;xB.key32Re=/^-?(?:0|[1-9][0-9]*)$/;xB.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;xB.longToHash=function($){return $?xB.LongBits.from($).toHash():xB.LongBits.zeroHash};xB.longFromHash=function($,A){var L=xB.LongBits.fromHash($);if(xB.Long)return xB.Long.fromBits(L.lo,L.hi,A);return L.toNumber(Boolean(A))};function yBD(H,$,A){for(var L=Object.keys($),I=0;I<L.length;++I)if(H[L[I]]===void 0||!A)H[L[I]]=$[L[I]];return H}xB.merge=yBD;xB.lcFirst=function($){return $.charAt(0).toLowerCase()+$.substring(1)};function vBD(H){function $(A,L){if(!(this instanceof $))return new $(A,L);if(Object.defineProperty(this,"message",{get:function(){return A}}),Error.captureStackTrace)Error.captureStackTrace(this,$);else Object.defineProperty(this,"stack",{value:Error().stack||""});if(L)yBD(this,L)}return $.prototype=Object.create(Error.prototype,{constructor:{value:$,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return H},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),$}xB.newError=vBD;xB.ProtocolError=vBD("ProtocolError");xB.oneOfGetter=function($){var A={};for(var L=0;L<$.length;++L)A[$[L]]=1;return function(){for(var I=Object.keys(this),D=I.length-1;D>-1;--D)if(A[I[D]]===1&&this[I[D]]!==void 0&&this[I[D]]!==null)return I[D]}};xB.oneOfSetter=function($){return function(A){for(var L=0;L<$.length;++L)if($[L]!==A)delete this[$[L]]}};xB.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};xB._configure=function(){var H=xB.Buffer;if(!H){xB._Buffer_from=xB._Buffer_allocUnsafe=null;return}xB._Buffer_from=H.from!==Uint8Array.from&&H.from||function(A,L){return new H(A,L)},xB._Buffer_allocUnsafe=H.allocUnsafe||function(A){return new H(A)}}});var m7$=z((SYE,uBD)=>{uBD.exports=Sf;var pT=ov(),xPA,g7$=pT.LongBits,hBD=pT.base64,bBD=pT.utf8;function OvH(H,$,A){this.fn=H,this.len=$,this.next=void 0,this.val=A}function jPA(){}function bb9(H){this.head=H.head,this.tail=H.tail,this.len=H.len,this.next=H.states}function Sf(){this.len=0,this.head=new OvH(jPA,0,0),this.tail=this.head,this.states=null}var kBD=function(){return pT.Buffer?function(){return(Sf.create=function(){return new xPA})()}:function(){return new Sf}};Sf.create=kBD();Sf.alloc=function($){return new pT.Array($)};if(pT.Array!==Array)Sf.alloc=pT.pool(Sf.alloc,pT.Array.prototype.subarray);Sf.prototype._push=function($,A,L){return this.tail=this.tail.next=new OvH($,A,L),this.len+=A,this};function RPA(H,$,A){$[A]=H&255}function kb9(H,$,A){while(H>127)$[A++]=H&127|128,H>>>=7;$[A]=H}function yPA(H,$){this.len=H,this.next=void 0,this.val=$}yPA.prototype=Object.create(OvH.prototype);yPA.prototype.fn=kb9;Sf.prototype.uint32=function($){return this.len+=(this.tail=this.tail.next=new yPA(($=$>>>0)<128?1:$<16384?2:$<2097152?3:$<268435456?4:5,$)).len,this};Sf.prototype.int32=function($){return $<0?this._push(vPA,10,g7$.fromNumber($)):this.uint32($)};Sf.prototype.sint32=function($){return this.uint32(($<<1^$>>31)>>>0)};function vPA(H,$,A){while(H.hi)$[A++]=H.lo&127|128,H.lo=(H.lo>>>7|H.hi<<25)>>>0,H.hi>>>=7;while(H.lo>127)$[A++]=H.lo&127|128,H.lo=H.lo>>>7;$[A++]=H.lo}Sf.prototype.uint64=function($){var A=g7$.from($);return this._push(vPA,A.length(),A)};Sf.prototype.int64=Sf.prototype.uint64;Sf.prototype.sint64=function($){var A=g7$.from($).zzEncode();return this._push(vPA,A.length(),A)};Sf.prototype.bool=function($){return this._push(RPA,1,$?1:0)};function SPA(H,$,A){$[A]=H&255,$[A+1]=H>>>8&255,$[A+2]=H>>>16&255,$[A+3]=H>>>24}Sf.prototype.fixed32=function($){return this._push(SPA,4,$>>>0)};Sf.prototype.sfixed32=Sf.prototype.fixed32;Sf.prototype.fixed64=function($){var A=g7$.from($);return this._push(SPA,4,A.lo)._push(SPA,4,A.hi)};Sf.prototype.sfixed64=Sf.prototype.fixed64;Sf.prototype.float=function($){return this._push(pT.float.writeFloatLE,4,$)};Sf.prototype.double=function($){return this._push(pT.float.writeDoubleLE,8,$)};var ub9=pT.Array.prototype.set?function($,A,L){A.set($,L)}:function($,A,L){for(var I=0;I<$.length;++I)A[L+I]=$[I]};Sf.prototype.bytes=function($){var A=$.length>>>0;if(!A)return this._push(RPA,1,0);if(pT.isString($)){var L=Sf.alloc(A=hBD.length($));hBD.decode($,L,0),$=L}return this.uint32(A)._push(ub9,A,$)};Sf.prototype.string=function($){var A=bBD.length($);return A?this.uint32(A)._push(bBD.write,A,$):this._push(RPA,1,0)};Sf.prototype.fork=function(){return this.states=new bb9(this),this.head=this.tail=new OvH(jPA,0,0),this.len=0,this};Sf.prototype.reset=function(){if(this.states)this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next;else this.head=this.tail=new OvH(jPA,0,0),this.len=0;return this};Sf.prototype.ldelim=function(){var $=this.head,A=this.tail,L=this.len;if(this.reset().uint32(L),L)this.tail.next=$.next,this.tail=A,this.len+=L;return this};Sf.prototype.finish=function(){var $=this.head.next,A=this.constructor.alloc(this.len),L=0;while($)$.fn($.val,A,L),L+=$.len,$=$.next;return A};Sf._configure=function(H){xPA=H,Sf.create=kBD(),xPA._configure()}});var pBD=z((jYE,mBD)=>{mBD.exports=tv;var gBD=m7$();(tv.prototype=Object.create(gBD.prototype)).constructor=tv;var Uo=ov();function tv(){gBD.call(this)}tv._configure=function(){tv.alloc=Uo._Buffer_allocUnsafe,tv.writeBytesBuffer=Uo.Buffer&&Uo.Buffer.prototype instanceof Uint8Array&&Uo.Buffer.prototype.set.name==="set"?function($,A,L){A.set($,L)}:function($,A,L){if($.copy)$.copy(A,L,0,$.length);else for(var I=0;I<$.length;)A[L++]=$[I++]}};tv.prototype.bytes=function($){if(Uo.isString($))$=Uo._Buffer_from($,"base64");var A=$.length>>>0;if(this.uint32(A),A)this._push(tv.writeBytesBuffer,A,$);return this};function gb9(H,$,A){if(H.length<40)Uo.utf8.write(H,$,A);else if($.utf8Write)$.utf8Write(H,A);else $.write(H,A)}tv.prototype.string=function($){var A=Uo.Buffer.byteLength($);if(this.uint32(A),A)this._push(gb9,A,$);return this};tv._configure()});var d7$=z((RYE,nBD)=>{nBD.exports=QJ;var ox=ov(),bPA,lBD=ox.LongBits,mb9=ox.utf8;function tx(H,$){return RangeError("index out of range: "+H.pos+" + "+($||1)+" > "+H.len)}function QJ(H){this.buf=H,this.pos=0,this.len=H.length}var dBD=typeof Uint8Array<"u"?function($){if($ instanceof Uint8Array||Array.isArray($))return new QJ($);throw Error("illegal buffer")}:function($){if(Array.isArray($))return new QJ($);throw Error("illegal buffer")},iBD=function(){return ox.Buffer?function(A){return(QJ.create=function(I){return ox.Buffer.isBuffer(I)?new bPA(I):dBD(I)})(A)}:dBD};QJ.create=iBD();QJ.prototype._slice=ox.Array.prototype.subarray||ox.Array.prototype.slice;QJ.prototype.uint32=function(){var $=4294967295;return function(){if($=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128)return $;if($=($|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)return $;if($=($|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)return $;if($=($|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)return $;if($=($|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128)return $;if((this.pos+=5)>this.len)throw this.pos=this.len,tx(this,10);return $}}();QJ.prototype.int32=function(){return this.uint32()|0};QJ.prototype.sint32=function(){var $=this.uint32();return $>>>1^-($&1)|0};function hPA(){var H=new lBD(0,0),$=0;if(this.len-this.pos>4){for(;$<4;++$)if(H.lo=(H.lo|(this.buf[this.pos]&127)<<$*7)>>>0,this.buf[this.pos++]<128)return H;if(H.lo=(H.lo|(this.buf[this.pos]&127)<<28)>>>0,H.hi=(H.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return H;$=0}else{for(;$<3;++$){if(this.pos>=this.len)throw tx(this);if(H.lo=(H.lo|(this.buf[this.pos]&127)<<$*7)>>>0,this.buf[this.pos++]<128)return H}return H.lo=(H.lo|(this.buf[this.pos++]&127)<<$*7)>>>0,H}if(this.len-this.pos>4){for(;$<5;++$)if(H.hi=(H.hi|(this.buf[this.pos]&127)<<$*7+3)>>>0,this.buf[this.pos++]<128)return H}else for(;$<5;++$){if(this.pos>=this.len)throw tx(this);if(H.hi=(H.hi|(this.buf[this.pos]&127)<<$*7+3)>>>0,this.buf[this.pos++]<128)return H}throw Error("invalid varint encoding")}QJ.prototype.bool=function(){return this.uint32()!==0};function p7$(H,$){return(H[$-4]|H[$-3]<<8|H[$-2]<<16|H[$-1]<<24)>>>0}QJ.prototype.fixed32=function(){if(this.pos+4>this.len)throw tx(this,4);return p7$(this.buf,this.pos+=4)};QJ.prototype.sfixed32=function(){if(this.pos+4>this.len)throw tx(this,4);return p7$(this.buf,this.pos+=4)|0};function cBD(){if(this.pos+8>this.len)throw tx(this,8);return new lBD(p7$(this.buf,this.pos+=4),p7$(this.buf,this.pos+=4))}QJ.prototype.float=function(){if(this.pos+4>this.len)throw tx(this,4);var $=ox.float.readFloatLE(this.buf,this.pos);return this.pos+=4,$};QJ.prototype.double=function(){if(this.pos+8>this.len)throw tx(this,4);var $=ox.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,$};QJ.prototype.bytes=function(){var $=this.uint32(),A=this.pos,L=this.pos+$;if(L>this.len)throw tx(this,$);if(this.pos+=$,Array.isArray(this.buf))return this.buf.slice(A,L);if(A===L){var I=ox.Buffer;return I?I.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,A,L)};QJ.prototype.string=function(){var $=this.bytes();return mb9.read($,0,$.length)};QJ.prototype.skip=function($){if(typeof $==="number"){if(this.pos+$>this.len)throw tx(this,$);this.pos+=$}else do if(this.pos>=this.len)throw tx(this);while(this.buf[this.pos++]&128);return this};QJ.prototype.skipType=function(H){switch(H){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:while((H=this.uint32()&7)!==4)this.skipType(H);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+H+" at offset "+this.pos)}return this};QJ._configure=function(H){bPA=H,QJ.create=iBD(),bPA._configure();var $=ox.Long?"toLong":"toNumber";ox.merge(QJ.prototype,{int64:function(){return hPA.call(this)[$](!1)},uint64:function(){return hPA.call(this)[$](!0)},sint64:function(){return hPA.call(this).zzDecode()[$](!1)},fixed64:function(){return cBD.call(this)[$](!0)},sfixed64:function(){return cBD.call(this)[$](!1)}})}});var tBD=z((yYE,oBD)=>{oBD.exports=A0H;var aBD=d7$();(A0H.prototype=Object.create(aBD.prototype)).constructor=A0H;var rBD=ov();function A0H(H){aBD.call(this,H)}A0H._configure=function(){if(rBD.Buffer)A0H.prototype._slice=rBD.Buffer.prototype.slice};A0H.prototype.string=function(){var $=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+$,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+$,this.len))};A0H._configure()});var eBD=z((vYE,sBD)=>{sBD.exports=xvH;var kPA=ov();(xvH.prototype=Object.create(kPA.EventEmitter.prototype)).constructor=xvH;function xvH(H,$,A){if(typeof H!=="function")throw TypeError("rpcImpl must be a function");kPA.EventEmitter.call(this),this.rpcImpl=H,this.requestDelimited=Boolean($),this.responseDelimited=Boolean(A)}xvH.prototype.rpcCall=function H($,A,L,I,D){if(!I)throw TypeError("request must be specified");var B=this;if(!D)return kPA.asPromise(H,B,$,A,L,I);if(!B.rpcImpl){setTimeout(function(){D(Error("already ended"))},0);return}try{return B.rpcImpl($,A[B.requestDelimited?"encodeDelimited":"encode"](I).finish(),function(E,M){if(E)return B.emit("error",E,$),D(E);if(M===null){B.end(!0);return}if(!(M instanceof L))try{M=L[B.responseDelimited?"decodeDelimited":"decode"](M)}catch(G){return B.emit("error",G,$),D(G)}return B.emit("data",M,$),D(null,M)})}catch(f){B.emit("error",f,$),setTimeout(function(){D(f)},0);return}};xvH.prototype.end=function($){if(this.rpcImpl){if(!$)this.rpcImpl(null,null,null);this.rpcImpl=null,this.emit("end").off()}return this}});var uPA=z((H0D)=>{var pb9=H0D;pb9.Service=eBD()});var gPA=z((bYE,$0D)=>{$0D.exports={}});var mPA=z((L0D)=>{var hC=L0D;hC.build="minimal";hC.Writer=m7$();hC.BufferWriter=pBD();hC.Reader=d7$();hC.BufferReader=tBD();hC.util=ov();hC.rpc=uPA();hC.roots=gPA();hC.configure=A0D;function A0D(){hC.util._configure(),hC.Writer._configure(hC.BufferWriter),hC.Reader._configure(hC.BufferReader)}A0D()});var D0D=z((uYE,I0D)=>{I0D.exports=mPA()});var c7$=z((B0D,f0D)=>{Object.defineProperty(B0D,"__esModule",{value:!0});var A0=D0D(),$A=A0.Reader,s9=A0.Writer,SH=A0.util,NH=A0.roots.default||(A0.roots.default={});NH.opentelemetry=function(){var H={};return H.proto=function(){var $={};return $.common=function(){var A={};return A.v1=function(){var L={};return L.AnyValue=function(){function I(B){if(B){for(var f=Object.keys(B),E=0;E<f.length;++E)if(B[f[E]]!=null)this[f[E]]=B[f[E]]}}I.prototype.stringValue=null,I.prototype.boolValue=null,I.prototype.intValue=null,I.prototype.doubleValue=null,I.prototype.arrayValue=null,I.prototype.kvlistValue=null,I.prototype.bytesValue=null;var D;return Object.defineProperty(I.prototype,"value",{get:SH.oneOfGetter(D=["stringValue","boolValue","intValue","doubleValue","arrayValue","kvlistValue","bytesValue"]),set:SH.oneOfSetter(D)}),I.create=function(f){return new I(f)},I.encode=function(f,E){if(!E)E=s9.create();if(f.stringValue!=null&&Object.hasOwnProperty.call(f,"stringValue"))E.uint32(10).string(f.stringValue);if(f.boolValue!=null&&Object.hasOwnProperty.call(f,"boolValue"))E.uint32(16).bool(f.boolValue);if(f.intValue!=null&&Object.hasOwnProperty.call(f,"intValue"))E.uint32(24).int64(f.intValue);if(f.doubleValue!=null&&Object.hasOwnProperty.call(f,"doubleValue"))E.uint32(33).double(f.doubleValue);if(f.arrayValue!=null&&Object.hasOwnProperty.call(f,"arrayValue"))NH.opentelemetry.proto.common.v1.ArrayValue.encode(f.arrayValue,E.uint32(42).fork()).ldelim();if(f.kvlistValue!=null&&Object.hasOwnProperty.call(f,"kvlistValue"))NH.opentelemetry.proto.common.v1.KeyValueList.encode(f.kvlistValue,E.uint32(50).fork()).ldelim();if(f.bytesValue!=null&&Object.hasOwnProperty.call(f,"bytesValue"))E.uint32(58).bytes(f.bytesValue);return E},I.encodeDelimited=function(f,E){return this.encode(f,E).ldelim()},I.decode=function(f,E,M){if(!(f instanceof $A))f=$A.create(f);var G=E===void 0?f.len:f.pos+E,U=new NH.opentelemetry.proto.common.v1.AnyValue;while(f.pos<G){var X=f.uint32();if(X===M)break;switch(X>>>3){case 1:{U.stringValue=f.string();break}case 2:{U.boolValue=f.bool();break}case 3:{U.intValue=f.int64();break}case 4:{U.doubleValue=f.double();break}case 5:{U.arrayValue=NH.opentelemetry.proto.common.v1.ArrayValue.decode(f,f.uint32());break}case 6:{U.kvlistValue=NH.opentelemetry.proto.common.v1.KeyValueList.decode(f,f.uint32());break}case 7:{U.bytesValue=f.bytes();break}default:f.skipType(X&7);break}}return U},I.decodeDelimited=function(f){if(!(f instanceof $A))f=new $A(f);return this.decode(f,f.uint32())},I.verify=function(f){if(typeof f!=="object"||f===null)return"object expected";var E={};if(f.stringValue!=null&&f.hasOwnProperty("stringValue")){if(E.value=1,!SH.isString(f.stringValue))return"stringValue: string expected"}if(f.boolValue!=null&&f.hasOwnProperty("boolValue")){if(E.value===1)return"value: multiple values";if(E.value=1,typeof f.boolValue!=="boolean")return"boolValue: boolean expected"}if(f.intValue!=null&&f.hasOwnProperty("intValue")){if(E.value===1)return"value: multiple values";if(E.value=1,!SH.isInteger(f.intValue)&&!(f.intValue&&SH.isInteger(f.intValue.low)&&SH.isInteger(f.intValue.high)))return"intValue: integer|Long expected"}if(f.doubleValue!=null&&f.hasOwnProperty("doubleValue")){if(E.value===1)return"value: multiple values";if(E.value=1,typeof f.doubleValue!=="number")return"doubleValue: number expected"}if(f.arrayValue!=null&&f.hasOwnProperty("arrayValue")){if(E.value===1)return"value: multiple values";E.value=1;{var M=NH.opentelemetry.proto.common.v1.ArrayValue.verify(f.arrayValue);if(M)return"arrayValue."+M}}if(f.kvlistValue!=null&&f.hasOwnProperty("kvlistValue")){if(E.value===1)return"value: multiple values";E.value=1;{var M=NH.opentelemetry.proto.common.v1.KeyValueList.verify(f.kvlistValue);if(M)return"kvlistValue."+M}}if(f.bytesValue!=null&&f.hasOwnProperty("bytesValue")){if(E.value===1)return"value: multiple values";if(E.value=1,!(f.bytesValue&&typeof f.bytesValue.length==="number"||SH.isString(f.bytesValue)))return"bytesValue: buffer expected"}return null},I.fromObject=function(f){if(f instanceof NH.opentelemetry.proto.common.v1.AnyValue)return f;var E=new NH.opentelemetry.proto.common.v1.AnyValue;if(f.stringValue!=null)E.stringValue=String(f.stringValue);if(f.boolValue!=null)E.boolValue=Boolean(f.boolValue);if(f.intValue!=null){if(SH.Long)(E.intValue=SH.Long.fromValue(f.intValue)).unsigned=!1;else if(typeof f.intValue==="string")E.intValue=parseInt(f.intValue,10);else if(typeof f.intValue==="number")E.intValue=f.intValue;else if(typeof f.intValue==="object")E.intValue=new SH.LongBits(f.intValue.low>>>0,f.intValue.high>>>0).toNumber()}if(f.doubleValue!=null)E.doubleValue=Number(f.doubleValue);if(f.arrayValue!=null){if(typeof f.arrayValue!=="object")throw TypeError(".opentelemetry.proto.common.v1.AnyValue.arrayValue: object expected");E.arrayValue=NH.opentelemetry.proto.common.v1.ArrayValue.fromObject(f.arrayValue)}if(f.kvlistValue!=null){if(typeof f.kvlistValue!=="object")throw TypeError(".opentelemetry.proto.common.v1.AnyValue.kvlistValue: object expected");E.kvlistValue=NH.opentelemetry.proto.common.v1.KeyValueList.fromObject(f.kvlistValue)}if(f.bytesValue!=null){if(typeof f.bytesValue==="string")SH.base64.decode(f.bytesValue,E.bytesValue=SH.newBuffer(SH.base64.length(f.bytesValue)),0);else if(f.bytesValue.length>=0)E.bytesValue=f.bytesValue}return E},I.toObject=function(f,E){if(!E)E={};var M={};if(f.stringValue!=null&&f.hasOwnProperty("stringValue")){if(M.stringValue=f.stringValue,E.oneofs)M.value="stringValue"}if(f.boolValue!=null&&f.hasOwnProperty("boolValue")){if(M.boolValue=f.boolValue,E.oneofs)M.value="boolValue"}if(f.intValue!=null&&f.hasOwnProperty("intValue")){if(typeof f.intValue==="number")M.intValue=E.longs===String?String(f.intValue):f.intValue;else M.intValue=E.longs===String?SH.Long.prototype.toString.call(f.intValue):E.longs===Number?new SH.LongBits(f.intValue.low>>>0,f.intValue.high>>>0).toNumber():f.intValue;if(E.oneofs)M.value="intValue"}if(f.doubleValue!=null&&f.hasOwnProperty("doubleValue")){if(M.doubleValue=E.json&&!isFinite(f.doubleValue)?String(f.doubleValue):f.doubleValue,E.oneofs)M.value="doubleValue"}if(f.arrayValue!=null&&f.hasOwnProperty("arrayValue")){if(M.arrayValue=NH.opentelemetry.proto.common.v1.ArrayValue.toObject(f.arrayValue,E),E.oneofs)M.value="arrayValue"}if(f.kvlistValue!=null&&f.hasOwnProperty("kvlistValue")){if(M.kvlistValue=NH.opentelemetry.proto.common.v1.KeyValueList.toObject(f.kvlistValue,E),E.oneofs)M.value="kvlistValue"}if(f.bytesValue!=null&&f.hasOwnProperty("bytesValue")){if(M.bytesValue=E.bytes===String?SH.base64.encode(f.bytesValue,0,f.bytesValue.length):E.bytes===Array?Array.prototype.slice.call(f.bytesValue):f.bytesValue,E.oneofs)M.value="bytesValue"}return M},I.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},I.getTypeUrl=function(f){if(f===void 0)f="type.googleapis.com";return f+"/opentelemetry.proto.common.v1.AnyValue"},I}(),L.ArrayValue=function(){function I(D){if(this.values=[],D){for(var B=Object.keys(D),f=0;f<B.length;++f)if(D[B[f]]!=null)this[B[f]]=D[B[f]]}}return I.prototype.values=SH.emptyArray,I.create=function(B){return new I(B)},I.encode=function(B,f){if(!f)f=s9.create();if(B.values!=null&&B.values.length)for(var E=0;E<B.values.length;++E)NH.opentelemetry.proto.common.v1.AnyValue.encode(B.values[E],f.uint32(10).fork()).ldelim();return f},I.encodeDelimited=function(B,f){return this.encode(B,f).ldelim()},I.decode=function(B,f,E){if(!(B instanceof $A))B=$A.create(B);var M=f===void 0?B.len:B.pos+f,G=new NH.opentelemetry.proto.common.v1.ArrayValue;while(B.pos<M){var U=B.uint32();if(U===E)break;switch(U>>>3){case 1:{if(!(G.values&&G.values.length))G.values=[];G.values.push(NH.opentelemetry.proto.common.v1.AnyValue.decode(B,B.uint32()));break}default:B.skipType(U&7);break}}return G},I.decodeDelimited=function(B){if(!(B instanceof $A))B=new $A(B);return this.decode(B,B.uint32())},I.verify=function(B){if(typeof B!=="object"||B===null)return"object expected";if(B.values!=null&&B.hasOwnProperty("values")){if(!Array.isArray(B.values))return"values: array expected";for(var f=0;f<B.values.length;++f){var E=NH.opentelemetry.proto.common.v1.AnyValue.verify(B.values[f]);if(E)return"values."+E}}return null},I.fromObject=function(B){if(B instanceof NH.opentelemetry.proto.common.v1.ArrayValue)return B;var f=new NH.opentelemetry.proto.common.v1.ArrayValue;if(B.values){if(!Array.isArray(B.values))throw TypeError(".opentelemetry.proto.common.v1.ArrayValue.values: array expected");f.values=[];for(var E=0;E<B.values.length;++E){if(typeof B.values[E]!=="object")throw TypeError(".opentelemetry.proto.common.v1.ArrayValue.values: object expected");f.values[E]=NH.opentelemetry.proto.common.v1.AnyValue.fromObject(B.values[E])}}return f},I.toObject=function(B,f){if(!f)f={};var E={};if(f.arrays||f.defaults)E.values=[];if(B.values&&B.values.length){E.values=[];for(var M=0;M<B.values.length;++M)E.values[M]=NH.opentelemetry.proto.common.v1.AnyValue.toObject(B.values[M],f)}return E},I.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},I.getTypeUrl=function(B){if(B===void 0)B="type.googleapis.com";return B+"/opentelemetry.proto.common.v1.ArrayValue"},I}(),L.KeyValueList=function(){function I(D){if(this.values=[],D){for(var B=Object.keys(D),f=0;f<B.length;++f)if(D[B[f]]!=null)this[B[f]]=D[B[f]]}}return I.prototype.values=SH.emptyArray,I.create=function(B){return new I(B)},I.encode=function(B,f){if(!f)f=s9.create();if(B.values!=null&&B.values.length)for(var E=0;E<B.values.length;++E)NH.opentelemetry.proto.common.v1.KeyValue.encode(B.values[E],f.uint32(10).fork()).ldelim();return f},I.encodeDelimited=function(B,f){return this.encode(B,f).ldelim()},I.decode=function(B,f,E){if(!(B instanceof $A))B=$A.create(B);var M=f===void 0?B.len:B.pos+f,G=new NH.opentelemetry.proto.common.v1.KeyValueList;while(B.pos<M){var U=B.uint32();if(U===E)break;switch(U>>>3){case 1:{if(!(G.values&&G.values.length))G.values=[];G.values.push(NH.opentelemetry.proto.common.v1.KeyValue.decode(B,B.uint32()));break}default:B.skipType(U&7);break}}return G},I.decodeDelimited=function(B){if(!(B instanceof $A))B=new $A(B);return this.decode(B,B.uint32())},I.verify=function(B){if(typeof B!=="object"||B===null)return"object expected";if(B.values!=null&&B.hasOwnProperty("values")){if(!Array.isArray(B.values))return"values: array expected";for(var f=0;f<B.values.length;++f){var E=NH.opentelemetry.proto.common.v1.KeyValue.verify(B.values[f]);if(E)return"values."+E}}return null},I.fromObject=function(B){if(B instanceof NH.opentelemetry.proto.common.v1.KeyValueList)return B;var f=new NH.opentelemetry.proto.common.v1.KeyValueList;if(B.values){if(!Array.isArray(B.values))throw TypeError(".opentelemetry.proto.common.v1.KeyValueList.values: array expected");f.values=[];for(var E=0;E<B.values.length;++E){if(typeof B.values[E]!=="object")throw TypeError(".opentelemetry.proto.common.v1.KeyValueList.values: object expected");f.values[E]=NH.opentelemetry.proto.common.v1.KeyValue.fromObject(B.values[E])}}return f},I.toObject=function(B,f){if(!f)f={};var E={};if(f.arrays||f.defaults)E.values=[];if(B.values&&B.values.length){E.values=[];for(var M=0;M<B.values.length;++M)E.values[M]=NH.opentelemetry.proto.common.v1.KeyValue.toObject(B.values[M],f)}return E},I.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},I.getTypeUrl=function(B){if(B===void 0)B="type.googleapis.com";return B+"/opentelemetry.proto.common.v1.KeyValueList"},I}(),L.KeyValue=function(){function I(D){if(D){for(var B=Object.keys(D),f=0;f<B.length;++f)if(D[B[f]]!=null)this[B[f]]=D[B[f]]}}return I.prototype.key=null,I.prototype.value=null,I.create=function(B){return new I(B)},I.encode=function(B,f){if(!f)f=s9.create();if(B.key!=null&&Object.hasOwnProperty.call(B,"key"))f.uint32(10).string(B.key);if(B.value!=null&&Object.hasOwnProperty.call(B,"value"))NH.opentelemetry.proto.common.v1.AnyValue.encode(B.value,f.uint32(18).fork()).ldelim();return f},I.encodeDelimited=function(B,f){return this.encode(B,f).ldelim()},I.decode=function(B,f,E){if(!(B instanceof $A))B=$A.create(B);var M=f===void 0?B.len:B.pos+f,G=new NH.opentelemetry.proto.common.v1.KeyValue;while(B.pos<M){var U=B.uint32();if(U===E)break;switch(U>>>3){case 1:{G.key=B.string();break}case 2:{G.value=NH.opentelemetry.proto.common.v1.AnyValue.decode(B,B.uint32());break}default:B.skipType(U&7);break}}return G},I.decodeDelimited=function(B){if(!(B instanceof $A))B=new $A(B);return this.decode(B,B.uint32())},I.verify=function(B){if(typeof B!=="object"||B===null)return"object expected";if(B.key!=null&&B.hasOwnProperty("key")){if(!SH.isString(B.key))return"key: string expected"}if(B.value!=null&&B.hasOwnProperty("value")){var f=NH.opentelemetry.proto.common.v1.AnyValue.verify(B.value);if(f)return"value."+f}return null},I.fromObject=function(B){if(B instanceof NH.opentelemetry.proto.common.v1.KeyValue)return B;var f=new NH.opentelemetry.proto.common.v1.KeyValue;if(B.key!=null)f.key=String(B.key);if(B.value!=null){if(typeof B.value!=="object")throw TypeError(".opentelemetry.proto.common.v1.KeyValue.value: object expected");f.value=NH.opentelemetry.proto.common.v1.AnyValue.fromObject(B.value)}return f},I.toObject=function(B,f){if(!f)f={};var E={};if(f.defaults)E.key="",E.value=null;if(B.key!=null&&B.hasOwnProperty("key"))E.key=B.key;if(B.value!=null&&B.hasOwnProperty("value"))E.value=NH.opentelemetry.proto.common.v1.AnyValue.toObject(B.value,f);return E},I.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},I.getTypeUrl=function(B){if(B===void 0)B="type.googleapis.com";return B+"/opentelemetry.proto.common.v1.KeyValue"},I}(),L.InstrumentationScope=function(){function I(D){if(this.attributes=[],D){for(var B=Object.keys(D),f=0;f<B.length;++f)if(D[B[f]]!=null)this[B[f]]=D[B[f]]}}return I.prototype.name=null,I.prototype.version=null,I.prototype.attributes=SH.emptyArray,I.prototype.droppedAttributesCount=null,I.create=function(B){return new I(B)},I.encode=function(B,f){if(!f)f=s9.create();if(B.name!=null&&Object.hasOwnProperty.call(B,"name"))f.uint32(10).string(B.name);if(B.version!=null&&Object.hasOwnProperty.call(B,"version"))f.uint32(18).string(B.version);if(B.attributes!=null&&B.attributes.length)for(var E=0;E<B.attributes.length;++E)NH.opentelemetry.proto.common.v1.KeyValue.encode(B.attributes[E],f.uint32(26).fork()).ldelim();if(B.droppedAttributesCount!=null&&Object.hasOwnProperty.call(B,"droppedAttributesCount"))f.uint32(32).uint32(B.droppedAttributesCount);return f},I.encodeDelimited=function(B,f){return this.encode(B,f).ldelim()},I.decode=function(B,f,E){if(!(B instanceof $A))B=$A.create(B);var M=f===void 0?B.len:B.pos+f,G=new NH.opentelemetry.proto.common.v1.InstrumentationScope;while(B.pos<M){var U=B.uint32();if(U===E)break;switch(U>>>3){case 1:{G.name=B.string();break}case 2:{G.version=B.string();break}case 3:{if(!(G.attributes&&G.attributes.length))G.attributes=[];G.attributes.push(NH.opentelemetry.proto.common.v1.KeyValue.decode(B,B.uint32()));break}case 4:{G.droppedAttributesCount=B.uint32();break}default:B.skipType(U&7);break}}return G},I.decodeDelimited=function(B){if(!(B instanceof $A))B=new $A(B);return this.decode(B,B.uint32())},I.verify=function(B){if(typeof B!=="object"||B===null)return"object expected";if(B.name!=null&&B.hasOwnProperty("name")){if(!SH.isString(B.name))return"name: string expected"}if(B.version!=null&&B.hasOwnProperty("version")){if(!SH.isString(B.version))return"version: string expected"}if(B.attributes!=null&&B.hasOwnProperty("attributes")){if(!Array.isArray(B.attributes))return"attributes: array expected";for(var f=0;f<B.attributes.length;++f){var E=NH.opentelemetry.proto.common.v1.KeyValue.verify(B.attributes[f]);if(E)return"attributes."+E}}if(B.droppedAttributesCount!=null&&B.hasOwnProperty("droppedAttributesCount")){if(!SH.isInteger(B.droppedAttributesCount))return"droppedAttributesCount: integer expected"}return null},I.fromObject=function(B){if(B instanceof NH.opentelemetry.proto.common.v1.InstrumentationScope)return B;var f=new NH.opentelemetry.proto.common.v1.InstrumentationScope;if(B.name!=null)f.name=String(B.name);if(B.version!=null)f.version=String(B.version);if(B.attributes){if(!Array.isArray(B.attributes))throw TypeError(".opentelemetry.proto.common.v1.InstrumentationScope.attributes: array expected");f.attributes=[];for(var E=0;E<B.attributes.length;++E){if(typeof B.attributes[E]!=="object")throw TypeError(".opentelemetry.proto.common.v1.InstrumentationScope.attributes: object expected");f.attributes[E]=NH.opentelemetry.proto.common.v1.KeyValue.fromObject(B.attributes[E])}}if(B.droppedAttributesCount!=null)f.droppedAttributesCount=B.droppedAttributesCount>>>0;return f},I.toObject=function(B,f){if(!f)f={};var E={};if(f.arrays||f.defaults)E.attributes=[];if(f.defaults)E.name="",E.version="",E.droppedAttributesCount=0;if(B.name!=null&&B.hasOwnProperty("name"))E.name=B.name;if(B.version!=null&&B.hasOwnProperty("version"))E.version=B.version;if(B.attributes&&B.attributes.length){E.attributes=[];for(var M=0;M<B.attributes.length;++M)E.attributes[M]=NH.opentelemetry.proto.common.v1.KeyValue.toObject(B.attributes[M],f)}if(B.droppedAttributesCount!=null&&B.hasOwnProperty("droppedAttributesCount"))E.droppedAttributesCount=B.droppedAttributesCount;return E},I.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},I.getTypeUrl=function(B){if(B===void 0)B="type.googleapis.com";return B+"/opentelemetry.proto.common.v1.InstrumentationScope"},I}(),L.EntityRef=function(){function I(D){if(this.idKeys=[],this.descriptionKeys=[],D){for(var B=Object.keys(D),f=0;f<B.length;++f)if(D[B[f]]!=null)this[B[f]]=D[B[f]]}}return I.prototype.schemaUrl=null,I.prototype.type=null,I.prototype.idKeys=SH.emptyArray,I.prototype.descriptionKeys=SH.emptyArray,I.create=function(B){return new I(B)},I.encode=function(B,f){if(!f)f=s9.create();if(B.schemaUrl!=null&&Object.hasOwnProperty.call(B,"schemaUrl"))f.uint32(10).string(B.schemaUrl);if(B.type!=null&&Object.hasOwnProperty.call(B,"type"))f.uint32(18).string(B.type);if(B.idKeys!=null&&B.idKeys.length)for(var E=0;E<B.idKeys.length;++E)f.uint32(26).string(B.idKeys[E]);if(B.descriptionKeys!=null&&B.descriptionKeys.length)for(var E=0;E<B.descriptionKeys.length;++E)f.uint32(34).string(B.descriptionKeys[E]);return f},I.encodeDelimited=function(B,f){return this.encode(B,f).ldelim()},I.decode=function(B,f,E){if(!(B instanceof $A))B=$A.create(B);var M=f===void 0?B.len:B.pos+f,G=new NH.opentelemetry.proto.common.v1.EntityRef;while(B.pos<M){var U=B.uint32();if(U===E)break;switch(U>>>3){case 1:{G.schemaUrl=B.string();break}case 2:{G.type=B.string();break}case 3:{if(!(G.idKeys&&G.idKeys.length))G.idKeys=[];G.idKeys.push(B.string());break}case 4:{if(!(G.descriptionKeys&&G.descriptionKeys.length))G.descriptionKeys=[];G.descriptionKeys.push(B.string());break}default:B.skipType(U&7);break}}return G},I.decodeDelimited=function(B){if(!(B instanceof $A))B=new $A(B);return this.decode(B,B.uint32())},I.verify=function(B){if(typeof B!=="object"||B===null)return"object expected";if(B.schemaUrl!=null&&B.hasOwnProperty("schemaUrl")){if(!SH.isString(B.schemaUrl))return"schemaUrl: string expected"}if(B.type!=null&&B.hasOwnProperty("type")){if(!SH.isString(B.type))return"type: string expected"}if(B.idKeys!=null&&B.hasOwnProperty("idKeys")){if(!Array.isArray(B.idKeys))return"idKeys: array expected";for(var f=0;f<B.idKeys.length;++f)if(!SH.isString(B.idKeys[f]))return"idKeys: string[] expected"}if(B.descriptionKeys!=null&&B.hasOwnProperty("descriptionKeys")){if(!Array.isArray(B.descriptionKeys))return"descriptionKeys: array expected";for(var f=0;f<B.descriptionKeys.length;++f)if(!SH.isString(B.descriptionKeys[f]))return"descriptionKeys: string[] expected"}return null},I.fromObject=function(B){if(B instanceof NH.opentelemetry.proto.common.v1.EntityRef)return B;var f=new NH.opentelemetry.proto.common.v1.EntityRef;if(B.schemaUrl!=null)f.schemaUrl=String(B.schemaUrl);if(B.type!=null)f.type=String(B.type);if(B.idKeys){if(!Array.isArray(B.idKeys))throw TypeError(".opentelemetry.proto.common.v1.EntityRef.idKeys: array expected");f.idKeys=[];for(var E=0;E<B.idKeys.length;++E)f.idKeys[E]=String(B.idKeys[E])}if(B.descriptionKeys){if(!Array.isArray(B.descriptionKeys))throw TypeError(".opentelemetry.proto.common.v1.EntityRef.descriptionKeys: array expected");f.descriptionKeys=[];for(var E=0;E<B.descriptionKeys.length;++E)f.descriptionKeys[E]=String(B.descriptionKeys[E])}return f},I.toObject=function(B,f){if(!f)f={};var E={};if(f.arrays||f.defaults)E.idKeys=[],E.descriptionKeys=[];if(f.defaults)E.schemaUrl="",E.type="";if(B.schemaUrl!=null&&B.hasOwnProperty("schemaUrl"))E.schemaUrl=B.schemaUrl;if(B.type!=null&&B.hasOwnProperty("type"))E.type=B.type;if(B.idKeys&&B.idKeys.length){E.idKeys=[];for(var M=0;M<B.idKeys.length;++M)E.idKeys[M]=B.idKeys[M]}if(B.descriptionKeys&&B.descriptionKeys.length){E.descriptionKeys=[];for(var M=0;M<B.descriptionKeys.length;++M)E.descriptionKeys[M]=B.descriptionKeys[M]}return E},I.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},I.getTypeUrl=function(B){if(B===void 0)B="type.googleapis.com";return B+"/opentelemetry.proto.common.v1.EntityRef"},I}(),L}(),A}(),$.resource=function(){var A={};return A.v1=function(){var L={};return L.Resource=function(){function I(D){if(this.attributes=[],this.entityRefs=[],D){for(var B=Object.keys(D),f=0;f<B.length;++f)if(D[B[f]]!=null)this[B[f]]=D[B[f]]}}return I.prototype.attributes=SH.emptyArray,I.prototype.droppedAttributesCount=null,I.prototype.entityRefs=SH.emptyArray,I.create=function(B){return new I(B)},I.encode=function(B,f){if(!f)f=s9.create();if(B.attributes!=null&&B.attributes.length)for(var E=0;E<B.attributes.length;++E)NH.opentelemetry.proto.common.v1.KeyValue.encode(B.attributes[E],f.uint32(10).fork()).ldelim();if(B.droppedAttributesCount!=null&&Object.hasOwnProperty.call(B,"droppedAttributesCount"))f.uint32(16).uint32(B.droppedAttributesCount);if(B.entityRefs!=null&&B.entityRefs.length)for(var E=0;E<B.entityRefs.length;++E)NH.opentelemetry.proto.common.v1.EntityRef.encode(B.entityRefs[E],f.uint32(26).fork()).ldelim();return f},I.encodeDelimited=function(B,f){return this.encode(B,f).ldelim()},I.decode=function(B,f,E){if(!(B instanceof $A))B=$A.create(B);var M=f===void 0?B.len:B.pos+f,G=new NH.opentelemetry.proto.resource.v1.Resource;while(B.pos<M){var U=B.uint32();if(U===E)break;switch(U>>>3){case 1:{if(!(G.attributes&&G.attributes.length))G.attributes=[];G.attributes.push(NH.opentelemetry.proto.common.v1.KeyValue.decode(B,B.uint32()));break}case 2:{G.droppedAttributesCount=B.uint32();break}case 3:{if(!(G.entityRefs&&G.entityRefs.length))G.entityRefs=[];G.entityRefs.push(NH.opentelemetry.proto.common.v1.EntityRef.decode(B,B.uint32()));break}default:B.skipType(U&7);break}}return G},I.decodeDelimited=function(B){if(!(B instanceof $A))B=new $A(B);return this.decode(B,B.uint32())},I.verify=function(B){if(typeof B!=="object"||B===null)return"object expected";if(B.attributes!=null&&B.hasOwnProperty("attributes")){if(!Array.isArray(B.attributes))return"attributes: array expected";for(var f=0;f<B.attributes.length;++f){var E=NH.opentelemetry.proto.common.v1.KeyValue.verify(B.attributes[f]);if(E)return"attributes."+E}}if(B.droppedAttributesCount!=null&&B.hasOwnProperty("droppedAttributesCount")){if(!SH.isInteger(B.droppedAttributesCount))return"droppedAttributesCount: integer expected"}if(B.entityRefs!=null&&B.hasOwnProperty("entityRefs")){if(!Array.isArray(B.entityRefs))return"entityRefs: array expected";for(var f=0;f<B.entityRefs.length;++f){var E=NH.opentelemetry.proto.common.v1.EntityRef.verify(B.entityRefs[f]);if(E)return"entityRefs."+E}}return null},I.fromObject=function(B){if(B instanceof NH.opentelemetry.proto.resource.v1.Resource)return B;var f=new NH.opentelemetry.proto.resource.v1.Resource;if(B.attributes){if(!Array.isArray(B.attributes))throw TypeError(".opentelemetry.proto.resource.v1.Resource.attributes: array expected");f.attributes=[];for(var E=0;E<B.attributes.length;++E){if(typeof B.attributes[E]!=="object")throw TypeError(".opentelemetry.proto.resource.v1.Resource.attributes: object expected");f.attributes[E]=NH.opentelemetry.proto.common.v1.KeyValue.fromObject(B.attributes[E])}}if(B.droppedAttributesCount!=null)f.droppedAttributesCount=B.droppedAttributesCount>>>0;if(B.entityRefs){if(!Array.isArray(B.entityRefs))throw TypeError(".opentelemetry.proto.resource.v1.Resource.entityRefs: array expected");f.entityRefs=[];for(var E=0;E<B.entityRefs.length;++E){if(typeof B.entityRefs[E]!=="object")throw TypeError(".opentelemetry.proto.resource.v1.Resource.entityRefs: object expected");f.entityRefs[E]=NH.opentelemetry.proto.common.v1.EntityRef.fromObject(B.entityRefs[E])}}return f},I.toObject=function(B,f){if(!f)f={};var E={};if(f.arrays||f.defaults)E.attributes=[],E.entityRefs=[];if(f.defaults)E.droppedAttributesCount=0;if(B.attributes&&B.attributes.length){E.attributes=[];for(var M=0;M<B.attributes.length;++M)E.attributes[M]=NH.opentelemetry.proto.common.v1.KeyValue.toObject(B.attributes[M],f)}if(B.droppedAttributesCount!=null&&B.hasOwnProperty("droppedAttributesCount"))E.droppedAttributesCount=B.droppedAttributesCount;if(B.entityRefs&&B.entityRefs.length){E.entityRefs=[];for(var M=0;M<B.entityRefs.length;++M)E.entityRefs[M]=NH.opentelemetry.proto.common.v1.EntityRef.toObject(B.entityRefs[M],f)}return E},I.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},I.getTypeUrl=function(B){if(B===void 0)B="type.googleapis.com";return B+"/opentelemetry.proto.resource.v1.Resource"},I}(),L}(),A}(),$.trace=function(){var A={};return A.v1=function(){var L={};return L.TracesData=function(){function I(D){if(this.resourceSpans=[],D){for(var B=Object.keys(D),f=0;f<B.length;++f)if(D[B[f]]!=null)this[B[f]]=D[B[f]]}}return I.prototype.resourceSpans=SH.emptyArray,I.create=function(B){return new I(B)},I.encode=function(B,f){if(!f)f=s9.create();if(B.resourceSpans!=null&&B.resourceSpans.length)for(var E=0;E<B.resourceSpans.length;++E)NH.opentelemetry.proto.trace.v1.ResourceSpans.encode(B.resourceSpans[E],f.uint32(10).fork()).ldelim();return f},I.encodeDelimited=function(B,f){return this.encode(B,f).ldelim()},I.decode=function(B,f,E){if(!(B instanceof $A))B=$A.create(B);var M=f===void 0?B.len:B.pos+f,G=new NH.opentelemetry.proto.trace.v1.TracesData;while(B.pos<M){var U=B.uint32();if(U===E)break;switch(U>>>3){case 1:{if(!(G.resourceSpans&&G.resourceSpans.length))G.resourceSpans=[];G.resourceSpans.push(NH.opentelemetry.proto.trace.v1.ResourceSpans.decode(B,B.uint32()));break}default:B.skipType(U&7);break}}return G},I.decodeDelimited=function(B){if(!(B instanceof $A))B=new $A(B);return this.decode(B,B.uint32())},I.verify=function(B){if(typeof B!=="object"||B===null)return"object expected";if(B.resourceSpans!=null&&B.hasOwnProperty("resourceSpans")){if(!Array.isArray(B.resourceSpans))return"resourceSpans: array expected";for(var f=0;f<B.resourceSpans.length;++f){var E=NH.opentelemetry.proto.trace.v1.ResourceSpans.verify(B.resourceSpans[f]);if(E)return"resourceSpans."+E}}return null},I.fromObject=function(B){if(B instanceof NH.opentelemetry.proto.trace.v1.TracesData)return B;var f=new NH.opentelemetry.proto.trace.v1.TracesData;if(B.resourceSpans){if(!Array.isArray(B.resourceSpans))throw TypeError(".opentelemetry.proto.trace.v1.TracesData.resourceSpans: array expected");f.resourceSpans=[];for(var E=0;E<B.resourceSpans.length;++E){if(typeof B.resourceSpans[E]!=="object")throw TypeError(".opentelemetry.proto.trace.v1.TracesData.resourceSpans: object expected");f.resourceSpans[E]=NH.opentelemetry.proto.trace.v1.ResourceSpans.fromObject(B.resourceSpans[E])}}return f},I.toObject=function(B,f){if(!f)f={};var E={};if(f.arrays||f.defaults)E.resourceSpans=[];if(B.resourceSpans&&B.resourceSpans.length){E.resourceSpans=[];for(var M=0;M<B.resourceSpans.length;++M)E.resourceSpans[M]=NH.opentelemetry.proto.trace.v1.ResourceSpans.toObject(B.resourceSpans[M],f)}return E},I.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},I.getTypeUrl=function(B){if(B===void 0)B="type.googleapis.com";return B+"/opentelemetry.proto.trace.v1.TracesData"},I}(),L.ResourceSpans=function(){function I(D){if(this.scopeSpans=[],D){for(var B=Object.keys(D),f=0;f<B.length;++f)if(D[B[f]]!=null)this[B[f]]=D[B[f]]}}return I.prototype.resource=null,I.prototype.scopeSpans=SH.emptyArray,I.prototype.schemaUrl=null,I.create=function(B){return new I(B)},I.encode=function(B,f){if(!f)f=s9.create();if(B.resource!=null&&Object.hasOwnProperty.call(B,"resource"))NH.opentelemetry.proto.resource.v1.Resource.encode(B.resource,f.uint32(10).fork()).ldelim();if(B.scopeSpans!=null&&B.scopeSpans.length)for(var E=0;E<B.scopeSpans.length;++E)NH.opentelemetry.proto.trace.v1.ScopeSpans.encode(B.scopeSpans[E],f.uint32(18).fork()).ldelim();if(B.schemaUrl!=null&&Object.hasOwnProperty.call(B,"schemaUrl"))f.uint32(26).string(B.schemaUrl);return f},I.encodeDelimited=function(B,f){return this.encode(B,f).ldelim()},I.decode=function(B,f,E){if(!(B instanceof $A))B=$A.create(B);var M=f===void 0?B.len:B.pos+f,G=new NH.opentelemetry.proto.trace.v1.ResourceSpans;while(B.pos<M){var U=B.uint32();if(U===E)break;switch(U>>>3){case 1:{G.resource=NH.opentelemetry.proto.resource.v1.Resource.decode(B,B.uint32());break}case 2:{if(!(G.scopeSpans&&G.scopeSpans.length))G.scopeSpans=[];G.scopeSpans.push(NH.opentelemetry.proto.trace.v1.ScopeSpans.decode(B,B.uint32()));break}case 3:{G.schemaUrl=B.string();break}default:B.skipType(U&7);break}}return G},I.decodeDelimited=function(B){if(!(B instanceof $A))B=new $A(B);return this.decode(B,B.uint32())},I.verify=function(B){if(typeof B!=="object"||B===null)return"object expected";if(B.resource!=null&&B.hasOwnProperty("resource")){var f=NH.opentelemetry.proto.resource.v1.Resource.verify(B.resource);if(f)return"resource."+f}if(B.scopeSpans!=null&&B.hasOwnProperty("scopeSpans")){if(!Array.isArray(B.scopeSpans))return"scopeSpans: array expected";for(var E=0;E<B.scopeSpans.length;++E){var f=NH.opentelemetry.proto.trace.v1.ScopeSpans.verify(B.scopeSpans[E]);if(f)return"scopeSpans."+f}}if(B.schemaUrl!=null&&B.hasOwnProperty("schemaUrl")){if(!SH.isString(B.schemaUrl))return"schemaUrl: string expected"}return null},I.fromObject=function(B){if(B instanceof NH.opentelemetry.proto.trace.v1.ResourceSpans)return B;var f=new NH.opentelemetry.proto.trace.v1.ResourceSpans;if(B.resource!=null){if(typeof B.resource!=="object")throw TypeError(".opentelemetry.proto.trace.v1.ResourceSpans.resource: object expected");f.resource=NH.opentelemetry.proto.resource.v1.Resource.fromObject(B.resource)}if(B.scopeSpans){if(!Array.isArray(B.scopeSpans))throw TypeError(".opentelemetry.proto.trace.v1.ResourceSpans.scopeSpans: array expected");f.scopeSpans=[];for(var E=0;E<B.scopeSpans.length;++E){if(typeof B.scopeSpans[E]!=="object")throw TypeError(".opentelemetry.proto.trace.v1.ResourceSpans.scopeSpans: object expected");f.scopeSpans[E]=NH.opentelemetry.proto.trace.v1.ScopeSpans.fromObject(B.scopeSpans[E])}}if(B.schemaUrl!=null)f.schemaUrl=String(B.schemaUrl);return f},I.toObject=function(B,f){if(!f)f={};var E={};if(f.arrays||f.defaults)E.scopeSpans=[];if(f.defaults)E.resource=null,E.schemaUrl="";if(B.resource!=null&&B.hasOwnProperty("resource"))E.resource=NH.opentelemetry.proto.resource.v1.Resource.toObject(B.resource,f);if(B.scopeSpans&&B.scopeSpans.length){E.scopeSpans=[];for(var M=0;M<B.scopeSpans.length;++M)E.scopeSpans[M]=NH.opentelemetry.proto.trace.v1.ScopeSpans.toObject(B.scopeSpans[M],f)}if(B.schemaUrl!=null&&B.hasOwnProperty("schemaUrl"))E.schemaUrl=B.schemaUrl;return E},I.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},I.getTypeUrl=function(B){if(B===void 0)B="type.googleapis.com";return B+"/opentelemetry.proto.trace.v1.ResourceSpans"},I}(),L.ScopeSpans=function(){function I(D){if(this.spans=[],D){for(var B=Object.keys(D),f=0;f<B.length;++f)if(D[B[f]]!=null)this[B[f]]=D[B[f]]}}return I.prototype.scope=null,I.prototype.spans=SH.emptyArray,I.prototype.schemaUrl=null,I.create=function(B){return new I(B)},I.encode=function(B,f){if(!f)f=s9.create();if(B.scope!=null&&Object.hasOwnProperty.call(B,"scope"))NH.opentelemetry.proto.common.v1.InstrumentationScope.encode(B.scope,f.uint32(10).fork()).ldelim();if(B.spans!=null&&B.spans.length)for(var E=0;E<B.spans.length;++E)NH.opentelemetry.proto.trace.v1.Span.encode(B.spans[E],f.uint32(18).fork()).ldelim();if(B.schemaUrl!=null&&Object.hasOwnProperty.call(B,"schemaUrl"))f.uint32(26).string(B.schemaUrl);return f},I.encodeDelimited=function(B,f){return this.encode(B,f).ldelim()},I.decode=function(B,f,E){if(!(B instanceof $A))B=$A.create(B);var M=f===void 0?B.len:B.pos+f,G=new NH.opentelemetry.proto.trace.v1.ScopeSpans;while(B.pos<M){var U=B.uint32();if(U===E)break;switch(U>>>3){case 1:{G.scope=NH.opentelemetry.proto.common.v1.InstrumentationScope.decode(B,B.uint32());break}case 2:{if(!(G.spans&&G.spans.length))G.spans=[];G.spans.push(NH.opentelemetry.proto.trace.v1.Span.decode(B,B.uint32()));break}case 3:{G.schemaUrl=B.string();break}default:B.skipType(U&7);break}}return G},I.decodeDelimited=function(B){if(!(B instanceof $A))B=new $A(B);return this.decode(B,B.uint32())},I.verify=function(B){if(typeof B!=="object"||B===null)return"object expected";if(B.scope!=null&&B.hasOwnProperty("scope")){var f=NH.opentelemetry.proto.common.v1.InstrumentationScope.verify(B.scope);if(f)return"scope."+f}if(B.spans!=null&&B.hasOwnProperty("spans")){if(!Array.isArray(B.spans))return"spans: array expected";for(var E=0;E<B.spans.length;++E){var f=NH.opentelemetry.proto.trace.v1.Span.verify(B.spans[E]);if(f)return"spans."+f}}if(B.schemaUrl!=null&&B.hasOwnProperty("schemaUrl")){if(!SH.isString(B.schemaUrl))return"schemaUrl: string expected"}return null},I.fromObject=function(B){if(B instanceof NH.opentelemetry.proto.trace.v1.ScopeSpans)return B;var f=new NH.opentelemetry.proto.trace.v1.ScopeSpans;if(B.scope!=null){if(typeof B.scope!=="object")throw TypeError(".opentelemetry.proto.trace.v1.ScopeSpans.scope: object expected");f.scope=NH.opentelemetry.proto.common.v1.InstrumentationScope.fromObject(B.scope)}if(B.spans){if(!Array.isArray(B.spans))throw TypeError(".opentelemetry.proto.trace.v1.ScopeSpans.spans: array expected");f.spans=[];for(var E=0;E<B.spans.length;++E){if(typeof B.spans[E]!=="object")throw TypeError(".opentelemetry.proto.trace.v1.ScopeSpans.spans: object expected");f.spans[E]=NH.opentelemetry.proto.trace.v1.Span.fromObject(B.spans[E])}}if(B.schemaUrl!=null)f.schemaUrl=String(B.schemaUrl);return f},I.toObject=function(B,f){if(!f)f={};var E={};if(f.arrays||f.defaults)E.spans=[];if(f.defaults)E.scope=null,E.schemaUrl="";if(B.scope!=null&&B.hasOwnProperty("scope"))E.scope=NH.opentelemetry.proto.common.v1.InstrumentationScope.toObject(B.scope,f);if(B.spans&&B.spans.length){E.spans=[];for(var M=0;M<B.spans.length;++M)E.spans[M]=NH.opentelemetry.proto.trace.v1.Span.toObject(B.spans[M],f)}if(B.schemaUrl!=null&&B.hasOwnProperty("schemaUrl"))E.schemaUrl=B.schemaUrl;return E},I.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},I.getTypeUrl=function(B){if(B===void 0)B="type.googleapis.com";return B+"/opentelemetry.proto.trace.v1.ScopeSpans"},I}(),L.Span=function(){function I(D){if(this.attributes=[],this.events=[],this.links=[],D){for(var B=Object.keys(D),f=0;f<B.length;++f)if(D[B[f]]!=null)this[B[f]]=D[B[f]]}}return I.prototype.traceId=null,I.prototype.spanId=null,I.prototype.traceState=null,I.prototype.parentSpanId=null,I.prototype.flags=null,I.prototype.name=null,I.prototype.kind=null,I.prototype.startTimeUnixNano=null,I.prototype.endTimeUnixNano=null,I.prototype.attributes=SH.emptyArray,I.prototype.droppedAttributesCount=null,I.prototype.events=SH.emptyArray,I.prototype.droppedEventsCount=null,I.prototype.links=SH.emptyArray,I.prototype.droppedLinksCount=null,I.prototype.status=null,I.create=function(B){return new I(B)},I.encode=function(B,f){if(!f)f=s9.create();if(B.traceId!=null&&Object.hasOwnProperty.call(B,"traceId"))f.uint32(10).bytes(B.traceId);if(B.spanId!=null&&Object.hasOwnProperty.call(B,"spanId"))f.uint32(18).bytes(B.spanId);if(B.traceState!=null&&Object.hasOwnProperty.call(B,"traceState"))f.uint32(26).string(B.traceState);if(B.parentSpanId!=null&&Object.hasOwnProperty.call(B,"parentSpanId"))f.uint32(34).bytes(B.parentSpanId);if(B.name!=null&&Object.hasOwnProperty.call(B,"name"))f.uint32(42).string(B.name);if(B.kind!=null&&Object.hasOwnProperty.call(B,"kind"))f.uint32(48).int32(B.kind);if(B.startTimeUnixNano!=null&&Object.hasOwnProperty.call(B,"startTimeUnixNano"))f.uint32(57).fixed64(B.startTimeUnixNano);if(B.endTimeUnixNano!=null&&Object.hasOwnProperty.call(B,"endTimeUnixNano"))f.uint32(65).fixed64(B.endTimeUnixNano);if(B.attributes!=null&&B.attributes.length)for(var E=0;E<B.attributes.length;++E)NH.opentelemetry.proto.common.v1.KeyValue.encode(B.attributes[E],f.uint32(74).fork()).ldelim();if(B.droppedAttributesCount!=null&&Object.hasOwnProperty.call(B,"droppedAttributesCount"))f.uint32(80).uint32(B.droppedAttributesCount);if(B.events!=null&&B.events.length)for(var E=0;E<B.events.length;++E)NH.opentelemetry.proto.trace.v1.Span.Event.encode(B.events[E],f.uint32(90).fork()).ldelim();if(B.droppedEventsCount!=null&&Object.hasOwnProperty.call(B,"droppedEventsCount"))f.uint32(96).uint32(B.droppedEventsCount);if(B.links!=null&&B.links.length)for(var E=0;E<B.links.length;++E)NH.opentelemetry.proto.trace.v1.Span.Link.encode(B.links[E],f.uint32(106).fork()).ldelim();if(B.droppedLinksCount!=null&&Object.hasOwnProperty.call(B,"droppedLinksCount"))f.uint32(112).uint32(B.droppedLinksCount);if(B.status!=null&&Object.hasOwnProperty.call(B,"status"))NH.opentelemetry.proto.trace.v1.Status.encode(B.status,f.uint32(122).fork()).ldelim();if(B.flags!=null&&Object.hasOwnProperty.call(B,"flags"))f.uint32(133).fixed32(B.flags);return f},I.encodeDelimited=function(B,f){return this.encode(B,f).ldelim()},I.decode=function(B,f,E){if(!(B instanceof $A))B=$A.create(B);var M=f===void 0?B.len:B.pos+f,G=new NH.opentelemetry.proto.trace.v1.Span;while(B.pos<M){var U=B.uint32();if(U===E)break;switch(U>>>3){case 1:{G.traceId=B.bytes();break}case 2:{G.spanId=B.bytes();break}case 3:{G.traceState=B.string();break}case 4:{G.parentSpanId=B.bytes();break}case 16:{G.flags=B.fixed32();break}case 5:{G.name=B.string();break}case 6:{G.kind=B.int32();break}case 7:{G.startTimeUnixNano=B.fixed64();break}case 8:{G.endTimeUnixNano=B.fixed64();break}case 9:{if(!(G.attributes&&G.attributes.length))G.attributes=[];G.attributes.push(NH.opentelemetry.proto.common.v1.KeyValue.decode(B,B.uint32()));break}case 10:{G.droppedAttributesCount=B.uint32();break}case 11:{if(!(G.events&&G.events.length))G.events=[];G.events.push(NH.opentelemetry.proto.trace.v1.Span.Event.decode(B,B.uint32()));break}case 12:{G.droppedEventsCount=B.uint32();break}case 13:{if(!(G.links&&G.links.length))G.links=[];G.links.push(NH.opentelemetry.proto.trace.v1.Span.Link.decode(B,B.uint32()));break}case 14:{G.droppedLinksCount=B.uint32();break}case 15:{G.status=NH.opentelemetry.proto.trace.v1.Status.decode(B,B.uint32());break}default:B.skipType(U&7);break}}return G},I.decodeDelimited=function(B){if(!(B instanceof $A))B=new $A(B);return this.decode(B,B.uint32())},I.verify=function(B){if(typeof B!=="object"||B===null)return"object expected";if(B.traceId!=null&&B.hasOwnProperty("traceId")){if(!(B.traceId&&typeof B.traceId.length==="number"||SH.isString(B.traceId)))return"traceId: buffer expected"}if(B.spanId!=null&&B.hasOwnProperty("spanId")){if(!(B.spanId&&typeof B.spanId.length==="number"||SH.isString(B.spanId)))return"spanId: buffer expected"}if(B.traceState!=null&&B.hasOwnProperty("traceState")){if(!SH.isString(B.traceState))return"traceState: string expected"}if(B.parentSpanId!=null&&B.hasOwnProperty("parentSpanId")){if(!(B.parentSpanId&&typeof B.parentSpanId.length==="number"||SH.isString(B.parentSpanId)))return"parentSpanId: buffer expected"}if(B.flags!=null&&B.hasOwnProperty("flags")){if(!SH.isInteger(B.flags))return"flags: integer expected"}if(B.name!=null&&B.hasOwnProperty("name")){if(!SH.isString(B.name))return"name: string expected"}if(B.kind!=null&&B.hasOwnProperty("kind"))switch(B.kind){default:return"kind: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:break}if(B.startTimeUnixNano!=null&&B.hasOwnProperty("startTimeUnixNano")){if(!SH.isInteger(B.startTimeUnixNano)&&!(B.startTimeUnixNano&&SH.isInteger(B.startTimeUnixNano.low)&&SH.isInteger(B.startTimeUnixNano.high)))return"startTimeUnixNano: integer|Long expected"}if(B.endTimeUnixNano!=null&&B.hasOwnProperty("endTimeUnixNano")){if(!SH.isInteger(B.endTimeUnixNano)&&!(B.endTimeUnixNano&&SH.isInteger(B.endTimeUnixNano.low)&&SH.isInteger(B.endTimeUnixNano.high)))return"endTimeUnixNano: integer|Long expected"}if(B.attributes!=null&&B.hasOwnProperty("attributes")){if(!Array.isArray(B.attributes))return"attributes: array expected";for(var f=0;f<B.attributes.length;++f){var E=NH.opentelemetry.proto.common.v1.KeyValue.verify(B.attributes[f]);if(E)return"attributes."+E}}if(B.droppedAttributesCount!=null&&B.hasOwnProperty("droppedAttributesCount")){if(!SH.isInteger(B.droppedAttributesCount))return"droppedAttributesCount: integer expected"}if(B.events!=null&&B.hasOwnProperty("events")){if(!Array.isArray(B.events))return"events: array expected";for(var f=0;f<B.events.length;++f){var E=NH.opentelemetry.proto.trace.v1.Span.Event.verify(B.events[f]);if(E)return"events."+E}}if(B.droppedEventsCount!=null&&B.hasOwnProperty("droppedEventsCount")){if(!SH.isInteger(B.droppedEventsCount))return"droppedEventsCount: integer expected"}if(B.links!=null&&B.hasOwnProperty("links")){if(!Array.isArray(B.links))return"links: array expected";for(var f=0;f<B.links.length;++f){var E=NH.opentelemetry.proto.trace.v1.Span.Link.verify(B.links[f]);if(E)return"links."+E}}if(B.droppedLinksCount!=null&&B.hasOwnProperty("droppedLinksCount")){if(!SH.isInteger(B.droppedLinksCount))return"droppedLinksCount: integer expected"}if(B.status!=null&&B.hasOwnProperty("status")){var E=NH.opentelemetry.proto.trace.v1.Status.verify(B.status);if(E)return"status."+E}return null},I.fromObject=function(B){if(B instanceof NH.opentelemetry.proto.trace.v1.Span)return B;var f=new NH.opentelemetry.proto.trace.v1.Span;if(B.traceId!=null){if(typeof B.traceId==="string")SH.base64.decode(B.traceId,f.traceId=SH.newBuffer(SH.base64.length(B.traceId)),0);else if(B.traceId.length>=0)f.traceId=B.traceId}if(B.spanId!=null){if(typeof B.spanId==="string")SH.base64.decode(B.spanId,f.spanId=SH.newBuffer(SH.base64.length(B.spanId)),0);else if(B.spanId.length>=0)f.spanId=B.spanId}if(B.traceState!=null)f.traceState=String(B.traceState);if(B.parentSpanId!=null){if(typeof B.parentSpanId==="string")SH.base64.decode(B.parentSpanId,f.parentSpanId=SH.newBuffer(SH.base64.length(B.parentSpanId)),0);else if(B.parentSpanId.length>=0)f.parentSpanId=B.parentSpanId}if(B.flags!=null)f.flags=B.flags>>>0;if(B.name!=null)f.name=String(B.name);switch(B.kind){default:if(typeof B.kind==="number"){f.kind=B.kind;break}break;case"SPAN_KIND_UNSPECIFIED":case 0:f.kind=0;break;case"SPAN_KIND_INTERNAL":case 1:f.kind=1;break;case"SPAN_KIND_SERVER":case 2:f.kind=2;break;case"SPAN_KIND_CLIENT":case 3:f.kind=3;break;case"SPAN_KIND_PRODUCER":case 4:f.kind=4;break;case"SPAN_KIND_CONSUMER":case 5:f.kind=5;break}if(B.startTimeUnixNano!=null){if(SH.Long)(f.startTimeUnixNano=SH.Long.fromValue(B.startTimeUnixNano)).unsigned=!1;else if(typeof B.startTimeUnixNano==="string")f.startTimeUnixNano=parseInt(B.startTimeUnixNano,10);else if(typeof B.startTimeUnixNano==="number")f.startTimeUnixNano=B.startTimeUnixNano;else if(typeof B.startTimeUnixNano==="object")f.startTimeUnixNano=new SH.LongBits(B.startTimeUnixNano.low>>>0,B.startTimeUnixNano.high>>>0).toNumber()}if(B.endTimeUnixNano!=null){if(SH.Long)(f.endTimeUnixNano=SH.Long.fromValue(B.endTimeUnixNano)).unsigned=!1;else if(typeof B.endTimeUnixNano==="string")f.endTimeUnixNano=parseInt(B.endTimeUnixNano,10);else if(typeof B.endTimeUnixNano==="number")f.endTimeUnixNano=B.endTimeUnixNano;else if(typeof B.endTimeUnixNano==="object")f.endTimeUnixNano=new SH.LongBits(B.endTimeUnixNano.low>>>0,B.endTimeUnixNano.high>>>0).toNumber()}if(B.attributes){if(!Array.isArray(B.attributes))throw TypeError(".opentelemetry.proto.trace.v1.Span.attributes: array expected");f.attributes=[];for(var E=0;E<B.attributes.length;++E){if(typeof B.attributes[E]!=="object")throw TypeError(".opentelemetry.proto.trace.v1.Span.attributes: object expected");f.attributes[E]=NH.opentelemetry.proto.common.v1.KeyValue.fromObject(B.attributes[E])}}if(B.droppedAttributesCount!=null)f.droppedAttributesCount=B.droppedAttributesCount>>>0;if(B.events){if(!Array.isArray(B.events))throw TypeError(".opentelemetry.proto.trace.v1.Span.events: array expected");f.events=[];for(var E=0;E<B.events.length;++E){if(typeof B.events[E]!=="object")throw TypeError(".opentelemetry.proto.trace.v1.Span.events: object expected");f.events[E]=NH.opentelemetry.proto.trace.v1.Span.Event.fromObject(B.events[E])}}if(B.droppedEventsCount!=null)f.droppedEventsCount=B.droppedEventsCount>>>0;if(B.links){if(!Array.isArray(B.links))throw TypeError(".opentelemetry.proto.trace.v1.Span.links: array expected");f.links=[];for(var E=0;E<B.links.length;++E){if(typeof B.links[E]!=="object")throw TypeError(".opentelemetry.proto.trace.v1.Span.links: object expected");f.links[E]=NH.opentelemetry.proto.trace.v1.Span.Link.fromObject(B.links[E])}}if(B.droppedLinksCount!=null)f.droppedLinksCount=B.droppedLinksCount>>>0;if(B.status!=null){if(typeof B.status!=="object")throw TypeError(".opentelemetry.proto.trace.v1.Span.status: object expected");f.status=NH.opentelemetry.proto.trace.v1.Status.fromObject(B.status)}return f},I.toObject=function(B,f){if(!f)f={};var E={};if(f.arrays||f.defaults)E.attributes=[],E.events=[],E.links=[];if(f.defaults){if(f.bytes===String)E.traceId="";else if(E.traceId=[],f.bytes!==Array)E.traceId=SH.newBuffer(E.traceId);if(f.bytes===String)E.spanId="";else if(E.spanId=[],f.bytes!==Array)E.spanId=SH.newBuffer(E.spanId);if(E.traceState="",f.bytes===String)E.parentSpanId="";else if(E.parentSpanId=[],f.bytes!==Array)E.parentSpanId=SH.newBuffer(E.parentSpanId);if(E.name="",E.kind=f.enums===String?"SPAN_KIND_UNSPECIFIED":0,SH.Long){var M=new SH.Long(0,0,!1);E.startTimeUnixNano=f.longs===String?M.toString():f.longs===Number?M.toNumber():M}else E.startTimeUnixNano=f.longs===String?"0":0;if(SH.Long){var M=new SH.Long(0,0,!1);E.endTimeUnixNano=f.longs===String?M.toString():f.longs===Number?M.toNumber():M}else E.endTimeUnixNano=f.longs===String?"0":0;E.droppedAttributesCount=0,E.droppedEventsCount=0,E.droppedLinksCount=0,E.status=null,E.flags=0}if(B.traceId!=null&&B.hasOwnProperty("traceId"))E.traceId=f.bytes===String?SH.base64.encode(B.traceId,0,B.traceId.length):f.bytes===Array?Array.prototype.slice.call(B.traceId):B.traceId;if(B.spanId!=null&&B.hasOwnProperty("spanId"))E.spanId=f.bytes===String?SH.base64.encode(B.spanId,0,B.spanId.length):f.bytes===Array?Array.prototype.slice.call(B.spanId):B.spanId;if(B.traceState!=null&&B.hasOwnProperty("traceState"))E.traceState=B.traceState;if(B.parentSpanId!=null&&B.hasOwnProperty("parentSpanId"))E.parentSpanId=f.bytes===String?SH.base64.encode(B.parentSpanId,0,B.parentSpanId.length):f.bytes===Array?Array.prototype.slice.call(B.parentSpanId):B.parentSpanId;if(B.name!=null&&B.hasOwnProperty("name"))E.name=B.name;if(B.kind!=null&&B.hasOwnProperty("kind"))E.kind=f.enums===String?NH.opentelemetry.proto.trace.v1.Span.SpanKind[B.kind]===void 0?B.kind:NH.opentelemetry.proto.trace.v1.Span.SpanKind[B.kind]:B.kind;if(B.startTimeUnixNano!=null&&B.hasOwnProperty("startTimeUnixNano"))if(typeof B.startTimeUnixNano==="number")E.startTimeUnixNano=f.longs===String?String(B.startTimeUnixNano):B.startTimeUnixNano;else E.startTimeUnixNano=f.longs===String?SH.Long.prototype.toString.call(B.startTimeUnixNano):f.longs===Number?new SH.LongBits(B.startTimeUnixNano.low>>>0,B.startTimeUnixNano.high>>>0).toNumber():B.startTimeUnixNano;if(B.endTimeUnixNano!=null&&B.hasOwnProperty("endTimeUnixNano"))if(typeof B.endTimeUnixNano==="number")E.endTimeUnixNano=f.longs===String?String(B.endTimeUnixNano):B.endTimeUnixNano;else E.endTimeUnixNano=f.longs===String?SH.Long.prototype.toString.call(B.endTimeUnixNano):f.longs===Number?new SH.LongBits(B.endTimeUnixNano.low>>>0,B.endTimeUnixNano.high>>>0).toNumber():B.endTimeUnixNano;if(B.attributes&&B.attributes.length){E.attributes=[];for(var G=0;G<B.attributes.length;++G)E.attributes[G]=NH.opentelemetry.proto.common.v1.KeyValue.toObject(B.attributes[G],f)}if(B.droppedAttributesCount!=null&&B.hasOwnProperty("droppedAttributesCount"))E.droppedAttributesCount=B.droppedAttributesCount;if(B.events&&B.events.length){E.events=[];for(var G=0;G<B.events.length;++G)E.events[G]=NH.opentelemetry.proto.trace.v1.Span.Event.toObject(B.events[G],f)}if(B.droppedEventsCount!=null&&B.hasOwnProperty("droppedEventsCount"))E.droppedEventsCount=B.droppedEventsCount;if(B.links&&B.links.length){E.links=[];for(var G=0;G<B.links.length;++G)E.links[G]=NH.opentelemetry.proto.trace.v1.Span.Link.toObject(B.links[G],f)}if(B.droppedLinksCount!=null&&B.hasOwnProperty("droppedLinksCount"))E.droppedLinksCount=B.droppedLinksCount;if(B.status!=null&&B.hasOwnProperty("status"))E.status=NH.opentelemetry.proto.trace.v1.Status.toObject(B.status,f);if(B.flags!=null&&B.hasOwnProperty("flags"))E.flags=B.flags;return E},I.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},I.getTypeUrl=function(B){if(B===void 0)B="type.googleapis.com";return B+"/opentelemetry.proto.trace.v1.Span"},I.SpanKind=function(){var D={},B=Object.create(D);return B[D[0]="SPAN_KIND_UNSPECIFIED"]=0,B[D[1]="SPAN_KIND_INTERNAL"]=1,B[D[2]="SPAN_KIND_SERVER"]=2,B[D[3]="SPAN_KIND_CLIENT"]=3,B[D[4]="SPAN_KIND_PRODUCER"]=4,B[D[5]="SPAN_KIND_CONSUMER"]=5,B}(),I.Event=function(){function D(B){if(this.attributes=[],B){for(var f=Object.keys(B),E=0;E<f.length;++E)if(B[f[E]]!=null)this[f[E]]=B[f[E]]}}return D.prototype.timeUnixNano=null,D.prototype.name=null,D.prototype.attributes=SH.emptyArray,D.prototype.droppedAttributesCount=null,D.create=function(f){return new D(f)},D.encode=function(f,E){if(!E)E=s9.create();if(f.timeUnixNano!=null&&Object.hasOwnProperty.call(f,"timeUnixNano"))E.uint32(9).fixed64(f.timeUnixNano);if(f.name!=null&&Object.hasOwnProperty.call(f,"name"))E.uint32(18).string(f.name);if(f.attributes!=null&&f.attributes.length)for(var M=0;M<f.attributes.length;++M)NH.opentelemetry.proto.common.v1.KeyValue.encode(f.attributes[M],E.uint32(26).fork()).ldelim();if(f.droppedAttributesCount!=null&&Object.hasOwnProperty.call(f,"droppedAttributesCount"))E.uint32(32).uint32(f.droppedAttributesCount);return E},D.encodeDelimited=function(f,E){return this.encode(f,E).ldelim()},D.decode=function(f,E,M){if(!(f instanceof $A))f=$A.create(f);var G=E===void 0?f.len:f.pos+E,U=new NH.opentelemetry.proto.trace.v1.Span.Event;while(f.pos<G){var X=f.uint32();if(X===M)break;switch(X>>>3){case 1:{U.timeUnixNano=f.fixed64();break}case 2:{U.name=f.string();break}case 3:{if(!(U.attributes&&U.attributes.length))U.attributes=[];U.attributes.push(NH.opentelemetry.proto.common.v1.KeyValue.decode(f,f.uint32()));break}case 4:{U.droppedAttributesCount=f.uint32();break}default:f.skipType(X&7);break}}return U},D.decodeDelimited=function(f){if(!(f instanceof $A))f=new $A(f);return this.decode(f,f.uint32())},D.verify=function(f){if(typeof f!=="object"||f===null)return"object expected";if(f.timeUnixNano!=null&&f.hasOwnProperty("timeUnixNano")){if(!SH.isInteger(f.timeUnixNano)&&!(f.timeUnixNano&&SH.isInteger(f.timeUnixNano.low)&&SH.isInteger(f.timeUnixNano.high)))return"timeUnixNano: integer|Long expected"}if(f.name!=null&&f.hasOwnProperty("name")){if(!SH.isString(f.name))return"name: string expected"}if(f.attributes!=null&&f.hasOwnProperty("attributes")){if(!Array.isArray(f.attributes))return"attributes: array expected";for(var E=0;E<f.attributes.length;++E){var M=NH.opentelemetry.proto.common.v1.KeyValue.verify(f.attributes[E]);if(M)return"attributes."+M}}if(f.droppedAttributesCount!=null&&f.hasOwnProperty("droppedAttributesCount")){if(!SH.isInteger(f.droppedAttributesCount))return"droppedAttributesCount: integer expected"}return null},D.fromObject=function(f){if(f instanceof NH.opentelemetry.proto.trace.v1.Span.Event)return f;var E=new NH.opentelemetry.proto.trace.v1.Span.Event;if(f.timeUnixNano!=null){if(SH.Long)(E.timeUnixNano=SH.Long.fromValue(f.timeUnixNano)).unsigned=!1;else if(typeof f.timeUnixNano==="string")E.timeUnixNano=parseInt(f.timeUnixNano,10);else if(typeof f.timeUnixNano==="number")E.timeUnixNano=f.timeUnixNano;else if(typeof f.timeUnixNano==="object")E.timeUnixNano=new SH.LongBits(f.timeUnixNano.low>>>0,f.timeUnixNano.high>>>0).toNumber()}if(f.name!=null)E.name=String(f.name);if(f.attributes){if(!Array.isArray(f.attributes))throw TypeError(".opentelemetry.proto.trace.v1.Span.Event.attributes: array expected");E.attributes=[];for(var M=0;M<f.attributes.length;++M){if(typeof f.attributes[M]!=="object")throw TypeError(".opentelemetry.proto.trace.v1.Span.Event.attributes: object expected");E.attributes[M]=NH.opentelemetry.proto.common.v1.KeyValue.fromObject(f.attributes[M])}}if(f.droppedAttributesCount!=null)E.droppedAttributesCount=f.droppedAttributesCount>>>0;return E},D.toObject=function(f,E){if(!E)E={};var M={};if(E.arrays||E.defaults)M.attributes=[];if(E.defaults){if(SH.Long){var G=new SH.Long(0,0,!1);M.timeUnixNano=E.longs===String?G.toString():E.longs===Number?G.toNumber():G}else M.timeUnixNano=E.longs===String?"0":0;M.name="",M.droppedAttributesCount=0}if(f.timeUnixNano!=null&&f.hasOwnProperty("timeUnixNano"))if(typeof f.timeUnixNano==="number")M.timeUnixNano=E.longs===String?String(f.timeUnixNano):f.timeUnixNano;else M.timeUnixNano=E.longs===String?SH.Long.prototype.toString.call(f.timeUnixNano):E.longs===Number?new SH.LongBits(f.timeUnixNano.low>>>0,f.timeUnixNano.high>>>0).toNumber():f.timeUnixNano;if(f.name!=null&&f.hasOwnProperty("name"))M.name=f.name;if(f.attributes&&f.attributes.length){M.attributes=[];for(var U=0;U<f.attributes.length;++U)M.attributes[U]=NH.opentelemetry.proto.common.v1.KeyValue.toObject(f.attributes[U],E)}if(f.droppedAttributesCount!=null&&f.hasOwnProperty("droppedAttributesCount"))M.droppedAttributesCount=f.droppedAttributesCount;return M},D.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},D.getTypeUrl=function(f){if(f===void 0)f="type.googleapis.com";return f+"/opentelemetry.proto.trace.v1.Span.Event"},D}(),I.Link=function(){function D(B){if(this.attributes=[],B){for(var f=Object.keys(B),E=0;E<f.length;++E)if(B[f[E]]!=null)this[f[E]]=B[f[E]]}}return D.prototype.traceId=null,D.prototype.spanId=null,D.prototype.traceState=null,D.prototype.attributes=SH.emptyArray,D.prototype.droppedAttributesCount=null,D.prototype.flags=null,D.create=function(f){return new D(f)},D.encode=function(f,E){if(!E)E=s9.create();if(f.traceId!=null&&Object.hasOwnProperty.call(f,"traceId"))E.uint32(10).bytes(f.traceId);if(f.spanId!=null&&Object.hasOwnProperty.call(f,"spanId"))E.uint32(18).bytes(f.spanId);if(f.traceState!=null&&Object.hasOwnProperty.call(f,"traceState"))E.uint32(26).string(f.traceState);if(f.attributes!=null&&f.attributes.length)for(var M=0;M<f.attributes.length;++M)NH.opentelemetry.proto.common.v1.KeyValue.encode(f.attributes[M],E.uint32(34).fork()).ldelim();if(f.droppedAttributesCount!=null&&Object.hasOwnProperty.call(f,"droppedAttributesCount"))E.uint32(40).uint32(f.droppedAttributesCount);if(f.flags!=null&&Object.hasOwnProperty.call(f,"flags"))E.uint32(53).fixed32(f.flags);return E},D.encodeDelimited=function(f,E){return this.encode(f,E).ldelim()},D.decode=function(f,E,M){if(!(f instanceof $A))f=$A.create(f);var G=E===void 0?f.len:f.pos+E,U=new NH.opentelemetry.proto.trace.v1.Span.Link;while(f.pos<G){var X=f.uint32();if(X===M)break;switch(X>>>3){case 1:{U.traceId=f.bytes();break}case 2:{U.spanId=f.bytes();break}case 3:{U.traceState=f.string();break}case 4:{if(!(U.attributes&&U.attributes.length))U.attributes=[];U.attributes.push(NH.opentelemetry.proto.common.v1.KeyValue.decode(f,f.uint32()));break}case 5:{U.droppedAttributesCount=f.uint32();break}case 6:{U.flags=f.fixed32();break}default:f.skipType(X&7);break}}return U},D.decodeDelimited=function(f){if(!(f instanceof $A))f=new $A(f);return this.decode(f,f.uint32())},D.verify=function(f){if(typeof f!=="object"||f===null)return"object expected";if(f.traceId!=null&&f.hasOwnProperty("traceId")){if(!(f.traceId&&typeof f.traceId.length==="number"||SH.isString(f.traceId)))return"traceId: buffer expected"}if(f.spanId!=null&&f.hasOwnProperty("spanId")){if(!(f.spanId&&typeof f.spanId.length==="number"||SH.isString(f.spanId)))return"spanId: buffer expected"}if(f.traceState!=null&&f.hasOwnProperty("traceState")){if(!SH.isString(f.traceState))return"traceState: string expected"}if(f.attributes!=null&&f.hasOwnProperty("attributes")){if(!Array.isArray(f.attributes))return"attributes: array expected";for(var E=0;E<f.attributes.length;++E){var M=NH.opentelemetry.proto.common.v1.KeyValue.verify(f.attributes[E]);if(M)return"attributes."+M}}if(f.droppedAttributesCount!=null&&f.hasOwnProperty("droppedAttributesCount")){if(!SH.isInteger(f.droppedAttributesCount))return"droppedAttributesCount: integer expected"}if(f.flags!=null&&f.hasOwnProperty("flags")){if(!SH.isInteger(f.flags))return"flags: integer expected"}return null},D.fromObject=function(f){if(f instanceof NH.opentelemetry.proto.trace.v1.Span.Link)return f;var E=new NH.opentelemetry.proto.trace.v1.Span.Link;if(f.traceId!=null){if(typeof f.traceId==="string")SH.base64.decode(f.traceId,E.traceId=SH.newBuffer(SH.base64.length(f.traceId)),0);else if(f.traceId.length>=0)E.traceId=f.traceId}if(f.spanId!=null){if(typeof f.spanId==="string")SH.base64.decode(f.spanId,E.spanId=SH.newBuffer(SH.base64.length(f.spanId)),0);else if(f.spanId.length>=0)E.spanId=f.spanId}if(f.traceState!=null)E.traceState=String(f.traceState);if(f.attributes){if(!Array.isArray(f.attributes))throw TypeError(".opentelemetry.proto.trace.v1.Span.Link.attributes: array expected");E.attributes=[];for(var M=0;M<f.attributes.length;++M){if(typeof f.attributes[M]!=="object")throw TypeError(".opentelemetry.proto.trace.v1.Span.Link.attributes: object expected");E.attributes[M]=NH.opentelemetry.proto.common.v1.KeyValue.fromObject(f.attributes[M])}}if(f.droppedAttributesCount!=null)E.droppedAttributesCount=f.droppedAttributesCount>>>0;if(f.flags!=null)E.flags=f.flags>>>0;return E},D.toObject=function(f,E){if(!E)E={};var M={};if(E.arrays||E.defaults)M.attributes=[];if(E.defaults){if(E.bytes===String)M.traceId="";else if(M.traceId=[],E.bytes!==Array)M.traceId=SH.newBuffer(M.traceId);if(E.bytes===String)M.spanId="";else if(M.spanId=[],E.bytes!==Array)M.spanId=SH.newBuffer(M.spanId);M.traceState="",M.droppedAttributesCount=0,M.flags=0}if(f.traceId!=null&&f.hasOwnProperty("traceId"))M.traceId=E.bytes===String?SH.base64.encode(f.traceId,0,f.traceId.length):E.bytes===Array?Array.prototype.slice.call(f.traceId):f.traceId;if(f.spanId!=null&&f.hasOwnProperty("spanId"))M.spanId=E.bytes===String?SH.base64.encode(f.spanId,0,f.spanId.length):E.bytes===Array?Array.prototype.slice.call(f.spanId):f.spanId;if(f.traceState!=null&&f.hasOwnProperty("traceState"))M.traceState=f.traceState;if(f.attributes&&f.attributes.length){M.attributes=[];for(var G=0;G<f.attributes.length;++G)M.attributes[G]=NH.opentelemetry.proto.common.v1.KeyValue.toObject(f.attributes[G],E)}if(f.droppedAttributesCount!=null&&f.hasOwnProperty("droppedAttributesCount"))M.droppedAttributesCount=f.droppedAttributesCount;if(f.flags!=null&&f.hasOwnProperty("flags"))M.flags=f.flags;return M},D.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},D.getTypeUrl=function(f){if(f===void 0)f="type.googleapis.com";return f+"/opentelemetry.proto.trace.v1.Span.Link"},D}(),I}(),L.Status=function(){function I(D){if(D){for(var B=Object.keys(D),f=0;f<B.length;++f)if(D[B[f]]!=null)this[B[f]]=D[B[f]]}}return I.prototype.message=null,I.prototype.code=null,I.create=function(B){return new I(B)},I.encode=function(B,f){if(!f)f=s9.create();if(B.message!=null&&Object.hasOwnProperty.call(B,"message"))f.uint32(18).string(B.message);if(B.code!=null&&Object.hasOwnProperty.call(B,"code"))f.uint32(24).int32(B.code);return f},I.encodeDelimited=function(B,f){return this.encode(B,f).ldelim()},I.decode=function(B,f,E){if(!(B instanceof $A))B=$A.create(B);var M=f===void 0?B.len:B.pos+f,G=new NH.opentelemetry.proto.trace.v1.Status;while(B.pos<M){var U=B.uint32();if(U===E)break;switch(U>>>3){case 2:{G.message=B.string();break}case 3:{G.code=B.int32();break}default:B.skipType(U&7);break}}return G},I.decodeDelimited=function(B){if(!(B instanceof $A))B=new $A(B);return this.decode(B,B.uint32())},I.verify=function(B){if(typeof B!=="object"||B===null)return"object expected";if(B.message!=null&&B.hasOwnProperty("message")){if(!SH.isString(B.message))return"message: string expected"}if(B.code!=null&&B.hasOwnProperty("code"))switch(B.code){default:return"code: enum value expected";case 0:case 1:case 2:break}return null},I.fromObject=function(B){if(B instanceof NH.opentelemetry.proto.trace.v1.Status)return B;var f=new NH.opentelemetry.proto.trace.v1.Status;if(B.message!=null)f.message=String(B.message);switch(B.code){default:if(typeof B.code==="number"){f.code=B.code;break}break;case"STATUS_CODE_UNSET":case 0:f.code=0;break;case"STATUS_CODE_OK":case 1:f.code=1;break;case"STATUS_CODE_ERROR":case 2:f.code=2;break}return f},I.toObject=function(B,f){if(!f)f={};var E={};if(f.defaults)E.message="",E.code=f.enums===String?"STATUS_CODE_UNSET":0;if(B.message!=null&&B.hasOwnProperty("message"))E.message=B.message;if(B.code!=null&&B.hasOwnProperty("code"))E.code=f.enums===String?NH.opentelemetry.proto.trace.v1.Status.StatusCode[B.code]===void 0?B.code:NH.opentelemetry.proto.trace.v1.Status.StatusCode[B.code]:B.code;return E},I.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},I.getTypeUrl=function(B){if(B===void 0)B="type.googleapis.com";return B+"/opentelemetry.proto.trace.v1.Status"},I.StatusCode=function(){var D={},B=Object.create(D);return B[D[0]="STATUS_CODE_UNSET"]=0,B[D[1]="STATUS_CODE_OK"]=1,B[D[2]="STATUS_CODE_ERROR"]=2,B}(),I}(),L.SpanFlags=function(){var I={},D=Object.create(I);return D[I[0]="SPAN_FLAGS_DO_NOT_USE"]=0,D[I[255]="SPAN_FLAGS_TRACE_FLAGS_MASK"]=255,D[I[256]="SPAN_FLAGS_CONTEXT_HAS_IS_REMOTE_MASK"]=256,D[I[512]="SPAN_FLAGS_CONTEXT_IS_REMOTE_MASK"]=512,D}(),L}(),A}(),$.collector=function(){var A={};return A.trace=function(){var L={};return L.v1=function(){var I={};return I.TraceService=function(){function D(B,f,E){A0.rpc.Service.call(this,B,f,E)}return(D.prototype=Object.create(A0.rpc.Service.prototype)).constructor=D,D.create=function(f,E,M){return new this(f,E,M)},Object.defineProperty(D.prototype.export=function B(f,E){return this.rpcCall(B,NH.opentelemetry.proto.collector.trace.v1.ExportTraceServiceRequest,NH.opentelemetry.proto.collector.trace.v1.ExportTraceServiceResponse,f,E)},"name",{value:"Export"}),D}(),I.ExportTraceServiceRequest=function(){function D(B){if(this.resourceSpans=[],B){for(var f=Object.keys(B),E=0;E<f.length;++E)if(B[f[E]]!=null)this[f[E]]=B[f[E]]}}return D.prototype.resourceSpans=SH.emptyArray,D.create=function(f){return new D(f)},D.encode=function(f,E){if(!E)E=s9.create();if(f.resourceSpans!=null&&f.resourceSpans.length)for(var M=0;M<f.resourceSpans.length;++M)NH.opentelemetry.proto.trace.v1.ResourceSpans.encode(f.resourceSpans[M],E.uint32(10).fork()).ldelim();return E},D.encodeDelimited=function(f,E){return this.encode(f,E).ldelim()},D.decode=function(f,E,M){if(!(f instanceof $A))f=$A.create(f);var G=E===void 0?f.len:f.pos+E,U=new NH.opentelemetry.proto.collector.trace.v1.ExportTraceServiceRequest;while(f.pos<G){var X=f.uint32();if(X===M)break;switch(X>>>3){case 1:{if(!(U.resourceSpans&&U.resourceSpans.length))U.resourceSpans=[];U.resourceSpans.push(NH.opentelemetry.proto.trace.v1.ResourceSpans.decode(f,f.uint32()));break}default:f.skipType(X&7);break}}return U},D.decodeDelimited=function(f){if(!(f instanceof $A))f=new $A(f);return this.decode(f,f.uint32())},D.verify=function(f){if(typeof f!=="object"||f===null)return"object expected";if(f.resourceSpans!=null&&f.hasOwnProperty("resourceSpans")){if(!Array.isArray(f.resourceSpans))return"resourceSpans: array expected";for(var E=0;E<f.resourceSpans.length;++E){var M=NH.opentelemetry.proto.trace.v1.ResourceSpans.verify(f.resourceSpans[E]);if(M)return"resourceSpans."+M}}return null},D.fromObject=function(f){if(f instanceof NH.opentelemetry.proto.collector.trace.v1.ExportTraceServiceRequest)return f;var E=new NH.opentelemetry.proto.collector.trace.v1.ExportTraceServiceRequest;if(f.resourceSpans){if(!Array.isArray(f.resourceSpans))throw TypeError(".opentelemetry.proto.collector.trace.v1.ExportTraceServiceRequest.resourceSpans: array expected");E.resourceSpans=[];for(var M=0;M<f.resourceSpans.length;++M){if(typeof f.resourceSpans[M]!=="object")throw TypeError(".opentelemetry.proto.collector.trace.v1.ExportTraceServiceRequest.resourceSpans: object expected");E.resourceSpans[M]=NH.opentelemetry.proto.trace.v1.ResourceSpans.fromObject(f.resourceSpans[M])}}return E},D.toObject=function(f,E){if(!E)E={};var M={};if(E.arrays||E.defaults)M.resourceSpans=[];if(f.resourceSpans&&f.resourceSpans.length){M.resourceSpans=[];for(var G=0;G<f.resourceSpans.length;++G)M.resourceSpans[G]=NH.opentelemetry.proto.trace.v1.ResourceSpans.toObject(f.resourceSpans[G],E)}return M},D.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},D.getTypeUrl=function(f){if(f===void 0)f="type.googleapis.com";return f+"/opentelemetry.proto.collector.trace.v1.ExportTraceServiceRequest"},D}(),I.ExportTraceServiceResponse=function(){function D(B){if(B){for(var f=Object.keys(B),E=0;E<f.length;++E)if(B[f[E]]!=null)this[f[E]]=B[f[E]]}}return D.prototype.partialSuccess=null,D.create=function(f){return new D(f)},D.encode=function(f,E){if(!E)E=s9.create();if(f.partialSuccess!=null&&Object.hasOwnProperty.call(f,"partialSuccess"))NH.opentelemetry.proto.collector.trace.v1.ExportTracePartialSuccess.encode(f.partialSuccess,E.uint32(10).fork()).ldelim();return E},D.encodeDelimited=function(f,E){return this.encode(f,E).ldelim()},D.decode=function(f,E,M){if(!(f instanceof $A))f=$A.create(f);var G=E===void 0?f.len:f.pos+E,U=new NH.opentelemetry.proto.collector.trace.v1.ExportTraceServiceResponse;while(f.pos<G){var X=f.uint32();if(X===M)break;switch(X>>>3){case 1:{U.partialSuccess=NH.opentelemetry.proto.collector.trace.v1.ExportTracePartialSuccess.decode(f,f.uint32());break}default:f.skipType(X&7);break}}return U},D.decodeDelimited=function(f){if(!(f instanceof $A))f=new $A(f);return this.decode(f,f.uint32())},D.verify=function(f){if(typeof f!=="object"||f===null)return"object expected";if(f.partialSuccess!=null&&f.hasOwnProperty("partialSuccess")){var E=NH.opentelemetry.proto.collector.trace.v1.ExportTracePartialSuccess.verify(f.partialSuccess);if(E)return"partialSuccess."+E}return null},D.fromObject=function(f){if(f instanceof NH.opentelemetry.proto.collector.trace.v1.ExportTraceServiceResponse)return f;var E=new NH.opentelemetry.proto.collector.trace.v1.ExportTraceServiceResponse;if(f.partialSuccess!=null){if(typeof f.partialSuccess!=="object")throw TypeError(".opentelemetry.proto.collector.trace.v1.ExportTraceServiceResponse.partialSuccess: object expected");E.partialSuccess=NH.opentelemetry.proto.collector.trace.v1.ExportTracePartialSuccess.fromObject(f.partialSuccess)}return E},D.toObject=function(f,E){if(!E)E={};var M={};if(E.defaults)M.partialSuccess=null;if(f.partialSuccess!=null&&f.hasOwnProperty("partialSuccess"))M.partialSuccess=NH.opentelemetry.proto.collector.trace.v1.ExportTracePartialSuccess.toObject(f.partialSuccess,E);return M},D.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},D.getTypeUrl=function(f){if(f===void 0)f="type.googleapis.com";return f+"/opentelemetry.proto.collector.trace.v1.ExportTraceServiceResponse"},D}(),I.ExportTracePartialSuccess=function(){function D(B){if(B){for(var f=Object.keys(B),E=0;E<f.length;++E)if(B[f[E]]!=null)this[f[E]]=B[f[E]]}}return D.prototype.rejectedSpans=null,D.prototype.errorMessage=null,D.create=function(f){return new D(f)},D.encode=function(f,E){if(!E)E=s9.create();if(f.rejectedSpans!=null&&Object.hasOwnProperty.call(f,"rejectedSpans"))E.uint32(8).int64(f.rejectedSpans);if(f.errorMessage!=null&&Object.hasOwnProperty.call(f,"errorMessage"))E.uint32(18).string(f.errorMessage);return E},D.encodeDelimited=function(f,E){return this.encode(f,E).ldelim()},D.decode=function(f,E,M){if(!(f instanceof $A))f=$A.create(f);var G=E===void 0?f.len:f.pos+E,U=new NH.opentelemetry.proto.collector.trace.v1.ExportTracePartialSuccess;while(f.pos<G){var X=f.uint32();if(X===M)break;switch(X>>>3){case 1:{U.rejectedSpans=f.int64();break}case 2:{U.errorMessage=f.string();break}default:f.skipType(X&7);break}}return U},D.decodeDelimited=function(f){if(!(f instanceof $A))f=new $A(f);return this.decode(f,f.uint32())},D.verify=function(f){if(typeof f!=="object"||f===null)return"object expected";if(f.rejectedSpans!=null&&f.hasOwnProperty("rejectedSpans")){if(!SH.isInteger(f.rejectedSpans)&&!(f.rejectedSpans&&SH.isInteger(f.rejectedSpans.low)&&SH.isInteger(f.rejectedSpans.high)))return"rejectedSpans: integer|Long expected"}if(f.errorMessage!=null&&f.hasOwnProperty("errorMessage")){if(!SH.isString(f.errorMessage))return"errorMessage: string expected"}return null},D.fromObject=function(f){if(f instanceof NH.opentelemetry.proto.collector.trace.v1.ExportTracePartialSuccess)return f;var E=new NH.opentelemetry.proto.collector.trace.v1.ExportTracePartialSuccess;if(f.rejectedSpans!=null){if(SH.Long)(E.rejectedSpans=SH.Long.fromValue(f.rejectedSpans)).unsigned=!1;else if(typeof f.rejectedSpans==="string")E.rejectedSpans=parseInt(f.rejectedSpans,10);else if(typeof f.rejectedSpans==="number")E.rejectedSpans=f.rejectedSpans;else if(typeof f.rejectedSpans==="object")E.rejectedSpans=new SH.LongBits(f.rejectedSpans.low>>>0,f.rejectedSpans.high>>>0).toNumber()}if(f.errorMessage!=null)E.errorMessage=String(f.errorMessage);return E},D.toObject=function(f,E){if(!E)E={};var M={};if(E.defaults){if(SH.Long){var G=new SH.Long(0,0,!1);M.rejectedSpans=E.longs===String?G.toString():E.longs===Number?G.toNumber():G}else M.rejectedSpans=E.longs===String?"0":0;M.errorMessage=""}if(f.rejectedSpans!=null&&f.hasOwnProperty("rejectedSpans"))if(typeof f.rejectedSpans==="number")M.rejectedSpans=E.longs===String?String(f.rejectedSpans):f.rejectedSpans;else M.rejectedSpans=E.longs===String?SH.Long.prototype.toString.call(f.rejectedSpans):E.longs===Number?new SH.LongBits(f.rejectedSpans.low>>>0,f.rejectedSpans.high>>>0).toNumber():f.rejectedSpans;if(f.errorMessage!=null&&f.hasOwnProperty("errorMessage"))M.errorMessage=f.errorMessage;return M},D.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},D.getTypeUrl=function(f){if(f===void 0)f="type.googleapis.com";return f+"/opentelemetry.proto.collector.trace.v1.ExportTracePartialSuccess"},D}(),I}(),L}(),A.metrics=function(){var L={};return L.v1=function(){var I={};return I.MetricsService=function(){function D(B,f,E){A0.rpc.Service.call(this,B,f,E)}return(D.prototype=Object.create(A0.rpc.Service.prototype)).constructor=D,D.create=function(f,E,M){return new this(f,E,M)},Object.defineProperty(D.prototype.export=function B(f,E){return this.rpcCall(B,NH.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceRequest,NH.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceResponse,f,E)},"name",{value:"Export"}),D}(),I.ExportMetricsServiceRequest=function(){function D(B){if(this.resourceMetrics=[],B){for(var f=Object.keys(B),E=0;E<f.length;++E)if(B[f[E]]!=null)this[f[E]]=B[f[E]]}}return D.prototype.resourceMetrics=SH.emptyArray,D.create=function(f){return new D(f)},D.encode=function(f,E){if(!E)E=s9.create();if(f.resourceMetrics!=null&&f.resourceMetrics.length)for(var M=0;M<f.resourceMetrics.length;++M)NH.opentelemetry.proto.metrics.v1.ResourceMetrics.encode(f.resourceMetrics[M],E.uint32(10).fork()).ldelim();return E},D.encodeDelimited=function(f,E){return this.encode(f,E).ldelim()},D.decode=function(f,E,M){if(!(f instanceof $A))f=$A.create(f);var G=E===void 0?f.len:f.pos+E,U=new NH.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceRequest;while(f.pos<G){var X=f.uint32();if(X===M)break;switch(X>>>3){case 1:{if(!(U.resourceMetrics&&U.resourceMetrics.length))U.resourceMetrics=[];U.resourceMetrics.push(NH.opentelemetry.proto.metrics.v1.ResourceMetrics.decode(f,f.uint32()));break}default:f.skipType(X&7);break}}return U},D.decodeDelimited=function(f){if(!(f instanceof $A))f=new $A(f);return this.decode(f,f.uint32())},D.verify=function(f){if(typeof f!=="object"||f===null)return"object expected";if(f.resourceMetrics!=null&&f.hasOwnProperty("resourceMetrics")){if(!Array.isArray(f.resourceMetrics))return"resourceMetrics: array expected";for(var E=0;E<f.resourceMetrics.length;++E){var M=NH.opentelemetry.proto.metrics.v1.ResourceMetrics.verify(f.resourceMetrics[E]);if(M)return"resourceMetrics."+M}}return null},D.fromObject=function(f){if(f instanceof NH.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceRequest)return f;var E=new NH.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceRequest;if(f.resourceMetrics){if(!Array.isArray(f.resourceMetrics))throw TypeError(".opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceRequest.resourceMetrics: array expected");E.resourceMetrics=[];for(var M=0;M<f.resourceMetrics.length;++M){if(typeof f.resourceMetrics[M]!=="object")throw TypeError(".opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceRequest.resourceMetrics: object expected");E.resourceMetrics[M]=NH.opentelemetry.proto.metrics.v1.ResourceMetrics.fromObject(f.resourceMetrics[M])}}return E},D.toObject=function(f,E){if(!E)E={};var M={};if(E.arrays||E.defaults)M.resourceMetrics=[];if(f.resourceMetrics&&f.resourceMetrics.length){M.resourceMetrics=[];for(var G=0;G<f.resourceMetrics.length;++G)M.resourceMetrics[G]=NH.opentelemetry.proto.metrics.v1.ResourceMetrics.toObject(f.resourceMetrics[G],E)}return M},D.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},D.getTypeUrl=function(f){if(f===void 0)f="type.googleapis.com";return f+"/opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceRequest"},D}(),I.ExportMetricsServiceResponse=function(){function D(B){if(B){for(var f=Object.keys(B),E=0;E<f.length;++E)if(B[f[E]]!=null)this[f[E]]=B[f[E]]}}return D.prototype.partialSuccess=null,D.create=function(f){return new D(f)},D.encode=function(f,E){if(!E)E=s9.create();if(f.partialSuccess!=null&&Object.hasOwnProperty.call(f,"partialSuccess"))NH.opentelemetry.proto.collector.metrics.v1.ExportMetricsPartialSuccess.encode(f.partialSuccess,E.uint32(10).fork()).ldelim();return E},D.encodeDelimited=function(f,E){return this.encode(f,E).ldelim()},D.decode=function(f,E,M){if(!(f instanceof $A))f=$A.create(f);var G=E===void 0?f.len:f.pos+E,U=new NH.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceResponse;while(f.pos<G){var X=f.uint32();if(X===M)break;switch(X>>>3){case 1:{U.partialSuccess=NH.opentelemetry.proto.collector.metrics.v1.ExportMetricsPartialSuccess.decode(f,f.uint32());break}default:f.skipType(X&7);break}}return U},D.decodeDelimited=function(f){if(!(f instanceof $A))f=new $A(f);return this.decode(f,f.uint32())},D.verify=function(f){if(typeof f!=="object"||f===null)return"object expected";if(f.partialSuccess!=null&&f.hasOwnProperty("partialSuccess")){var E=NH.opentelemetry.proto.collector.metrics.v1.ExportMetricsPartialSuccess.verify(f.partialSuccess);if(E)return"partialSuccess."+E}return null},D.fromObject=function(f){if(f instanceof NH.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceResponse)return f;var E=new NH.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceResponse;if(f.partialSuccess!=null){if(typeof f.partialSuccess!=="object")throw TypeError(".opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceResponse.partialSuccess: object expected");E.partialSuccess=NH.opentelemetry.proto.collector.metrics.v1.ExportMetricsPartialSuccess.fromObject(f.partialSuccess)}return E},D.toObject=function(f,E){if(!E)E={};var M={};if(E.defaults)M.partialSuccess=null;if(f.partialSuccess!=null&&f.hasOwnProperty("partialSuccess"))M.partialSuccess=NH.opentelemetry.proto.collector.metrics.v1.ExportMetricsPartialSuccess.toObject(f.partialSuccess,E);return M},D.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},D.getTypeUrl=function(f){if(f===void 0)f="type.googleapis.com";return f+"/opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceResponse"},D}(),I.ExportMetricsPartialSuccess=function(){function D(B){if(B){for(var f=Object.keys(B),E=0;E<f.length;++E)if(B[f[E]]!=null)this[f[E]]=B[f[E]]}}return D.prototype.rejectedDataPoints=null,D.prototype.errorMessage=null,D.create=function(f){return new D(f)},D.encode=function(f,E){if(!E)E=s9.create();if(f.rejectedDataPoints!=null&&Object.hasOwnProperty.call(f,"rejectedDataPoints"))E.uint32(8).int64(f.rejectedDataPoints);if(f.errorMessage!=null&&Object.hasOwnProperty.call(f,"errorMessage"))E.uint32(18).string(f.errorMessage);return E},D.encodeDelimited=function(f,E){return this.encode(f,E).ldelim()},D.decode=function(f,E,M){if(!(f instanceof $A))f=$A.create(f);var G=E===void 0?f.len:f.pos+E,U=new NH.opentelemetry.proto.collector.metrics.v1.ExportMetricsPartialSuccess;while(f.pos<G){var X=f.uint32();if(X===M)break;switch(X>>>3){case 1:{U.rejectedDataPoints=f.int64();break}case 2:{U.errorMessage=f.string();break}default:f.skipType(X&7);break}}return U},D.decodeDelimited=function(f){if(!(f instanceof $A))f=new $A(f);return this.decode(f,f.uint32())},D.verify=function(f){if(typeof f!=="object"||f===null)return"object expected";if(f.rejectedDataPoints!=null&&f.hasOwnProperty("rejectedDataPoints")){if(!SH.isInteger(f.rejectedDataPoints)&&!(f.rejectedDataPoints&&SH.isInteger(f.rejectedDataPoints.low)&&SH.isInteger(f.rejectedDataPoints.high)))return"rejectedDataPoints: integer|Long expected"}if(f.errorMessage!=null&&f.hasOwnProperty("errorMessage")){if(!SH.isString(f.errorMessage))return"errorMessage: string expected"}return null},D.fromObject=function(f){if(f instanceof NH.opentelemetry.proto.collector.metrics.v1.ExportMetricsPartialSuccess)return f;var E=new NH.opentelemetry.proto.collector.metrics.v1.ExportMetricsPartialSuccess;if(f.rejectedDataPoints!=null){if(SH.Long)(E.rejectedDataPoints=SH.Long.fromValue(f.rejectedDataPoints)).unsigned=!1;else if(typeof f.rejectedDataPoints==="string")E.rejectedDataPoints=parseInt(f.rejectedDataPoints,10);else if(typeof f.rejectedDataPoints==="number")E.rejectedDataPoints=f.rejectedDataPoints;else if(typeof f.rejectedDataPoints==="object")E.rejectedDataPoints=new SH.LongBits(f.rejectedDataPoints.low>>>0,f.rejectedDataPoints.high>>>0).toNumber()}if(f.errorMessage!=null)E.errorMessage=String(f.errorMessage);return E},D.toObject=function(f,E){if(!E)E={};var M={};if(E.defaults){if(SH.Long){var G=new SH.Long(0,0,!1);M.rejectedDataPoints=E.longs===String?G.toString():E.longs===Number?G.toNumber():G}else M.rejectedDataPoints=E.longs===String?"0":0;M.errorMessage=""}if(f.rejectedDataPoints!=null&&f.hasOwnProperty("rejectedDataPoints"))if(typeof f.rejectedDataPoints==="number")M.rejectedDataPoints=E.longs===String?String(f.rejectedDataPoints):f.rejectedDataPoints;else M.rejectedDataPoints=E.longs===String?SH.Long.prototype.toString.call(f.rejectedDataPoints):E.longs===Number?new SH.LongBits(f.rejectedDataPoints.low>>>0,f.rejectedDataPoints.high>>>0).toNumber():f.rejectedDataPoints;if(f.errorMessage!=null&&f.hasOwnProperty("errorMessage"))M.errorMessage=f.errorMessage;return M},D.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},D.getTypeUrl=function(f){if(f===void 0)f="type.googleapis.com";return f+"/opentelemetry.proto.collector.metrics.v1.ExportMetricsPartialSuccess"},D}(),I}(),L}(),A.logs=function(){var L={};return L.v1=function(){var I={};return I.LogsService=function(){function D(B,f,E){A0.rpc.Service.call(this,B,f,E)}return(D.prototype=Object.create(A0.rpc.Service.prototype)).constructor=D,D.create=function(f,E,M){return new this(f,E,M)},Object.defineProperty(D.prototype.export=function B(f,E){return this.rpcCall(B,NH.opentelemetry.proto.collector.logs.v1.ExportLogsServiceRequest,NH.opentelemetry.proto.collector.logs.v1.ExportLogsServiceResponse,f,E)},"name",{value:"Export"}),D}(),I.ExportLogsServiceRequest=function(){function D(B){if(this.resourceLogs=[],B){for(var f=Object.keys(B),E=0;E<f.length;++E)if(B[f[E]]!=null)this[f[E]]=B[f[E]]}}return D.prototype.resourceLogs=SH.emptyArray,D.create=function(f){return new D(f)},D.encode=function(f,E){if(!E)E=s9.create();if(f.resourceLogs!=null&&f.resourceLogs.length)for(var M=0;M<f.resourceLogs.length;++M)NH.opentelemetry.proto.logs.v1.ResourceLogs.encode(f.resourceLogs[M],E.uint32(10).fork()).ldelim();return E},D.encodeDelimited=function(f,E){return this.encode(f,E).ldelim()},D.decode=function(f,E,M){if(!(f instanceof $A))f=$A.create(f);var G=E===void 0?f.len:f.pos+E,U=new NH.opentelemetry.proto.collector.logs.v1.ExportLogsServiceRequest;while(f.pos<G){var X=f.uint32();if(X===M)break;switch(X>>>3){case 1:{if(!(U.resourceLogs&&U.resourceLogs.length))U.resourceLogs=[];U.resourceLogs.push(NH.opentelemetry.proto.logs.v1.ResourceLogs.decode(f,f.uint32()));break}default:f.skipType(X&7);break}}return U},D.decodeDelimited=function(f){if(!(f instanceof $A))f=new $A(f);return this.decode(f,f.uint32())},D.verify=function(f){if(typeof f!=="object"||f===null)return"object expected";if(f.resourceLogs!=null&&f.hasOwnProperty("resourceLogs")){if(!Array.isArray(f.resourceLogs))return"resourceLogs: array expected";for(var E=0;E<f.resourceLogs.length;++E){var M=NH.opentelemetry.proto.logs.v1.ResourceLogs.verify(f.resourceLogs[E]);if(M)return"resourceLogs."+M}}return null},D.fromObject=function(f){if(f instanceof NH.opentelemetry.proto.collector.logs.v1.ExportLogsServiceRequest)return f;var E=new NH.opentelemetry.proto.collector.logs.v1.ExportLogsServiceRequest;if(f.resourceLogs){if(!Array.isArray(f.resourceLogs))throw TypeError(".opentelemetry.proto.collector.logs.v1.ExportLogsServiceRequest.resourceLogs: array expected");E.resourceLogs=[];for(var M=0;M<f.resourceLogs.length;++M){if(typeof f.resourceLogs[M]!=="object")throw TypeError(".opentelemetry.proto.collector.logs.v1.ExportLogsServiceRequest.resourceLogs: object expected");E.resourceLogs[M]=NH.opentelemetry.proto.logs.v1.ResourceLogs.fromObject(f.resourceLogs[M])}}return E},D.toObject=function(f,E){if(!E)E={};var M={};if(E.arrays||E.defaults)M.resourceLogs=[];if(f.resourceLogs&&f.resourceLogs.length){M.resourceLogs=[];for(var G=0;G<f.resourceLogs.length;++G)M.resourceLogs[G]=NH.opentelemetry.proto.logs.v1.ResourceLogs.toObject(f.resourceLogs[G],E)}return M},D.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},D.getTypeUrl=function(f){if(f===void 0)f="type.googleapis.com";return f+"/opentelemetry.proto.collector.logs.v1.ExportLogsServiceRequest"},D}(),I.ExportLogsServiceResponse=function(){function D(B){if(B){for(var f=Object.keys(B),E=0;E<f.length;++E)if(B[f[E]]!=null)this[f[E]]=B[f[E]]}}return D.prototype.partialSuccess=null,D.create=function(f){return new D(f)},D.encode=function(f,E){if(!E)E=s9.create();if(f.partialSuccess!=null&&Object.hasOwnProperty.call(f,"partialSuccess"))NH.opentelemetry.proto.collector.logs.v1.ExportLogsPartialSuccess.encode(f.partialSuccess,E.uint32(10).fork()).ldelim();return E},D.encodeDelimited=function(f,E){return this.encode(f,E).ldelim()},D.decode=function(f,E,M){if(!(f instanceof $A))f=$A.create(f);var G=E===void 0?f.len:f.pos+E,U=new NH.opentelemetry.proto.collector.logs.v1.ExportLogsServiceResponse;while(f.pos<G){var X=f.uint32();if(X===M)break;switch(X>>>3){case 1:{U.partialSuccess=NH.opentelemetry.proto.collector.logs.v1.ExportLogsPartialSuccess.decode(f,f.uint32());break}default:f.skipType(X&7);break}}return U},D.decodeDelimited=function(f){if(!(f instanceof $A))f=new $A(f);return this.decode(f,f.uint32())},D.verify=function(f){if(typeof f!=="object"||f===null)return"object expected";if(f.partialSuccess!=null&&f.hasOwnProperty("partialSuccess")){var E=NH.opentelemetry.proto.collector.logs.v1.ExportLogsPartialSuccess.verify(f.partialSuccess);if(E)return"partialSuccess."+E}return null},D.fromObject=function(f){if(f instanceof NH.opentelemetry.proto.collector.logs.v1.ExportLogsServiceResponse)return f;var E=new NH.opentelemetry.proto.collector.logs.v1.ExportLogsServiceResponse;if(f.partialSuccess!=null){if(typeof f.partialSuccess!=="object")throw TypeError(".opentelemetry.proto.collector.logs.v1.ExportLogsServiceResponse.partialSuccess: object expected");E.partialSuccess=NH.opentelemetry.proto.collector.logs.v1.ExportLogsPartialSuccess.fromObject(f.partialSuccess)}return E},D.toObject=function(f,E){if(!E)E={};var M={};if(E.defaults)M.partialSuccess=null;if(f.partialSuccess!=null&&f.hasOwnProperty("partialSuccess"))M.partialSuccess=NH.opentelemetry.proto.collector.logs.v1.ExportLogsPartialSuccess.toObject(f.partialSuccess,E);return M},D.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},D.getTypeUrl=function(f){if(f===void 0)f="type.googleapis.com";return f+"/opentelemetry.proto.collector.logs.v1.ExportLogsServiceResponse"},D}(),I.ExportLogsPartialSuccess=function(){function D(B){if(B){for(var f=Object.keys(B),E=0;E<f.length;++E)if(B[f[E]]!=null)this[f[E]]=B[f[E]]}}return D.prototype.rejectedLogRecords=null,D.prototype.errorMessage=null,D.create=function(f){return new D(f)},D.encode=function(f,E){if(!E)E=s9.create();if(f.rejectedLogRecords!=null&&Object.hasOwnProperty.call(f,"rejectedLogRecords"))E.uint32(8).int64(f.rejectedLogRecords);if(f.errorMessage!=null&&Object.hasOwnProperty.call(f,"errorMessage"))E.uint32(18).string(f.errorMessage);return E},D.encodeDelimited=function(f,E){return this.encode(f,E).ldelim()},D.decode=function(f,E,M){if(!(f instanceof $A))f=$A.create(f);var G=E===void 0?f.len:f.pos+E,U=new NH.opentelemetry.proto.collector.logs.v1.ExportLogsPartialSuccess;while(f.pos<G){var X=f.uint32();if(X===M)break;switch(X>>>3){case 1:{U.rejectedLogRecords=f.int64();break}case 2:{U.errorMessage=f.string();break}default:f.skipType(X&7);break}}return U},D.decodeDelimited=function(f){if(!(f instanceof $A))f=new $A(f);return this.decode(f,f.uint32())},D.verify=function(f){if(typeof f!=="object"||f===null)return"object expected";if(f.rejectedLogRecords!=null&&f.hasOwnProperty("rejectedLogRecords")){if(!SH.isInteger(f.rejectedLogRecords)&&!(f.rejectedLogRecords&&SH.isInteger(f.rejectedLogRecords.low)&&SH.isInteger(f.rejectedLogRecords.high)))return"rejectedLogRecords: integer|Long expected"}if(f.errorMessage!=null&&f.hasOwnProperty("errorMessage")){if(!SH.isString(f.errorMessage))return"errorMessage: string expected"}return null},D.fromObject=function(f){if(f instanceof NH.opentelemetry.proto.collector.logs.v1.ExportLogsPartialSuccess)return f;var E=new NH.opentelemetry.proto.collector.logs.v1.ExportLogsPartialSuccess;if(f.rejectedLogRecords!=null){if(SH.Long)(E.rejectedLogRecords=SH.Long.fromValue(f.rejectedLogRecords)).unsigned=!1;else if(typeof f.rejectedLogRecords==="string")E.rejectedLogRecords=parseInt(f.rejectedLogRecords,10);else if(typeof f.rejectedLogRecords==="number")E.rejectedLogRecords=f.rejectedLogRecords;else if(typeof f.rejectedLogRecords==="object")E.rejectedLogRecords=new SH.LongBits(f.rejectedLogRecords.low>>>0,f.rejectedLogRecords.high>>>0).toNumber()}if(f.errorMessage!=null)E.errorMessage=String(f.errorMessage);return E},D.toObject=function(f,E){if(!E)E={};var M={};if(E.defaults){if(SH.Long){var G=new SH.Long(0,0,!1);M.rejectedLogRecords=E.longs===String?G.toString():E.longs===Number?G.toNumber():G}else M.rejectedLogRecords=E.longs===String?"0":0;M.errorMessage=""}if(f.rejectedLogRecords!=null&&f.hasOwnProperty("rejectedLogRecords"))if(typeof f.rejectedLogRecords==="number")M.rejectedLogRecords=E.longs===String?String(f.rejectedLogRecords):f.rejectedLogRecords;else M.rejectedLogRecords=E.longs===String?SH.Long.prototype.toString.call(f.rejectedLogRecords):E.longs===Number?new SH.LongBits(f.rejectedLogRecords.low>>>0,f.rejectedLogRecords.high>>>0).toNumber():f.rejectedLogRecords;if(f.errorMessage!=null&&f.hasOwnProperty("errorMessage"))M.errorMessage=f.errorMessage;return M},D.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},D.getTypeUrl=function(f){if(f===void 0)f="type.googleapis.com";return f+"/opentelemetry.proto.collector.logs.v1.ExportLogsPartialSuccess"},D}(),I}(),L}(),A}(),$.metrics=function(){var A={};return A.v1=function(){var L={};return L.MetricsData=function(){function I(D){if(this.resourceMetrics=[],D){for(var B=Object.keys(D),f=0;f<B.length;++f)if(D[B[f]]!=null)this[B[f]]=D[B[f]]}}return I.prototype.resourceMetrics=SH.emptyArray,I.create=function(B){return new I(B)},I.encode=function(B,f){if(!f)f=s9.create();if(B.resourceMetrics!=null&&B.resourceMetrics.length)for(var E=0;E<B.resourceMetrics.length;++E)NH.opentelemetry.proto.metrics.v1.ResourceMetrics.encode(B.resourceMetrics[E],f.uint32(10).fork()).ldelim();return f},I.encodeDelimited=function(B,f){return this.encode(B,f).ldelim()},I.decode=function(B,f,E){if(!(B instanceof $A))B=$A.create(B);var M=f===void 0?B.len:B.pos+f,G=new NH.opentelemetry.proto.metrics.v1.MetricsData;while(B.pos<M){var U=B.uint32();if(U===E)break;switch(U>>>3){case 1:{if(!(G.resourceMetrics&&G.resourceMetrics.length))G.resourceMetrics=[];G.resourceMetrics.push(NH.opentelemetry.proto.metrics.v1.ResourceMetrics.decode(B,B.uint32()));break}default:B.skipType(U&7);break}}return G},I.decodeDelimited=function(B){if(!(B instanceof $A))B=new $A(B);return this.decode(B,B.uint32())},I.verify=function(B){if(typeof B!=="object"||B===null)return"object expected";if(B.resourceMetrics!=null&&B.hasOwnProperty("resourceMetrics")){if(!Array.isArray(B.resourceMetrics))return"resourceMetrics: array expected";for(var f=0;f<B.resourceMetrics.length;++f){var E=NH.opentelemetry.proto.metrics.v1.ResourceMetrics.verify(B.resourceMetrics[f]);if(E)return"resourceMetrics."+E}}return null},I.fromObject=function(B){if(B instanceof NH.opentelemetry.proto.metrics.v1.MetricsData)return B;var f=new NH.opentelemetry.proto.metrics.v1.MetricsData;if(B.resourceMetrics){if(!Array.isArray(B.resourceMetrics))throw TypeError(".opentelemetry.proto.metrics.v1.MetricsData.resourceMetrics: array expected");f.resourceMetrics=[];for(var E=0;E<B.resourceMetrics.length;++E){if(typeof B.resourceMetrics[E]!=="object")throw TypeError(".opentelemetry.proto.metrics.v1.MetricsData.resourceMetrics: object expected");f.resourceMetrics[E]=NH.opentelemetry.proto.metrics.v1.ResourceMetrics.fromObject(B.resourceMetrics[E])}}return f},I.toObject=function(B,f){if(!f)f={};var E={};if(f.arrays||f.defaults)E.resourceMetrics=[];if(B.resourceMetrics&&B.resourceMetrics.length){E.resourceMetrics=[];for(var M=0;M<B.resourceMetrics.length;++M)E.resourceMetrics[M]=NH.opentelemetry.proto.metrics.v1.ResourceMetrics.toObject(B.resourceMetrics[M],f)}return E},I.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},I.getTypeUrl=function(B){if(B===void 0)B="type.googleapis.com";return B+"/opentelemetry.proto.metrics.v1.MetricsData"},I}(),L.ResourceMetrics=function(){function I(D){if(this.scopeMetrics=[],D){for(var B=Object.keys(D),f=0;f<B.length;++f)if(D[B[f]]!=null)this[B[f]]=D[B[f]]}}return I.prototype.resource=null,I.prototype.scopeMetrics=SH.emptyArray,I.prototype.schemaUrl=null,I.create=function(B){return new I(B)},I.encode=function(B,f){if(!f)f=s9.create();if(B.resource!=null&&Object.hasOwnProperty.call(B,"resource"))NH.opentelemetry.proto.resource.v1.Resource.encode(B.resource,f.uint32(10).fork()).ldelim();if(B.scopeMetrics!=null&&B.scopeMetrics.length)for(var E=0;E<B.scopeMetrics.length;++E)NH.opentelemetry.proto.metrics.v1.ScopeMetrics.encode(B.scopeMetrics[E],f.uint32(18).fork()).ldelim();if(B.schemaUrl!=null&&Object.hasOwnProperty.call(B,"schemaUrl"))f.uint32(26).string(B.schemaUrl);return f},I.encodeDelimited=function(B,f){return this.encode(B,f).ldelim()},I.decode=function(B,f,E){if(!(B instanceof $A))B=$A.create(B);var M=f===void 0?B.len:B.pos+f,G=new NH.opentelemetry.proto.metrics.v1.ResourceMetrics;while(B.pos<M){var U=B.uint32();if(U===E)break;switch(U>>>3){case 1:{G.resource=NH.opentelemetry.proto.resource.v1.Resource.decode(B,B.uint32());break}case 2:{if(!(G.scopeMetrics&&G.scopeMetrics.length))G.scopeMetrics=[];G.scopeMetrics.push(NH.opentelemetry.proto.metrics.v1.ScopeMetrics.decode(B,B.uint32()));break}case 3:{G.schemaUrl=B.string();break}default:B.skipType(U&7);break}}return G},I.decodeDelimited=function(B){if(!(B instanceof $A))B=new $A(B);return this.decode(B,B.uint32())},I.verify=function(B){if(typeof B!=="object"||B===null)return"object expected";if(B.resource!=null&&B.hasOwnProperty("resource")){var f=NH.opentelemetry.proto.resource.v1.Resource.verify(B.resource);if(f)return"resource."+f}if(B.scopeMetrics!=null&&B.hasOwnProperty("scopeMetrics")){if(!Array.isArray(B.scopeMetrics))return"scopeMetrics: array expected";for(var E=0;E<B.scopeMetrics.length;++E){var f=NH.opentelemetry.proto.metrics.v1.ScopeMetrics.verify(B.scopeMetrics[E]);if(f)return"scopeMetrics."+f}}if(B.schemaUrl!=null&&B.hasOwnProperty("schemaUrl")){if(!SH.isString(B.schemaUrl))return"schemaUrl: string expected"}return null},I.fromObject=function(B){if(B instanceof NH.opentelemetry.proto.metrics.v1.ResourceMetrics)return B;var f=new NH.opentelemetry.proto.metrics.v1.ResourceMetrics;if(B.resource!=null){if(typeof B.resource!=="object")throw TypeError(".opentelemetry.proto.metrics.v1.ResourceMetrics.resource: object expected");f.resource=NH.opentelemetry.proto.resource.v1.Resource.fromObject(B.resource)}if(B.scopeMetrics){if(!Array.isArray(B.scopeMetrics))throw TypeError(".opentelemetry.proto.metrics.v1.ResourceMetrics.scopeMetrics: array expected");f.scopeMetrics=[];for(var E=0;E<B.scopeMetrics.length;++E){if(typeof B.scopeMetrics[E]!=="object")throw TypeError(".opentelemetry.proto.metrics.v1.ResourceMetrics.scopeMetrics: object expected");f.scopeMetrics[E]=NH.opentelemetry.proto.metrics.v1.ScopeMetrics.fromObject(B.scopeMetrics[E])}}if(B.schemaUrl!=null)f.schemaUrl=String(B.schemaUrl);return f},I.toObject=function(B,f){if(!f)f={};var E={};if(f.arrays||f.defaults)E.scopeMetrics=[];if(f.defaults)E.resource=null,E.schemaUrl="";if(B.resource!=null&&B.hasOwnProperty("resource"))E.resource=NH.opentelemetry.proto.resource.v1.Resource.toObject(B.resource,f);if(B.scopeMetrics&&B.scopeMetrics.length){E.scopeMetrics=[];for(var M=0;M<B.scopeMetrics.length;++M)E.scopeMetrics[M]=NH.opentelemetry.proto.metrics.v1.ScopeMetrics.toObject(B.scopeMetrics[M],f)}if(B.schemaUrl!=null&&B.hasOwnProperty("schemaUrl"))E.schemaUrl=B.schemaUrl;return E},I.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},I.getTypeUrl=function(B){if(B===void 0)B="type.googleapis.com";return B+"/opentelemetry.proto.metrics.v1.ResourceMetrics"},I}(),L.ScopeMetrics=function(){function I(D){if(this.metrics=[],D){for(var B=Object.keys(D),f=0;f<B.length;++f)if(D[B[f]]!=null)this[B[f]]=D[B[f]]}}return I.prototype.scope=null,I.prototype.metrics=SH.emptyArray,I.prototype.schemaUrl=null,I.create=function(B){return new I(B)},I.encode=function(B,f){if(!f)f=s9.create();if(B.scope!=null&&Object.hasOwnProperty.call(B,"scope"))NH.opentelemetry.proto.common.v1.InstrumentationScope.encode(B.scope,f.uint32(10).fork()).ldelim();if(B.metrics!=null&&B.metrics.length)for(var E=0;E<B.metrics.length;++E)NH.opentelemetry.proto.metrics.v1.Metric.encode(B.metrics[E],f.uint32(18).fork()).ldelim();if(B.schemaUrl!=null&&Object.hasOwnProperty.call(B,"schemaUrl"))f.uint32(26).string(B.schemaUrl);return f},I.encodeDelimited=function(B,f){return this.encode(B,f).ldelim()},I.decode=function(B,f,E){if(!(B instanceof $A))B=$A.create(B);var M=f===void 0?B.len:B.pos+f,G=new NH.opentelemetry.proto.metrics.v1.ScopeMetrics;while(B.pos<M){var U=B.uint32();if(U===E)break;switch(U>>>3){case 1:{G.scope=NH.opentelemetry.proto.common.v1.InstrumentationScope.decode(B,B.uint32());break}case 2:{if(!(G.metrics&&G.metrics.length))G.metrics=[];G.metrics.push(NH.opentelemetry.proto.metrics.v1.Metric.decode(B,B.uint32()));break}case 3:{G.schemaUrl=B.string();break}default:B.skipType(U&7);break}}return G},I.decodeDelimited=function(B){if(!(B instanceof $A))B=new $A(B);return this.decode(B,B.uint32())},I.verify=function(B){if(typeof B!=="object"||B===null)return"object expected";if(B.scope!=null&&B.hasOwnProperty("scope")){var f=NH.opentelemetry.proto.common.v1.InstrumentationScope.verify(B.scope);if(f)return"scope."+f}if(B.metrics!=null&&B.hasOwnProperty("metrics")){if(!Array.isArray(B.metrics))return"metrics: array expected";for(var E=0;E<B.metrics.length;++E){var f=NH.opentelemetry.proto.metrics.v1.Metric.verify(B.metrics[E]);if(f)return"metrics."+f}}if(B.schemaUrl!=null&&B.hasOwnProperty("schemaUrl")){if(!SH.isString(B.schemaUrl))return"schemaUrl: string expected"}return null},I.fromObject=function(B){if(B instanceof NH.opentelemetry.proto.metrics.v1.ScopeMetrics)return B;var f=new NH.opentelemetry.proto.metrics.v1.ScopeMetrics;if(B.scope!=null){if(typeof B.scope!=="object")throw TypeError(".opentelemetry.proto.metrics.v1.ScopeMetrics.scope: object expected");f.scope=NH.opentelemetry.proto.common.v1.InstrumentationScope.fromObject(B.scope)}if(B.metrics){if(!Array.isArray(B.metrics))throw TypeError(".opentelemetry.proto.metrics.v1.ScopeMetrics.metrics: array expected");f.metrics=[];for(var E=0;E<B.metrics.length;++E){if(typeof B.metrics[E]!=="object")throw TypeError(".opentelemetry.proto.metrics.v1.ScopeMetrics.metrics: object expected");f.metrics[E]=NH.opentelemetry.proto.metrics.v1.Metric.fromObject(B.metrics[E])}}if(B.schemaUrl!=null)f.schemaUrl=String(B.schemaUrl);return f},I.toObject=function(B,f){if(!f)f={};var E={};if(f.arrays||f.defaults)E.metrics=[];if(f.defaults)E.scope=null,E.schemaUrl="";if(B.scope!=null&&B.hasOwnProperty("scope"))E.scope=NH.opentelemetry.proto.common.v1.InstrumentationScope.toObject(B.scope,f);if(B.metrics&&B.metrics.length){E.metrics=[];for(var M=0;M<B.metrics.length;++M)E.metrics[M]=NH.opentelemetry.proto.metrics.v1.Metric.toObject(B.metrics[M],f)}if(B.schemaUrl!=null&&B.hasOwnProperty("schemaUrl"))E.schemaUrl=B.schemaUrl;return E},I.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},I.getTypeUrl=function(B){if(B===void 0)B="type.googleapis.com";return B+"/opentelemetry.proto.metrics.v1.ScopeMetrics"},I}(),L.Metric=function(){function I(B){if(this.metadata=[],B){for(var f=Object.keys(B),E=0;E<f.length;++E)if(B[f[E]]!=null)this[f[E]]=B[f[E]]}}I.prototype.name=null,I.prototype.description=null,I.prototype.unit=null,I.prototype.gauge=null,I.prototype.sum=null,I.prototype.histogram=null,I.prototype.exponentialHistogram=null,I.prototype.summary=null,I.prototype.metadata=SH.emptyArray;var D;return Object.defineProperty(I.prototype,"data",{get:SH.oneOfGetter(D=["gauge","sum","histogram","exponentialHistogram","summary"]),set:SH.oneOfSetter(D)}),I.create=function(f){return new I(f)},I.encode=function(f,E){if(!E)E=s9.create();if(f.name!=null&&Object.hasOwnProperty.call(f,"name"))E.uint32(10).string(f.name);if(f.description!=null&&Object.hasOwnProperty.call(f,"description"))E.uint32(18).string(f.description);if(f.unit!=null&&Object.hasOwnProperty.call(f,"unit"))E.uint32(26).string(f.unit);if(f.gauge!=null&&Object.hasOwnProperty.call(f,"gauge"))NH.opentelemetry.proto.metrics.v1.Gauge.encode(f.gauge,E.uint32(42).fork()).ldelim();if(f.sum!=null&&Object.hasOwnProperty.call(f,"sum"))NH.opentelemetry.proto.metrics.v1.Sum.encode(f.sum,E.uint32(58).fork()).ldelim();if(f.histogram!=null&&Object.hasOwnProperty.call(f,"histogram"))NH.opentelemetry.proto.metrics.v1.Histogram.encode(f.histogram,E.uint32(74).fork()).ldelim();if(f.exponentialHistogram!=null&&Object.hasOwnProperty.call(f,"exponentialHistogram"))NH.opentelemetry.proto.metrics.v1.ExponentialHistogram.encode(f.exponentialHistogram,E.uint32(82).fork()).ldelim();if(f.summary!=null&&Object.hasOwnProperty.call(f,"summary"))NH.opentelemetry.proto.metrics.v1.Summary.encode(f.summary,E.uint32(90).fork()).ldelim();if(f.metadata!=null&&f.metadata.length)for(var M=0;M<f.metadata.length;++M)NH.opentelemetry.proto.common.v1.KeyValue.encode(f.metadata[M],E.uint32(98).fork()).ldelim();return E},I.encodeDelimited=function(f,E){return this.encode(f,E).ldelim()},I.decode=function(f,E,M){if(!(f instanceof $A))f=$A.create(f);var G=E===void 0?f.len:f.pos+E,U=new NH.opentelemetry.proto.metrics.v1.Metric;while(f.pos<G){var X=f.uint32();if(X===M)break;switch(X>>>3){case 1:{U.name=f.string();break}case 2:{U.description=f.string();break}case 3:{U.unit=f.string();break}case 5:{U.gauge=NH.opentelemetry.proto.metrics.v1.Gauge.decode(f,f.uint32());break}case 7:{U.sum=NH.opentelemetry.proto.metrics.v1.Sum.decode(f,f.uint32());break}case 9:{U.histogram=NH.opentelemetry.proto.metrics.v1.Histogram.decode(f,f.uint32());break}case 10:{U.exponentialHistogram=NH.opentelemetry.proto.metrics.v1.ExponentialHistogram.decode(f,f.uint32());break}case 11:{U.summary=NH.opentelemetry.proto.metrics.v1.Summary.decode(f,f.uint32());break}case 12:{if(!(U.metadata&&U.metadata.length))U.metadata=[];U.metadata.push(NH.opentelemetry.proto.common.v1.KeyValue.decode(f,f.uint32()));break}default:f.skipType(X&7);break}}return U},I.decodeDelimited=function(f){if(!(f instanceof $A))f=new $A(f);return this.decode(f,f.uint32())},I.verify=function(f){if(typeof f!=="object"||f===null)return"object expected";var E={};if(f.name!=null&&f.hasOwnProperty("name")){if(!SH.isString(f.name))return"name: string expected"}if(f.description!=null&&f.hasOwnProperty("description")){if(!SH.isString(f.description))return"description: string expected"}if(f.unit!=null&&f.hasOwnProperty("unit")){if(!SH.isString(f.unit))return"unit: string expected"}if(f.gauge!=null&&f.hasOwnProperty("gauge")){E.data=1;{var M=NH.opentelemetry.proto.metrics.v1.Gauge.verify(f.gauge);if(M)return"gauge."+M}}if(f.sum!=null&&f.hasOwnProperty("sum")){if(E.data===1)return"data: multiple values";E.data=1;{var M=NH.opentelemetry.proto.metrics.v1.Sum.verify(f.sum);if(M)return"sum."+M}}if(f.histogram!=null&&f.hasOwnProperty("histogram")){if(E.data===1)return"data: multiple values";E.data=1;{var M=NH.opentelemetry.proto.metrics.v1.Histogram.verify(f.histogram);if(M)return"histogram."+M}}if(f.exponentialHistogram!=null&&f.hasOwnProperty("exponentialHistogram")){if(E.data===1)return"data: multiple values";E.data=1;{var M=NH.opentelemetry.proto.metrics.v1.ExponentialHistogram.verify(f.exponentialHistogram);if(M)return"exponentialHistogram."+M}}if(f.summary!=null&&f.hasOwnProperty("summary")){if(E.data===1)return"data: multiple values";E.data=1;{var M=NH.opentelemetry.proto.metrics.v1.Summary.verify(f.summary);if(M)return"summary."+M}}if(f.metadata!=null&&f.hasOwnProperty("metadata")){if(!Array.isArray(f.metadata))return"metadata: array expected";for(var G=0;G<f.metadata.length;++G){var M=NH.opentelemetry.proto.common.v1.KeyValue.verify(f.metadata[G]);if(M)return"metadata."+M}}return null},I.fromObject=function(f){if(f instanceof NH.opentelemetry.proto.metrics.v1.Metric)return f;var E=new NH.opentelemetry.proto.metrics.v1.Metric;if(f.name!=null)E.name=String(f.name);if(f.description!=null)E.description=String(f.description);if(f.unit!=null)E.unit=String(f.unit);if(f.gauge!=null){if(typeof f.gauge!=="object")throw TypeError(".opentelemetry.proto.metrics.v1.Metric.gauge: object expected");E.gauge=NH.opentelemetry.proto.metrics.v1.Gauge.fromObject(f.gauge)}if(f.sum!=null){if(typeof f.sum!=="object")throw TypeError(".opentelemetry.proto.metrics.v1.Metric.sum: object expected");E.sum=NH.opentelemetry.proto.metrics.v1.Sum.fromObject(f.sum)}if(f.histogram!=null){if(typeof f.histogram!=="object")throw TypeError(".opentelemetry.proto.metrics.v1.Metric.histogram: object expected");E.histogram=NH.opentelemetry.proto.metrics.v1.Histogram.fromObject(f.histogram)}if(f.exponentialHistogram!=null){if(typeof f.exponentialHistogram!=="object")throw TypeError(".opentelemetry.proto.metrics.v1.Metric.exponentialHistogram: object expected");E.exponentialHistogram=NH.opentelemetry.proto.metrics.v1.ExponentialHistogram.fromObject(f.exponentialHistogram)}if(f.summary!=null){if(typeof f.summary!=="object")throw TypeError(".opentelemetry.proto.metrics.v1.Metric.summary: object expected");E.summary=NH.opentelemetry.proto.metrics.v1.Summary.fromObject(f.summary)}if(f.metadata){if(!Array.isArray(f.metadata))throw TypeError(".opentelemetry.proto.metrics.v1.Metric.metadata: array expected");E.metadata=[];for(var M=0;M<f.metadata.length;++M){if(typeof f.metadata[M]!=="object")throw TypeError(".opentelemetry.proto.metrics.v1.Metric.metadata: object expected");E.metadata[M]=NH.opentelemetry.proto.common.v1.KeyValue.fromObject(f.metadata[M])}}return E},I.toObject=function(f,E){if(!E)E={};var M={};if(E.arrays||E.defaults)M.metadata=[];if(E.defaults)M.name="",M.description="",M.unit="";if(f.name!=null&&f.hasOwnProperty("name"))M.name=f.name;if(f.description!=null&&f.hasOwnProperty("description"))M.description=f.description;if(f.unit!=null&&f.hasOwnProperty("unit"))M.unit=f.unit;if(f.gauge!=null&&f.hasOwnProperty("gauge")){if(M.gauge=NH.opentelemetry.proto.metrics.v1.Gauge.toObject(f.gauge,E),E.oneofs)M.data="gauge"}if(f.sum!=null&&f.hasOwnProperty("sum")){if(M.sum=NH.opentelemetry.proto.metrics.v1.Sum.toObject(f.sum,E),E.oneofs)M.data="sum"}if(f.histogram!=null&&f.hasOwnProperty("histogram")){if(M.histogram=NH.opentelemetry.proto.metrics.v1.Histogram.toObject(f.histogram,E),E.oneofs)M.data="histogram"}if(f.exponentialHistogram!=null&&f.hasOwnProperty("exponentialHistogram")){if(M.exponentialHistogram=NH.opentelemetry.proto.metrics.v1.ExponentialHistogram.toObject(f.exponentialHistogram,E),E.oneofs)M.data="exponentialHistogram"}if(f.summary!=null&&f.hasOwnProperty("summary")){if(M.summary=NH.opentelemetry.proto.metrics.v1.Summary.toObject(f.summary,E),E.oneofs)M.data="summary"}if(f.metadata&&f.metadata.length){M.metadata=[];for(var G=0;G<f.metadata.length;++G)M.metadata[G]=NH.opentelemetry.proto.common.v1.KeyValue.toObject(f.metadata[G],E)}return M},I.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},I.getTypeUrl=function(f){if(f===void 0)f="type.googleapis.com";return f+"/opentelemetry.proto.metrics.v1.Metric"},I}(),L.Gauge=function(){function I(D){if(this.dataPoints=[],D){for(var B=Object.keys(D),f=0;f<B.length;++f)if(D[B[f]]!=null)this[B[f]]=D[B[f]]}}return I.prototype.dataPoints=SH.emptyArray,I.create=function(B){return new I(B)},I.encode=function(B,f){if(!f)f=s9.create();if(B.dataPoints!=null&&B.dataPoints.length)for(var E=0;E<B.dataPoints.length;++E)NH.opentelemetry.proto.metrics.v1.NumberDataPoint.encode(B.dataPoints[E],f.uint32(10).fork()).ldelim();return f},I.encodeDelimited=function(B,f){return this.encode(B,f).ldelim()},I.decode=function(B,f,E){if(!(B instanceof $A))B=$A.create(B);var M=f===void 0?B.len:B.pos+f,G=new NH.opentelemetry.proto.metrics.v1.Gauge;while(B.pos<M){var U=B.uint32();if(U===E)break;switch(U>>>3){case 1:{if(!(G.dataPoints&&G.dataPoints.length))G.dataPoints=[];G.dataPoints.push(NH.opentelemetry.proto.metrics.v1.NumberDataPoint.decode(B,B.uint32()));break}default:B.skipType(U&7);break}}return G},I.decodeDelimited=function(B){if(!(B instanceof $A))B=new $A(B);return this.decode(B,B.uint32())},I.verify=function(B){if(typeof B!=="object"||B===null)return"object expected";if(B.dataPoints!=null&&B.hasOwnProperty("dataPoints")){if(!Array.isArray(B.dataPoints))return"dataPoints: array expected";for(var f=0;f<B.dataPoints.length;++f){var E=NH.opentelemetry.proto.metrics.v1.NumberDataPoint.verify(B.dataPoints[f]);if(E)return"dataPoints."+E}}return null},I.fromObject=function(B){if(B instanceof NH.opentelemetry.proto.metrics.v1.Gauge)return B;var f=new NH.opentelemetry.proto.metrics.v1.Gauge;if(B.dataPoints){if(!Array.isArray(B.dataPoints))throw TypeError(".opentelemetry.proto.metrics.v1.Gauge.dataPoints: array expected");f.dataPoints=[];for(var E=0;E<B.dataPoints.length;++E){if(typeof B.dataPoints[E]!=="object")throw TypeError(".opentelemetry.proto.metrics.v1.Gauge.dataPoints: object expected");f.dataPoints[E]=NH.opentelemetry.proto.metrics.v1.NumberDataPoint.fromObject(B.dataPoints[E])}}return f},I.toObject=function(B,f){if(!f)f={};var E={};if(f.arrays||f.defaults)E.dataPoints=[];if(B.dataPoints&&B.dataPoints.length){E.dataPoints=[];for(var M=0;M<B.dataPoints.length;++M)E.dataPoints[M]=NH.opentelemetry.proto.metrics.v1.NumberDataPoint.toObject(B.dataPoints[M],f)}return E},I.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},I.getTypeUrl=function(B){if(B===void 0)B="type.googleapis.com";return B+"/opentelemetry.proto.metrics.v1.Gauge"},I}(),L.Sum=function(){function I(D){if(this.dataPoints=[],D){for(var B=Object.keys(D),f=0;f<B.length;++f)if(D[B[f]]!=null)this[B[f]]=D[B[f]]}}return I.prototype.dataPoints=SH.emptyArray,I.prototype.aggregationTemporality=null,I.prototype.isMonotonic=null,I.create=function(B){return new I(B)},I.encode=function(B,f){if(!f)f=s9.create();if(B.dataPoints!=null&&B.dataPoints.length)for(var E=0;E<B.dataPoints.length;++E)NH.opentelemetry.proto.metrics.v1.NumberDataPoint.encode(B.dataPoints[E],f.uint32(10).fork()).ldelim();if(B.aggregationTemporality!=null&&Object.hasOwnProperty.call(B,"aggregationTemporality"))f.uint32(16).int32(B.aggregationTemporality);if(B.isMonotonic!=null&&Object.hasOwnProperty.call(B,"isMonotonic"))f.uint32(24).bool(B.isMonotonic);return f},I.encodeDelimited=function(B,f){return this.encode(B,f).ldelim()},I.decode=function(B,f,E){if(!(B instanceof $A))B=$A.create(B);var M=f===void 0?B.len:B.pos+f,G=new NH.opentelemetry.proto.metrics.v1.Sum;while(B.pos<M){var U=B.uint32();if(U===E)break;switch(U>>>3){case 1:{if(!(G.dataPoints&&G.dataPoints.length))G.dataPoints=[];G.dataPoints.push(NH.opentelemetry.proto.metrics.v1.NumberDataPoint.decode(B,B.uint32()));break}case 2:{G.aggregationTemporality=B.int32();break}case 3:{G.isMonotonic=B.bool();break}default:B.skipType(U&7);break}}return G},I.decodeDelimited=function(B){if(!(B instanceof $A))B=new $A(B);return this.decode(B,B.uint32())},I.verify=function(B){if(typeof B!=="object"||B===null)return"object expected";if(B.dataPoints!=null&&B.hasOwnProperty("dataPoints")){if(!Array.isArray(B.dataPoints))return"dataPoints: array expected";for(var f=0;f<B.dataPoints.length;++f){var E=NH.opentelemetry.proto.metrics.v1.NumberDataPoint.verify(B.dataPoints[f]);if(E)return"dataPoints."+E}}if(B.aggregationTemporality!=null&&B.hasOwnProperty("aggregationTemporality"))switch(B.aggregationTemporality){default:return"aggregationTemporality: enum value expected";case 0:case 1:case 2:break}if(B.isMonotonic!=null&&B.hasOwnProperty("isMonotonic")){if(typeof B.isMonotonic!=="boolean")return"isMonotonic: boolean expected"}return null},I.fromObject=function(B){if(B instanceof NH.opentelemetry.proto.metrics.v1.Sum)return B;var f=new NH.opentelemetry.proto.metrics.v1.Sum;if(B.dataPoints){if(!Array.isArray(B.dataPoints))throw TypeError(".opentelemetry.proto.metrics.v1.Sum.dataPoints: array expected");f.dataPoints=[];for(var E=0;E<B.dataPoints.length;++E){if(typeof B.dataPoints[E]!=="object")throw TypeError(".opentelemetry.proto.metrics.v1.Sum.dataPoints: object expected");f.dataPoints[E]=NH.opentelemetry.proto.metrics.v1.NumberDataPoint.fromObject(B.dataPoints[E])}}switch(B.aggregationTemporality){default:if(typeof B.aggregationTemporality==="number"){f.aggregationTemporality=B.aggregationTemporality;break}break;case"AGGREGATION_TEMPORALITY_UNSPECIFIED":case 0:f.aggregationTemporality=0;break;case"AGGREGATION_TEMPORALITY_DELTA":case 1:f.aggregationTemporality=1;break;case"AGGREGATION_TEMPORALITY_CUMULATIVE":case 2:f.aggregationTemporality=2;break}if(B.isMonotonic!=null)f.isMonotonic=Boolean(B.isMonotonic);return f},I.toObject=function(B,f){if(!f)f={};var E={};if(f.arrays||f.defaults)E.dataPoints=[];if(f.defaults)E.aggregationTemporality=f.enums===String?"AGGREGATION_TEMPORALITY_UNSPECIFIED":0,E.isMonotonic=!1;if(B.dataPoints&&B.dataPoints.length){E.dataPoints=[];for(var M=0;M<B.dataPoints.length;++M)E.dataPoints[M]=NH.opentelemetry.proto.metrics.v1.NumberDataPoint.toObject(B.dataPoints[M],f)}if(B.aggregationTemporality!=null&&B.hasOwnProperty("aggregationTemporality"))E.aggregationTemporality=f.enums===String?NH.opentelemetry.proto.metrics.v1.AggregationTemporality[B.aggregationTemporality]===void 0?B.aggregationTemporality:NH.opentelemetry.proto.metrics.v1.AggregationTemporality[B.aggregationTemporality]:B.aggregationTemporality;if(B.isMonotonic!=null&&B.hasOwnProperty("isMonotonic"))E.isMonotonic=B.isMonotonic;return E},I.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},I.getTypeUrl=function(B){if(B===void 0)B="type.googleapis.com";return B+"/opentelemetry.proto.metrics.v1.Sum"},I}(),L.Histogram=function(){function I(D){if(this.dataPoints=[],D){for(var B=Object.keys(D),f=0;f<B.length;++f)if(D[B[f]]!=null)this[B[f]]=D[B[f]]}}return I.prototype.dataPoints=SH.emptyArray,I.prototype.aggregationTemporality=null,I.create=function(B){return new I(B)},I.encode=function(B,f){if(!f)f=s9.create();if(B.dataPoints!=null&&B.dataPoints.length)for(var E=0;E<B.dataPoints.length;++E)NH.opentelemetry.proto.metrics.v1.HistogramDataPoint.encode(B.dataPoints[E],f.uint32(10).fork()).ldelim();if(B.aggregationTemporality!=null&&Object.hasOwnProperty.call(B,"aggregationTemporality"))f.uint32(16).int32(B.aggregationTemporality);return f},I.encodeDelimited=function(B,f){return this.encode(B,f).ldelim()},I.decode=function(B,f,E){if(!(B instanceof $A))B=$A.create(B);var M=f===void 0?B.len:B.pos+f,G=new NH.opentelemetry.proto.metrics.v1.Histogram;while(B.pos<M){var U=B.uint32();if(U===E)break;switch(U>>>3){case 1:{if(!(G.dataPoints&&G.dataPoints.length))G.dataPoints=[];G.dataPoints.push(NH.opentelemetry.proto.metrics.v1.HistogramDataPoint.decode(B,B.uint32()));break}case 2:{G.aggregationTemporality=B.int32();break}default:B.skipType(U&7);break}}return G},I.decodeDelimited=function(B){if(!(B instanceof $A))B=new $A(B);return this.decode(B,B.uint32())},I.verify=function(B){if(typeof B!=="object"||B===null)return"object expected";if(B.dataPoints!=null&&B.hasOwnProperty("dataPoints")){if(!Array.isArray(B.dataPoints))return"dataPoints: array expected";for(var f=0;f<B.dataPoints.length;++f){var E=NH.opentelemetry.proto.metrics.v1.HistogramDataPoint.verify(B.dataPoints[f]);if(E)return"dataPoints."+E}}if(B.aggregationTemporality!=null&&B.hasOwnProperty("aggregationTemporality"))switch(B.aggregationTemporality){default:return"aggregationTemporality: enum value expected";case 0:case 1:case 2:break}return null},I.fromObject=function(B){if(B instanceof NH.opentelemetry.proto.metrics.v1.Histogram)return B;var f=new NH.opentelemetry.proto.metrics.v1.Histogram;if(B.dataPoints){if(!Array.isArray(B.dataPoints))throw TypeError(".opentelemetry.proto.metrics.v1.Histogram.dataPoints: array expected");f.dataPoints=[];for(var E=0;E<B.dataPoints.length;++E){if(typeof B.dataPoints[E]!=="object")throw TypeError(".opentelemetry.proto.metrics.v1.Histogram.dataPoints: object expected");f.dataPoints[E]=NH.opentelemetry.proto.metrics.v1.HistogramDataPoint.fromObject(B.dataPoints[E])}}switch(B.aggregationTemporality){default:if(typeof B.aggregationTemporality==="number"){f.aggregationTemporality=B.aggregationTemporality;break}break;case"AGGREGATION_TEMPORALITY_UNSPECIFIED":case 0:f.aggregationTemporality=0;break;case"AGGREGATION_TEMPORALITY_DELTA":case 1:f.aggregationTemporality=1;break;case"AGGREGATION_TEMPORALITY_CUMULATIVE":case 2:f.aggregationTemporality=2;break}return f},I.toObject=function(B,f){if(!f)f={};var E={};if(f.arrays||f.defaults)E.dataPoints=[];if(f.defaults)E.aggregationTemporality=f.enums===String?"AGGREGATION_TEMPORALITY_UNSPECIFIED":0;if(B.dataPoints&&B.dataPoints.length){E.dataPoints=[];for(var M=0;M<B.dataPoints.length;++M)E.dataPoints[M]=NH.opentelemetry.proto.metrics.v1.HistogramDataPoint.toObject(B.dataPoints[M],f)}if(B.aggregationTemporality!=null&&B.hasOwnProperty("aggregationTemporality"))E.aggregationTemporality=f.enums===String?NH.opentelemetry.proto.metrics.v1.AggregationTemporality[B.aggregationTemporality]===void 0?B.aggregationTemporality:NH.opentelemetry.proto.metrics.v1.AggregationTemporality[B.aggregationTemporality]:B.aggregationTemporality;return E},I.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},I.getTypeUrl=function(B){if(B===void 0)B="type.googleapis.com";return B+"/opentelemetry.proto.metrics.v1.Histogram"},I}(),L.ExponentialHistogram=function(){function I(D){if(this.dataPoints=[],D){for(var B=Object.keys(D),f=0;f<B.length;++f)if(D[B[f]]!=null)this[B[f]]=D[B[f]]}}return I.prototype.dataPoints=SH.emptyArray,I.prototype.aggregationTemporality=null,I.create=function(B){return new I(B)},I.encode=function(B,f){if(!f)f=s9.create();if(B.dataPoints!=null&&B.dataPoints.length)for(var E=0;E<B.dataPoints.length;++E)NH.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.encode(B.dataPoints[E],f.uint32(10).fork()).ldelim();if(B.aggregationTemporality!=null&&Object.hasOwnProperty.call(B,"aggregationTemporality"))f.uint32(16).int32(B.aggregationTemporality);return f},I.encodeDelimited=function(B,f){return this.encode(B,f).ldelim()},I.decode=function(B,f,E){if(!(B instanceof $A))B=$A.create(B);var M=f===void 0?B.len:B.pos+f,G=new NH.opentelemetry.proto.metrics.v1.ExponentialHistogram;while(B.pos<M){var U=B.uint32();if(U===E)break;switch(U>>>3){case 1:{if(!(G.dataPoints&&G.dataPoints.length))G.dataPoints=[];G.dataPoints.push(NH.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.decode(B,B.uint32()));break}case 2:{G.aggregationTemporality=B.int32();break}default:B.skipType(U&7);break}}return G},I.decodeDelimited=function(B){if(!(B instanceof $A))B=new $A(B);return this.decode(B,B.uint32())},I.verify=function(B){if(typeof B!=="object"||B===null)return"object expected";if(B.dataPoints!=null&&B.hasOwnProperty("dataPoints")){if(!Array.isArray(B.dataPoints))return"dataPoints: array expected";for(var f=0;f<B.dataPoints.length;++f){var E=NH.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.verify(B.dataPoints[f]);if(E)return"dataPoints."+E}}if(B.aggregationTemporality!=null&&B.hasOwnProperty("aggregationTemporality"))switch(B.aggregationTemporality){default:return"aggregationTemporality: enum value expected";case 0:case 1:case 2:break}return null},I.fromObject=function(B){if(B instanceof NH.opentelemetry.proto.metrics.v1.ExponentialHistogram)return B;var f=new NH.opentelemetry.proto.metrics.v1.ExponentialHistogram;if(B.dataPoints){if(!Array.isArray(B.dataPoints))throw TypeError(".opentelemetry.proto.metrics.v1.ExponentialHistogram.dataPoints: array expected");f.dataPoints=[];for(var E=0;E<B.dataPoints.length;++E){if(typeof B.dataPoints[E]!=="object")throw TypeError(".opentelemetry.proto.metrics.v1.ExponentialHistogram.dataPoints: object expected");f.dataPoints[E]=NH.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.fromObject(B.dataPoints[E])}}switch(B.aggregationTemporality){default:if(typeof B.aggregationTemporality==="number"){f.aggregationTemporality=B.aggregationTemporality;break}break;case"AGGREGATION_TEMPORALITY_UNSPECIFIED":case 0:f.aggregationTemporality=0;break;case"AGGREGATION_TEMPORALITY_DELTA":case 1:f.aggregationTemporality=1;break;case"AGGREGATION_TEMPORALITY_CUMULATIVE":case 2:f.aggregationTemporality=2;break}return f},I.toObject=function(B,f){if(!f)f={};var E={};if(f.arrays||f.defaults)E.dataPoints=[];if(f.defaults)E.aggregationTemporality=f.enums===String?"AGGREGATION_TEMPORALITY_UNSPECIFIED":0;if(B.dataPoints&&B.dataPoints.length){E.dataPoints=[];for(var M=0;M<B.dataPoints.length;++M)E.dataPoints[M]=NH.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.toObject(B.dataPoints[M],f)}if(B.aggregationTemporality!=null&&B.hasOwnProperty("aggregationTemporality"))E.aggregationTemporality=f.enums===String?NH.opentelemetry.proto.metrics.v1.AggregationTemporality[B.aggregationTemporality]===void 0?B.aggregationTemporality:NH.opentelemetry.proto.metrics.v1.AggregationTemporality[B.aggregationTemporality]:B.aggregationTemporality;return E},I.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},I.getTypeUrl=function(B){if(B===void 0)B="type.googleapis.com";return B+"/opentelemetry.proto.metrics.v1.ExponentialHistogram"},I}(),L.Summary=function(){function I(D){if(this.dataPoints=[],D){for(var B=Object.keys(D),f=0;f<B.length;++f)if(D[B[f]]!=null)this[B[f]]=D[B[f]]}}return I.prototype.dataPoints=SH.emptyArray,I.create=function(B){return new I(B)},I.encode=function(B,f){if(!f)f=s9.create();if(B.dataPoints!=null&&B.dataPoints.length)for(var E=0;E<B.dataPoints.length;++E)NH.opentelemetry.proto.metrics.v1.SummaryDataPoint.encode(B.dataPoints[E],f.uint32(10).fork()).ldelim();return f},I.encodeDelimited=function(B,f){return this.encode(B,f).ldelim()},I.decode=function(B,f,E){if(!(B instanceof $A))B=$A.create(B);var M=f===void 0?B.len:B.pos+f,G=new NH.opentelemetry.proto.metrics.v1.Summary;while(B.pos<M){var U=B.uint32();if(U===E)break;switch(U>>>3){case 1:{if(!(G.dataPoints&&G.dataPoints.length))G.dataPoints=[];G.dataPoints.push(NH.opentelemetry.proto.metrics.v1.SummaryDataPoint.decode(B,B.uint32()));break}default:B.skipType(U&7);break}}return G},I.decodeDelimited=function(B){if(!(B instanceof $A))B=new $A(B);return this.decode(B,B.uint32())},I.verify=function(B){if(typeof B!=="object"||B===null)return"object expected";if(B.dataPoints!=null&&B.hasOwnProperty("dataPoints")){if(!Array.isArray(B.dataPoints))return"dataPoints: array expected";for(var f=0;f<B.dataPoints.length;++f){var E=NH.opentelemetry.proto.metrics.v1.SummaryDataPoint.verify(B.dataPoints[f]);if(E)return"dataPoints."+E}}return null},I.fromObject=function(B){if(B instanceof NH.opentelemetry.proto.metrics.v1.Summary)return B;var f=new NH.opentelemetry.proto.metrics.v1.Summary;if(B.dataPoints){if(!Array.isArray(B.dataPoints))throw TypeError(".opentelemetry.proto.metrics.v1.Summary.dataPoints: array expected");f.dataPoints=[];for(var E=0;E<B.dataPoints.length;++E){if(typeof B.dataPoints[E]!=="object")throw TypeError(".opentelemetry.proto.metrics.v1.Summary.dataPoints: object expected");f.dataPoints[E]=NH.opentelemetry.proto.metrics.v1.SummaryDataPoint.fromObject(B.dataPoints[E])}}return f},I.toObject=function(B,f){if(!f)f={};var E={};if(f.arrays||f.defaults)E.dataPoints=[];if(B.dataPoints&&B.dataPoints.length){E.dataPoints=[];for(var M=0;M<B.dataPoints.length;++M)E.dataPoints[M]=NH.opentelemetry.proto.metrics.v1.SummaryDataPoint.toObject(B.dataPoints[M],f)}return E},I.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},I.getTypeUrl=function(B){if(B===void 0)B="type.googleapis.com";return B+"/opentelemetry.proto.metrics.v1.Summary"},I}(),L.AggregationTemporality=function(){var I={},D=Object.create(I);return D[I[0]="AGGREGATION_TEMPORALITY_UNSPECIFIED"]=0,D[I[1]="AGGREGATION_TEMPORALITY_DELTA"]=1,D[I[2]="AGGREGATION_TEMPORALITY_CUMULATIVE"]=2,D}(),L.DataPointFlags=function(){var I={},D=Object.create(I);return D[I[0]="DATA_POINT_FLAGS_DO_NOT_USE"]=0,D[I[1]="DATA_POINT_FLAGS_NO_RECORDED_VALUE_MASK"]=1,D}(),L.NumberDataPoint=function(){function I(B){if(this.attributes=[],this.exemplars=[],B){for(var f=Object.keys(B),E=0;E<f.length;++E)if(B[f[E]]!=null)this[f[E]]=B[f[E]]}}I.prototype.attributes=SH.emptyArray,I.prototype.startTimeUnixNano=null,I.prototype.timeUnixNano=null,I.prototype.asDouble=null,I.prototype.asInt=null,I.prototype.exemplars=SH.emptyArray,I.prototype.flags=null;var D;return Object.defineProperty(I.prototype,"value",{get:SH.oneOfGetter(D=["asDouble","asInt"]),set:SH.oneOfSetter(D)}),I.create=function(f){return new I(f)},I.encode=function(f,E){if(!E)E=s9.create();if(f.startTimeUnixNano!=null&&Object.hasOwnProperty.call(f,"startTimeUnixNano"))E.uint32(17).fixed64(f.startTimeUnixNano);if(f.timeUnixNano!=null&&Object.hasOwnProperty.call(f,"timeUnixNano"))E.uint32(25).fixed64(f.timeUnixNano);if(f.asDouble!=null&&Object.hasOwnProperty.call(f,"asDouble"))E.uint32(33).double(f.asDouble);if(f.exemplars!=null&&f.exemplars.length)for(var M=0;M<f.exemplars.length;++M)NH.opentelemetry.proto.metrics.v1.Exemplar.encode(f.exemplars[M],E.uint32(42).fork()).ldelim();if(f.asInt!=null&&Object.hasOwnProperty.call(f,"asInt"))E.uint32(49).sfixed64(f.asInt);if(f.attributes!=null&&f.attributes.length)for(var M=0;M<f.attributes.length;++M)NH.opentelemetry.proto.common.v1.KeyValue.encode(f.attributes[M],E.uint32(58).fork()).ldelim();if(f.flags!=null&&Object.hasOwnProperty.call(f,"flags"))E.uint32(64).uint32(f.flags);return E},I.encodeDelimited=function(f,E){return this.encode(f,E).ldelim()},I.decode=function(f,E,M){if(!(f instanceof $A))f=$A.create(f);var G=E===void 0?f.len:f.pos+E,U=new NH.opentelemetry.proto.metrics.v1.NumberDataPoint;while(f.pos<G){var X=f.uint32();if(X===M)break;switch(X>>>3){case 7:{if(!(U.attributes&&U.attributes.length))U.attributes=[];U.attributes.push(NH.opentelemetry.proto.common.v1.KeyValue.decode(f,f.uint32()));break}case 2:{U.startTimeUnixNano=f.fixed64();break}case 3:{U.timeUnixNano=f.fixed64();break}case 4:{U.asDouble=f.double();break}case 6:{U.asInt=f.sfixed64();break}case 5:{if(!(U.exemplars&&U.exemplars.length))U.exemplars=[];U.exemplars.push(NH.opentelemetry.proto.metrics.v1.Exemplar.decode(f,f.uint32()));break}case 8:{U.flags=f.uint32();break}default:f.skipType(X&7);break}}return U},I.decodeDelimited=function(f){if(!(f instanceof $A))f=new $A(f);return this.decode(f,f.uint32())},I.verify=function(f){if(typeof f!=="object"||f===null)return"object expected";var E={};if(f.attributes!=null&&f.hasOwnProperty("attributes")){if(!Array.isArray(f.attributes))return"attributes: array expected";for(var M=0;M<f.attributes.length;++M){var G=NH.opentelemetry.proto.common.v1.KeyValue.verify(f.attributes[M]);if(G)return"attributes."+G}}if(f.startTimeUnixNano!=null&&f.hasOwnProperty("startTimeUnixNano")){if(!SH.isInteger(f.startTimeUnixNano)&&!(f.startTimeUnixNano&&SH.isInteger(f.startTimeUnixNano.low)&&SH.isInteger(f.startTimeUnixNano.high)))return"startTimeUnixNano: integer|Long expected"}if(f.timeUnixNano!=null&&f.hasOwnProperty("timeUnixNano")){if(!SH.isInteger(f.timeUnixNano)&&!(f.timeUnixNano&&SH.isInteger(f.timeUnixNano.low)&&SH.isInteger(f.timeUnixNano.high)))return"timeUnixNano: integer|Long expected"}if(f.asDouble!=null&&f.hasOwnProperty("asDouble")){if(E.value=1,typeof f.asDouble!=="number")return"asDouble: number expected"}if(f.asInt!=null&&f.hasOwnProperty("asInt")){if(E.value===1)return"value: multiple values";if(E.value=1,!SH.isInteger(f.asInt)&&!(f.asInt&&SH.isInteger(f.asInt.low)&&SH.isInteger(f.asInt.high)))return"asInt: integer|Long expected"}if(f.exemplars!=null&&f.hasOwnProperty("exemplars")){if(!Array.isArray(f.exemplars))return"exemplars: array expected";for(var M=0;M<f.exemplars.length;++M){var G=NH.opentelemetry.proto.metrics.v1.Exemplar.verify(f.exemplars[M]);if(G)return"exemplars."+G}}if(f.flags!=null&&f.hasOwnProperty("flags")){if(!SH.isInteger(f.flags))return"flags: integer expected"}return null},I.fromObject=function(f){if(f instanceof NH.opentelemetry.proto.metrics.v1.NumberDataPoint)return f;var E=new NH.opentelemetry.proto.metrics.v1.NumberDataPoint;if(f.attributes){if(!Array.isArray(f.attributes))throw TypeError(".opentelemetry.proto.metrics.v1.NumberDataPoint.attributes: array expected");E.attributes=[];for(var M=0;M<f.attributes.length;++M){if(typeof f.attributes[M]!=="object")throw TypeError(".opentelemetry.proto.metrics.v1.NumberDataPoint.attributes: object expected");E.attributes[M]=NH.opentelemetry.proto.common.v1.KeyValue.fromObject(f.attributes[M])}}if(f.startTimeUnixNano!=null){if(SH.Long)(E.startTimeUnixNano=SH.Long.fromValue(f.startTimeUnixNano)).unsigned=!1;else if(typeof f.startTimeUnixNano==="string")E.startTimeUnixNano=parseInt(f.startTimeUnixNano,10);else if(typeof f.startTimeUnixNano==="number")E.startTimeUnixNano=f.startTimeUnixNano;else if(typeof f.startTimeUnixNano==="object")E.startTimeUnixNano=new SH.LongBits(f.startTimeUnixNano.low>>>0,f.startTimeUnixNano.high>>>0).toNumber()}if(f.timeUnixNano!=null){if(SH.Long)(E.timeUnixNano=SH.Long.fromValue(f.timeUnixNano)).unsigned=!1;else if(typeof f.timeUnixNano==="string")E.timeUnixNano=parseInt(f.timeUnixNano,10);else if(typeof f.timeUnixNano==="number")E.timeUnixNano=f.timeUnixNano;else if(typeof f.timeUnixNano==="object")E.timeUnixNano=new SH.LongBits(f.timeUnixNano.low>>>0,f.timeUnixNano.high>>>0).toNumber()}if(f.asDouble!=null)E.asDouble=Number(f.asDouble);if(f.asInt!=null){if(SH.Long)(E.asInt=SH.Long.fromValue(f.asInt)).unsigned=!1;else if(typeof f.asInt==="string")E.asInt=parseInt(f.asInt,10);else if(typeof f.asInt==="number")E.asInt=f.asInt;else if(typeof f.asInt==="object")E.asInt=new SH.LongBits(f.asInt.low>>>0,f.asInt.high>>>0).toNumber()}if(f.exemplars){if(!Array.isArray(f.exemplars))throw TypeError(".opentelemetry.proto.metrics.v1.NumberDataPoint.exemplars: array expected");E.exemplars=[];for(var M=0;M<f.exemplars.length;++M){if(typeof f.exemplars[M]!=="object")throw TypeError(".opentelemetry.proto.metrics.v1.NumberDataPoint.exemplars: object expected");E.exemplars[M]=NH.opentelemetry.proto.metrics.v1.Exemplar.fromObject(f.exemplars[M])}}if(f.flags!=null)E.flags=f.flags>>>0;return E},I.toObject=function(f,E){if(!E)E={};var M={};if(E.arrays||E.defaults)M.exemplars=[],M.attributes=[];if(E.defaults){if(SH.Long){var G=new SH.Long(0,0,!1);M.startTimeUnixNano=E.longs===String?G.toString():E.longs===Number?G.toNumber():G}else M.startTimeUnixNano=E.longs===String?"0":0;if(SH.Long){var G=new SH.Long(0,0,!1);M.timeUnixNano=E.longs===String?G.toString():E.longs===Number?G.toNumber():G}else M.timeUnixNano=E.longs===String?"0":0;M.flags=0}if(f.startTimeUnixNano!=null&&f.hasOwnProperty("startTimeUnixNano"))if(typeof f.startTimeUnixNano==="number")M.startTimeUnixNano=E.longs===String?String(f.startTimeUnixNano):f.startTimeUnixNano;else M.startTimeUnixNano=E.longs===String?SH.Long.prototype.toString.call(f.startTimeUnixNano):E.longs===Number?new SH.LongBits(f.startTimeUnixNano.low>>>0,f.startTimeUnixNano.high>>>0).toNumber():f.startTimeUnixNano;if(f.timeUnixNano!=null&&f.hasOwnProperty("timeUnixNano"))if(typeof f.timeUnixNano==="number")M.timeUnixNano=E.longs===String?String(f.timeUnixNano):f.timeUnixNano;else M.timeUnixNano=E.longs===String?SH.Long.prototype.toString.call(f.timeUnixNano):E.longs===Number?new SH.LongBits(f.timeUnixNano.low>>>0,f.timeUnixNano.high>>>0).toNumber():f.timeUnixNano;if(f.asDouble!=null&&f.hasOwnProperty("asDouble")){if(M.asDouble=E.json&&!isFinite(f.asDouble)?String(f.asDouble):f.asDouble,E.oneofs)M.value="asDouble"}if(f.exemplars&&f.exemplars.length){M.exemplars=[];for(var U=0;U<f.exemplars.length;++U)M.exemplars[U]=NH.opentelemetry.proto.metrics.v1.Exemplar.toObject(f.exemplars[U],E)}if(f.asInt!=null&&f.hasOwnProperty("asInt")){if(typeof f.asInt==="number")M.asInt=E.longs===String?String(f.asInt):f.asInt;else M.asInt=E.longs===String?SH.Long.prototype.toString.call(f.asInt):E.longs===Number?new SH.LongBits(f.asInt.low>>>0,f.asInt.high>>>0).toNumber():f.asInt;if(E.oneofs)M.value="asInt"}if(f.attributes&&f.attributes.length){M.attributes=[];for(var U=0;U<f.attributes.length;++U)M.attributes[U]=NH.opentelemetry.proto.common.v1.KeyValue.toObject(f.attributes[U],E)}if(f.flags!=null&&f.hasOwnProperty("flags"))M.flags=f.flags;return M},I.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},I.getTypeUrl=function(f){if(f===void 0)f="type.googleapis.com";return f+"/opentelemetry.proto.metrics.v1.NumberDataPoint"},I}(),L.HistogramDataPoint=function(){function I(B){if(this.attributes=[],this.bucketCounts=[],this.explicitBounds=[],this.exemplars=[],B){for(var f=Object.keys(B),E=0;E<f.length;++E)if(B[f[E]]!=null)this[f[E]]=B[f[E]]}}I.prototype.attributes=SH.emptyArray,I.prototype.startTimeUnixNano=null,I.prototype.timeUnixNano=null,I.prototype.count=null,I.prototype.sum=null,I.prototype.bucketCounts=SH.emptyArray,I.prototype.explicitBounds=SH.emptyArray,I.prototype.exemplars=SH.emptyArray,I.prototype.flags=null,I.prototype.min=null,I.prototype.max=null;var D;return Object.defineProperty(I.prototype,"_sum",{get:SH.oneOfGetter(D=["sum"]),set:SH.oneOfSetter(D)}),Object.defineProperty(I.prototype,"_min",{get:SH.oneOfGetter(D=["min"]),set:SH.oneOfSetter(D)}),Object.defineProperty(I.prototype,"_max",{get:SH.oneOfGetter(D=["max"]),set:SH.oneOfSetter(D)}),I.create=function(f){return new I(f)},I.encode=function(f,E){if(!E)E=s9.create();if(f.startTimeUnixNano!=null&&Object.hasOwnProperty.call(f,"startTimeUnixNano"))E.uint32(17).fixed64(f.startTimeUnixNano);if(f.timeUnixNano!=null&&Object.hasOwnProperty.call(f,"timeUnixNano"))E.uint32(25).fixed64(f.timeUnixNano);if(f.count!=null&&Object.hasOwnProperty.call(f,"count"))E.uint32(33).fixed64(f.count);if(f.sum!=null&&Object.hasOwnProperty.call(f,"sum"))E.uint32(41).double(f.sum);if(f.bucketCounts!=null&&f.bucketCounts.length){E.uint32(50).fork();for(var M=0;M<f.bucketCounts.length;++M)E.fixed64(f.bucketCounts[M]);E.ldelim()}if(f.explicitBounds!=null&&f.explicitBounds.length){E.uint32(58).fork();for(var M=0;M<f.explicitBounds.length;++M)E.double(f.explicitBounds[M]);E.ldelim()}if(f.exemplars!=null&&f.exemplars.length)for(var M=0;M<f.exemplars.length;++M)NH.opentelemetry.proto.metrics.v1.Exemplar.encode(f.exemplars[M],E.uint32(66).fork()).ldelim();if(f.attributes!=null&&f.attributes.length)for(var M=0;M<f.attributes.length;++M)NH.opentelemetry.proto.common.v1.KeyValue.encode(f.attributes[M],E.uint32(74).fork()).ldelim();if(f.flags!=null&&Object.hasOwnProperty.call(f,"flags"))E.uint32(80).uint32(f.flags);if(f.min!=null&&Object.hasOwnProperty.call(f,"min"))E.uint32(89).double(f.min);if(f.max!=null&&Object.hasOwnProperty.call(f,"max"))E.uint32(97).double(f.max);return E},I.encodeDelimited=function(f,E){return this.encode(f,E).ldelim()},I.decode=function(f,E,M){if(!(f instanceof $A))f=$A.create(f);var G=E===void 0?f.len:f.pos+E,U=new NH.opentelemetry.proto.metrics.v1.HistogramDataPoint;while(f.pos<G){var X=f.uint32();if(X===M)break;switch(X>>>3){case 9:{if(!(U.attributes&&U.attributes.length))U.attributes=[];U.attributes.push(NH.opentelemetry.proto.common.v1.KeyValue.decode(f,f.uint32()));break}case 2:{U.startTimeUnixNano=f.fixed64();break}case 3:{U.timeUnixNano=f.fixed64();break}case 4:{U.count=f.fixed64();break}case 5:{U.sum=f.double();break}case 6:{if(!(U.bucketCounts&&U.bucketCounts.length))U.bucketCounts=[];if((X&7)===2){var J=f.uint32()+f.pos;while(f.pos<J)U.bucketCounts.push(f.fixed64())}else U.bucketCounts.push(f.fixed64());break}case 7:{if(!(U.explicitBounds&&U.explicitBounds.length))U.explicitBounds=[];if((X&7)===2){var J=f.uint32()+f.pos;while(f.pos<J)U.explicitBounds.push(f.double())}else U.explicitBounds.push(f.double());break}case 8:{if(!(U.exemplars&&U.exemplars.length))U.exemplars=[];U.exemplars.push(NH.opentelemetry.proto.metrics.v1.Exemplar.decode(f,f.uint32()));break}case 10:{U.flags=f.uint32();break}case 11:{U.min=f.double();break}case 12:{U.max=f.double();break}default:f.skipType(X&7);break}}return U},I.decodeDelimited=function(f){if(!(f instanceof $A))f=new $A(f);return this.decode(f,f.uint32())},I.verify=function(f){if(typeof f!=="object"||f===null)return"object expected";var E={};if(f.attributes!=null&&f.hasOwnProperty("attributes")){if(!Array.isArray(f.attributes))return"attributes: array expected";for(var M=0;M<f.attributes.length;++M){var G=NH.opentelemetry.proto.common.v1.KeyValue.verify(f.attributes[M]);if(G)return"attributes."+G}}if(f.startTimeUnixNano!=null&&f.hasOwnProperty("startTimeUnixNano")){if(!SH.isInteger(f.startTimeUnixNano)&&!(f.startTimeUnixNano&&SH.isInteger(f.startTimeUnixNano.low)&&SH.isInteger(f.startTimeUnixNano.high)))return"startTimeUnixNano: integer|Long expected"}if(f.timeUnixNano!=null&&f.hasOwnProperty("timeUnixNano")){if(!SH.isInteger(f.timeUnixNano)&&!(f.timeUnixNano&&SH.isInteger(f.timeUnixNano.low)&&SH.isInteger(f.timeUnixNano.high)))return"timeUnixNano: integer|Long expected"}if(f.count!=null&&f.hasOwnProperty("count")){if(!SH.isInteger(f.count)&&!(f.count&&SH.isInteger(f.count.low)&&SH.isInteger(f.count.high)))return"count: integer|Long expected"}if(f.sum!=null&&f.hasOwnProperty("sum")){if(E._sum=1,typeof f.sum!=="number")return"sum: number expected"}if(f.bucketCounts!=null&&f.hasOwnProperty("bucketCounts")){if(!Array.isArray(f.bucketCounts))return"bucketCounts: array expected";for(var M=0;M<f.bucketCounts.length;++M)if(!SH.isInteger(f.bucketCounts[M])&&!(f.bucketCounts[M]&&SH.isInteger(f.bucketCounts[M].low)&&SH.isInteger(f.bucketCounts[M].high)))return"bucketCounts: integer|Long[] expected"}if(f.explicitBounds!=null&&f.hasOwnProperty("explicitBounds")){if(!Array.isArray(f.explicitBounds))return"explicitBounds: array expected";for(var M=0;M<f.explicitBounds.length;++M)if(typeof f.explicitBounds[M]!=="number")return"explicitBounds: number[] expected"}if(f.exemplars!=null&&f.hasOwnProperty("exemplars")){if(!Array.isArray(f.exemplars))return"exemplars: array expected";for(var M=0;M<f.exemplars.length;++M){var G=NH.opentelemetry.proto.metrics.v1.Exemplar.verify(f.exemplars[M]);if(G)return"exemplars."+G}}if(f.flags!=null&&f.hasOwnProperty("flags")){if(!SH.isInteger(f.flags))return"flags: integer expected"}if(f.min!=null&&f.hasOwnProperty("min")){if(E._min=1,typeof f.min!=="number")return"min: number expected"}if(f.max!=null&&f.hasOwnProperty("max")){if(E._max=1,typeof f.max!=="number")return"max: number expected"}return null},I.fromObject=function(f){if(f instanceof NH.opentelemetry.proto.metrics.v1.HistogramDataPoint)return f;var E=new NH.opentelemetry.proto.metrics.v1.HistogramDataPoint;if(f.attributes){if(!Array.isArray(f.attributes))throw TypeError(".opentelemetry.proto.metrics.v1.HistogramDataPoint.attributes: array expected");E.attributes=[];for(var M=0;M<f.attributes.length;++M){if(typeof f.attributes[M]!=="object")throw TypeError(".opentelemetry.proto.metrics.v1.HistogramDataPoint.attributes: object expected");E.attributes[M]=NH.opentelemetry.proto.common.v1.KeyValue.fromObject(f.attributes[M])}}if(f.startTimeUnixNano!=null){if(SH.Long)(E.startTimeUnixNano=SH.Long.fromValue(f.startTimeUnixNano)).unsigned=!1;else if(typeof f.startTimeUnixNano==="string")E.startTimeUnixNano=parseInt(f.startTimeUnixNano,10);else if(typeof f.startTimeUnixNano==="number")E.startTimeUnixNano=f.startTimeUnixNano;else if(typeof f.startTimeUnixNano==="object")E.startTimeUnixNano=new SH.LongBits(f.startTimeUnixNano.low>>>0,f.startTimeUnixNano.high>>>0).toNumber()}if(f.timeUnixNano!=null){if(SH.Long)(E.timeUnixNano=SH.Long.fromValue(f.timeUnixNano)).unsigned=!1;else if(typeof f.timeUnixNano==="string")E.timeUnixNano=parseInt(f.timeUnixNano,10);else if(typeof f.timeUnixNano==="number")E.timeUnixNano=f.timeUnixNano;else if(typeof f.timeUnixNano==="object")E.timeUnixNano=new SH.LongBits(f.timeUnixNano.low>>>0,f.timeUnixNano.high>>>0).toNumber()}if(f.count!=null){if(SH.Long)(E.count=SH.Long.fromValue(f.count)).unsigned=!1;else if(typeof f.count==="string")E.count=parseInt(f.count,10);else if(typeof f.count==="number")E.count=f.count;else if(typeof f.count==="object")E.count=new SH.LongBits(f.count.low>>>0,f.count.high>>>0).toNumber()}if(f.sum!=null)E.sum=Number(f.sum);if(f.bucketCounts){if(!Array.isArray(f.bucketCounts))throw TypeError(".opentelemetry.proto.metrics.v1.HistogramDataPoint.bucketCounts: array expected");E.bucketCounts=[];for(var M=0;M<f.bucketCounts.length;++M)if(SH.Long)(E.bucketCounts[M]=SH.Long.fromValue(f.bucketCounts[M])).unsigned=!1;else if(typeof f.bucketCounts[M]==="string")E.bucketCounts[M]=parseInt(f.bucketCounts[M],10);else if(typeof f.bucketCounts[M]==="number")E.bucketCounts[M]=f.bucketCounts[M];else if(typeof f.bucketCounts[M]==="object")E.bucketCounts[M]=new SH.LongBits(f.bucketCounts[M].low>>>0,f.bucketCounts[M].high>>>0).toNumber()}if(f.explicitBounds){if(!Array.isArray(f.explicitBounds))throw TypeError(".opentelemetry.proto.metrics.v1.HistogramDataPoint.explicitBounds: array expected");E.explicitBounds=[];for(var M=0;M<f.explicitBounds.length;++M)E.explicitBounds[M]=Number(f.explicitBounds[M])}if(f.exemplars){if(!Array.isArray(f.exemplars))throw TypeError(".opentelemetry.proto.metrics.v1.HistogramDataPoint.exemplars: array expected");E.exemplars=[];for(var M=0;M<f.exemplars.length;++M){if(typeof f.exemplars[M]!=="object")throw TypeError(".opentelemetry.proto.metrics.v1.HistogramDataPoint.exemplars: object expected");E.exemplars[M]=NH.opentelemetry.proto.metrics.v1.Exemplar.fromObject(f.exemplars[M])}}if(f.flags!=null)E.flags=f.flags>>>0;if(f.min!=null)E.min=Number(f.min);if(f.max!=null)E.max=Number(f.max);return E},I.toObject=function(f,E){if(!E)E={};var M={};if(E.arrays||E.defaults)M.bucketCounts=[],M.explicitBounds=[],M.exemplars=[],M.attributes=[];if(E.defaults){if(SH.Long){var G=new SH.Long(0,0,!1);M.startTimeUnixNano=E.longs===String?G.toString():E.longs===Number?G.toNumber():G}else M.startTimeUnixNano=E.longs===String?"0":0;if(SH.Long){var G=new SH.Long(0,0,!1);M.timeUnixNano=E.longs===String?G.toString():E.longs===Number?G.toNumber():G}else M.timeUnixNano=E.longs===String?"0":0;if(SH.Long){var G=new SH.Long(0,0,!1);M.count=E.longs===String?G.toString():E.longs===Number?G.toNumber():G}else M.count=E.longs===String?"0":0;M.flags=0}if(f.startTimeUnixNano!=null&&f.hasOwnProperty("startTimeUnixNano"))if(typeof f.startTimeUnixNano==="number")M.startTimeUnixNano=E.longs===String?String(f.startTimeUnixNano):f.startTimeUnixNano;else M.startTimeUnixNano=E.longs===String?SH.Long.prototype.toString.call(f.startTimeUnixNano):E.longs===Number?new SH.LongBits(f.startTimeUnixNano.low>>>0,f.startTimeUnixNano.high>>>0).toNumber():f.startTimeUnixNano;if(f.timeUnixNano!=null&&f.hasOwnProperty("timeUnixNano"))if(typeof f.timeUnixNano==="number")M.timeUnixNano=E.longs===String?String(f.timeUnixNano):f.timeUnixNano;else M.timeUnixNano=E.longs===String?SH.Long.prototype.toString.call(f.timeUnixNano):E.longs===Number?new SH.LongBits(f.timeUnixNano.low>>>0,f.timeUnixNano.high>>>0).toNumber():f.timeUnixNano;if(f.count!=null&&f.hasOwnProperty("count"))if(typeof f.count==="number")M.count=E.longs===String?String(f.count):f.count;else M.count=E.longs===String?SH.Long.prototype.toString.call(f.count):E.longs===Number?new SH.LongBits(f.count.low>>>0,f.count.high>>>0).toNumber():f.count;if(f.sum!=null&&f.hasOwnProperty("sum")){if(M.sum=E.json&&!isFinite(f.sum)?String(f.sum):f.sum,E.oneofs)M._sum="sum"}if(f.bucketCounts&&f.bucketCounts.length){M.bucketCounts=[];for(var U=0;U<f.bucketCounts.length;++U)if(typeof f.bucketCounts[U]==="number")M.bucketCounts[U]=E.longs===String?String(f.bucketCounts[U]):f.bucketCounts[U];else M.bucketCounts[U]=E.longs===String?SH.Long.prototype.toString.call(f.bucketCounts[U]):E.longs===Number?new SH.LongBits(f.bucketCounts[U].low>>>0,f.bucketCounts[U].high>>>0).toNumber():f.bucketCounts[U]}if(f.explicitBounds&&f.explicitBounds.length){M.explicitBounds=[];for(var U=0;U<f.explicitBounds.length;++U)M.explicitBounds[U]=E.json&&!isFinite(f.explicitBounds[U])?String(f.explicitBounds[U]):f.explicitBounds[U]}if(f.exemplars&&f.exemplars.length){M.exemplars=[];for(var U=0;U<f.exemplars.length;++U)M.exemplars[U]=NH.opentelemetry.proto.metrics.v1.Exemplar.toObject(f.exemplars[U],E)}if(f.attributes&&f.attributes.length){M.attributes=[];for(var U=0;U<f.attributes.length;++U)M.attributes[U]=NH.opentelemetry.proto.common.v1.KeyValue.toObject(f.attributes[U],E)}if(f.flags!=null&&f.hasOwnProperty("flags"))M.flags=f.flags;if(f.min!=null&&f.hasOwnProperty("min")){if(M.min=E.json&&!isFinite(f.min)?String(f.min):f.min,E.oneofs)M._min="min"}if(f.max!=null&&f.hasOwnProperty("max")){if(M.max=E.json&&!isFinite(f.max)?String(f.max):f.max,E.oneofs)M._max="max"}return M},I.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},I.getTypeUrl=function(f){if(f===void 0)f="type.googleapis.com";return f+"/opentelemetry.proto.metrics.v1.HistogramDataPoint"},I}(),L.ExponentialHistogramDataPoint=function(){function I(B){if(this.attributes=[],this.exemplars=[],B){for(var f=Object.keys(B),E=0;E<f.length;++E)if(B[f[E]]!=null)this[f[E]]=B[f[E]]}}I.prototype.attributes=SH.emptyArray,I.prototype.startTimeUnixNano=null,I.prototype.timeUnixNano=null,I.prototype.count=null,I.prototype.sum=null,I.prototype.scale=null,I.prototype.zeroCount=null,I.prototype.positive=null,I.prototype.negative=null,I.prototype.flags=null,I.prototype.exemplars=SH.emptyArray,I.prototype.min=null,I.prototype.max=null,I.prototype.zeroThreshold=null;var D;return Object.defineProperty(I.prototype,"_sum",{get:SH.oneOfGetter(D=["sum"]),set:SH.oneOfSetter(D)}),Object.defineProperty(I.prototype,"_min",{get:SH.oneOfGetter(D=["min"]),set:SH.oneOfSetter(D)}),Object.defineProperty(I.prototype,"_max",{get:SH.oneOfGetter(D=["max"]),set:SH.oneOfSetter(D)}),I.create=function(f){return new I(f)},I.encode=function(f,E){if(!E)E=s9.create();if(f.attributes!=null&&f.attributes.length)for(var M=0;M<f.attributes.length;++M)NH.opentelemetry.proto.common.v1.KeyValue.encode(f.attributes[M],E.uint32(10).fork()).ldelim();if(f.startTimeUnixNano!=null&&Object.hasOwnProperty.call(f,"startTimeUnixNano"))E.uint32(17).fixed64(f.startTimeUnixNano);if(f.timeUnixNano!=null&&Object.hasOwnProperty.call(f,"timeUnixNano"))E.uint32(25).fixed64(f.timeUnixNano);if(f.count!=null&&Object.hasOwnProperty.call(f,"count"))E.uint32(33).fixed64(f.count);if(f.sum!=null&&Object.hasOwnProperty.call(f,"sum"))E.uint32(41).double(f.sum);if(f.scale!=null&&Object.hasOwnProperty.call(f,"scale"))E.uint32(48).sint32(f.scale);if(f.zeroCount!=null&&Object.hasOwnProperty.call(f,"zeroCount"))E.uint32(57).fixed64(f.zeroCount);if(f.positive!=null&&Object.hasOwnProperty.call(f,"positive"))NH.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.encode(f.positive,E.uint32(66).fork()).ldelim();if(f.negative!=null&&Object.hasOwnProperty.call(f,"negative"))NH.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.encode(f.negative,E.uint32(74).fork()).ldelim();if(f.flags!=null&&Object.hasOwnProperty.call(f,"flags"))E.uint32(80).uint32(f.flags);if(f.exemplars!=null&&f.exemplars.length)for(var M=0;M<f.exemplars.length;++M)NH.opentelemetry.proto.metrics.v1.Exemplar.encode(f.exemplars[M],E.uint32(90).fork()).ldelim();if(f.min!=null&&Object.hasOwnProperty.call(f,"min"))E.uint32(97).double(f.min);if(f.max!=null&&Object.hasOwnProperty.call(f,"max"))E.uint32(105).double(f.max);if(f.zeroThreshold!=null&&Object.hasOwnProperty.call(f,"zeroThreshold"))E.uint32(113).double(f.zeroThreshold);return E},I.encodeDelimited=function(f,E){return this.encode(f,E).ldelim()},I.decode=function(f,E,M){if(!(f instanceof $A))f=$A.create(f);var G=E===void 0?f.len:f.pos+E,U=new NH.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint;while(f.pos<G){var X=f.uint32();if(X===M)break;switch(X>>>3){case 1:{if(!(U.attributes&&U.attributes.length))U.attributes=[];U.attributes.push(NH.opentelemetry.proto.common.v1.KeyValue.decode(f,f.uint32()));break}case 2:{U.startTimeUnixNano=f.fixed64();break}case 3:{U.timeUnixNano=f.fixed64();break}case 4:{U.count=f.fixed64();break}case 5:{U.sum=f.double();break}case 6:{U.scale=f.sint32();break}case 7:{U.zeroCount=f.fixed64();break}case 8:{U.positive=NH.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.decode(f,f.uint32());break}case 9:{U.negative=NH.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.decode(f,f.uint32());break}case 10:{U.flags=f.uint32();break}case 11:{if(!(U.exemplars&&U.exemplars.length))U.exemplars=[];U.exemplars.push(NH.opentelemetry.proto.metrics.v1.Exemplar.decode(f,f.uint32()));break}case 12:{U.min=f.double();break}case 13:{U.max=f.double();break}case 14:{U.zeroThreshold=f.double();break}default:f.skipType(X&7);break}}return U},I.decodeDelimited=function(f){if(!(f instanceof $A))f=new $A(f);return this.decode(f,f.uint32())},I.verify=function(f){if(typeof f!=="object"||f===null)return"object expected";var E={};if(f.attributes!=null&&f.hasOwnProperty("attributes")){if(!Array.isArray(f.attributes))return"attributes: array expected";for(var M=0;M<f.attributes.length;++M){var G=NH.opentelemetry.proto.common.v1.KeyValue.verify(f.attributes[M]);if(G)return"attributes."+G}}if(f.startTimeUnixNano!=null&&f.hasOwnProperty("startTimeUnixNano")){if(!SH.isInteger(f.startTimeUnixNano)&&!(f.startTimeUnixNano&&SH.isInteger(f.startTimeUnixNano.low)&&SH.isInteger(f.startTimeUnixNano.high)))return"startTimeUnixNano: integer|Long expected"}if(f.timeUnixNano!=null&&f.hasOwnProperty("timeUnixNano")){if(!SH.isInteger(f.timeUnixNano)&&!(f.timeUnixNano&&SH.isInteger(f.timeUnixNano.low)&&SH.isInteger(f.timeUnixNano.high)))return"timeUnixNano: integer|Long expected"}if(f.count!=null&&f.hasOwnProperty("count")){if(!SH.isInteger(f.count)&&!(f.count&&SH.isInteger(f.count.low)&&SH.isInteger(f.count.high)))return"count: integer|Long expected"}if(f.sum!=null&&f.hasOwnProperty("sum")){if(E._sum=1,typeof f.sum!=="number")return"sum: number expected"}if(f.scale!=null&&f.hasOwnProperty("scale")){if(!SH.isInteger(f.scale))return"scale: integer expected"}if(f.zeroCount!=null&&f.hasOwnProperty("zeroCount")){if(!SH.isInteger(f.zeroCount)&&!(f.zeroCount&&SH.isInteger(f.zeroCount.low)&&SH.isInteger(f.zeroCount.high)))return"zeroCount: integer|Long expected"}if(f.positive!=null&&f.hasOwnProperty("positive")){var G=NH.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.verify(f.positive);if(G)return"positive."+G}if(f.negative!=null&&f.hasOwnProperty("negative")){var G=NH.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.verify(f.negative);if(G)return"negative."+G}if(f.flags!=null&&f.hasOwnProperty("flags")){if(!SH.isInteger(f.flags))return"flags: integer expected"}if(f.exemplars!=null&&f.hasOwnProperty("exemplars")){if(!Array.isArray(f.exemplars))return"exemplars: array expected";for(var M=0;M<f.exemplars.length;++M){var G=NH.opentelemetry.proto.metrics.v1.Exemplar.verify(f.exemplars[M]);if(G)return"exemplars."+G}}if(f.min!=null&&f.hasOwnProperty("min")){if(E._min=1,typeof f.min!=="number")return"min: number expected"}if(f.max!=null&&f.hasOwnProperty("max")){if(E._max=1,typeof f.max!=="number")return"max: number expected"}if(f.zeroThreshold!=null&&f.hasOwnProperty("zeroThreshold")){if(typeof f.zeroThreshold!=="number")return"zeroThreshold: number expected"}return null},I.fromObject=function(f){if(f instanceof NH.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint)return f;var E=new NH.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint;if(f.attributes){if(!Array.isArray(f.attributes))throw TypeError(".opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.attributes: array expected");E.attributes=[];for(var M=0;M<f.attributes.length;++M){if(typeof f.attributes[M]!=="object")throw TypeError(".opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.attributes: object expected");E.attributes[M]=NH.opentelemetry.proto.common.v1.KeyValue.fromObject(f.attributes[M])}}if(f.startTimeUnixNano!=null){if(SH.Long)(E.startTimeUnixNano=SH.Long.fromValue(f.startTimeUnixNano)).unsigned=!1;else if(typeof f.startTimeUnixNano==="string")E.startTimeUnixNano=parseInt(f.startTimeUnixNano,10);else if(typeof f.startTimeUnixNano==="number")E.startTimeUnixNano=f.startTimeUnixNano;else if(typeof f.startTimeUnixNano==="object")E.startTimeUnixNano=new SH.LongBits(f.startTimeUnixNano.low>>>0,f.startTimeUnixNano.high>>>0).toNumber()}if(f.timeUnixNano!=null){if(SH.Long)(E.timeUnixNano=SH.Long.fromValue(f.timeUnixNano)).unsigned=!1;else if(typeof f.timeUnixNano==="string")E.timeUnixNano=parseInt(f.timeUnixNano,10);else if(typeof f.timeUnixNano==="number")E.timeUnixNano=f.timeUnixNano;else if(typeof f.timeUnixNano==="object")E.timeUnixNano=new SH.LongBits(f.timeUnixNano.low>>>0,f.timeUnixNano.high>>>0).toNumber()}if(f.count!=null){if(SH.Long)(E.count=SH.Long.fromValue(f.count)).unsigned=!1;else if(typeof f.count==="string")E.count=parseInt(f.count,10);else if(typeof f.count==="number")E.count=f.count;else if(typeof f.count==="object")E.count=new SH.LongBits(f.count.low>>>0,f.count.high>>>0).toNumber()}if(f.sum!=null)E.sum=Number(f.sum);if(f.scale!=null)E.scale=f.scale|0;if(f.zeroCount!=null){if(SH.Long)(E.zeroCount=SH.Long.fromValue(f.zeroCount)).unsigned=!1;else if(typeof f.zeroCount==="string")E.zeroCount=parseInt(f.zeroCount,10);else if(typeof f.zeroCount==="number")E.zeroCount=f.zeroCount;else if(typeof f.zeroCount==="object")E.zeroCount=new SH.LongBits(f.zeroCount.low>>>0,f.zeroCount.high>>>0).toNumber()}if(f.positive!=null){if(typeof f.positive!=="object")throw TypeError(".opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.positive: object expected");E.positive=NH.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.fromObject(f.positive)}if(f.negative!=null){if(typeof f.negative!=="object")throw TypeError(".opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.negative: object expected");E.negative=NH.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.fromObject(f.negative)}if(f.flags!=null)E.flags=f.flags>>>0;if(f.exemplars){if(!Array.isArray(f.exemplars))throw TypeError(".opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.exemplars: array expected");E.exemplars=[];for(var M=0;M<f.exemplars.length;++M){if(typeof f.exemplars[M]!=="object")throw TypeError(".opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.exemplars: object expected");E.exemplars[M]=NH.opentelemetry.proto.metrics.v1.Exemplar.fromObject(f.exemplars[M])}}if(f.min!=null)E.min=Number(f.min);if(f.max!=null)E.max=Number(f.max);if(f.zeroThreshold!=null)E.zeroThreshold=Number(f.zeroThreshold);return E},I.toObject=function(f,E){if(!E)E={};var M={};if(E.arrays||E.defaults)M.attributes=[],M.exemplars=[];if(E.defaults){if(SH.Long){var G=new SH.Long(0,0,!1);M.startTimeUnixNano=E.longs===String?G.toString():E.longs===Number?G.toNumber():G}else M.startTimeUnixNano=E.longs===String?"0":0;if(SH.Long){var G=new SH.Long(0,0,!1);M.timeUnixNano=E.longs===String?G.toString():E.longs===Number?G.toNumber():G}else M.timeUnixNano=E.longs===String?"0":0;if(SH.Long){var G=new SH.Long(0,0,!1);M.count=E.longs===String?G.toString():E.longs===Number?G.toNumber():G}else M.count=E.longs===String?"0":0;if(M.scale=0,SH.Long){var G=new SH.Long(0,0,!1);M.zeroCount=E.longs===String?G.toString():E.longs===Number?G.toNumber():G}else M.zeroCount=E.longs===String?"0":0;M.positive=null,M.negative=null,M.flags=0,M.zeroThreshold=0}if(f.attributes&&f.attributes.length){M.attributes=[];for(var U=0;U<f.attributes.length;++U)M.attributes[U]=NH.opentelemetry.proto.common.v1.KeyValue.toObject(f.attributes[U],E)}if(f.startTimeUnixNano!=null&&f.hasOwnProperty("startTimeUnixNano"))if(typeof f.startTimeUnixNano==="number")M.startTimeUnixNano=E.longs===String?String(f.startTimeUnixNano):f.startTimeUnixNano;else M.startTimeUnixNano=E.longs===String?SH.Long.prototype.toString.call(f.startTimeUnixNano):E.longs===Number?new SH.LongBits(f.startTimeUnixNano.low>>>0,f.startTimeUnixNano.high>>>0).toNumber():f.startTimeUnixNano;if(f.timeUnixNano!=null&&f.hasOwnProperty("timeUnixNano"))if(typeof f.timeUnixNano==="number")M.timeUnixNano=E.longs===String?String(f.timeUnixNano):f.timeUnixNano;else M.timeUnixNano=E.longs===String?SH.Long.prototype.toString.call(f.timeUnixNano):E.longs===Number?new SH.LongBits(f.timeUnixNano.low>>>0,f.timeUnixNano.high>>>0).toNumber():f.timeUnixNano;if(f.count!=null&&f.hasOwnProperty("count"))if(typeof f.count==="number")M.count=E.longs===String?String(f.count):f.count;else M.count=E.longs===String?SH.Long.prototype.toString.call(f.count):E.longs===Number?new SH.LongBits(f.count.low>>>0,f.count.high>>>0).toNumber():f.count;if(f.sum!=null&&f.hasOwnProperty("sum")){if(M.sum=E.json&&!isFinite(f.sum)?String(f.sum):f.sum,E.oneofs)M._sum="sum"}if(f.scale!=null&&f.hasOwnProperty("scale"))M.scale=f.scale;if(f.zeroCount!=null&&f.hasOwnProperty("zeroCount"))if(typeof f.zeroCount==="number")M.zeroCount=E.longs===String?String(f.zeroCount):f.zeroCount;else M.zeroCount=E.longs===String?SH.Long.prototype.toString.call(f.zeroCount):E.longs===Number?new SH.LongBits(f.zeroCount.low>>>0,f.zeroCount.high>>>0).toNumber():f.zeroCount;if(f.positive!=null&&f.hasOwnProperty("positive"))M.positive=NH.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.toObject(f.positive,E);if(f.negative!=null&&f.hasOwnProperty("negative"))M.negative=NH.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.toObject(f.negative,E);if(f.flags!=null&&f.hasOwnProperty("flags"))M.flags=f.flags;if(f.exemplars&&f.exemplars.length){M.exemplars=[];for(var U=0;U<f.exemplars.length;++U)M.exemplars[U]=NH.opentelemetry.proto.metrics.v1.Exemplar.toObject(f.exemplars[U],E)}if(f.min!=null&&f.hasOwnProperty("min")){if(M.min=E.json&&!isFinite(f.min)?String(f.min):f.min,E.oneofs)M._min="min"}if(f.max!=null&&f.hasOwnProperty("max")){if(M.max=E.json&&!isFinite(f.max)?String(f.max):f.max,E.oneofs)M._max="max"}if(f.zeroThreshold!=null&&f.hasOwnProperty("zeroThreshold"))M.zeroThreshold=E.json&&!isFinite(f.zeroThreshold)?String(f.zeroThreshold):f.zeroThreshold;return M},I.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},I.getTypeUrl=function(f){if(f===void 0)f="type.googleapis.com";return f+"/opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint"},I.Buckets=function(){function B(f){if(this.bucketCounts=[],f){for(var E=Object.keys(f),M=0;M<E.length;++M)if(f[E[M]]!=null)this[E[M]]=f[E[M]]}}return B.prototype.offset=null,B.prototype.bucketCounts=SH.emptyArray,B.create=function(E){return new B(E)},B.encode=function(E,M){if(!M)M=s9.create();if(E.offset!=null&&Object.hasOwnProperty.call(E,"offset"))M.uint32(8).sint32(E.offset);if(E.bucketCounts!=null&&E.bucketCounts.length){M.uint32(18).fork();for(var G=0;G<E.bucketCounts.length;++G)M.uint64(E.bucketCounts[G]);M.ldelim()}return M},B.encodeDelimited=function(E,M){return this.encode(E,M).ldelim()},B.decode=function(E,M,G){if(!(E instanceof $A))E=$A.create(E);var U=M===void 0?E.len:E.pos+M,X=new NH.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets;while(E.pos<U){var J=E.uint32();if(J===G)break;switch(J>>>3){case 1:{X.offset=E.sint32();break}case 2:{if(!(X.bucketCounts&&X.bucketCounts.length))X.bucketCounts=[];if((J&7)===2){var F=E.uint32()+E.pos;while(E.pos<F)X.bucketCounts.push(E.uint64())}else X.bucketCounts.push(E.uint64());break}default:E.skipType(J&7);break}}return X},B.decodeDelimited=function(E){if(!(E instanceof $A))E=new $A(E);return this.decode(E,E.uint32())},B.verify=function(E){if(typeof E!=="object"||E===null)return"object expected";if(E.offset!=null&&E.hasOwnProperty("offset")){if(!SH.isInteger(E.offset))return"offset: integer expected"}if(E.bucketCounts!=null&&E.hasOwnProperty("bucketCounts")){if(!Array.isArray(E.bucketCounts))return"bucketCounts: array expected";for(var M=0;M<E.bucketCounts.length;++M)if(!SH.isInteger(E.bucketCounts[M])&&!(E.bucketCounts[M]&&SH.isInteger(E.bucketCounts[M].low)&&SH.isInteger(E.bucketCounts[M].high)))return"bucketCounts: integer|Long[] expected"}return null},B.fromObject=function(E){if(E instanceof NH.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets)return E;var M=new NH.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets;if(E.offset!=null)M.offset=E.offset|0;if(E.bucketCounts){if(!Array.isArray(E.bucketCounts))throw TypeError(".opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.bucketCounts: array expected");M.bucketCounts=[];for(var G=0;G<E.bucketCounts.length;++G)if(SH.Long)(M.bucketCounts[G]=SH.Long.fromValue(E.bucketCounts[G])).unsigned=!0;else if(typeof E.bucketCounts[G]==="string")M.bucketCounts[G]=parseInt(E.bucketCounts[G],10);else if(typeof E.bucketCounts[G]==="number")M.bucketCounts[G]=E.bucketCounts[G];else if(typeof E.bucketCounts[G]==="object")M.bucketCounts[G]=new SH.LongBits(E.bucketCounts[G].low>>>0,E.bucketCounts[G].high>>>0).toNumber(!0)}return M},B.toObject=function(E,M){if(!M)M={};var G={};if(M.arrays||M.defaults)G.bucketCounts=[];if(M.defaults)G.offset=0;if(E.offset!=null&&E.hasOwnProperty("offset"))G.offset=E.offset;if(E.bucketCounts&&E.bucketCounts.length){G.bucketCounts=[];for(var U=0;U<E.bucketCounts.length;++U)if(typeof E.bucketCounts[U]==="number")G.bucketCounts[U]=M.longs===String?String(E.bucketCounts[U]):E.bucketCounts[U];else G.bucketCounts[U]=M.longs===String?SH.Long.prototype.toString.call(E.bucketCounts[U]):M.longs===Number?new SH.LongBits(E.bucketCounts[U].low>>>0,E.bucketCounts[U].high>>>0).toNumber(!0):E.bucketCounts[U]}return G},B.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},B.getTypeUrl=function(E){if(E===void 0)E="type.googleapis.com";return E+"/opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets"},B}(),I}(),L.SummaryDataPoint=function(){function I(D){if(this.attributes=[],this.quantileValues=[],D){for(var B=Object.keys(D),f=0;f<B.length;++f)if(D[B[f]]!=null)this[B[f]]=D[B[f]]}}return I.prototype.attributes=SH.emptyArray,I.prototype.startTimeUnixNano=null,I.prototype.timeUnixNano=null,I.prototype.count=null,I.prototype.sum=null,I.prototype.quantileValues=SH.emptyArray,I.prototype.flags=null,I.create=function(B){return new I(B)},I.encode=function(B,f){if(!f)f=s9.create();if(B.startTimeUnixNano!=null&&Object.hasOwnProperty.call(B,"startTimeUnixNano"))f.uint32(17).fixed64(B.startTimeUnixNano);if(B.timeUnixNano!=null&&Object.hasOwnProperty.call(B,"timeUnixNano"))f.uint32(25).fixed64(B.timeUnixNano);if(B.count!=null&&Object.hasOwnProperty.call(B,"count"))f.uint32(33).fixed64(B.count);if(B.sum!=null&&Object.hasOwnProperty.call(B,"sum"))f.uint32(41).double(B.sum);if(B.quantileValues!=null&&B.quantileValues.length)for(var E=0;E<B.quantileValues.length;++E)NH.opentelemetry.proto.metrics.v1.SummaryDataPoint.ValueAtQuantile.encode(B.quantileValues[E],f.uint32(50).fork()).ldelim();if(B.attributes!=null&&B.attributes.length)for(var E=0;E<B.attributes.length;++E)NH.opentelemetry.proto.common.v1.KeyValue.encode(B.attributes[E],f.uint32(58).fork()).ldelim();if(B.flags!=null&&Object.hasOwnProperty.call(B,"flags"))f.uint32(64).uint32(B.flags);return f},I.encodeDelimited=function(B,f){return this.encode(B,f).ldelim()},I.decode=function(B,f,E){if(!(B instanceof $A))B=$A.create(B);var M=f===void 0?B.len:B.pos+f,G=new NH.opentelemetry.proto.metrics.v1.SummaryDataPoint;while(B.pos<M){var U=B.uint32();if(U===E)break;switch(U>>>3){case 7:{if(!(G.attributes&&G.attributes.length))G.attributes=[];G.attributes.push(NH.opentelemetry.proto.common.v1.KeyValue.decode(B,B.uint32()));break}case 2:{G.startTimeUnixNano=B.fixed64();break}case 3:{G.timeUnixNano=B.fixed64();break}case 4:{G.count=B.fixed64();break}case 5:{G.sum=B.double();break}case 6:{if(!(G.quantileValues&&G.quantileValues.length))G.quantileValues=[];G.quantileValues.push(NH.opentelemetry.proto.metrics.v1.SummaryDataPoint.ValueAtQuantile.decode(B,B.uint32()));break}case 8:{G.flags=B.uint32();break}default:B.skipType(U&7);break}}return G},I.decodeDelimited=function(B){if(!(B instanceof $A))B=new $A(B);return this.decode(B,B.uint32())},I.verify=function(B){if(typeof B!=="object"||B===null)return"object expected";if(B.attributes!=null&&B.hasOwnProperty("attributes")){if(!Array.isArray(B.attributes))return"attributes: array expected";for(var f=0;f<B.attributes.length;++f){var E=NH.opentelemetry.proto.common.v1.KeyValue.verify(B.attributes[f]);if(E)return"attributes."+E}}if(B.startTimeUnixNano!=null&&B.hasOwnProperty("startTimeUnixNano")){if(!SH.isInteger(B.startTimeUnixNano)&&!(B.startTimeUnixNano&&SH.isInteger(B.startTimeUnixNano.low)&&SH.isInteger(B.startTimeUnixNano.high)))return"startTimeUnixNano: integer|Long expected"}if(B.timeUnixNano!=null&&B.hasOwnProperty("timeUnixNano")){if(!SH.isInteger(B.timeUnixNano)&&!(B.timeUnixNano&&SH.isInteger(B.timeUnixNano.low)&&SH.isInteger(B.timeUnixNano.high)))return"timeUnixNano: integer|Long expected"}if(B.count!=null&&B.hasOwnProperty("count")){if(!SH.isInteger(B.count)&&!(B.count&&SH.isInteger(B.count.low)&&SH.isInteger(B.count.high)))return"count: integer|Long expected"}if(B.sum!=null&&B.hasOwnProperty("sum")){if(typeof B.sum!=="number")return"sum: number expected"}if(B.quantileValues!=null&&B.hasOwnProperty("quantileValues")){if(!Array.isArray(B.quantileValues))return"quantileValues: array expected";for(var f=0;f<B.quantileValues.length;++f){var E=NH.opentelemetry.proto.metrics.v1.SummaryDataPoint.ValueAtQuantile.verify(B.quantileValues[f]);if(E)return"quantileValues."+E}}if(B.flags!=null&&B.hasOwnProperty("flags")){if(!SH.isInteger(B.flags))return"flags: integer expected"}return null},I.fromObject=function(B){if(B instanceof NH.opentelemetry.proto.metrics.v1.SummaryDataPoint)return B;var f=new NH.opentelemetry.proto.metrics.v1.SummaryDataPoint;if(B.attributes){if(!Array.isArray(B.attributes))throw TypeError(".opentelemetry.proto.metrics.v1.SummaryDataPoint.attributes: array expected");f.attributes=[];for(var E=0;E<B.attributes.length;++E){if(typeof B.attributes[E]!=="object")throw TypeError(".opentelemetry.proto.metrics.v1.SummaryDataPoint.attributes: object expected");f.attributes[E]=NH.opentelemetry.proto.common.v1.KeyValue.fromObject(B.attributes[E])}}if(B.startTimeUnixNano!=null){if(SH.Long)(f.startTimeUnixNano=SH.Long.fromValue(B.startTimeUnixNano)).unsigned=!1;else if(typeof B.startTimeUnixNano==="string")f.startTimeUnixNano=parseInt(B.startTimeUnixNano,10);else if(typeof B.startTimeUnixNano==="number")f.startTimeUnixNano=B.startTimeUnixNano;else if(typeof B.startTimeUnixNano==="object")f.startTimeUnixNano=new SH.LongBits(B.startTimeUnixNano.low>>>0,B.startTimeUnixNano.high>>>0).toNumber()}if(B.timeUnixNano!=null){if(SH.Long)(f.timeUnixNano=SH.Long.fromValue(B.timeUnixNano)).unsigned=!1;else if(typeof B.timeUnixNano==="string")f.timeUnixNano=parseInt(B.timeUnixNano,10);else if(typeof B.timeUnixNano==="number")f.timeUnixNano=B.timeUnixNano;else if(typeof B.timeUnixNano==="object")f.timeUnixNano=new SH.LongBits(B.timeUnixNano.low>>>0,B.timeUnixNano.high>>>0).toNumber()}if(B.count!=null){if(SH.Long)(f.count=SH.Long.fromValue(B.count)).unsigned=!1;else if(typeof B.count==="string")f.count=parseInt(B.count,10);else if(typeof B.count==="number")f.count=B.count;else if(typeof B.count==="object")f.count=new SH.LongBits(B.count.low>>>0,B.count.high>>>0).toNumber()}if(B.sum!=null)f.sum=Number(B.sum);if(B.quantileValues){if(!Array.isArray(B.quantileValues))throw TypeError(".opentelemetry.proto.metrics.v1.SummaryDataPoint.quantileValues: array expected");f.quantileValues=[];for(var E=0;E<B.quantileValues.length;++E){if(typeof B.quantileValues[E]!=="object")throw TypeError(".opentelemetry.proto.metrics.v1.SummaryDataPoint.quantileValues: object expected");f.quantileValues[E]=NH.opentelemetry.proto.metrics.v1.SummaryDataPoint.ValueAtQuantile.fromObject(B.quantileValues[E])}}if(B.flags!=null)f.flags=B.flags>>>0;return f},I.toObject=function(B,f){if(!f)f={};var E={};if(f.arrays||f.defaults)E.quantileValues=[],E.attributes=[];if(f.defaults){if(SH.Long){var M=new SH.Long(0,0,!1);E.startTimeUnixNano=f.longs===String?M.toString():f.longs===Number?M.toNumber():M}else E.startTimeUnixNano=f.longs===String?"0":0;if(SH.Long){var M=new SH.Long(0,0,!1);E.timeUnixNano=f.longs===String?M.toString():f.longs===Number?M.toNumber():M}else E.timeUnixNano=f.longs===String?"0":0;if(SH.Long){var M=new SH.Long(0,0,!1);E.count=f.longs===String?M.toString():f.longs===Number?M.toNumber():M}else E.count=f.longs===String?"0":0;E.sum=0,E.flags=0}if(B.startTimeUnixNano!=null&&B.hasOwnProperty("startTimeUnixNano"))if(typeof B.startTimeUnixNano==="number")E.startTimeUnixNano=f.longs===String?String(B.startTimeUnixNano):B.startTimeUnixNano;else E.startTimeUnixNano=f.longs===String?SH.Long.prototype.toString.call(B.startTimeUnixNano):f.longs===Number?new SH.LongBits(B.startTimeUnixNano.low>>>0,B.startTimeUnixNano.high>>>0).toNumber():B.startTimeUnixNano;if(B.timeUnixNano!=null&&B.hasOwnProperty("timeUnixNano"))if(typeof B.timeUnixNano==="number")E.timeUnixNano=f.longs===String?String(B.timeUnixNano):B.timeUnixNano;else E.timeUnixNano=f.longs===String?SH.Long.prototype.toString.call(B.timeUnixNano):f.longs===Number?new SH.LongBits(B.timeUnixNano.low>>>0,B.timeUnixNano.high>>>0).toNumber():B.timeUnixNano;if(B.count!=null&&B.hasOwnProperty("count"))if(typeof B.count==="number")E.count=f.longs===String?String(B.count):B.count;else E.count=f.longs===String?SH.Long.prototype.toString.call(B.count):f.longs===Number?new SH.LongBits(B.count.low>>>0,B.count.high>>>0).toNumber():B.count;if(B.sum!=null&&B.hasOwnProperty("sum"))E.sum=f.json&&!isFinite(B.sum)?String(B.sum):B.sum;if(B.quantileValues&&B.quantileValues.length){E.quantileValues=[];for(var G=0;G<B.quantileValues.length;++G)E.quantileValues[G]=NH.opentelemetry.proto.metrics.v1.SummaryDataPoint.ValueAtQuantile.toObject(B.quantileValues[G],f)}if(B.attributes&&B.attributes.length){E.attributes=[];for(var G=0;G<B.attributes.length;++G)E.attributes[G]=NH.opentelemetry.proto.common.v1.KeyValue.toObject(B.attributes[G],f)}if(B.flags!=null&&B.hasOwnProperty("flags"))E.flags=B.flags;return E},I.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},I.getTypeUrl=function(B){if(B===void 0)B="type.googleapis.com";return B+"/opentelemetry.proto.metrics.v1.SummaryDataPoint"},I.ValueAtQuantile=function(){function D(B){if(B){for(var f=Object.keys(B),E=0;E<f.length;++E)if(B[f[E]]!=null)this[f[E]]=B[f[E]]}}return D.prototype.quantile=null,D.prototype.value=null,D.create=function(f){return new D(f)},D.encode=function(f,E){if(!E)E=s9.create();if(f.quantile!=null&&Object.hasOwnProperty.call(f,"quantile"))E.uint32(9).double(f.quantile);if(f.value!=null&&Object.hasOwnProperty.call(f,"value"))E.uint32(17).double(f.value);return E},D.encodeDelimited=function(f,E){return this.encode(f,E).ldelim()},D.decode=function(f,E,M){if(!(f instanceof $A))f=$A.create(f);var G=E===void 0?f.len:f.pos+E,U=new NH.opentelemetry.proto.metrics.v1.SummaryDataPoint.ValueAtQuantile;while(f.pos<G){var X=f.uint32();if(X===M)break;switch(X>>>3){case 1:{U.quantile=f.double();break}case 2:{U.value=f.double();break}default:f.skipType(X&7);break}}return U},D.decodeDelimited=function(f){if(!(f instanceof $A))f=new $A(f);return this.decode(f,f.uint32())},D.verify=function(f){if(typeof f!=="object"||f===null)return"object expected";if(f.quantile!=null&&f.hasOwnProperty("quantile")){if(typeof f.quantile!=="number")return"quantile: number expected"}if(f.value!=null&&f.hasOwnProperty("value")){if(typeof f.value!=="number")return"value: number expected"}return null},D.fromObject=function(f){if(f instanceof NH.opentelemetry.proto.metrics.v1.SummaryDataPoint.ValueAtQuantile)return f;var E=new NH.opentelemetry.proto.metrics.v1.SummaryDataPoint.ValueAtQuantile;if(f.quantile!=null)E.quantile=Number(f.quantile);if(f.value!=null)E.value=Number(f.value);return E},D.toObject=function(f,E){if(!E)E={};var M={};if(E.defaults)M.quantile=0,M.value=0;if(f.quantile!=null&&f.hasOwnProperty("quantile"))M.quantile=E.json&&!isFinite(f.quantile)?String(f.quantile):f.quantile;if(f.value!=null&&f.hasOwnProperty("value"))M.value=E.json&&!isFinite(f.value)?String(f.value):f.value;return M},D.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},D.getTypeUrl=function(f){if(f===void 0)f="type.googleapis.com";return f+"/opentelemetry.proto.metrics.v1.SummaryDataPoint.ValueAtQuantile"},D}(),I}(),L.Exemplar=function(){function I(B){if(this.filteredAttributes=[],B){for(var f=Object.keys(B),E=0;E<f.length;++E)if(B[f[E]]!=null)this[f[E]]=B[f[E]]}}I.prototype.filteredAttributes=SH.emptyArray,I.prototype.timeUnixNano=null,I.prototype.asDouble=null,I.prototype.asInt=null,I.prototype.spanId=null,I.prototype.traceId=null;var D;return Object.defineProperty(I.prototype,"value",{get:SH.oneOfGetter(D=["asDouble","asInt"]),set:SH.oneOfSetter(D)}),I.create=function(f){return new I(f)},I.encode=function(f,E){if(!E)E=s9.create();if(f.timeUnixNano!=null&&Object.hasOwnProperty.call(f,"timeUnixNano"))E.uint32(17).fixed64(f.timeUnixNano);if(f.asDouble!=null&&Object.hasOwnProperty.call(f,"asDouble"))E.uint32(25).double(f.asDouble);if(f.spanId!=null&&Object.hasOwnProperty.call(f,"spanId"))E.uint32(34).bytes(f.spanId);if(f.traceId!=null&&Object.hasOwnProperty.call(f,"traceId"))E.uint32(42).bytes(f.traceId);if(f.asInt!=null&&Object.hasOwnProperty.call(f,"asInt"))E.uint32(49).sfixed64(f.asInt);if(f.filteredAttributes!=null&&f.filteredAttributes.length)for(var M=0;M<f.filteredAttributes.length;++M)NH.opentelemetry.proto.common.v1.KeyValue.encode(f.filteredAttributes[M],E.uint32(58).fork()).ldelim();return E},I.encodeDelimited=function(f,E){return this.encode(f,E).ldelim()},I.decode=function(f,E,M){if(!(f instanceof $A))f=$A.create(f);var G=E===void 0?f.len:f.pos+E,U=new NH.opentelemetry.proto.metrics.v1.Exemplar;while(f.pos<G){var X=f.uint32();if(X===M)break;switch(X>>>3){case 7:{if(!(U.filteredAttributes&&U.filteredAttributes.length))U.filteredAttributes=[];U.filteredAttributes.push(NH.opentelemetry.proto.common.v1.KeyValue.decode(f,f.uint32()));break}case 2:{U.timeUnixNano=f.fixed64();break}case 3:{U.asDouble=f.double();break}case 6:{U.asInt=f.sfixed64();break}case 4:{U.spanId=f.bytes();break}case 5:{U.traceId=f.bytes();break}default:f.skipType(X&7);break}}return U},I.decodeDelimited=function(f){if(!(f instanceof $A))f=new $A(f);return this.decode(f,f.uint32())},I.verify=function(f){if(typeof f!=="object"||f===null)return"object expected";var E={};if(f.filteredAttributes!=null&&f.hasOwnProperty("filteredAttributes")){if(!Array.isArray(f.filteredAttributes))return"filteredAttributes: array expected";for(var M=0;M<f.filteredAttributes.length;++M){var G=NH.opentelemetry.proto.common.v1.KeyValue.verify(f.filteredAttributes[M]);if(G)return"filteredAttributes."+G}}if(f.timeUnixNano!=null&&f.hasOwnProperty("timeUnixNano")){if(!SH.isInteger(f.timeUnixNano)&&!(f.timeUnixNano&&SH.isInteger(f.timeUnixNano.low)&&SH.isInteger(f.timeUnixNano.high)))return"timeUnixNano: integer|Long expected"}if(f.asDouble!=null&&f.hasOwnProperty("asDouble")){if(E.value=1,typeof f.asDouble!=="number")return"asDouble: number expected"}if(f.asInt!=null&&f.hasOwnProperty("asInt")){if(E.value===1)return"value: multiple values";if(E.value=1,!SH.isInteger(f.asInt)&&!(f.asInt&&SH.isInteger(f.asInt.low)&&SH.isInteger(f.asInt.high)))return"asInt: integer|Long expected"}if(f.spanId!=null&&f.hasOwnProperty("spanId")){if(!(f.spanId&&typeof f.spanId.length==="number"||SH.isString(f.spanId)))return"spanId: buffer expected"}if(f.traceId!=null&&f.hasOwnProperty("traceId")){if(!(f.traceId&&typeof f.traceId.length==="number"||SH.isString(f.traceId)))return"traceId: buffer expected"}return null},I.fromObject=function(f){if(f instanceof NH.opentelemetry.proto.metrics.v1.Exemplar)return f;var E=new NH.opentelemetry.proto.metrics.v1.Exemplar;if(f.filteredAttributes){if(!Array.isArray(f.filteredAttributes))throw TypeError(".opentelemetry.proto.metrics.v1.Exemplar.filteredAttributes: array expected");E.filteredAttributes=[];for(var M=0;M<f.filteredAttributes.length;++M){if(typeof f.filteredAttributes[M]!=="object")throw TypeError(".opentelemetry.proto.metrics.v1.Exemplar.filteredAttributes: object expected");E.filteredAttributes[M]=NH.opentelemetry.proto.common.v1.KeyValue.fromObject(f.filteredAttributes[M])}}if(f.timeUnixNano!=null){if(SH.Long)(E.timeUnixNano=SH.Long.fromValue(f.timeUnixNano)).unsigned=!1;else if(typeof f.timeUnixNano==="string")E.timeUnixNano=parseInt(f.timeUnixNano,10);else if(typeof f.timeUnixNano==="number")E.timeUnixNano=f.timeUnixNano;else if(typeof f.timeUnixNano==="object")E.timeUnixNano=new SH.LongBits(f.timeUnixNano.low>>>0,f.timeUnixNano.high>>>0).toNumber()}if(f.asDouble!=null)E.asDouble=Number(f.asDouble);if(f.asInt!=null){if(SH.Long)(E.asInt=SH.Long.fromValue(f.asInt)).unsigned=!1;else if(typeof f.asInt==="string")E.asInt=parseInt(f.asInt,10);else if(typeof f.asInt==="number")E.asInt=f.asInt;else if(typeof f.asInt==="object")E.asInt=new SH.LongBits(f.asInt.low>>>0,f.asInt.high>>>0).toNumber()}if(f.spanId!=null){if(typeof f.spanId==="string")SH.base64.decode(f.spanId,E.spanId=SH.newBuffer(SH.base64.length(f.spanId)),0);else if(f.spanId.length>=0)E.spanId=f.spanId}if(f.traceId!=null){if(typeof f.traceId==="string")SH.base64.decode(f.traceId,E.traceId=SH.newBuffer(SH.base64.length(f.traceId)),0);else if(f.traceId.length>=0)E.traceId=f.traceId}return E},I.toObject=function(f,E){if(!E)E={};var M={};if(E.arrays||E.defaults)M.filteredAttributes=[];if(E.defaults){if(SH.Long){var G=new SH.Long(0,0,!1);M.timeUnixNano=E.longs===String?G.toString():E.longs===Number?G.toNumber():G}else M.timeUnixNano=E.longs===String?"0":0;if(E.bytes===String)M.spanId="";else if(M.spanId=[],E.bytes!==Array)M.spanId=SH.newBuffer(M.spanId);if(E.bytes===String)M.traceId="";else if(M.traceId=[],E.bytes!==Array)M.traceId=SH.newBuffer(M.traceId)}if(f.timeUnixNano!=null&&f.hasOwnProperty("timeUnixNano"))if(typeof f.timeUnixNano==="number")M.timeUnixNano=E.longs===String?String(f.timeUnixNano):f.timeUnixNano;else M.timeUnixNano=E.longs===String?SH.Long.prototype.toString.call(f.timeUnixNano):E.longs===Number?new SH.LongBits(f.timeUnixNano.low>>>0,f.timeUnixNano.high>>>0).toNumber():f.timeUnixNano;if(f.asDouble!=null&&f.hasOwnProperty("asDouble")){if(M.asDouble=E.json&&!isFinite(f.asDouble)?String(f.asDouble):f.asDouble,E.oneofs)M.value="asDouble"}if(f.spanId!=null&&f.hasOwnProperty("spanId"))M.spanId=E.bytes===String?SH.base64.encode(f.spanId,0,f.spanId.length):E.bytes===Array?Array.prototype.slice.call(f.spanId):f.spanId;if(f.traceId!=null&&f.hasOwnProperty("traceId"))M.traceId=E.bytes===String?SH.base64.encode(f.traceId,0,f.traceId.length):E.bytes===Array?Array.prototype.slice.call(f.traceId):f.traceId;if(f.asInt!=null&&f.hasOwnProperty("asInt")){if(typeof f.asInt==="number")M.asInt=E.longs===String?String(f.asInt):f.asInt;else M.asInt=E.longs===String?SH.Long.prototype.toString.call(f.asInt):E.longs===Number?new SH.LongBits(f.asInt.low>>>0,f.asInt.high>>>0).toNumber():f.asInt;if(E.oneofs)M.value="asInt"}if(f.filteredAttributes&&f.filteredAttributes.length){M.filteredAttributes=[];for(var U=0;U<f.filteredAttributes.length;++U)M.filteredAttributes[U]=NH.opentelemetry.proto.common.v1.KeyValue.toObject(f.filteredAttributes[U],E)}return M},I.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},I.getTypeUrl=function(f){if(f===void 0)f="type.googleapis.com";return f+"/opentelemetry.proto.metrics.v1.Exemplar"},I}(),L}(),A}(),$.logs=function(){var A={};return A.v1=function(){var L={};return L.LogsData=function(){function I(D){if(this.resourceLogs=[],D){for(var B=Object.keys(D),f=0;f<B.length;++f)if(D[B[f]]!=null)this[B[f]]=D[B[f]]}}return I.prototype.resourceLogs=SH.emptyArray,I.create=function(B){return new I(B)},I.encode=function(B,f){if(!f)f=s9.create();if(B.resourceLogs!=null&&B.resourceLogs.length)for(var E=0;E<B.resourceLogs.length;++E)NH.opentelemetry.proto.logs.v1.ResourceLogs.encode(B.resourceLogs[E],f.uint32(10).fork()).ldelim();return f},I.encodeDelimited=function(B,f){return this.encode(B,f).ldelim()},I.decode=function(B,f,E){if(!(B instanceof $A))B=$A.create(B);var M=f===void 0?B.len:B.pos+f,G=new NH.opentelemetry.proto.logs.v1.LogsData;while(B.pos<M){var U=B.uint32();if(U===E)break;switch(U>>>3){case 1:{if(!(G.resourceLogs&&G.resourceLogs.length))G.resourceLogs=[];G.resourceLogs.push(NH.opentelemetry.proto.logs.v1.ResourceLogs.decode(B,B.uint32()));break}default:B.skipType(U&7);break}}return G},I.decodeDelimited=function(B){if(!(B instanceof $A))B=new $A(B);return this.decode(B,B.uint32())},I.verify=function(B){if(typeof B!=="object"||B===null)return"object expected";if(B.resourceLogs!=null&&B.hasOwnProperty("resourceLogs")){if(!Array.isArray(B.resourceLogs))return"resourceLogs: array expected";for(var f=0;f<B.resourceLogs.length;++f){var E=NH.opentelemetry.proto.logs.v1.ResourceLogs.verify(B.resourceLogs[f]);if(E)return"resourceLogs."+E}}return null},I.fromObject=function(B){if(B instanceof NH.opentelemetry.proto.logs.v1.LogsData)return B;var f=new NH.opentelemetry.proto.logs.v1.LogsData;if(B.resourceLogs){if(!Array.isArray(B.resourceLogs))throw TypeError(".opentelemetry.proto.logs.v1.LogsData.resourceLogs: array expected");f.resourceLogs=[];for(var E=0;E<B.resourceLogs.length;++E){if(typeof B.resourceLogs[E]!=="object")throw TypeError(".opentelemetry.proto.logs.v1.LogsData.resourceLogs: object expected");f.resourceLogs[E]=NH.opentelemetry.proto.logs.v1.ResourceLogs.fromObject(B.resourceLogs[E])}}return f},I.toObject=function(B,f){if(!f)f={};var E={};if(f.arrays||f.defaults)E.resourceLogs=[];if(B.resourceLogs&&B.resourceLogs.length){E.resourceLogs=[];for(var M=0;M<B.resourceLogs.length;++M)E.resourceLogs[M]=NH.opentelemetry.proto.logs.v1.ResourceLogs.toObject(B.resourceLogs[M],f)}return E},I.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},I.getTypeUrl=function(B){if(B===void 0)B="type.googleapis.com";return B+"/opentelemetry.proto.logs.v1.LogsData"},I}(),L.ResourceLogs=function(){function I(D){if(this.scopeLogs=[],D){for(var B=Object.keys(D),f=0;f<B.length;++f)if(D[B[f]]!=null)this[B[f]]=D[B[f]]}}return I.prototype.resource=null,I.prototype.scopeLogs=SH.emptyArray,I.prototype.schemaUrl=null,I.create=function(B){return new I(B)},I.encode=function(B,f){if(!f)f=s9.create();if(B.resource!=null&&Object.hasOwnProperty.call(B,"resource"))NH.opentelemetry.proto.resource.v1.Resource.encode(B.resource,f.uint32(10).fork()).ldelim();if(B.scopeLogs!=null&&B.scopeLogs.length)for(var E=0;E<B.scopeLogs.length;++E)NH.opentelemetry.proto.logs.v1.ScopeLogs.encode(B.scopeLogs[E],f.uint32(18).fork()).ldelim();if(B.schemaUrl!=null&&Object.hasOwnProperty.call(B,"schemaUrl"))f.uint32(26).string(B.schemaUrl);return f},I.encodeDelimited=function(B,f){return this.encode(B,f).ldelim()},I.decode=function(B,f,E){if(!(B instanceof $A))B=$A.create(B);var M=f===void 0?B.len:B.pos+f,G=new NH.opentelemetry.proto.logs.v1.ResourceLogs;while(B.pos<M){var U=B.uint32();if(U===E)break;switch(U>>>3){case 1:{G.resource=NH.opentelemetry.proto.resource.v1.Resource.decode(B,B.uint32());break}case 2:{if(!(G.scopeLogs&&G.scopeLogs.length))G.scopeLogs=[];G.scopeLogs.push(NH.opentelemetry.proto.logs.v1.ScopeLogs.decode(B,B.uint32()));break}case 3:{G.schemaUrl=B.string();break}default:B.skipType(U&7);break}}return G},I.decodeDelimited=function(B){if(!(B instanceof $A))B=new $A(B);return this.decode(B,B.uint32())},I.verify=function(B){if(typeof B!=="object"||B===null)return"object expected";if(B.resource!=null&&B.hasOwnProperty("resource")){var f=NH.opentelemetry.proto.resource.v1.Resource.verify(B.resource);if(f)return"resource."+f}if(B.scopeLogs!=null&&B.hasOwnProperty("scopeLogs")){if(!Array.isArray(B.scopeLogs))return"scopeLogs: array expected";for(var E=0;E<B.scopeLogs.length;++E){var f=NH.opentelemetry.proto.logs.v1.ScopeLogs.verify(B.scopeLogs[E]);if(f)return"scopeLogs."+f}}if(B.schemaUrl!=null&&B.hasOwnProperty("schemaUrl")){if(!SH.isString(B.schemaUrl))return"schemaUrl: string expected"}return null},I.fromObject=function(B){if(B instanceof NH.opentelemetry.proto.logs.v1.ResourceLogs)return B;var f=new NH.opentelemetry.proto.logs.v1.ResourceLogs;if(B.resource!=null){if(typeof B.resource!=="object")throw TypeError(".opentelemetry.proto.logs.v1.ResourceLogs.resource: object expected");f.resource=NH.opentelemetry.proto.resource.v1.Resource.fromObject(B.resource)}if(B.scopeLogs){if(!Array.isArray(B.scopeLogs))throw TypeError(".opentelemetry.proto.logs.v1.ResourceLogs.scopeLogs: array expected");f.scopeLogs=[];for(var E=0;E<B.scopeLogs.length;++E){if(typeof B.scopeLogs[E]!=="object")throw TypeError(".opentelemetry.proto.logs.v1.ResourceLogs.scopeLogs: object expected");f.scopeLogs[E]=NH.opentelemetry.proto.logs.v1.ScopeLogs.fromObject(B.scopeLogs[E])}}if(B.schemaUrl!=null)f.schemaUrl=String(B.schemaUrl);return f},I.toObject=function(B,f){if(!f)f={};var E={};if(f.arrays||f.defaults)E.scopeLogs=[];if(f.defaults)E.resource=null,E.schemaUrl="";if(B.resource!=null&&B.hasOwnProperty("resource"))E.resource=NH.opentelemetry.proto.resource.v1.Resource.toObject(B.resource,f);if(B.scopeLogs&&B.scopeLogs.length){E.scopeLogs=[];for(var M=0;M<B.scopeLogs.length;++M)E.scopeLogs[M]=NH.opentelemetry.proto.logs.v1.ScopeLogs.toObject(B.scopeLogs[M],f)}if(B.schemaUrl!=null&&B.hasOwnProperty("schemaUrl"))E.schemaUrl=B.schemaUrl;return E},I.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},I.getTypeUrl=function(B){if(B===void 0)B="type.googleapis.com";return B+"/opentelemetry.proto.logs.v1.ResourceLogs"},I}(),L.ScopeLogs=function(){function I(D){if(this.logRecords=[],D){for(var B=Object.keys(D),f=0;f<B.length;++f)if(D[B[f]]!=null)this[B[f]]=D[B[f]]}}return I.prototype.scope=null,I.prototype.logRecords=SH.emptyArray,I.prototype.schemaUrl=null,I.create=function(B){return new I(B)},I.encode=function(B,f){if(!f)f=s9.create();if(B.scope!=null&&Object.hasOwnProperty.call(B,"scope"))NH.opentelemetry.proto.common.v1.InstrumentationScope.encode(B.scope,f.uint32(10).fork()).ldelim();if(B.logRecords!=null&&B.logRecords.length)for(var E=0;E<B.logRecords.length;++E)NH.opentelemetry.proto.logs.v1.LogRecord.encode(B.logRecords[E],f.uint32(18).fork()).ldelim();if(B.schemaUrl!=null&&Object.hasOwnProperty.call(B,"schemaUrl"))f.uint32(26).string(B.schemaUrl);return f},I.encodeDelimited=function(B,f){return this.encode(B,f).ldelim()},I.decode=function(B,f,E){if(!(B instanceof $A))B=$A.create(B);var M=f===void 0?B.len:B.pos+f,G=new NH.opentelemetry.proto.logs.v1.ScopeLogs;while(B.pos<M){var U=B.uint32();if(U===E)break;switch(U>>>3){case 1:{G.scope=NH.opentelemetry.proto.common.v1.InstrumentationScope.decode(B,B.uint32());break}case 2:{if(!(G.logRecords&&G.logRecords.length))G.logRecords=[];G.logRecords.push(NH.opentelemetry.proto.logs.v1.LogRecord.decode(B,B.uint32()));break}case 3:{G.schemaUrl=B.string();break}default:B.skipType(U&7);break}}return G},I.decodeDelimited=function(B){if(!(B instanceof $A))B=new $A(B);return this.decode(B,B.uint32())},I.verify=function(B){if(typeof B!=="object"||B===null)return"object expected";if(B.scope!=null&&B.hasOwnProperty("scope")){var f=NH.opentelemetry.proto.common.v1.InstrumentationScope.verify(B.scope);if(f)return"scope."+f}if(B.logRecords!=null&&B.hasOwnProperty("logRecords")){if(!Array.isArray(B.logRecords))return"logRecords: array expected";for(var E=0;E<B.logRecords.length;++E){var f=NH.opentelemetry.proto.logs.v1.LogRecord.verify(B.logRecords[E]);if(f)return"logRecords."+f}}if(B.schemaUrl!=null&&B.hasOwnProperty("schemaUrl")){if(!SH.isString(B.schemaUrl))return"schemaUrl: string expected"}return null},I.fromObject=function(B){if(B instanceof NH.opentelemetry.proto.logs.v1.ScopeLogs)return B;var f=new NH.opentelemetry.proto.logs.v1.ScopeLogs;if(B.scope!=null){if(typeof B.scope!=="object")throw TypeError(".opentelemetry.proto.logs.v1.ScopeLogs.scope: object expected");f.scope=NH.opentelemetry.proto.common.v1.InstrumentationScope.fromObject(B.scope)}if(B.logRecords){if(!Array.isArray(B.logRecords))throw TypeError(".opentelemetry.proto.logs.v1.ScopeLogs.logRecords: array expected");f.logRecords=[];for(var E=0;E<B.logRecords.length;++E){if(typeof B.logRecords[E]!=="object")throw TypeError(".opentelemetry.proto.logs.v1.ScopeLogs.logRecords: object expected");f.logRecords[E]=NH.opentelemetry.proto.logs.v1.LogRecord.fromObject(B.logRecords[E])}}if(B.schemaUrl!=null)f.schemaUrl=String(B.schemaUrl);return f},I.toObject=function(B,f){if(!f)f={};var E={};if(f.arrays||f.defaults)E.logRecords=[];if(f.defaults)E.scope=null,E.schemaUrl="";if(B.scope!=null&&B.hasOwnProperty("scope"))E.scope=NH.opentelemetry.proto.common.v1.InstrumentationScope.toObject(B.scope,f);if(B.logRecords&&B.logRecords.length){E.logRecords=[];for(var M=0;M<B.logRecords.length;++M)E.logRecords[M]=NH.opentelemetry.proto.logs.v1.LogRecord.toObject(B.logRecords[M],f)}if(B.schemaUrl!=null&&B.hasOwnProperty("schemaUrl"))E.schemaUrl=B.schemaUrl;return E},I.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},I.getTypeUrl=function(B){if(B===void 0)B="type.googleapis.com";return B+"/opentelemetry.proto.logs.v1.ScopeLogs"},I}(),L.SeverityNumber=function(){var I={},D=Object.create(I);return D[I[0]="SEVERITY_NUMBER_UNSPECIFIED"]=0,D[I[1]="SEVERITY_NUMBER_TRACE"]=1,D[I[2]="SEVERITY_NUMBER_TRACE2"]=2,D[I[3]="SEVERITY_NUMBER_TRACE3"]=3,D[I[4]="SEVERITY_NUMBER_TRACE4"]=4,D[I[5]="SEVERITY_NUMBER_DEBUG"]=5,D[I[6]="SEVERITY_NUMBER_DEBUG2"]=6,D[I[7]="SEVERITY_NUMBER_DEBUG3"]=7,D[I[8]="SEVERITY_NUMBER_DEBUG4"]=8,D[I[9]="SEVERITY_NUMBER_INFO"]=9,D[I[10]="SEVERITY_NUMBER_INFO2"]=10,D[I[11]="SEVERITY_NUMBER_INFO3"]=11,D[I[12]="SEVERITY_NUMBER_INFO4"]=12,D[I[13]="SEVERITY_NUMBER_WARN"]=13,D[I[14]="SEVERITY_NUMBER_WARN2"]=14,D[I[15]="SEVERITY_NUMBER_WARN3"]=15,D[I[16]="SEVERITY_NUMBER_WARN4"]=16,D[I[17]="SEVERITY_NUMBER_ERROR"]=17,D[I[18]="SEVERITY_NUMBER_ERROR2"]=18,D[I[19]="SEVERITY_NUMBER_ERROR3"]=19,D[I[20]="SEVERITY_NUMBER_ERROR4"]=20,D[I[21]="SEVERITY_NUMBER_FATAL"]=21,D[I[22]="SEVERITY_NUMBER_FATAL2"]=22,D[I[23]="SEVERITY_NUMBER_FATAL3"]=23,D[I[24]="SEVERITY_NUMBER_FATAL4"]=24,D}(),L.LogRecordFlags=function(){var I={},D=Object.create(I);return D[I[0]="LOG_RECORD_FLAGS_DO_NOT_USE"]=0,D[I[255]="LOG_RECORD_FLAGS_TRACE_FLAGS_MASK"]=255,D}(),L.LogRecord=function(){function I(D){if(this.attributes=[],D){for(var B=Object.keys(D),f=0;f<B.length;++f)if(D[B[f]]!=null)this[B[f]]=D[B[f]]}}return I.prototype.timeUnixNano=null,I.prototype.observedTimeUnixNano=null,I.prototype.severityNumber=null,I.prototype.severityText=null,I.prototype.body=null,I.prototype.attributes=SH.emptyArray,I.prototype.droppedAttributesCount=null,I.prototype.flags=null,I.prototype.traceId=null,I.prototype.spanId=null,I.prototype.eventName=null,I.create=function(B){return new I(B)},I.encode=function(B,f){if(!f)f=s9.create();if(B.timeUnixNano!=null&&Object.hasOwnProperty.call(B,"timeUnixNano"))f.uint32(9).fixed64(B.timeUnixNano);if(B.severityNumber!=null&&Object.hasOwnProperty.call(B,"severityNumber"))f.uint32(16).int32(B.severityNumber);if(B.severityText!=null&&Object.hasOwnProperty.call(B,"severityText"))f.uint32(26).string(B.severityText);if(B.body!=null&&Object.hasOwnProperty.call(B,"body"))NH.opentelemetry.proto.common.v1.AnyValue.encode(B.body,f.uint32(42).fork()).ldelim();if(B.attributes!=null&&B.attributes.length)for(var E=0;E<B.attributes.length;++E)NH.opentelemetry.proto.common.v1.KeyValue.encode(B.attributes[E],f.uint32(50).fork()).ldelim();if(B.droppedAttributesCount!=null&&Object.hasOwnProperty.call(B,"droppedAttributesCount"))f.uint32(56).uint32(B.droppedAttributesCount);if(B.flags!=null&&Object.hasOwnProperty.call(B,"flags"))f.uint32(69).fixed32(B.flags);if(B.traceId!=null&&Object.hasOwnProperty.call(B,"traceId"))f.uint32(74).bytes(B.traceId);if(B.spanId!=null&&Object.hasOwnProperty.call(B,"spanId"))f.uint32(82).bytes(B.spanId);if(B.observedTimeUnixNano!=null&&Object.hasOwnProperty.call(B,"observedTimeUnixNano"))f.uint32(89).fixed64(B.observedTimeUnixNano);if(B.eventName!=null&&Object.hasOwnProperty.call(B,"eventName"))f.uint32(98).string(B.eventName);return f},I.encodeDelimited=function(B,f){return this.encode(B,f).ldelim()},I.decode=function(B,f,E){if(!(B instanceof $A))B=$A.create(B);var M=f===void 0?B.len:B.pos+f,G=new NH.opentelemetry.proto.logs.v1.LogRecord;while(B.pos<M){var U=B.uint32();if(U===E)break;switch(U>>>3){case 1:{G.timeUnixNano=B.fixed64();break}case 11:{G.observedTimeUnixNano=B.fixed64();break}case 2:{G.severityNumber=B.int32();break}case 3:{G.severityText=B.string();break}case 5:{G.body=NH.opentelemetry.proto.common.v1.AnyValue.decode(B,B.uint32());break}case 6:{if(!(G.attributes&&G.attributes.length))G.attributes=[];G.attributes.push(NH.opentelemetry.proto.common.v1.KeyValue.decode(B,B.uint32()));break}case 7:{G.droppedAttributesCount=B.uint32();break}case 8:{G.flags=B.fixed32();break}case 9:{G.traceId=B.bytes();break}case 10:{G.spanId=B.bytes();break}case 12:{G.eventName=B.string();break}default:B.skipType(U&7);break}}return G},I.decodeDelimited=function(B){if(!(B instanceof $A))B=new $A(B);return this.decode(B,B.uint32())},I.verify=function(B){if(typeof B!=="object"||B===null)return"object expected";if(B.timeUnixNano!=null&&B.hasOwnProperty("timeUnixNano")){if(!SH.isInteger(B.timeUnixNano)&&!(B.timeUnixNano&&SH.isInteger(B.timeUnixNano.low)&&SH.isInteger(B.timeUnixNano.high)))return"timeUnixNano: integer|Long expected"}if(B.observedTimeUnixNano!=null&&B.hasOwnProperty("observedTimeUnixNano")){if(!SH.isInteger(B.observedTimeUnixNano)&&!(B.observedTimeUnixNano&&SH.isInteger(B.observedTimeUnixNano.low)&&SH.isInteger(B.observedTimeUnixNano.high)))return"observedTimeUnixNano: integer|Long expected"}if(B.severityNumber!=null&&B.hasOwnProperty("severityNumber"))switch(B.severityNumber){default:return"severityNumber: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:break}if(B.severityText!=null&&B.hasOwnProperty("severityText")){if(!SH.isString(B.severityText))return"severityText: string expected"}if(B.body!=null&&B.hasOwnProperty("body")){var f=NH.opentelemetry.proto.common.v1.AnyValue.verify(B.body);if(f)return"body."+f}if(B.attributes!=null&&B.hasOwnProperty("attributes")){if(!Array.isArray(B.attributes))return"attributes: array expected";for(var E=0;E<B.attributes.length;++E){var f=NH.opentelemetry.proto.common.v1.KeyValue.verify(B.attributes[E]);if(f)return"attributes."+f}}if(B.droppedAttributesCount!=null&&B.hasOwnProperty("droppedAttributesCount")){if(!SH.isInteger(B.droppedAttributesCount))return"droppedAttributesCount: integer expected"}if(B.flags!=null&&B.hasOwnProperty("flags")){if(!SH.isInteger(B.flags))return"flags: integer expected"}if(B.traceId!=null&&B.hasOwnProperty("traceId")){if(!(B.traceId&&typeof B.traceId.length==="number"||SH.isString(B.traceId)))return"traceId: buffer expected"}if(B.spanId!=null&&B.hasOwnProperty("spanId")){if(!(B.spanId&&typeof B.spanId.length==="number"||SH.isString(B.spanId)))return"spanId: buffer expected"}if(B.eventName!=null&&B.hasOwnProperty("eventName")){if(!SH.isString(B.eventName))return"eventName: string expected"}return null},I.fromObject=function(B){if(B instanceof NH.opentelemetry.proto.logs.v1.LogRecord)return B;var f=new NH.opentelemetry.proto.logs.v1.LogRecord;if(B.timeUnixNano!=null){if(SH.Long)(f.timeUnixNano=SH.Long.fromValue(B.timeUnixNano)).unsigned=!1;else if(typeof B.timeUnixNano==="string")f.timeUnixNano=parseInt(B.timeUnixNano,10);else if(typeof B.timeUnixNano==="number")f.timeUnixNano=B.timeUnixNano;else if(typeof B.timeUnixNano==="object")f.timeUnixNano=new SH.LongBits(B.timeUnixNano.low>>>0,B.timeUnixNano.high>>>0).toNumber()}if(B.observedTimeUnixNano!=null){if(SH.Long)(f.observedTimeUnixNano=SH.Long.fromValue(B.observedTimeUnixNano)).unsigned=!1;else if(typeof B.observedTimeUnixNano==="string")f.observedTimeUnixNano=parseInt(B.observedTimeUnixNano,10);else if(typeof B.observedTimeUnixNano==="number")f.observedTimeUnixNano=B.observedTimeUnixNano;else if(typeof B.observedTimeUnixNano==="object")f.observedTimeUnixNano=new SH.LongBits(B.observedTimeUnixNano.low>>>0,B.observedTimeUnixNano.high>>>0).toNumber()}switch(B.severityNumber){default:if(typeof B.severityNumber==="number"){f.severityNumber=B.severityNumber;break}break;case"SEVERITY_NUMBER_UNSPECIFIED":case 0:f.severityNumber=0;break;case"SEVERITY_NUMBER_TRACE":case 1:f.severityNumber=1;break;case"SEVERITY_NUMBER_TRACE2":case 2:f.severityNumber=2;break;case"SEVERITY_NUMBER_TRACE3":case 3:f.severityNumber=3;break;case"SEVERITY_NUMBER_TRACE4":case 4:f.severityNumber=4;break;case"SEVERITY_NUMBER_DEBUG":case 5:f.severityNumber=5;break;case"SEVERITY_NUMBER_DEBUG2":case 6:f.severityNumber=6;break;case"SEVERITY_NUMBER_DEBUG3":case 7:f.severityNumber=7;break;case"SEVERITY_NUMBER_DEBUG4":case 8:f.severityNumber=8;break;case"SEVERITY_NUMBER_INFO":case 9:f.severityNumber=9;break;case"SEVERITY_NUMBER_INFO2":case 10:f.severityNumber=10;break;case"SEVERITY_NUMBER_INFO3":case 11:f.severityNumber=11;break;case"SEVERITY_NUMBER_INFO4":case 12:f.severityNumber=12;break;case"SEVERITY_NUMBER_WARN":case 13:f.severityNumber=13;break;case"SEVERITY_NUMBER_WARN2":case 14:f.severityNumber=14;break;case"SEVERITY_NUMBER_WARN3":case 15:f.severityNumber=15;break;case"SEVERITY_NUMBER_WARN4":case 16:f.severityNumber=16;break;case"SEVERITY_NUMBER_ERROR":case 17:f.severityNumber=17;break;case"SEVERITY_NUMBER_ERROR2":case 18:f.severityNumber=18;break;case"SEVERITY_NUMBER_ERROR3":case 19:f.severityNumber=19;break;case"SEVERITY_NUMBER_ERROR4":case 20:f.severityNumber=20;break;case"SEVERITY_NUMBER_FATAL":case 21:f.severityNumber=21;break;case"SEVERITY_NUMBER_FATAL2":case 22:f.severityNumber=22;break;case"SEVERITY_NUMBER_FATAL3":case 23:f.severityNumber=23;break;case"SEVERITY_NUMBER_FATAL4":case 24:f.severityNumber=24;break}if(B.severityText!=null)f.severityText=String(B.severityText);if(B.body!=null){if(typeof B.body!=="object")throw TypeError(".opentelemetry.proto.logs.v1.LogRecord.body: object expected");f.body=NH.opentelemetry.proto.common.v1.AnyValue.fromObject(B.body)}if(B.attributes){if(!Array.isArray(B.attributes))throw TypeError(".opentelemetry.proto.logs.v1.LogRecord.attributes: array expected");f.attributes=[];for(var E=0;E<B.attributes.length;++E){if(typeof B.attributes[E]!=="object")throw TypeError(".opentelemetry.proto.logs.v1.LogRecord.attributes: object expected");f.attributes[E]=NH.opentelemetry.proto.common.v1.KeyValue.fromObject(B.attributes[E])}}if(B.droppedAttributesCount!=null)f.droppedAttributesCount=B.droppedAttributesCount>>>0;if(B.flags!=null)f.flags=B.flags>>>0;if(B.traceId!=null){if(typeof B.traceId==="string")SH.base64.decode(B.traceId,f.traceId=SH.newBuffer(SH.base64.length(B.traceId)),0);else if(B.traceId.length>=0)f.traceId=B.traceId}if(B.spanId!=null){if(typeof B.spanId==="string")SH.base64.decode(B.spanId,f.spanId=SH.newBuffer(SH.base64.length(B.spanId)),0);else if(B.spanId.length>=0)f.spanId=B.spanId}if(B.eventName!=null)f.eventName=String(B.eventName);return f},I.toObject=function(B,f){if(!f)f={};var E={};if(f.arrays||f.defaults)E.attributes=[];if(f.defaults){if(SH.Long){var M=new SH.Long(0,0,!1);E.timeUnixNano=f.longs===String?M.toString():f.longs===Number?M.toNumber():M}else E.timeUnixNano=f.longs===String?"0":0;if(E.severityNumber=f.enums===String?"SEVERITY_NUMBER_UNSPECIFIED":0,E.severityText="",E.body=null,E.droppedAttributesCount=0,E.flags=0,f.bytes===String)E.traceId="";else if(E.traceId=[],f.bytes!==Array)E.traceId=SH.newBuffer(E.traceId);if(f.bytes===String)E.spanId="";else if(E.spanId=[],f.bytes!==Array)E.spanId=SH.newBuffer(E.spanId);if(SH.Long){var M=new SH.Long(0,0,!1);E.observedTimeUnixNano=f.longs===String?M.toString():f.longs===Number?M.toNumber():M}else E.observedTimeUnixNano=f.longs===String?"0":0;E.eventName=""}if(B.timeUnixNano!=null&&B.hasOwnProperty("timeUnixNano"))if(typeof B.timeUnixNano==="number")E.timeUnixNano=f.longs===String?String(B.timeUnixNano):B.timeUnixNano;else E.timeUnixNano=f.longs===String?SH.Long.prototype.toString.call(B.timeUnixNano):f.longs===Number?new SH.LongBits(B.timeUnixNano.low>>>0,B.timeUnixNano.high>>>0).toNumber():B.timeUnixNano;if(B.severityNumber!=null&&B.hasOwnProperty("severityNumber"))E.severityNumber=f.enums===String?NH.opentelemetry.proto.logs.v1.SeverityNumber[B.severityNumber]===void 0?B.severityNumber:NH.opentelemetry.proto.logs.v1.SeverityNumber[B.severityNumber]:B.severityNumber;if(B.severityText!=null&&B.hasOwnProperty("severityText"))E.severityText=B.severityText;if(B.body!=null&&B.hasOwnProperty("body"))E.body=NH.opentelemetry.proto.common.v1.AnyValue.toObject(B.body,f);if(B.attributes&&B.attributes.length){E.attributes=[];for(var G=0;G<B.attributes.length;++G)E.attributes[G]=NH.opentelemetry.proto.common.v1.KeyValue.toObject(B.attributes[G],f)}if(B.droppedAttributesCount!=null&&B.hasOwnProperty("droppedAttributesCount"))E.droppedAttributesCount=B.droppedAttributesCount;if(B.flags!=null&&B.hasOwnProperty("flags"))E.flags=B.flags;if(B.traceId!=null&&B.hasOwnProperty("traceId"))E.traceId=f.bytes===String?SH.base64.encode(B.traceId,0,B.traceId.length):f.bytes===Array?Array.prototype.slice.call(B.traceId):B.traceId;if(B.spanId!=null&&B.hasOwnProperty("spanId"))E.spanId=f.bytes===String?SH.base64.encode(B.spanId,0,B.spanId.length):f.bytes===Array?Array.prototype.slice.call(B.spanId):B.spanId;if(B.observedTimeUnixNano!=null&&B.hasOwnProperty("observedTimeUnixNano"))if(typeof B.observedTimeUnixNano==="number")E.observedTimeUnixNano=f.longs===String?String(B.observedTimeUnixNano):B.observedTimeUnixNano;else E.observedTimeUnixNano=f.longs===String?SH.Long.prototype.toString.call(B.observedTimeUnixNano):f.longs===Number?new SH.LongBits(B.observedTimeUnixNano.low>>>0,B.observedTimeUnixNano.high>>>0).toNumber():B.observedTimeUnixNano;if(B.eventName!=null&&B.hasOwnProperty("eventName"))E.eventName=B.eventName;return E},I.prototype.toJSON=function(){return this.constructor.toObject(this,A0.util.toJSONOptions)},I.getTypeUrl=function(B){if(B===void 0)B="type.googleapis.com";return B+"/opentelemetry.proto.logs.v1.LogRecord"},I}(),L}(),A}(),$}(),H}();f0D.exports=NH});var M0D=z((l7$)=>{Object.defineProperty(l7$,"__esModule",{value:!0});l7$.hexToBinary=void 0;function E0D(H){if(H>=48&&H<=57)return H-48;if(H>=97&&H<=102)return H-87;return H-55}function db9(H){let $=new Uint8Array(H.length/2),A=0;for(let L=0;L<H.length;L+=2){let I=E0D(H.charCodeAt(L)),D=E0D(H.charCodeAt(L+1));$[A++]=I<<4|D}return $}l7$.hexToBinary=db9});var i7$=z((dT)=>{Object.defineProperty(dT,"__esModule",{value:!0});dT.getOtlpEncoder=dT.encodeAsString=dT.encodeAsLongBits=dT.toLongBits=dT.hrTimeToNanos=void 0;var cb9=Jf(),pPA=M0D();function dPA(H){let $=BigInt(1e9);return BigInt(Math.trunc(H[0]))*$+BigInt(Math.trunc(H[1]))}dT.hrTimeToNanos=dPA;function U0D(H){let $=Number(BigInt.asUintN(32,H)),A=Number(BigInt.asUintN(32,H>>BigInt(32)));return{low:$,high:A}}dT.toLongBits=U0D;function cPA(H){let $=dPA(H);return U0D($)}dT.encodeAsLongBits=cPA;function X0D(H){return dPA(H).toString()}dT.encodeAsString=X0D;var lb9=typeof BigInt<"u"?X0D:cb9.hrTimeToNanoseconds;function G0D(H){return H}function J0D(H){if(H===void 0)return;return(0,pPA.hexToBinary)(H)}var ib9={encodeHrTime:cPA,encodeSpanContext:pPA.hexToBinary,encodeOptionalSpanContext:J0D};function nb9(H){if(H===void 0)return ib9;let $=H.useLongBits??!0,A=H.useHex??!1;return{encodeHrTime:$?cPA:lb9,encodeSpanContext:A?G0D:pPA.hexToBinary,encodeOptionalSpanContext:A?G0D:J0D}}dT.getOtlpEncoder=nb9});var n7$=z((cT)=>{Object.defineProperty(cT,"__esModule",{value:!0});cT.toAnyValue=cT.toKeyValue=cT.toAttributes=cT.createInstrumentationScope=cT.createResource=void 0;function rb9(H){let $={attributes:F0D(H.attributes),droppedAttributesCount:0},A=H.schemaUrl;if(A&&A!=="")$.schemaUrl=A;return $}cT.createResource=rb9;function ab9(H){return{name:H.name,version:H.version}}cT.createInstrumentationScope=ab9;function F0D(H){return Object.keys(H).map(($)=>lPA($,H[$]))}cT.toAttributes=F0D;function lPA(H,$){return{key:H,value:iPA($)}}cT.toKeyValue=lPA;function iPA(H){let $=typeof H;if($==="string")return{stringValue:H};if($==="number"){if(!Number.isInteger(H))return{doubleValue:H};return{intValue:H}}if($==="boolean")return{boolValue:H};if(H instanceof Uint8Array)return{bytesValue:H};if(Array.isArray(H))return{arrayValue:{values:H.map(iPA)}};if($==="object"&&H!=null)return{kvlistValue:{values:Object.entries(H).map(([A,L])=>lPA(A,L))}};return{}}cT.toAnyValue=iPA});var nPA=z((AWH)=>{Object.defineProperty(AWH,"__esModule",{value:!0});AWH.toLogAttributes=AWH.createExportLogsServiceRequest=void 0;var ob9=i7$(),r7$=n7$();function tb9(H,$){let A=(0,ob9.getOtlpEncoder)($);return{resourceLogs:eb9(H,A)}}AWH.createExportLogsServiceRequest=tb9;function sb9(H){let $=new Map;for(let A of H){let{resource:L,instrumentationScope:{name:I,version:D="",schemaUrl:B=""}}=A,f=$.get(L);if(!f)f=new Map,$.set(L,f);let E=`${I}@${D}:${B}`,M=f.get(E);if(!M)M=[],f.set(E,M);M.push(A)}return $}function eb9(H,$){let A=sb9(H);return Array.from(A,([L,I])=>{let D=(0,r7$.createResource)(L);return{resource:D,scopeLogs:Array.from(I,([,B])=>{return{scope:(0,r7$.createInstrumentationScope)(B[0].instrumentationScope),logRecords:B.map((f)=>Hk9(f,$)),schemaUrl:B[0].instrumentationScope.schemaUrl}}),schemaUrl:D.schemaUrl}})}function Hk9(H,$){return{timeUnixNano:$.encodeHrTime(H.hrTime),observedTimeUnixNano:$.encodeHrTime(H.hrTimeObserved),severityNumber:$k9(H.severityNumber),severityText:H.severityText,body:(0,r7$.toAnyValue)(H.body),eventName:H.eventName,attributes:K0D(H.attributes),droppedAttributesCount:H.droppedAttributesCount,flags:H.spanContext?.traceFlags,traceId:$.encodeOptionalSpanContext(H.spanContext?.traceId),spanId:$.encodeOptionalSpanContext(H.spanContext?.spanId)}}function $k9(H){return H}function K0D(H){return Object.keys(H).map(($)=>(0,r7$.toKeyValue)($,H[$]))}AWH.toLogAttributes=K0D});var W0D=z((a7$)=>{Object.defineProperty(a7$,"__esModule",{value:!0});a7$.ProtobufLogsSerializer=void 0;var Q0D=c7$(),Ak9=nPA(),Lk9=Q0D.opentelemetry.proto.collector.logs.v1.ExportLogsServiceResponse,Ik9=Q0D.opentelemetry.proto.collector.logs.v1.ExportLogsServiceRequest;a7$.ProtobufLogsSerializer={serializeRequest:(H)=>{let $=(0,Ak9.createExportLogsServiceRequest)(H);return Ik9.encode($).finish()},deserializeResponse:(H)=>{return Lk9.decode(H)}}});var V0D=z((o7$)=>{Object.defineProperty(o7$,"__esModule",{value:!0});o7$.ProtobufLogsSerializer=void 0;var Dk9=W0D();Object.defineProperty(o7$,"ProtobufLogsSerializer",{enumerable:!0,get:function(){return Dk9.ProtobufLogsSerializer}})});var P0D=z((SvH)=>{Object.defineProperty(SvH,"__esModule",{value:!0});SvH.EAggregationTemporality=void 0;var Bk9;(function(H){H[H.AGGREGATION_TEMPORALITY_UNSPECIFIED=0]="AGGREGATION_TEMPORALITY_UNSPECIFIED",H[H.AGGREGATION_TEMPORALITY_DELTA=1]="AGGREGATION_TEMPORALITY_DELTA",H[H.AGGREGATION_TEMPORALITY_CUMULATIVE=2]="AGGREGATION_TEMPORALITY_CUMULATIVE"})(Bk9=SvH.EAggregationTemporality||(SvH.EAggregationTemporality={}))});var rPA=z((sv)=>{Object.defineProperty(sv,"__esModule",{value:!0});sv.createExportMetricsServiceRequest=sv.toMetric=sv.toScopeMetrics=sv.toResourceMetrics=void 0;var _0D=hB(),LWH=Mo(),C0D=P0D(),fk9=i7$(),jvH=n7$();function w0D(H,$){let A=(0,fk9.getOtlpEncoder)($),L=(0,jvH.createResource)(H.resource);return{resource:L,schemaUrl:L.schemaUrl,scopeMetrics:Z0D(H.scopeMetrics,A)}}sv.toResourceMetrics=w0D;function Z0D(H,$){return Array.from(H.map((A)=>({scope:(0,jvH.createInstrumentationScope)(A.scope),metrics:A.metrics.map((L)=>q0D(L,$)),schemaUrl:A.scope.schemaUrl})))}sv.toScopeMetrics=Z0D;function q0D(H,$){let A={name:H.descriptor.name,description:H.descriptor.description,unit:H.descriptor.unit},L=Uk9(H.aggregationTemporality);switch(H.dataPointType){case LWH.DataPointType.SUM:A.sum={aggregationTemporality:L,isMonotonic:H.isMonotonic,dataPoints:Y0D(H,$)};break;case LWH.DataPointType.GAUGE:A.gauge={dataPoints:Y0D(H,$)};break;case LWH.DataPointType.HISTOGRAM:A.histogram={aggregationTemporality:L,dataPoints:Mk9(H,$)};break;case LWH.DataPointType.EXPONENTIAL_HISTOGRAM:A.exponentialHistogram={aggregationTemporality:L,dataPoints:Gk9(H,$)};break}return A}sv.toMetric=q0D;function Ek9(H,$,A){let L={attributes:(0,jvH.toAttributes)(H.attributes),startTimeUnixNano:A.encodeHrTime(H.startTime),timeUnixNano:A.encodeHrTime(H.endTime)};switch($){case _0D.ValueType.INT:L.asInt=H.value;break;case _0D.ValueType.DOUBLE:L.asDouble=H.value;break}return L}function Y0D(H,$){return H.dataPoints.map((A)=>{return Ek9(A,H.descriptor.valueType,$)})}function Mk9(H,$){return H.dataPoints.map((A)=>{let L=A.value;return{attributes:(0,jvH.toAttributes)(A.attributes),bucketCounts:L.buckets.counts,explicitBounds:L.buckets.boundaries,count:L.count,sum:L.sum,min:L.min,max:L.max,startTimeUnixNano:$.encodeHrTime(A.startTime),timeUnixNano:$.encodeHrTime(A.endTime)}})}function Gk9(H,$){return H.dataPoints.map((A)=>{let L=A.value;return{attributes:(0,jvH.toAttributes)(A.attributes),count:L.count,min:L.min,max:L.max,sum:L.sum,positive:{offset:L.positive.offset,bucketCounts:L.positive.bucketCounts},negative:{offset:L.negative.offset,bucketCounts:L.negative.bucketCounts},scale:L.scale,zeroCount:L.zeroCount,startTimeUnixNano:$.encodeHrTime(A.startTime),timeUnixNano:$.encodeHrTime(A.endTime)}})}function Uk9(H){switch(H){case LWH.AggregationTemporality.DELTA:return C0D.EAggregationTemporality.AGGREGATION_TEMPORALITY_DELTA;case LWH.AggregationTemporality.CUMULATIVE:return C0D.EAggregationTemporality.AGGREGATION_TEMPORALITY_CUMULATIVE}}function Xk9(H,$){return{resourceMetrics:H.map((A)=>w0D(A,$))}}sv.createExportMetricsServiceRequest=Xk9});var z0D=z((t7$)=>{Object.defineProperty(t7$,"__esModule",{value:!0});t7$.ProtobufMetricsSerializer=void 0;var T0D=c7$(),Jk9=rPA(),Fk9=T0D.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceResponse,Kk9=T0D.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceRequest;t7$.ProtobufMetricsSerializer={serializeRequest:(H)=>{let $=(0,Jk9.createExportMetricsServiceRequest)([H]);return Kk9.encode($).finish()},deserializeResponse:(H)=>{return Fk9.decode(H)}}});var N0D=z((s7$)=>{Object.defineProperty(s7$,"__esModule",{value:!0});s7$.ProtobufMetricsSerializer=void 0;var Qk9=z0D();Object.defineProperty(s7$,"ProtobufMetricsSerializer",{enumerable:!0,get:function(){return Qk9.ProtobufMetricsSerializer}})});var aPA=z((ev)=>{Object.defineProperty(ev,"__esModule",{value:!0});ev.createExportTraceServiceRequest=ev.toOtlpSpanEvent=ev.toOtlpLink=ev.sdkSpanToOtlpSpan=void 0;var RvH=n7$(),Wk9=i7$(),Vk9=256,Pk9=512;function O0D(H,$){let A=H&255|Vk9;if($)A|=Pk9;return A}function x0D(H,$){let A=H.spanContext(),L=H.status,I=H.parentSpanContext?.spanId?$.encodeSpanContext(H.parentSpanContext?.spanId):void 0;return{traceId:$.encodeSpanContext(A.traceId),spanId:$.encodeSpanContext(A.spanId),parentSpanId:I,traceState:A.traceState?.serialize(),name:H.name,kind:H.kind==null?0:H.kind+1,startTimeUnixNano:$.encodeHrTime(H.startTime),endTimeUnixNano:$.encodeHrTime(H.endTime),attributes:(0,RvH.toAttributes)(H.attributes),droppedAttributesCount:H.droppedAttributesCount,events:H.events.map((D)=>j0D(D,$)),droppedEventsCount:H.droppedEventsCount,status:{code:L.code,message:L.message},links:H.links.map((D)=>S0D(D,$)),droppedLinksCount:H.droppedLinksCount,flags:O0D(A.traceFlags,H.parentSpanContext?.isRemote)}}ev.sdkSpanToOtlpSpan=x0D;function S0D(H,$){return{attributes:H.attributes?(0,RvH.toAttributes)(H.attributes):[],spanId:$.encodeSpanContext(H.context.spanId),traceId:$.encodeSpanContext(H.context.traceId),traceState:H.context.traceState?.serialize(),droppedAttributesCount:H.droppedAttributesCount||0,flags:O0D(H.context.traceFlags,H.context.isRemote)}}ev.toOtlpLink=S0D;function j0D(H,$){return{attributes:H.attributes?(0,RvH.toAttributes)(H.attributes):[],name:H.name,timeUnixNano:$.encodeHrTime(H.time),droppedAttributesCount:H.droppedAttributesCount||0}}ev.toOtlpSpanEvent=j0D;function _k9(H,$){let A=(0,Wk9.getOtlpEncoder)($);return{resourceSpans:Yk9(H,A)}}ev.createExportTraceServiceRequest=_k9;function Ck9(H){let $=new Map;for(let A of H){let L=$.get(A.resource);if(!L)L=new Map,$.set(A.resource,L);let I=`${A.instrumentationScope.name}@${A.instrumentationScope.version||""}:${A.instrumentationScope.schemaUrl||""}`,D=L.get(I);if(!D)D=[],L.set(I,D);D.push(A)}return $}function Yk9(H,$){let A=Ck9(H),L=[],I=A.entries(),D=I.next();while(!D.done){let[B,f]=D.value,E=[],M=f.values(),G=M.next();while(!G.done){let J=G.value;if(J.length>0){let F=J.map((Q)=>x0D(Q,$));E.push({scope:(0,RvH.createInstrumentationScope)(J[0].instrumentationScope),spans:F,schemaUrl:J[0].instrumentationScope.schemaUrl})}G=M.next()}let U=(0,RvH.createResource)(B),X={resource:U,scopeSpans:E,schemaUrl:U.schemaUrl};L.push(X),D=I.next()}return L}});var y0D=z((e7$)=>{Object.defineProperty(e7$,"__esModule",{value:!0});e7$.ProtobufTraceSerializer=void 0;var R0D=c7$(),wk9=aPA(),Zk9=R0D.opentelemetry.proto.collector.trace.v1.ExportTraceServiceResponse,qk9=R0D.opentelemetry.proto.collector.trace.v1.ExportTraceServiceRequest;e7$.ProtobufTraceSerializer={serializeRequest:(H)=>{let $=(0,wk9.createExportTraceServiceRequest)(H);return qk9.encode($).finish()},deserializeResponse:(H)=>{return Zk9.decode(H)}}});var v0D=z((H6$)=>{Object.defineProperty(H6$,"__esModule",{value:!0});H6$.ProtobufTraceSerializer=void 0;var Tk9=y0D();Object.defineProperty(H6$,"ProtobufTraceSerializer",{enumerable:!0,get:function(){return Tk9.ProtobufTraceSerializer}})});var h0D=z(($6$)=>{Object.defineProperty($6$,"__esModule",{value:!0});$6$.JsonLogsSerializer=void 0;var zk9=nPA();$6$.JsonLogsSerializer={serializeRequest:(H)=>{let $=(0,zk9.createExportLogsServiceRequest)(H,{useHex:!0,useLongBits:!1});return new TextEncoder().encode(JSON.stringify($))},deserializeResponse:(H)=>{if(H.length===0)return{};return JSON.parse(new TextDecoder().decode(H))}}});var b0D=z((A6$)=>{Object.defineProperty(A6$,"__esModule",{value:!0});A6$.JsonLogsSerializer=void 0;var Nk9=h0D();Object.defineProperty(A6$,"JsonLogsSerializer",{enumerable:!0,get:function(){return Nk9.JsonLogsSerializer}})});var k0D=z((L6$)=>{Object.defineProperty(L6$,"__esModule",{value:!0});L6$.JsonMetricsSerializer=void 0;var Ok9=rPA();L6$.JsonMetricsSerializer={serializeRequest:(H)=>{let $=(0,Ok9.createExportMetricsServiceRequest)([H],{useLongBits:!1});return new TextEncoder().encode(JSON.stringify($))},deserializeResponse:(H)=>{if(H.length===0)return{};return JSON.parse(new TextDecoder().decode(H))}}});var u0D=z((I6$)=>{Object.defineProperty(I6$,"__esModule",{value:!0});I6$.JsonMetricsSerializer=void 0;var xk9=k0D();Object.defineProperty(I6$,"JsonMetricsSerializer",{enumerable:!0,get:function(){return xk9.JsonMetricsSerializer}})});var g0D=z((D6$)=>{Object.defineProperty(D6$,"__esModule",{value:!0});D6$.JsonTraceSerializer=void 0;var Sk9=aPA();D6$.JsonTraceSerializer={serializeRequest:(H)=>{let $=(0,Sk9.createExportTraceServiceRequest)(H,{useHex:!0,useLongBits:!1});return new TextEncoder().encode(JSON.stringify($))},deserializeResponse:(H)=>{if(H.length===0)return{};return JSON.parse(new TextDecoder().decode(H))}}});var m0D=z((B6$)=>{Object.defineProperty(B6$,"__esModule",{value:!0});B6$.JsonTraceSerializer=void 0;var jk9=g0D();Object.defineProperty(B6$,"JsonTraceSerializer",{enumerable:!0,get:function(){return jk9.JsonTraceSerializer}})});var Hh=z((bC)=>{Object.defineProperty(bC,"__esModule",{value:!0});bC.JsonTraceSerializer=bC.JsonMetricsSerializer=bC.JsonLogsSerializer=bC.ProtobufTraceSerializer=bC.ProtobufMetricsSerializer=bC.ProtobufLogsSerializer=void 0;var Rk9=V0D();Object.defineProperty(bC,"ProtobufLogsSerializer",{enumerable:!0,get:function(){return Rk9.ProtobufLogsSerializer}});var yk9=N0D();Object.defineProperty(bC,"ProtobufMetricsSerializer",{enumerable:!0,get:function(){return yk9.ProtobufMetricsSerializer}});var vk9=v0D();Object.defineProperty(bC,"ProtobufTraceSerializer",{enumerable:!0,get:function(){return vk9.ProtobufTraceSerializer}});var hk9=b0D();Object.defineProperty(bC,"JsonLogsSerializer",{enumerable:!0,get:function(){return hk9.JsonLogsSerializer}});var bk9=u0D();Object.defineProperty(bC,"JsonMetricsSerializer",{enumerable:!0,get:function(){return bk9.JsonMetricsSerializer}});var kk9=m0D();Object.defineProperty(bC,"JsonTraceSerializer",{enumerable:!0,get:function(){return kk9.JsonTraceSerializer}})});var p0D=z((f6$)=>{Object.defineProperty(f6$,"__esModule",{value:!0});f6$.validateAndNormalizeHeaders=void 0;var uk9=hB();function gk9(H){let $={};return Object.entries(H??{}).forEach(([A,L])=>{if(typeof L<"u")$[A]=String(L);else uk9.diag.warn(`Header "${A}" has invalid value (${L}) and will be ignored`)}),$}f6$.validateAndNormalizeHeaders=gk9});var c0D=z((IWH)=>{Object.defineProperty(IWH,"__esModule",{value:!0});IWH.getHttpConfigurationDefaults=IWH.mergeOtlpHttpConfigurationWithDefaults=void 0;var d0D=qvH(),mk9=p0D();function pk9(H,$,A){return async()=>{let L={...await A()},I={};if($!=null)Object.assign(I,await $());if(H!=null)Object.assign(I,(0,mk9.validateAndNormalizeHeaders)(await H()));return Object.assign(I,L)}}function dk9(H){if(H==null)return;try{let $=globalThis.location?.href;return new URL(H,$).href}catch{throw Error(`Configuration: Could not parse user-provided export URL: '${H}'`)}}function ck9(H,$,A){return{...(0,d0D.mergeOtlpSharedConfigurationWithDefaults)(H,$,A),headers:pk9(H.headers,$.headers,A.headers),url:dk9(H.url)??$.url??A.url}}IWH.mergeOtlpHttpConfigurationWithDefaults=ck9;function lk9(H,$){return{...(0,d0D.getSharedConfigurationDefaults)(),headers:async()=>H,url:"http://localhost:4318/"+$}}IWH.getHttpConfigurationDefaults=lk9});var E6$=z((Xo)=>{Object.defineProperty(Xo,"__esModule",{value:!0});Xo.getNodeHttpConfigurationDefaults=Xo.mergeOtlpNodeHttpConfigurationWithDefaults=Xo.httpAgentFactoryFromOptions=void 0;var l0D=c0D();function i0D(H){return async($)=>{let A=$==="http:",L=A?import("http"):import("https"),{Agent:I}=await L;if(A){let{ca:D,cert:B,key:f,...E}=H;return new I(E)}return new I(H)}}Xo.httpAgentFactoryFromOptions=i0D;function ik9(H,$,A){return{...(0,l0D.mergeOtlpHttpConfigurationWithDefaults)(H,$,A),agentFactory:H.agentFactory??$.agentFactory??A.agentFactory,userAgent:H.userAgent}}Xo.mergeOtlpNodeHttpConfigurationWithDefaults=ik9;function nk9(H,$){return{...(0,l0D.getHttpConfigurationDefaults)(H,$),agentFactory:i0D({keepAlive:!0})}}Xo.getNodeHttpConfigurationDefaults=nk9});var n0D=z((DWH)=>{Object.defineProperty(DWH,"__esModule",{value:!0});DWH.parseRetryAfterToMills=DWH.isExportRetryable=void 0;function rk9(H){return[429,502,503,504].includes(H)}DWH.isExportRetryable=rk9;function ak9(H){if(H==null)return;let $=Number.parseInt(H,10);if(Number.isInteger($))return $>0?$*1000:-1;let A=new Date(H).getTime()-Date.now();if(A>=0)return A;return 0}DWH.parseRetryAfterToMills=ak9});var r0D=z((M6$)=>{Object.defineProperty(M6$,"__esModule",{value:!0});M6$.VERSION=void 0;M6$.VERSION="0.208.0"});var s0D=z((BWH)=>{Object.defineProperty(BWH,"__esModule",{value:!0});BWH.compressAndSend=BWH.sendWithHttp=void 0;var ok9=require("zlib"),tk9=require("stream"),a0D=n0D(),sk9=R7$(),ek9=r0D(),o0D=`OTel-OTLP-Exporter-JavaScript/${ek9.VERSION}`;function Hu9(H,$,A,L,I,D,B,f,E){let M=new URL($);if(I)A["User-Agent"]=`${I} ${o0D}`;else A["User-Agent"]=o0D;let G={hostname:M.hostname,port:M.port,path:M.pathname,method:"POST",headers:A,agent:D},U=H(G,(X)=>{let J=[];X.on("data",(F)=>J.push(F)),X.on("end",()=>{if(X.statusCode&&X.statusCode<299)f({status:"success",data:Buffer.concat(J)});else if(X.statusCode&&(0,a0D.isExportRetryable)(X.statusCode))f({status:"retryable",retryInMillis:(0,a0D.parseRetryAfterToMills)(X.headers["retry-after"])});else{let F=new sk9.OTLPExporterError(X.statusMessage,X.statusCode,Buffer.concat(J).toString());f({status:"failure",error:F})}})});U.setTimeout(E,()=>{U.destroy(),f({status:"failure",error:Error("Request Timeout")})}),U.on("error",(X)=>{f({status:"failure",error:X})}),t0D(U,L,B,(X)=>{f({status:"failure",error:X})})}BWH.sendWithHttp=Hu9;function t0D(H,$,A,L){let I=$u9(A);if($==="gzip")H.setHeader("Content-Encoding","gzip"),I=I.on("error",L).pipe(ok9.createGzip()).on("error",L);I.pipe(H).on("error",L)}BWH.compressAndSend=t0D;function $u9(H){let $=new tk9.Readable;return $.push(H),$.push(null),$}});var H9D=z((G6$)=>{Object.defineProperty(G6$,"__esModule",{value:!0});G6$.createHttpExporterTransport=void 0;var Au9=s0D();class e0D{_parameters;_utils=null;constructor(H){this._parameters=H}async send(H,$){let{agent:A,request:L}=await this._loadUtils(),I=await this._parameters.headers();return new Promise((D)=>{(0,Au9.sendWithHttp)(L,this._parameters.url,I,this._parameters.compression,this._parameters.userAgent,A,H,(B)=>{D(B)},$)})}shutdown(){}async _loadUtils(){let H=this._utils;if(H===null){let $=new URL(this._parameters.url).protocol,[A,L]=await Promise.all([this._parameters.agentFactory($),Lu9($)]);H=this._utils={agent:A,request:L}}return H}}async function Lu9(H){let $=H==="http:"?import("http"):import("https"),{request:A}=await $;return A}function Iu9(H){return new e0D(H)}G6$.createHttpExporterTransport=Iu9});var L9D=z((U6$)=>{Object.defineProperty(U6$,"__esModule",{value:!0});U6$.createRetryingTransport=void 0;var Du9=5,Bu9=1000,fu9=5000,Eu9=1.5,$9D=0.2;function Mu9(){return Math.random()*(2*$9D)-$9D}class A9D{_transport;constructor(H){this._transport=H}retry(H,$,A){return new Promise((L,I)=>{setTimeout(()=>{this._transport.send(H,$).then(L,I)},A)})}async send(H,$){let A=Date.now()+$,L=await this._transport.send(H,$),I=Du9,D=Bu9;while(L.status==="retryable"&&I>0){I--;let B=Math.max(Math.min(D,fu9)+Mu9(),0);D=D*Eu9;let f=L.retryInMillis??B,E=A-Date.now();if(f>E)return L;L=await this.retry(H,E,f)}return L}shutdown(){return this._transport.shutdown()}}function Gu9(H){return new A9D(H.transport)}U6$.createRetryingTransport=Gu9});var I9D=z((X6$)=>{Object.defineProperty(X6$,"__esModule",{value:!0});X6$.createOtlpHttpExportDelegate=void 0;var Uu9=YPA(),Xu9=H9D(),Ju9=CPA(),Fu9=L9D();function Ku9(H,$){return(0,Uu9.createOtlpExportDelegate)({transport:(0,Fu9.createRetryingTransport)({transport:(0,Xu9.createHttpExporterTransport)(H)}),serializer:$,promiseHandler:(0,Ju9.createBoundedQueueExportPromiseHandler)(H)},{timeout:H.timeoutMillis})}X6$.createOtlpHttpExportDelegate=Ku9});var oPA=z((J6$)=>{Object.defineProperty(J6$,"__esModule",{value:!0});J6$.getSharedConfigurationFromEnvironment=void 0;var f9D=Jf(),E9D=hB();function D9D(H){let $=(0,f9D.getNumberFromEnv)(H);if($!=null){if(Number.isFinite($)&&$>0)return $;E9D.diag.warn(`Configuration: ${H} is invalid, expected number greater than 0 (actual: ${$})`)}return}function Qu9(H){let $=D9D(`OTEL_EXPORTER_OTLP_${H}_TIMEOUT`),A=D9D("OTEL_EXPORTER_OTLP_TIMEOUT");return $??A}function B9D(H){let $=(0,f9D.getStringFromEnv)(H)?.trim();if($==null||$==="none"||$==="gzip")return $;E9D.diag.warn(`Configuration: ${H} is invalid, expected 'none' or 'gzip' (actual: '${$}')`);return}function Wu9(H){let $=B9D(`OTEL_EXPORTER_OTLP_${H}_COMPRESSION`),A=B9D("OTEL_EXPORTER_OTLP_COMPRESSION");return $??A}function Vu9(H){return{timeoutMillis:Qu9(H),compression:Wu9(H)}}J6$.getSharedConfigurationFromEnvironment=Vu9});var M9D=z((K6$)=>{Object.defineProperty(K6$,"__esModule",{value:!0});K6$.getNodeHttpConfigurationFromEnvironment=void 0;var Pu9=require("fs"),_u9=require("path"),$h=Jf(),F6$=hB(),Cu9=oPA(),Yu9=qvH(),wu9=E6$();function Zu9(H){let $=(0,$h.getStringFromEnv)(`OTEL_EXPORTER_OTLP_${H}_HEADERS`),A=(0,$h.getStringFromEnv)("OTEL_EXPORTER_OTLP_HEADERS"),L=(0,$h.parseKeyPairsIntoRecord)($),I=(0,$h.parseKeyPairsIntoRecord)(A);if(Object.keys(L).length===0&&Object.keys(I).length===0)return;return Object.assign({},(0,$h.parseKeyPairsIntoRecord)(A),(0,$h.parseKeyPairsIntoRecord)($))}function qu9(H){try{return new URL(H).toString()}catch{F6$.diag.warn(`Configuration: Could not parse environment-provided export URL: '${H}', falling back to undefined`);return}}function Tu9(H,$){try{new URL(H)}catch{F6$.diag.warn(`Configuration: Could not parse environment-provided export URL: '${H}', falling back to undefined`);return}if(!H.endsWith("/"))H=H+"/";H+=$;try{new URL(H)}catch{F6$.diag.warn(`Configuration: Provided URL appended with '${$}' is not a valid URL, using 'undefined' instead of '${H}'`);return}return H}function zu9(H){let $=(0,$h.getStringFromEnv)("OTEL_EXPORTER_OTLP_ENDPOINT");if($===void 0)return;return Tu9($,H)}function Nu9(H){let $=(0,$h.getStringFromEnv)(`OTEL_EXPORTER_OTLP_${H}_ENDPOINT`);if($===void 0)return;return qu9($)}function tPA(H,$,A){let L=(0,$h.getStringFromEnv)(H),I=(0,$h.getStringFromEnv)($),D=L??I;if(D!=null)try{return Pu9.readFileSync(_u9.resolve(process.cwd(),D))}catch{F6$.diag.warn(A);return}else return}function Ou9(H){return tPA(`OTEL_EXPORTER_OTLP_${H}_CLIENT_CERTIFICATE`,"OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE","Failed to read client certificate chain file")}function xu9(H){return tPA(`OTEL_EXPORTER_OTLP_${H}_CLIENT_KEY`,"OTEL_EXPORTER_OTLP_CLIENT_KEY","Failed to read client certificate private key file")}function Su9(H){return tPA(`OTEL_EXPORTER_OTLP_${H}_CERTIFICATE`,"OTEL_EXPORTER_OTLP_CERTIFICATE","Failed to read root certificate file")}function ju9(H,$){return{...(0,Cu9.getSharedConfigurationFromEnvironment)(H),url:Nu9(H)??zu9($),headers:(0,Yu9.wrapStaticHeadersInFunction)(Zu9(H)),agentFactory:(0,wu9.httpAgentFactoryFromOptions)({keepAlive:!0,ca:Su9(H),cert:Ou9(H),key:xu9(H)})}}K6$.getNodeHttpConfigurationFromEnvironment=ju9});var G9D=z((Q6$)=>{Object.defineProperty(Q6$,"__esModule",{value:!0});Q6$.convertLegacyHeaders=void 0;var Ru9=qvH();function yu9(H){if(typeof H.headers==="function")return H.headers;return(0,Ru9.wrapStaticHeadersInFunction)(H.headers)}Q6$.convertLegacyHeaders=yu9});var X9D=z((W6$)=>{Object.defineProperty(W6$,"__esModule",{value:!0});W6$.convertLegacyHttpOptions=void 0;var vu9=hB(),U9D=E6$(),hu9=gm(),bu9=M9D(),ku9=G9D();function uu9(H){if(typeof H.httpAgentOptions==="function")return H.httpAgentOptions;let $=H.httpAgentOptions;if(H.keepAlive!=null)$={keepAlive:H.keepAlive,...$};if($!=null)return(0,hu9.httpAgentFactoryFromOptions)($);else return}function gu9(H,$,A,L){if(H.metadata)vu9.diag.warn("Metadata cannot be set when using http");return(0,U9D.mergeOtlpNodeHttpConfigurationWithDefaults)({url:H.url,headers:(0,ku9.convertLegacyHeaders)(H),concurrencyLimit:H.concurrencyLimit,timeoutMillis:H.timeoutMillis,compression:H.compression,agentFactory:uu9(H),userAgent:H.userAgent},(0,bu9.getNodeHttpConfigurationFromEnvironment)($,A),(0,U9D.getNodeHttpConfigurationDefaults)(L,A))}W6$.convertLegacyHttpOptions=gu9});var gm=z((Ah)=>{Object.defineProperty(Ah,"__esModule",{value:!0});Ah.convertLegacyHttpOptions=Ah.getSharedConfigurationFromEnvironment=Ah.createOtlpHttpExportDelegate=Ah.httpAgentFactoryFromOptions=void 0;var mu9=E6$();Object.defineProperty(Ah,"httpAgentFactoryFromOptions",{enumerable:!0,get:function(){return mu9.httpAgentFactoryFromOptions}});var pu9=I9D();Object.defineProperty(Ah,"createOtlpHttpExportDelegate",{enumerable:!0,get:function(){return pu9.createOtlpHttpExportDelegate}});var du9=oPA();Object.defineProperty(Ah,"getSharedConfigurationFromEnvironment",{enumerable:!0,get:function(){return du9.getSharedConfigurationFromEnvironment}});var cu9=X9D();Object.defineProperty(Ah,"convertLegacyHttpOptions",{enumerable:!0,get:function(){return cu9.convertLegacyHttpOptions}})});var K9D=z((V6$)=>{Object.defineProperty(V6$,"__esModule",{value:!0});V6$.OTLPMetricExporter=void 0;var lu9=wPA(),iu9=Hh(),J9D=gm();class F9D extends lu9.OTLPMetricExporterBase{constructor(H){super((0,J9D.createOtlpHttpExportDelegate)((0,J9D.convertLegacyHttpOptions)(H??{},"METRICS","v1/metrics",{"Content-Type":"application/json"}),iu9.JsonMetricsSerializer),H)}}V6$.OTLPMetricExporter=F9D});var Q9D=z((P6$)=>{Object.defineProperty(P6$,"__esModule",{value:!0});P6$.OTLPMetricExporter=void 0;var nu9=K9D();Object.defineProperty(P6$,"OTLPMetricExporter",{enumerable:!0,get:function(){return nu9.OTLPMetricExporter}})});var W9D=z((_6$)=>{Object.defineProperty(_6$,"__esModule",{value:!0});_6$.OTLPMetricExporter=void 0;var ru9=Q9D();Object.defineProperty(_6$,"OTLPMetricExporter",{enumerable:!0,get:function(){return ru9.OTLPMetricExporter}})});var Y6$=z((kC)=>{Object.defineProperty(kC,"__esModule",{value:!0});kC.OTLPMetricExporterBase=kC.LowMemoryTemporalitySelector=kC.DeltaTemporalitySelector=kC.CumulativeTemporalitySelector=kC.AggregationTemporalityPreference=kC.OTLPMetricExporter=void 0;var au9=W9D();Object.defineProperty(kC,"OTLPMetricExporter",{enumerable:!0,get:function(){return au9.OTLPMetricExporter}});var ou9=_PA();Object.defineProperty(kC,"AggregationTemporalityPreference",{enumerable:!0,get:function(){return ou9.AggregationTemporalityPreference}});var C6$=wPA();Object.defineProperty(kC,"CumulativeTemporalitySelector",{enumerable:!0,get:function(){return C6$.CumulativeTemporalitySelector}});Object.defineProperty(kC,"DeltaTemporalitySelector",{enumerable:!0,get:function(){return C6$.DeltaTemporalitySelector}});Object.defineProperty(kC,"LowMemoryTemporalitySelector",{enumerable:!0,get:function(){return C6$.LowMemoryTemporalitySelector}});Object.defineProperty(kC,"OTLPMetricExporterBase",{enumerable:!0,get:function(){return C6$.OTLPMetricExporterBase}})});var V9D,P9D,w6$,fWH;var _9D=K(()=>{V9D=h(Y6$(),1),P9D=h(Hh(),1),w6$=h(gm(),1);fWH=class fWH extends V9D.OTLPMetricExporterBase{constructor(H){super(w6$.createOtlpHttpExportDelegate(w6$.convertLegacyHttpOptions(H??{},"METRICS","v1/metrics",{"Content-Type":"application/x-protobuf"}),P9D.ProtobufMetricsSerializer),H)}}});var C9D=K(()=>{_9D()});var Y9D=K(()=>{C9D()});var w9D=K(()=>{Y9D()});var Z9D=z((Z6$)=>{Object.defineProperty(Z6$,"__esModule",{value:!0});Z6$.VERSION=void 0;Z6$.VERSION="0.208.0"});var I8=z((lT)=>{Object.defineProperty(lT,"__esModule",{value:!0});lT.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=lT.DEFAULT_MAX_SEND_MESSAGE_LENGTH=lT.Propagate=lT.LogVerbosity=lT.Status=void 0;var q9D;(function(H){H[H.OK=0]="OK",H[H.CANCELLED=1]="CANCELLED",H[H.UNKNOWN=2]="UNKNOWN",H[H.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",H[H.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",H[H.NOT_FOUND=5]="NOT_FOUND",H[H.ALREADY_EXISTS=6]="ALREADY_EXISTS",H[H.PERMISSION_DENIED=7]="PERMISSION_DENIED",H[H.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",H[H.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",H[H.ABORTED=10]="ABORTED",H[H.OUT_OF_RANGE=11]="OUT_OF_RANGE",H[H.UNIMPLEMENTED=12]="UNIMPLEMENTED",H[H.INTERNAL=13]="INTERNAL",H[H.UNAVAILABLE=14]="UNAVAILABLE",H[H.DATA_LOSS=15]="DATA_LOSS",H[H.UNAUTHENTICATED=16]="UNAUTHENTICATED"})(q9D||(lT.Status=q9D={}));var T9D;(function(H){H[H.DEBUG=0]="DEBUG",H[H.INFO=1]="INFO",H[H.ERROR=2]="ERROR",H[H.NONE=3]="NONE"})(T9D||(lT.LogVerbosity=T9D={}));var z9D;(function(H){H[H.DEADLINE=1]="DEADLINE",H[H.CENSUS_STATS_CONTEXT=2]="CENSUS_STATS_CONTEXT",H[H.CENSUS_TRACING_CONTEXT=4]="CENSUS_TRACING_CONTEXT",H[H.CANCELLATION=8]="CANCELLATION",H[H.DEFAULTS=65535]="DEFAULTS"})(z9D||(lT.Propagate=z9D={}));lT.DEFAULT_MAX_SEND_MESSAGE_LENGTH=-1;lT.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=4194304});var sPA=z((R2E,tu9)=>{tu9.exports={name:"@grpc/grpc-js",version:"1.14.0",description:"gRPC Library for Node - pure JS implementation",homepage:"https://grpc.io/",repository:"https://github.com/grpc/grpc-node/tree/master/packages/grpc-js",main:"build/src/index.js",engines:{node:">=12.10.0"},keywords:[],author:{name:"Google Inc."},types:"build/src/index.d.ts",license:"Apache-2.0",devDependencies:{"@grpc/proto-loader":"file:../proto-loader","@types/gulp":"^4.0.17","@types/gulp-mocha":"0.0.37","@types/lodash":"^4.14.202","@types/mocha":"^10.0.6","@types/ncp":"^2.0.8","@types/node":">=20.11.20","@types/pify":"^5.0.4","@types/semver":"^7.5.8","@typescript-eslint/eslint-plugin":"^7.1.0","@typescript-eslint/parser":"^7.1.0","@typescript-eslint/typescript-estree":"^7.1.0","clang-format":"^1.8.0",eslint:"^8.42.0","eslint-config-prettier":"^8.8.0","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^4.2.1",execa:"^2.0.3",gulp:"^4.0.2","gulp-mocha":"^6.0.0",lodash:"^4.17.21",madge:"^5.0.1","mocha-jenkins-reporter":"^0.4.1",ncp:"^2.0.0",pify:"^4.0.1",prettier:"^2.8.8",rimraf:"^3.0.2",semver:"^7.6.0","ts-node":"^10.9.2",typescript:"^5.3.3"},contributors:[{name:"Google Inc."}],scripts:{build:"npm run compile",clean:"rimraf ./build",compile:"tsc -p .",format:'clang-format -i -style="{Language: JavaScript, BasedOnStyle: Google, ColumnLimit: 80}" src/*.ts test/*.ts',lint:"eslint src/*.ts test/*.ts",prepare:"npm run copy-protos && npm run generate-types && npm run generate-test-types && npm run compile",test:"gulp test",check:"npm run lint",fix:"eslint --fix src/*.ts test/*.ts",pretest:"npm run generate-types && npm run generate-test-types && npm run compile",posttest:"npm run check && madge -c ./build/src","generate-types":"proto-loader-gen-types --keepCase --longs String --enums String --defaults --oneofs --includeComments --includeDirs proto/ --include-dirs proto/ proto/xds/ proto/protoc-gen-validate/ -O src/generated/ --grpcLib ../index channelz.proto xds/service/orca/v3/orca.proto","generate-test-types":"proto-loader-gen-types --keepCase --longs String --enums String --defaults --oneofs --includeComments --include-dirs test/fixtures/ -O test/generated/ --grpcLib ../../src/index test_service.proto echo_service.proto","copy-protos":"node ./copy-protos"},dependencies:{"@grpc/proto-loader":"^0.8.0","@js-sdsl/ordered-map":"^4.4.2"},files:["src/**/*.ts","build/src/**/*.{js,d.ts,js.map}","proto/**/*.proto","proto/**/LICENSE","LICENSE","deps/envoy-api/envoy/api/v2/**/*.proto","deps/envoy-api/envoy/config/**/*.proto","deps/envoy-api/envoy/service/**/*.proto","deps/envoy-api/envoy/type/**/*.proto","deps/udpa/udpa/**/*.proto","deps/googleapis/google/api/*.proto","deps/googleapis/google/rpc/*.proto","deps/protoc-gen-validate/validate/**/*.proto"]}});var wG=z((fw)=>{var ePA,H_A,$_A,A_A;Object.defineProperty(fw,"__esModule",{value:!0});fw.log=fw.setLoggerVerbosity=fw.setLogger=fw.getLogger=void 0;fw.trace=Eg9;fw.isTracerEnabled=O9D;var Jo=I8(),su9=require("process"),eu9=sPA().version,Hg9={error:(H,...$)=>{console.error("E "+H,...$)},info:(H,...$)=>{console.error("I "+H,...$)},debug:(H,...$)=>{console.error("D "+H,...$)}},L0H=Hg9,EWH=Jo.LogVerbosity.ERROR,$g9=(H_A=(ePA=process.env.GRPC_NODE_VERBOSITY)!==null&&ePA!==void 0?ePA:process.env.GRPC_VERBOSITY)!==null&&H_A!==void 0?H_A:"";switch($g9.toUpperCase()){case"DEBUG":EWH=Jo.LogVerbosity.DEBUG;break;case"INFO":EWH=Jo.LogVerbosity.INFO;break;case"ERROR":EWH=Jo.LogVerbosity.ERROR;break;case"NONE":EWH=Jo.LogVerbosity.NONE;break;default:}var Ag9=()=>{return L0H};fw.getLogger=Ag9;var Lg9=(H)=>{L0H=H};fw.setLogger=Lg9;var Ig9=(H)=>{EWH=H};fw.setLoggerVerbosity=Ig9;var Dg9=(H,...$)=>{let A;if(H>=EWH){switch(H){case Jo.LogVerbosity.DEBUG:A=L0H.debug;break;case Jo.LogVerbosity.INFO:A=L0H.info;break;case Jo.LogVerbosity.ERROR:A=L0H.error;break}if(!A)A=L0H.error;if(A)A.bind(L0H)(...$)}};fw.log=Dg9;var Bg9=(A_A=($_A=process.env.GRPC_NODE_TRACE)!==null&&$_A!==void 0?$_A:process.env.GRPC_TRACE)!==null&&A_A!==void 0?A_A:"",L_A=new Set,N9D=new Set;for(let H of Bg9.split(","))if(H.startsWith("-"))N9D.add(H.substring(1));else L_A.add(H);var fg9=L_A.has("all");function Eg9(H,$,A){if(O9D($))(0,fw.log)(H,new Date().toISOString()+" | v"+eu9+" "+su9.pid+" | "+$+" | "+A)}function O9D(H){return!N9D.has(H)&&(fg9||L_A.has(H))}});var T6$=z((q6$)=>{Object.defineProperty(q6$,"__esModule",{value:!0});q6$.getErrorMessage=Mg9;q6$.getErrorCode=Gg9;function Mg9(H){if(H instanceof Error)return H.message;else return String(H)}function Gg9(H){if(typeof H==="object"&&H!==null&&"code"in H&&typeof H.code==="number")return H.code;else return null}});var dQ=z((O6$)=>{Object.defineProperty(O6$,"__esModule",{value:!0});O6$.Metadata=void 0;var Ug9=wG(),Xg9=I8(),Jg9=T6$(),Fg9=/^[:0-9a-z_.-]+$/,Kg9=/^[ -~]*$/;function Qg9(H){return Fg9.test(H)}function Wg9(H){return Kg9.test(H)}function S9D(H){return H.endsWith("-bin")}function Vg9(H){return!H.startsWith("grpc-")}function z6$(H){return H.toLowerCase()}function x9D(H,$){if(!Qg9(H))throw Error('Metadata key "'+H+'" contains illegal characters');if($!==null&&$!==void 0)if(S9D(H)){if(!Buffer.isBuffer($))throw Error("keys that end with '-bin' must have Buffer values")}else{if(Buffer.isBuffer($))throw Error("keys that don't end with '-bin' must have String values");if(!Wg9($))throw Error('Metadata string value "'+$+'" contains illegal characters')}}class N6${constructor(H={}){this.internalRepr=new Map,this.opaqueData=new Map,this.options=H}set(H,$){H=z6$(H),x9D(H,$),this.internalRepr.set(H,[$])}add(H,$){H=z6$(H),x9D(H,$);let A=this.internalRepr.get(H);if(A===void 0)this.internalRepr.set(H,[$]);else A.push($)}remove(H){H=z6$(H),this.internalRepr.delete(H)}get(H){return H=z6$(H),this.internalRepr.get(H)||[]}getMap(){let H={};for(let[$,A]of this.internalRepr)if(A.length>0){let L=A[0];H[$]=Buffer.isBuffer(L)?Buffer.from(L):L}return H}clone(){let H=new N6$(this.options),$=H.internalRepr;for(let[A,L]of this.internalRepr){let I=L.map((D)=>{if(Buffer.isBuffer(D))return Buffer.from(D);else return D});$.set(A,I)}return H}merge(H){for(let[$,A]of H.internalRepr){let L=(this.internalRepr.get($)||[]).concat(A);this.internalRepr.set($,L)}}setOptions(H){this.options=H}getOptions(){return this.options}toHttp2Headers(){let H={};for(let[$,A]of this.internalRepr){if($.startsWith(":"))continue;H[$]=A.map(Pg9)}return H}toJSON(){let H={};for(let[$,A]of this.internalRepr)H[$]=A;return H}setOpaque(H,$){this.opaqueData.set(H,$)}getOpaque(H){return this.opaqueData.get(H)}static fromHttp2Headers(H){let $=new N6$;for(let A of Object.keys(H)){if(A.charAt(0)===":")continue;let L=H[A];try{if(S9D(A)){if(Array.isArray(L))L.forEach((I)=>{$.add(A,Buffer.from(I,"base64"))});else if(L!==void 0)if(Vg9(A))L.split(",").forEach((I)=>{$.add(A,Buffer.from(I.trim(),"base64"))});else $.add(A,Buffer.from(L,"base64"))}else if(Array.isArray(L))L.forEach((I)=>{$.add(A,I)});else if(L!==void 0)$.add(A,L)}catch(I){let D=`Failed to add metadata entry ${A}: ${L}. ${(0,Jg9.getErrorMessage)(I)}. For more information see https://github.com/grpc/grpc-node/issues/1173`;(0,Ug9.log)(Xg9.LogVerbosity.ERROR,D)}}return $}}O6$.Metadata=N6$;var Pg9=(H)=>{return Buffer.isBuffer(H)?H.toString("base64"):H}});var j6$=z((S6$)=>{Object.defineProperty(S6$,"__esModule",{value:!0});S6$.CallCredentials=void 0;var I_A=dQ();function _g9(H){return"getRequestHeaders"in H&&typeof H.getRequestHeaders==="function"}class MWH{static createFromMetadataGenerator(H){return new D_A(H)}static createFromGoogleCredential(H){return MWH.createFromMetadataGenerator(($,A)=>{let L;if(_g9(H))L=H.getRequestHeaders($.service_url);else L=new Promise((I,D)=>{H.getRequestMetadata($.service_url,(B,f)=>{if(B){D(B);return}if(!f){D(Error("Headers not set by metadata plugin"));return}I(f)})});L.then((I)=>{let D=new I_A.Metadata;for(let B of Object.keys(I))D.add(B,I[B]);A(null,D)},(I)=>{A(I)})})}static createEmpty(){return new B_A}}S6$.CallCredentials=MWH;class x6$ extends MWH{constructor(H){super();this.creds=H}async generateMetadata(H){let $=new I_A.Metadata,A=await Promise.all(this.creds.map((L)=>L.generateMetadata(H)));for(let L of A)$.merge(L);return $}compose(H){return new x6$(this.creds.concat([H]))}_equals(H){if(this===H)return!0;if(H instanceof x6$)return this.creds.every(($,A)=>$._equals(H.creds[A]));else return!1}}class D_A extends MWH{constructor(H){super();this.metadataGenerator=H}generateMetadata(H){return new Promise(($,A)=>{this.metadataGenerator(H,(L,I)=>{if(I!==void 0)$(I);else A(L)})})}compose(H){return new x6$([this,H])}_equals(H){if(this===H)return!0;if(H instanceof D_A)return this.metadataGenerator===H.metadataGenerator;else return!1}}class B_A extends MWH{generateMetadata(H){return Promise.resolve(new I_A.Metadata)}compose(H){return H}_equals(H){return H instanceof B_A}}});var E_A=z((yvH)=>{Object.defineProperty(yvH,"__esModule",{value:!0});yvH.CIPHER_SUITES=void 0;yvH.getDefaultRootsData=Yg9;var Cg9=require("fs");yvH.CIPHER_SUITES=process.env.GRPC_SSL_CIPHER_SUITES;var j9D=process.env.GRPC_DEFAULT_SSL_ROOTS_FILE_PATH,f_A=null;function Yg9(){if(j9D){if(f_A===null)f_A=Cg9.readFileSync(j9D);return f_A}return null}});var CP=z((GWH)=>{Object.defineProperty(GWH,"__esModule",{value:!0});GWH.parseUri=Zg9;GWH.splitHostPort=qg9;GWH.combineHostPort=Tg9;GWH.uriToString=zg9;var wg9=/^(?:([A-Za-z0-9+.-]+):)?(?:\/\/([^/]*)\/)?(.+)$/;function Zg9(H){let $=wg9.exec(H);if($===null)return null;return{scheme:$[1],authority:$[2],path:$[3]}}var R9D=/^\d+$/;function qg9(H){if(H.startsWith("[")){let $=H.indexOf("]");if($===-1)return null;let A=H.substring(1,$);if(A.indexOf(":")===-1)return null;if(H.length>$+1)if(H[$+1]===":"){let L=H.substring($+2);if(R9D.test(L))return{host:A,port:+L};else return null}else return null;else return{host:A}}else{let $=H.split(":");if($.length===2)if(R9D.test($[1]))return{host:$[0],port:+$[1]};else return null;else return{host:H}}}function Tg9(H){if(H.port===void 0)return H.host;else if(H.host.includes(":"))return`[${H.host}]:${H.port}`;else return`${H.host}:${H.port}`}function zg9(H){let $="";if(H.scheme!==void 0)$+=H.scheme+":";if(H.authority!==void 0)$+="//"+H.authority+"/";return $+=H.path,$}});var sx=z((mm)=>{Object.defineProperty(mm,"__esModule",{value:!0});mm.CHANNEL_ARGS_CONFIG_SELECTOR_KEY=void 0;mm.registerResolver=Ng9;mm.registerDefaultScheme=Og9;mm.createResolver=xg9;mm.getDefaultAuthority=Sg9;mm.mapUriDefaultScheme=jg9;var G_A=CP();mm.CHANNEL_ARGS_CONFIG_SELECTOR_KEY="grpc.internal.config_selector";var UWH={},M_A=null;function Ng9(H,$){UWH[H]=$}function Og9(H){M_A=H}function xg9(H,$,A){if(H.scheme!==void 0&&H.scheme in UWH)return new UWH[H.scheme](H,$,A);else throw Error(`No resolver could be created for target ${(0,G_A.uriToString)(H)}`)}function Sg9(H){if(H.scheme!==void 0&&H.scheme in UWH)return UWH[H.scheme].getDefaultAuthority(H);else throw Error(`Invalid target ${(0,G_A.uriToString)(H)}`)}function jg9(H){if(H.scheme===void 0||!(H.scheme in UWH))if(M_A!==null)return{scheme:M_A,authority:void 0,path:(0,G_A.uriToString)(H)};else return null;return H}});var JWH=z((bvH)=>{Object.defineProperty(bvH,"__esModule",{value:!0});bvH.ChannelCredentials=void 0;bvH.createCertificateProviderChannelCredentials=hg9;var hvH=require("tls"),v6$=j6$(),X_A=E_A(),y9D=CP(),Rg9=sx(),yg9=wG(),vg9=I8();function U_A(H,$){if(H&&!(H instanceof Buffer))throw TypeError(`${$}, if provided, must be a Buffer.`)}class XWH{compose(H){return new y6$(this,H)}static createSsl(H,$,A,L){var I;if(U_A(H,"Root certificate"),U_A($,"Private key"),U_A(A,"Certificate chain"),$&&!A)throw Error("Private key must be given with accompanying certificate chain");if(!$&&A)throw Error("Certificate chain must be given with accompanying private key");let D=(0,hvH.createSecureContext)({ca:(I=H!==null&&H!==void 0?H:(0,X_A.getDefaultRootsData)())!==null&&I!==void 0?I:void 0,key:$!==null&&$!==void 0?$:void 0,cert:A!==null&&A!==void 0?A:void 0,ciphers:X_A.CIPHER_SUITES});return new R6$(D,L!==null&&L!==void 0?L:{})}static createFromSecureContext(H,$){return new R6$(H,$!==null&&$!==void 0?$:{})}static createInsecure(){return new J_A}}bvH.ChannelCredentials=XWH;class J_A extends XWH{constructor(){super()}compose(H){throw Error("Cannot compose insecure credentials")}_isSecure(){return!1}_equals(H){return H instanceof J_A}_createSecureConnector(H,$,A){return{connect(L){return Promise.resolve({socket:L,secure:!1})},waitForReady:()=>{return Promise.resolve()},getCallCredentials:()=>{return A!==null&&A!==void 0?A:v6$.CallCredentials.createEmpty()},destroy(){}}}}function v9D(H,$,A,L){var I,D;let B={secureContext:H},f=A;if("grpc.http_connect_target"in L){let U=(0,y9D.parseUri)(L["grpc.http_connect_target"]);if(U)f=U}let E=(0,Rg9.getDefaultAuthority)(f),M=(0,y9D.splitHostPort)(E),G=(I=M===null||M===void 0?void 0:M.host)!==null&&I!==void 0?I:E;if(B.host=G,$.checkServerIdentity)B.checkServerIdentity=$.checkServerIdentity;if($.rejectUnauthorized!==void 0)B.rejectUnauthorized=$.rejectUnauthorized;if(B.ALPNProtocols=["h2"],L["grpc.ssl_target_name_override"]){let U=L["grpc.ssl_target_name_override"],X=(D=B.checkServerIdentity)!==null&&D!==void 0?D:hvH.checkServerIdentity;B.checkServerIdentity=(J,F)=>{return X(U,F)},B.servername=U}else B.servername=G;if(L["grpc-node.tls_enable_trace"])B.enableTrace=!0;return B}class h9D{constructor(H,$){this.connectionOptions=H,this.callCredentials=$}connect(H){let $=Object.assign({socket:H},this.connectionOptions);return new Promise((A,L)=>{let I=(0,hvH.connect)($,()=>{var D;if(((D=this.connectionOptions.rejectUnauthorized)!==null&&D!==void 0?D:!0)&&!I.authorized){L(I.authorizationError);return}A({socket:I,secure:!0})});I.on("error",(D)=>{L(D)})})}waitForReady(){return Promise.resolve()}getCallCredentials(){return this.callCredentials}destroy(){}}class R6$ extends XWH{constructor(H,$){super();this.secureContext=H,this.verifyOptions=$}_isSecure(){return!0}_equals(H){if(this===H)return!0;if(H instanceof R6$)return this.secureContext===H.secureContext&&this.verifyOptions.checkServerIdentity===H.verifyOptions.checkServerIdentity;else return!1}_createSecureConnector(H,$,A){let L=v9D(this.secureContext,this.verifyOptions,H,$);return new h9D(L,A!==null&&A!==void 0?A:v6$.CallCredentials.createEmpty())}}class vvH extends XWH{constructor(H,$,A){super();this.caCertificateProvider=H,this.identityCertificateProvider=$,this.verifyOptions=A,this.refcount=0,this.latestCaUpdate=void 0,this.latestIdentityUpdate=void 0,this.caCertificateUpdateListener=this.handleCaCertificateUpdate.bind(this),this.identityCertificateUpdateListener=this.handleIdentityCertitificateUpdate.bind(this),this.secureContextWatchers=[]}_isSecure(){return!0}_equals(H){var $,A;if(this===H)return!0;if(H instanceof vvH)return this.caCertificateProvider===H.caCertificateProvider&&this.identityCertificateProvider===H.identityCertificateProvider&&(($=this.verifyOptions)===null||$===void 0?void 0:$.checkServerIdentity)===((A=H.verifyOptions)===null||A===void 0?void 0:A.checkServerIdentity);else return!1}ref(){var H;if(this.refcount===0)this.caCertificateProvider.addCaCertificateListener(this.caCertificateUpdateListener),(H=this.identityCertificateProvider)===null||H===void 0||H.addIdentityCertificateListener(this.identityCertificateUpdateListener);this.refcount+=1}unref(){var H;if(this.refcount-=1,this.refcount===0)this.caCertificateProvider.removeCaCertificateListener(this.caCertificateUpdateListener),(H=this.identityCertificateProvider)===null||H===void 0||H.removeIdentityCertificateListener(this.identityCertificateUpdateListener)}_createSecureConnector(H,$,A){return this.ref(),new vvH.SecureConnectorImpl(this,H,$,A!==null&&A!==void 0?A:v6$.CallCredentials.createEmpty())}maybeUpdateWatchers(){if(this.hasReceivedUpdates()){for(let H of this.secureContextWatchers)H(this.getLatestSecureContext());this.secureContextWatchers=[]}}handleCaCertificateUpdate(H){this.latestCaUpdate=H,this.maybeUpdateWatchers()}handleIdentityCertitificateUpdate(H){this.latestIdentityUpdate=H,this.maybeUpdateWatchers()}hasReceivedUpdates(){if(this.latestCaUpdate===void 0)return!1;if(this.identityCertificateProvider&&this.latestIdentityUpdate===void 0)return!1;return!0}getSecureContext(){if(this.hasReceivedUpdates())return Promise.resolve(this.getLatestSecureContext());else return new Promise((H)=>{this.secureContextWatchers.push(H)})}getLatestSecureContext(){var H,$;if(!this.latestCaUpdate)return null;if(this.identityCertificateProvider!==null&&!this.latestIdentityUpdate)return null;try{return(0,hvH.createSecureContext)({ca:this.latestCaUpdate.caCertificate,key:(H=this.latestIdentityUpdate)===null||H===void 0?void 0:H.privateKey,cert:($=this.latestIdentityUpdate)===null||$===void 0?void 0:$.certificate,ciphers:X_A.CIPHER_SUITES})}catch(A){return(0,yg9.log)(vg9.LogVerbosity.ERROR,"Failed to createSecureContext with error "+A.message),null}}}vvH.SecureConnectorImpl=class{constructor(H,$,A,L){this.parent=H,this.channelTarget=$,this.options=A,this.callCredentials=L}connect(H){return new Promise(($,A)=>{let L=this.parent.getLatestSecureContext();if(!L){A(Error("Failed to load credentials"));return}if(H.closed)A(Error("Socket closed while loading credentials"));let I=v9D(L,this.parent.verifyOptions,this.channelTarget,this.options),D=Object.assign({socket:H},I),B=()=>{A(Error("Socket closed"))},f=(M)=>{A(M)},E=(0,hvH.connect)(D,()=>{var M;if(E.removeListener("close",B),E.removeListener("error",f),((M=this.parent.verifyOptions.rejectUnauthorized)!==null&&M!==void 0?M:!0)&&!E.authorized){A(E.authorizationError);return}$({socket:E,secure:!0})});E.once("close",B),E.once("error",f)})}async waitForReady(){await this.parent.getSecureContext()}getCallCredentials(){return this.callCredentials}destroy(){this.parent.unref()}};function hg9(H,$,A){return new vvH(H,$,A!==null&&A!==void 0?A:{})}class y6$ extends XWH{constructor(H,$){super();if(this.channelCredentials=H,this.callCredentials=$,!H._isSecure())throw Error("Cannot compose insecure credentials")}compose(H){let $=this.callCredentials.compose(H);return new y6$(this.channelCredentials,$)}_isSecure(){return!0}_equals(H){if(this===H)return!0;if(H instanceof y6$)return this.channelCredentials._equals(H.channelCredentials)&&this.callCredentials._equals(H.callCredentials);else return!1}_createSecureConnector(H,$,A){let L=this.callCredentials.compose(A!==null&&A!==void 0?A:v6$.CallCredentials.createEmpty());return this.channelCredentials._createSecureConnector(H,$,L)}}});var Ko=z((Lh)=>{Object.defineProperty(Lh,"__esModule",{value:!0});Lh.createChildChannelControlHelper=ug9;Lh.registerLoadBalancerType=gg9;Lh.registerDefaultLoadBalancerType=mg9;Lh.createLoadBalancer=pg9;Lh.isLoadBalancerNameRegistered=dg9;Lh.parseLoadBalancingConfig=b9D;Lh.getDefaultConfig=cg9;Lh.selectLbConfigFromList=lg9;var bg9=wG(),kg9=I8();function ug9(H,$){var A,L,I,D,B,f,E,M,G,U;return{createSubchannel:(L=(A=$.createSubchannel)===null||A===void 0?void 0:A.bind($))!==null&&L!==void 0?L:H.createSubchannel.bind(H),updateState:(D=(I=$.updateState)===null||I===void 0?void 0:I.bind($))!==null&&D!==void 0?D:H.updateState.bind(H),requestReresolution:(f=(B=$.requestReresolution)===null||B===void 0?void 0:B.bind($))!==null&&f!==void 0?f:H.requestReresolution.bind(H),addChannelzChild:(M=(E=$.addChannelzChild)===null||E===void 0?void 0:E.bind($))!==null&&M!==void 0?M:H.addChannelzChild.bind(H),removeChannelzChild:(U=(G=$.removeChannelzChild)===null||G===void 0?void 0:G.bind($))!==null&&U!==void 0?U:H.removeChannelzChild.bind(H)}}var Fo={},kvH=null;function gg9(H,$,A){Fo[H]={LoadBalancer:$,LoadBalancingConfig:A}}function mg9(H){kvH=H}function pg9(H,$){let A=H.getLoadBalancerName();if(A in Fo)return new Fo[A].LoadBalancer($);else return null}function dg9(H){return H in Fo}function b9D(H){let $=Object.keys(H);if($.length!==1)throw Error("Provided load balancing config has multiple conflicting entries");let A=$[0];if(A in Fo)try{return Fo[A].LoadBalancingConfig.createFromJson(H[A])}catch(L){throw Error(`${A}: ${L.message}`)}else throw Error(`Unrecognized load balancing config name ${A}`)}function cg9(){if(!kvH)throw Error("No default load balancer type registered");return new Fo[kvH].LoadBalancingConfig}function lg9(H,$=!1){for(let A of H)try{return b9D(A)}catch(L){(0,bg9.log)(kg9.LogVerbosity.DEBUG,"Config parsing failed with error",L.message);continue}if($)if(kvH)return new Fo[kvH].LoadBalancingConfig;else return null;else return null}});var F_A=z((uvH)=>{Object.defineProperty(uvH,"__esModule",{value:!0});uvH.validateRetryThrottling=k9D;uvH.validateServiceConfig=u9D;uvH.extractAndSelectServiceConfig=$m9;var ig9=require("os"),h6$=I8(),b6$=/^\d+(\.\d{1,9})?s$/,ng9="node";function rg9(H){if("service"in H&&H.service!==""){if(typeof H.service!=="string")throw Error(`Invalid method config name: invalid service: expected type string, got ${typeof H.service}`);if("method"in H&&H.method!==""){if(typeof H.method!=="string")throw Error(`Invalid method config name: invalid method: expected type string, got ${typeof H.service}`);return{service:H.service,method:H.method}}else return{service:H.service}}else{if("method"in H&&H.method!==void 0)throw Error("Invalid method config name: method set with empty or unset service");return{}}}function ag9(H){if(!("maxAttempts"in H)||!Number.isInteger(H.maxAttempts)||H.maxAttempts<2)throw Error("Invalid method config retry policy: maxAttempts must be an integer at least 2");if(!("initialBackoff"in H)||typeof H.initialBackoff!=="string"||!b6$.test(H.initialBackoff))throw Error("Invalid method config retry policy: initialBackoff must be a string consisting of a positive integer or decimal followed by s");if(!("maxBackoff"in H)||typeof H.maxBackoff!=="string"||!b6$.test(H.maxBackoff))throw Error("Invalid method config retry policy: maxBackoff must be a string consisting of a positive integer or decimal followed by s");if(!("backoffMultiplier"in H)||typeof H.backoffMultiplier!=="number"||H.backoffMultiplier<=0)throw Error("Invalid method config retry policy: backoffMultiplier must be a number greater than 0");if(!(("retryableStatusCodes"in H)&&Array.isArray(H.retryableStatusCodes)))throw Error("Invalid method config retry policy: retryableStatusCodes is required");if(H.retryableStatusCodes.length===0)throw Error("Invalid method config retry policy: retryableStatusCodes must be non-empty");for(let $ of H.retryableStatusCodes)if(typeof $==="number"){if(!Object.values(h6$.Status).includes($))throw Error("Invalid method config retry policy: retryableStatusCodes value not in status code range")}else if(typeof $==="string"){if(!Object.values(h6$.Status).includes($.toUpperCase()))throw Error("Invalid method config retry policy: retryableStatusCodes value not a status code name")}else throw Error("Invalid method config retry policy: retryableStatusCodes value must be a string or number");return{maxAttempts:H.maxAttempts,initialBackoff:H.initialBackoff,maxBackoff:H.maxBackoff,backoffMultiplier:H.backoffMultiplier,retryableStatusCodes:H.retryableStatusCodes}}function og9(H){if(!("maxAttempts"in H)||!Number.isInteger(H.maxAttempts)||H.maxAttempts<2)throw Error("Invalid method config hedging policy: maxAttempts must be an integer at least 2");if("hedgingDelay"in H&&(typeof H.hedgingDelay!=="string"||!b6$.test(H.hedgingDelay)))throw Error("Invalid method config hedging policy: hedgingDelay must be a string consisting of a positive integer followed by s");if("nonFatalStatusCodes"in H&&Array.isArray(H.nonFatalStatusCodes))for(let A of H.nonFatalStatusCodes)if(typeof A==="number"){if(!Object.values(h6$.Status).includes(A))throw Error("Invalid method config hedging policy: nonFatalStatusCodes value not in status code range")}else if(typeof A==="string"){if(!Object.values(h6$.Status).includes(A.toUpperCase()))throw Error("Invalid method config hedging policy: nonFatalStatusCodes value not a status code name")}else throw Error("Invalid method config hedging policy: nonFatalStatusCodes value must be a string or number");let $={maxAttempts:H.maxAttempts};if(H.hedgingDelay)$.hedgingDelay=H.hedgingDelay;if(H.nonFatalStatusCodes)$.nonFatalStatusCodes=H.nonFatalStatusCodes;return $}function tg9(H){var $;let A={name:[]};if(!("name"in H)||!Array.isArray(H.name))throw Error("Invalid method config: invalid name array");for(let L of H.name)A.name.push(rg9(L));if("waitForReady"in H){if(typeof H.waitForReady!=="boolean")throw Error("Invalid method config: invalid waitForReady");A.waitForReady=H.waitForReady}if("timeout"in H)if(typeof H.timeout==="object"){if(!("seconds"in H.timeout)||typeof H.timeout.seconds!=="number")throw Error("Invalid method config: invalid timeout.seconds");if(!("nanos"in H.timeout)||typeof H.timeout.nanos!=="number")throw Error("Invalid method config: invalid timeout.nanos");A.timeout=H.timeout}else if(typeof H.timeout==="string"&&b6$.test(H.timeout)){let L=H.timeout.substring(0,H.timeout.length-1).split(".");A.timeout={seconds:L[0]|0,nanos:(($=L[1])!==null&&$!==void 0?$:0)|0}}else throw Error("Invalid method config: invalid timeout");if("maxRequestBytes"in H){if(typeof H.maxRequestBytes!=="number")throw Error("Invalid method config: invalid maxRequestBytes");A.maxRequestBytes=H.maxRequestBytes}if("maxResponseBytes"in H){if(typeof H.maxResponseBytes!=="number")throw Error("Invalid method config: invalid maxRequestBytes");A.maxResponseBytes=H.maxResponseBytes}if("retryPolicy"in H)if("hedgingPolicy"in H)throw Error("Invalid method config: retryPolicy and hedgingPolicy cannot both be specified");else A.retryPolicy=ag9(H.retryPolicy);else if("hedgingPolicy"in H)A.hedgingPolicy=og9(H.hedgingPolicy);return A}function k9D(H){if(!("maxTokens"in H)||typeof H.maxTokens!=="number"||H.maxTokens<=0||H.maxTokens>1000)throw Error("Invalid retryThrottling: maxTokens must be a number in (0, 1000]");if(!("tokenRatio"in H)||typeof H.tokenRatio!=="number"||H.tokenRatio<=0)throw Error("Invalid retryThrottling: tokenRatio must be a number greater than 0");return{maxTokens:+H.maxTokens.toFixed(3),tokenRatio:+H.tokenRatio.toFixed(3)}}function sg9(H){if(!(typeof H==="object"&&H!==null))throw Error(`Invalid loadBalancingConfig: unexpected type ${typeof H}`);let $=Object.keys(H);if($.length>1)throw Error(`Invalid loadBalancingConfig: unexpected multiple keys ${$}`);if($.length===0)throw Error("Invalid loadBalancingConfig: load balancing policy name required");return{[$[0]]:H[$[0]]}}function u9D(H){let $={loadBalancingConfig:[],methodConfig:[]};if("loadBalancingPolicy"in H)if(typeof H.loadBalancingPolicy==="string")$.loadBalancingPolicy=H.loadBalancingPolicy;else throw Error("Invalid service config: invalid loadBalancingPolicy");if("loadBalancingConfig"in H)if(Array.isArray(H.loadBalancingConfig))for(let L of H.loadBalancingConfig)$.loadBalancingConfig.push(sg9(L));else throw Error("Invalid service config: invalid loadBalancingConfig");if("methodConfig"in H){if(Array.isArray(H.methodConfig))for(let L of H.methodConfig)$.methodConfig.push(tg9(L))}if("retryThrottling"in H)$.retryThrottling=k9D(H.retryThrottling);let A=[];for(let L of $.methodConfig)for(let I of L.name){for(let D of A)if(I.service===D.service&&I.method===D.method)throw Error(`Invalid service config: duplicate name ${I.service}/${I.method}`);A.push(I)}return $}function eg9(H){if(!("serviceConfig"in H))throw Error("Invalid service config choice: missing service config");let $={serviceConfig:u9D(H.serviceConfig)};if("clientLanguage"in H)if(Array.isArray(H.clientLanguage)){$.clientLanguage=[];for(let L of H.clientLanguage)if(typeof L==="string")$.clientLanguage.push(L);else throw Error("Invalid service config choice: invalid clientLanguage")}else throw Error("Invalid service config choice: invalid clientLanguage");if("clientHostname"in H)if(Array.isArray(H.clientHostname)){$.clientHostname=[];for(let L of H.clientHostname)if(typeof L==="string")$.clientHostname.push(L);else throw Error("Invalid service config choice: invalid clientHostname")}else throw Error("Invalid service config choice: invalid clientHostname");if("percentage"in H)if(typeof H.percentage==="number"&&0<=H.percentage&&H.percentage<=100)$.percentage=H.percentage;else throw Error("Invalid service config choice: invalid percentage");let A=["clientLanguage","percentage","clientHostname","serviceConfig"];for(let L in H)if(!A.includes(L))throw Error(`Invalid service config choice: unexpected field ${L}`);return $}function Hm9(H,$){if(!Array.isArray(H))throw Error("Invalid service config list");for(let A of H){let L=eg9(A);if(typeof L.percentage==="number"&&$>L.percentage)continue;if(Array.isArray(L.clientHostname)){let I=!1;for(let D of L.clientHostname)if(D===ig9.hostname())I=!0;if(!I)continue}if(Array.isArray(L.clientLanguage)){let I=!1;for(let D of L.clientLanguage)if(D===ng9)I=!0;if(!I)continue}return L.serviceConfig}throw Error("No matching service config found")}function $m9(H,$){for(let A of H)if(A.length>0&&A[0].startsWith("grpc_config=")){let L=A.join("").substring(12),I=JSON.parse(L);return Hm9(I,$)}return null}});var YP=z((k6$)=>{Object.defineProperty(k6$,"__esModule",{value:!0});k6$.ConnectivityState=void 0;var g9D;(function(H){H[H.IDLE=0]="IDLE",H[H.CONNECTING=1]="CONNECTING",H[H.READY=2]="READY",H[H.TRANSIENT_FAILURE=3]="TRANSIENT_FAILURE",H[H.SHUTDOWN=4]="SHUTDOWN"})(g9D||(k6$.ConnectivityState=g9D={}))});var pm=z((Qo)=>{Object.defineProperty(Qo,"__esModule",{value:!0});Qo.QueuePicker=Qo.UnavailablePicker=Qo.PickResultType=void 0;var Am9=dQ(),Lm9=I8(),u6$;(function(H){H[H.COMPLETE=0]="COMPLETE",H[H.QUEUE=1]="QUEUE",H[H.TRANSIENT_FAILURE=2]="TRANSIENT_FAILURE",H[H.DROP=3]="DROP"})(u6$||(Qo.PickResultType=u6$={}));class m9D{constructor(H){this.status=Object.assign({code:Lm9.Status.UNAVAILABLE,details:"No connection established",metadata:new Am9.Metadata},H)}pick(H){return{pickResultType:u6$.TRANSIENT_FAILURE,subchannel:null,status:this.status,onCallStarted:null,onCallEnded:null}}}Qo.UnavailablePicker=m9D;class p9D{constructor(H,$){this.loadBalancer=H,this.childPicker=$,this.calledExitIdle=!1}pick(H){if(!this.calledExitIdle)process.nextTick(()=>{this.loadBalancer.exitIdle()}),this.calledExitIdle=!0;if(this.childPicker)return this.childPicker.pick(H);else return{pickResultType:u6$.QUEUE,subchannel:null,status:null,onCallStarted:null,onCallEnded:null}}}Qo.QueuePicker=p9D});var FWH=z((m6$)=>{Object.defineProperty(m6$,"__esModule",{value:!0});m6$.BackoffTimeout=void 0;var Im9=I8(),Dm9=wG(),Bm9="backoff",fm9=1000,Em9=1.6,Mm9=120000,Gm9=0.2;function Um9(H,$){return Math.random()*($-H)+H}class g6${constructor(H,$){if(this.callback=H,this.initialDelay=fm9,this.multiplier=Em9,this.maxDelay=Mm9,this.jitter=Gm9,this.running=!1,this.hasRef=!0,this.startTime=new Date,this.endTime=new Date,this.id=g6$.getNextId(),$){if($.initialDelay)this.initialDelay=$.initialDelay;if($.multiplier)this.multiplier=$.multiplier;if($.jitter)this.jitter=$.jitter;if($.maxDelay)this.maxDelay=$.maxDelay}this.trace("constructed initialDelay="+this.initialDelay+" multiplier="+this.multiplier+" jitter="+this.jitter+" maxDelay="+this.maxDelay),this.nextDelay=this.initialDelay,this.timerId=setTimeout(()=>{},0),clearTimeout(this.timerId)}static getNextId(){return this.nextId++}trace(H){Dm9.trace(Im9.LogVerbosity.DEBUG,Bm9,"{"+this.id+"} "+H)}runTimer(H){var $,A;if(this.trace("runTimer(delay="+H+")"),this.endTime=this.startTime,this.endTime.setMilliseconds(this.endTime.getMilliseconds()+H),clearTimeout(this.timerId),this.timerId=setTimeout(()=>{this.trace("timer fired"),this.running=!1,this.callback()},H),!this.hasRef)(A=($=this.timerId).unref)===null||A===void 0||A.call($)}runOnce(){this.trace("runOnce()"),this.running=!0,this.startTime=new Date,this.runTimer(this.nextDelay);let H=Math.min(this.nextDelay*this.multiplier,this.maxDelay),$=H*this.jitter;this.nextDelay=H+Um9(-$,$)}stop(){this.trace("stop()"),clearTimeout(this.timerId),this.running=!1}reset(){if(this.trace("reset() running="+this.running),this.nextDelay=this.initialDelay,this.running){let H=new Date,$=this.startTime;if($.setMilliseconds($.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),H<$)this.runTimer($.getTime()-H.getTime());else this.running=!1}}isRunning(){return this.running}ref(){var H,$;this.hasRef=!0,($=(H=this.timerId).ref)===null||$===void 0||$.call(H)}unref(){var H,$;this.hasRef=!1,($=(H=this.timerId).unref)===null||$===void 0||$.call(H)}getEndTime(){return this.endTime}}m6$.BackoffTimeout=g6$;g6$.nextId=0});var d6$=z((p6$)=>{Object.defineProperty(p6$,"__esModule",{value:!0});p6$.ChildLoadBalancerHandler=void 0;var Xm9=Ko(),Jm9=YP(),Fm9="child_load_balancer_helper";class d9D{constructor(H){this.channelControlHelper=H,this.currentChild=null,this.pendingChild=null,this.latestConfig=null,this.ChildPolicyHelper=class{constructor($){this.parent=$,this.child=null}createSubchannel($,A){return this.parent.channelControlHelper.createSubchannel($,A)}updateState($,A,L){var I;if(this.calledByPendingChild()){if($===Jm9.ConnectivityState.CONNECTING)return;(I=this.parent.currentChild)===null||I===void 0||I.destroy(),this.parent.currentChild=this.parent.pendingChild,this.parent.pendingChild=null}else if(!this.calledByCurrentChild())return;this.parent.channelControlHelper.updateState($,A,L)}requestReresolution(){var $;let A=($=this.parent.pendingChild)!==null&&$!==void 0?$:this.parent.currentChild;if(this.child===A)this.parent.channelControlHelper.requestReresolution()}setChild($){this.child=$}addChannelzChild($){this.parent.channelControlHelper.addChannelzChild($)}removeChannelzChild($){this.parent.channelControlHelper.removeChannelzChild($)}calledByPendingChild(){return this.child===this.parent.pendingChild}calledByCurrentChild(){return this.child===this.parent.currentChild}}}configUpdateRequiresNewPolicyInstance(H,$){return H.getLoadBalancerName()!==$.getLoadBalancerName()}updateAddressList(H,$,A,L){let I;if(this.currentChild===null||this.latestConfig===null||this.configUpdateRequiresNewPolicyInstance(this.latestConfig,$)){let D=new this.ChildPolicyHelper(this),B=(0,Xm9.createLoadBalancer)($,D);if(D.setChild(B),this.currentChild===null)this.currentChild=B,I=this.currentChild;else{if(this.pendingChild)this.pendingChild.destroy();this.pendingChild=B,I=this.pendingChild}}else if(this.pendingChild===null)I=this.currentChild;else I=this.pendingChild;return this.latestConfig=$,I.updateAddressList(H,$,A,L)}exitIdle(){if(this.currentChild){if(this.currentChild.exitIdle(),this.pendingChild)this.pendingChild.exitIdle()}}resetBackoff(){if(this.currentChild){if(this.currentChild.resetBackoff(),this.pendingChild)this.pendingChild.resetBackoff()}}destroy(){if(this.currentChild)this.currentChild.destroy(),this.currentChild=null;if(this.pendingChild)this.pendingChild.destroy(),this.pendingChild=null}getTypeName(){return Fm9}}p6$.ChildLoadBalancerHandler=d9D});var n9D=z((c6$)=>{Object.defineProperty(c6$,"__esModule",{value:!0});c6$.ResolvingLoadBalancer=void 0;var Km9=Ko(),Qm9=F_A(),uC=YP(),c9D=sx(),gvH=pm(),Wm9=FWH(),K_A=I8(),Vm9=dQ(),Pm9=wG(),_m9=I8(),Cm9=CP(),Ym9=d6$(),wm9="resolving_load_balancer";function l9D(H){Pm9.trace(_m9.LogVerbosity.DEBUG,wm9,H)}var Zm9=["SERVICE_AND_METHOD","SERVICE","EMPTY"];function qm9(H,$,A,L){for(let I of A.name)switch(L){case"EMPTY":if(!I.service&&!I.method)return!0;break;case"SERVICE":if(I.service===H&&!I.method)return!0;break;case"SERVICE_AND_METHOD":if(I.service===H&&I.method===$)return!0}return!1}function Tm9(H,$,A,L){for(let I of A)if(qm9(H,$,I,L))return I;return null}function zm9(H){return{invoke($,A){var L,I;let D=$.split("/").filter((E)=>E.length>0),B=(L=D[0])!==null&&L!==void 0?L:"",f=(I=D[1])!==null&&I!==void 0?I:"";if(H&&H.methodConfig)for(let E of Zm9){let M=Tm9(B,f,H.methodConfig,E);if(M)return{methodConfig:M,pickInformation:{},status:K_A.Status.OK,dynamicFilterFactories:[]}}return{methodConfig:{name:[]},pickInformation:{},status:K_A.Status.OK,dynamicFilterFactories:[]}},unref(){}}}class i9D{constructor(H,$,A,L,I){if(this.target=H,this.channelControlHelper=$,this.channelOptions=A,this.onSuccessfulResolution=L,this.onFailedResolution=I,this.latestChildState=uC.ConnectivityState.IDLE,this.latestChildPicker=new gvH.QueuePicker(this),this.latestChildErrorMessage=null,this.currentState=uC.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1,A["grpc.service_config"])this.defaultServiceConfig=(0,Qm9.validateServiceConfig)(JSON.parse(A["grpc.service_config"]));else this.defaultServiceConfig={loadBalancingConfig:[],methodConfig:[]};this.updateState(uC.ConnectivityState.IDLE,new gvH.QueuePicker(this),null),this.childLoadBalancer=new Ym9.ChildLoadBalancerHandler({createSubchannel:$.createSubchannel.bind($),requestReresolution:()=>{if(this.backoffTimeout.isRunning())l9D("requestReresolution delayed by backoff timer until "+this.backoffTimeout.getEndTime().toISOString()),this.continueResolving=!0;else this.updateResolution()},updateState:(B,f,E)=>{this.latestChildState=B,this.latestChildPicker=f,this.latestChildErrorMessage=E,this.updateState(B,f,E)},addChannelzChild:$.addChannelzChild.bind($),removeChannelzChild:$.removeChannelzChild.bind($)}),this.innerResolver=(0,c9D.createResolver)(H,this.handleResolverResult.bind(this),A);let D={initialDelay:A["grpc.initial_reconnect_backoff_ms"],maxDelay:A["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new Wm9.BackoffTimeout(()=>{if(this.continueResolving)this.updateResolution(),this.continueResolving=!1;else this.updateState(this.latestChildState,this.latestChildPicker,this.latestChildErrorMessage)},D),this.backoffTimeout.unref()}handleResolverResult(H,$,A,L){var I,D;this.backoffTimeout.stop(),this.backoffTimeout.reset();let B=!0,f=null;if(A===null)f=this.defaultServiceConfig;else if(A.ok)f=A.value;else if(this.previousServiceConfig!==null)f=this.previousServiceConfig;else B=!1,this.handleResolutionFailure(A.error);if(f!==null){let E=(I=f===null||f===void 0?void 0:f.loadBalancingConfig)!==null&&I!==void 0?I:[],M=(0,Km9.selectLbConfigFromList)(E,!0);if(M===null)B=!1,this.handleResolutionFailure({code:K_A.Status.UNAVAILABLE,details:"All load balancer options in service config are not compatible",metadata:new Vm9.Metadata});else B=this.childLoadBalancer.updateAddressList(H,M,Object.assign(Object.assign({},this.channelOptions),$),L)}if(B)this.onSuccessfulResolution(f,(D=$[c9D.CHANNEL_ARGS_CONFIG_SELECTOR_KEY])!==null&&D!==void 0?D:zm9(f));return B}updateResolution(){if(this.innerResolver.updateResolution(),this.currentState===uC.ConnectivityState.IDLE)this.updateState(uC.ConnectivityState.CONNECTING,this.latestChildPicker,this.latestChildErrorMessage);this.backoffTimeout.runOnce()}updateState(H,$,A){if(l9D((0,Cm9.uriToString)(this.target)+" "+uC.ConnectivityState[this.currentState]+" -> "+uC.ConnectivityState[H]),H===uC.ConnectivityState.IDLE)$=new gvH.QueuePicker(this,$);this.currentState=H,this.channelControlHelper.updateState(H,$,A)}handleResolutionFailure(H){if(this.latestChildState===uC.ConnectivityState.IDLE)this.updateState(uC.ConnectivityState.TRANSIENT_FAILURE,new gvH.UnavailablePicker(H),H.details),this.onFailedResolution(H)}exitIdle(){if(this.currentState===uC.ConnectivityState.IDLE||this.currentState===uC.ConnectivityState.TRANSIENT_FAILURE)if(this.backoffTimeout.isRunning())this.continueResolving=!0;else this.updateResolution();this.childLoadBalancer.exitIdle()}updateAddressList(H,$){throw Error("updateAddressList not supported on ResolvingLoadBalancer")}resetBackoff(){this.backoffTimeout.reset(),this.childLoadBalancer.resetBackoff()}destroy(){this.childLoadBalancer.destroy(),this.innerResolver.destroy(),this.backoffTimeout.reset(),this.backoffTimeout.stop(),this.latestChildState=uC.ConnectivityState.IDLE,this.latestChildPicker=new gvH.QueuePicker(this),this.currentState=uC.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1}getTypeName(){return"resolving_load_balancer"}}c6$.ResolvingLoadBalancer=i9D});var r9D=z((mvH)=>{Object.defineProperty(mvH,"__esModule",{value:!0});mvH.recognizedOptions=void 0;mvH.channelOptionsEqual=Nm9;mvH.recognizedOptions={"grpc.ssl_target_name_override":!0,"grpc.primary_user_agent":!0,"grpc.secondary_user_agent":!0,"grpc.default_authority":!0,"grpc.keepalive_time_ms":!0,"grpc.keepalive_timeout_ms":!0,"grpc.keepalive_permit_without_calls":!0,"grpc.service_config":!0,"grpc.max_concurrent_streams":!0,"grpc.initial_reconnect_backoff_ms":!0,"grpc.max_reconnect_backoff_ms":!0,"grpc.use_local_subchannel_pool":!0,"grpc.max_send_message_length":!0,"grpc.max_receive_message_length":!0,"grpc.enable_http_proxy":!0,"grpc.enable_channelz":!0,"grpc.dns_min_time_between_resolutions_ms":!0,"grpc.enable_retries":!0,"grpc.per_rpc_retry_buffer_size":!0,"grpc.retry_buffer_size":!0,"grpc.max_connection_age_ms":!0,"grpc.max_connection_age_grace_ms":!0,"grpc-node.max_session_memory":!0,"grpc.service_config_disable_resolution":!0,"grpc.client_idle_timeout_ms":!0,"grpc-node.tls_enable_trace":!0,"grpc.lb.ring_hash.ring_size_cap":!0,"grpc-node.retry_max_attempts_limit":!0,"grpc-node.flow_control_window":!0,"grpc.server_call_metric_recording":!0};function Nm9(H,$){let A=Object.keys(H).sort(),L=Object.keys($).sort();if(A.length!==L.length)return!1;for(let I=0;I<A.length;I+=1){if(A[I]!==L[I])return!1;if(H[A[I]]!==$[L[I]])return!1}return!0}});var gC=z((ex)=>{Object.defineProperty(ex,"__esModule",{value:!0});ex.EndpointMap=void 0;ex.isTcpSubchannelAddress=dvH;ex.subchannelAddressEqual=l6$;ex.subchannelAddressToString=o9D;ex.stringToSubchannelAddress=xm9;ex.endpointEqual=Sm9;ex.endpointToString=jm9;ex.endpointHasAddress=t9D;var a9D=require("net");function dvH(H){return"port"in H}function l6$(H,$){if(!H&&!$)return!0;if(!H||!$)return!1;if(dvH(H))return dvH($)&&H.host===$.host&&H.port===$.port;else return!dvH($)&&H.path===$.path}function o9D(H){if(dvH(H))if((0,a9D.isIPv6)(H.host))return"["+H.host+"]:"+H.port;else return H.host+":"+H.port;else return H.path}var Om9=443;function xm9(H,$){if((0,a9D.isIP)(H))return{host:H,port:$!==null&&$!==void 0?$:Om9};else return{path:H}}function Sm9(H,$){if(H.addresses.length!==$.addresses.length)return!1;for(let A=0;A<H.addresses.length;A++)if(!l6$(H.addresses[A],$.addresses[A]))return!1;return!0}function jm9(H){return"["+H.addresses.map(o9D).join(", ")+"]"}function t9D(H,$){for(let A of H.addresses)if(l6$(A,$))return!0;return!1}function pvH(H,$){if(H.addresses.length!==$.addresses.length)return!1;for(let A of H.addresses){let L=!1;for(let I of $.addresses)if(l6$(A,I)){L=!0;break}if(!L)return!1}return!0}class s9D{constructor(){this.map=new Set}get size(){return this.map.size}getForSubchannelAddress(H){for(let $ of this.map)if(t9D($.key,H))return $.value;return}deleteMissing(H){let $=[];for(let A of this.map){let L=!1;for(let I of H)if(pvH(I,A.key))L=!0;if(!L)$.push(A.value),this.map.delete(A)}return $}get(H){for(let $ of this.map)if(pvH(H,$.key))return $.value;return}set(H,$){for(let A of this.map)if(pvH(H,A.key)){A.value=$;return}this.map.add({key:H,value:$})}delete(H){for(let $ of this.map)if(pvH(H,$.key)){this.map.delete($);return}}has(H){for(let $ of this.map)if(pvH(H,$.key))return!0;return!1}clear(){this.map.clear()}*keys(){for(let H of this.map)yield H.key}*values(){for(let H of this.map)yield H.value}*entries(){for(let H of this.map)yield[H.key,H.value]}}ex.EndpointMap=s9D});var B1D=z((W_A)=>{Object.defineProperty(W_A,"t",{value:!0});class Q_A{constructor(H,$,A=1){this.i=void 0,this.h=void 0,this.o=void 0,this.u=H,this.l=$,this.p=A}I(){let H=this,$=H.o.o===H;if($&&H.p===1)H=H.h;else if(H.i){H=H.i;while(H.h)H=H.h}else{if($)return H.o;let A=H.o;while(A.i===H)H=A,A=H.o;H=A}return H}B(){let H=this;if(H.h){H=H.h;while(H.i)H=H.i;return H}else{let $=H.o;while($.h===H)H=$,$=H.o;if(H.h!==$)return $;else return H}}_(){let H=this.o,$=this.h,A=$.i;if(H.o===this)H.o=$;else if(H.i===this)H.i=$;else H.h=$;if($.o=H,$.i=this,this.o=$,this.h=A,A)A.o=this;return $}g(){let H=this.o,$=this.i,A=$.h;if(H.o===this)H.o=$;else if(H.i===this)H.i=$;else H.h=$;if($.o=H,$.h=this,this.o=$,this.i=A,A)A.o=this;return $}}class e9D extends Q_A{constructor(){super(...arguments);this.M=1}_(){let H=super._();return this.O(),H.O(),H}g(){let H=super.g();return this.O(),H.O(),H}O(){if(this.M=1,this.i)this.M+=this.i.M;if(this.h)this.M+=this.h.M}}class H1D{constructor(H=0){this.iteratorType=H}equals(H){return this.T===H.T}}class $1D{constructor(){this.m=0}get length(){return this.m}size(){return this.m}empty(){return this.m===0}}class A1D extends $1D{}function I0H(){throw RangeError("Iterator access denied!")}class L1D extends A1D{constructor(H=function(A,L){if(A<L)return-1;if(A>L)return 1;return 0},$=!1){super();this.v=void 0,this.A=H,this.enableIndex=$,this.N=$?e9D:Q_A,this.C=new this.N}R(H,$){let A=this.C;while(H){let L=this.A(H.u,$);if(L<0)H=H.h;else if(L>0)A=H,H=H.i;else return H}return A}K(H,$){let A=this.C;while(H)if(this.A(H.u,$)<=0)H=H.h;else A=H,H=H.i;return A}L(H,$){let A=this.C;while(H){let L=this.A(H.u,$);if(L<0)A=H,H=H.h;else if(L>0)H=H.i;else return H}return A}k(H,$){let A=this.C;while(H)if(this.A(H.u,$)<0)A=H,H=H.h;else H=H.i;return A}P(H){while(!0){let $=H.o;if($===this.C)return;if(H.p===1){H.p=0;return}if(H===$.i){let A=$.h;if(A.p===1)if(A.p=0,$.p=1,$===this.v)this.v=$._();else $._();else if(A.h&&A.h.p===1){if(A.p=$.p,$.p=0,A.h.p=0,$===this.v)this.v=$._();else $._();return}else if(A.i&&A.i.p===1)A.p=1,A.i.p=0,A.g();else A.p=1,H=$}else{let A=$.i;if(A.p===1)if(A.p=0,$.p=1,$===this.v)this.v=$.g();else $.g();else if(A.i&&A.i.p===1){if(A.p=$.p,$.p=0,A.i.p=0,$===this.v)this.v=$.g();else $.g();return}else if(A.h&&A.h.p===1)A.p=1,A.h.p=0,A._();else A.p=1,H=$}}}S(H){if(this.m===1){this.clear();return}let $=H;while($.i||$.h){if($.h){$=$.h;while($.i)$=$.i}else $=$.i;let L=H.u;H.u=$.u,$.u=L;let I=H.l;H.l=$.l,$.l=I,H=$}if(this.C.i===$)this.C.i=$.o;else if(this.C.h===$)this.C.h=$.o;this.P($);let A=$.o;if($===A.i)A.i=void 0;else A.h=void 0;if(this.m-=1,this.v.p=0,this.enableIndex)while(A!==this.C)A.M-=1,A=A.o}U(H){let $=typeof H==="number"?H:void 0,A=typeof H==="function"?H:void 0,L=typeof H>"u"?[]:void 0,I=0,D=this.v,B=[];while(B.length||D)if(D)B.push(D),D=D.i;else{if(D=B.pop(),I===$)return D;L&&L.push(D),A&&A(D,I,this),I+=1,D=D.h}return L}j(H){while(!0){let $=H.o;if($.p===0)return;let A=$.o;if($===A.i){let L=A.h;if(L&&L.p===1){if(L.p=$.p=0,A===this.v)return;A.p=1,H=A;continue}else if(H===$.h){if(H.p=0,H.i)H.i.o=$;if(H.h)H.h.o=A;if($.h=H.i,A.i=H.h,H.i=$,H.h=A,A===this.v)this.v=H,this.C.o=H;else{let I=A.o;if(I.i===A)I.i=H;else I.h=H}H.o=A.o,$.o=H,A.o=H,A.p=1}else{if($.p=0,A===this.v)this.v=A.g();else A.g();A.p=1;return}}else{let L=A.i;if(L&&L.p===1){if(L.p=$.p=0,A===this.v)return;A.p=1,H=A;continue}else if(H===$.i){if(H.p=0,H.i)H.i.o=A;if(H.h)H.h.o=$;if(A.h=H.i,$.i=H.h,H.i=A,H.h=$,A===this.v)this.v=H,this.C.o=H;else{let I=A.o;if(I.i===A)I.i=H;else I.h=H}H.o=A.o,$.o=H,A.o=H,A.p=1}else{if($.p=0,A===this.v)this.v=A._();else A._();A.p=1;return}}if(this.enableIndex)$.O(),A.O(),H.O();return}}q(H,$,A){if(this.v===void 0)return this.m+=1,this.v=new this.N(H,$,0),this.v.o=this.C,this.C.o=this.C.i=this.C.h=this.v,this.m;let L,I=this.C.i,D=this.A(I.u,H);if(D===0)return I.l=$,this.m;else if(D>0)I.i=new this.N(H,$),I.i.o=I,L=I.i,this.C.i=L;else{let B=this.C.h,f=this.A(B.u,H);if(f===0)return B.l=$,this.m;else if(f<0)B.h=new this.N(H,$),B.h.o=B,L=B.h,this.C.h=L;else{if(A!==void 0){let E=A.T;if(E!==this.C){let M=this.A(E.u,H);if(M===0)return E.l=$,this.m;else if(M>0){let G=E.I(),U=this.A(G.u,H);if(U===0)return G.l=$,this.m;else if(U<0)if(L=new this.N(H,$),G.h===void 0)G.h=L,L.o=G;else E.i=L,L.o=E}}}if(L===void 0){L=this.v;while(!0){let E=this.A(L.u,H);if(E>0){if(L.i===void 0){L.i=new this.N(H,$),L.i.o=L,L=L.i;break}L=L.i}else if(E<0){if(L.h===void 0){L.h=new this.N(H,$),L.h.o=L,L=L.h;break}L=L.h}else return L.l=$,this.m}}}}if(this.enableIndex){let B=L.o;while(B!==this.C)B.M+=1,B=B.o}return this.j(L),this.m+=1,this.m}H(H,$){while(H){let A=this.A(H.u,$);if(A<0)H=H.h;else if(A>0)H=H.i;else return H}return H||this.C}clear(){this.m=0,this.v=void 0,this.C.o=void 0,this.C.i=this.C.h=void 0}updateKeyByIterator(H,$){let A=H.T;if(A===this.C)I0H();if(this.m===1)return A.u=$,!0;let L=A.B().u;if(A===this.C.i){if(this.A(L,$)>0)return A.u=$,!0;return!1}let I=A.I().u;if(A===this.C.h){if(this.A(I,$)<0)return A.u=$,!0;return!1}if(this.A(I,$)>=0||this.A(L,$)<=0)return!1;return A.u=$,!0}eraseElementByPos(H){if(H<0||H>this.m-1)throw RangeError();let $=this.U(H);return this.S($),this.m}eraseElementByKey(H){if(this.m===0)return!1;let $=this.H(this.v,H);if($===this.C)return!1;return this.S($),!0}eraseElementByIterator(H){let $=H.T;if($===this.C)I0H();let A=$.h===void 0;if(H.iteratorType===0){if(A)H.next()}else if(!A||$.i===void 0)H.next();return this.S($),H}getHeight(){if(this.m===0)return 0;function H($){if(!$)return 0;return Math.max(H($.i),H($.h))+1}return H(this.v)}}class I1D extends H1D{constructor(H,$,A){super(A);if(this.T=H,this.C=$,this.iteratorType===0)this.pre=function(){if(this.T===this.C.i)I0H();return this.T=this.T.I(),this},this.next=function(){if(this.T===this.C)I0H();return this.T=this.T.B(),this};else this.pre=function(){if(this.T===this.C.h)I0H();return this.T=this.T.B(),this},this.next=function(){if(this.T===this.C)I0H();return this.T=this.T.I(),this}}get index(){let H=this.T,$=this.C.o;if(H===this.C){if($)return $.M-1;return 0}let A=0;if(H.i)A+=H.i.M;while(H!==$){let L=H.o;if(H===L.h){if(A+=1,L.i)A+=L.i.M}H=L}return A}isAccessible(){return this.T!==this.C}}class HS extends I1D{constructor(H,$,A,L){super(H,$,L);this.container=A}get pointer(){if(this.T===this.C)I0H();let H=this;return new Proxy([],{get($,A){if(A==="0")return H.T.u;else if(A==="1")return H.T.l;return $[0]=H.T.u,$[1]=H.T.l,$[A]},set($,A,L){if(A!=="1")throw TypeError("prop must be 1");return H.T.l=L,!0}})}copy(){return new HS(this.T,this.C,this.container,this.iteratorType)}}class D1D extends L1D{constructor(H=[],$,A){super($,A);let L=this;H.forEach(function(I){L.setElement(I[0],I[1])})}begin(){return new HS(this.C.i||this.C,this.C,this)}end(){return new HS(this.C,this.C,this)}rBegin(){return new HS(this.C.h||this.C,this.C,this,1)}rEnd(){return new HS(this.C,this.C,this,1)}front(){if(this.m===0)return;let H=this.C.i;return[H.u,H.l]}back(){if(this.m===0)return;let H=this.C.h;return[H.u,H.l]}lowerBound(H){let $=this.R(this.v,H);return new HS($,this.C,this)}upperBound(H){let $=this.K(this.v,H);return new HS($,this.C,this)}reverseLowerBound(H){let $=this.L(this.v,H);return new HS($,this.C,this)}reverseUpperBound(H){let $=this.k(this.v,H);return new HS($,this.C,this)}forEach(H){this.U(function($,A,L){H([$.u,$.l],A,L)})}setElement(H,$,A){return this.q(H,$,A)}getElementByPos(H){if(H<0||H>this.m-1)throw RangeError();let $=this.U(H);return[$.u,$.l]}find(H){let $=this.H(this.v,H);return new HS($,this.C,this)}getElementByKey(H){return this.H(this.v,H).l}union(H){let $=this;return H.forEach(function(A){$.setElement(A[0],A[1])}),this.m}*[Symbol.iterator](){let H=this.m,$=this.U();for(let A=0;A<H;++A){let L=$[A];yield[L.u,L.l]}}}W_A.OrderedMap=D1D});var n6$=z((i6$)=>{Object.defineProperty(i6$,"__esModule",{value:!0});i6$.registerAdminService=Rm9;i6$.addAdminServicesToServer=ym9;var f1D=[];function Rm9(H,$){f1D.push({getServiceDefinition:H,getHandlers:$})}function ym9(H){for(let{getServiceDefinition:$,getHandlers:A}of f1D)H.addService($(),A())}});var X1D=z(($S)=>{Object.defineProperty($S,"__esModule",{value:!0});$S.ClientDuplexStreamImpl=$S.ClientWritableStreamImpl=$S.ClientReadableStreamImpl=$S.ClientUnaryCallImpl=void 0;$S.callErrorFromStatus=hm9;var vm9=require("events"),V_A=require("stream"),cvH=I8();function hm9(H,$){let A=`${H.code} ${cvH.Status[H.code]}: ${H.details}`,I=`${Error(A).stack}
          `]]))[0];return Q$9(D)}throw Error("Unable to execute PowerShell. Ensure that it is installed in your system")}async getToken(H,$={}){return T4.withSpan(`${this.constructor.name}.getToken`,$,async()=>{let A=bV(this.tenantId,$,this.additionallyAllowedTenantIds),L=typeof H==="string"?H:H[0];if(A)r_(Vg,A);try{BJH(L,Vg),Vg.getToken.info(`Using the scope ${L}`);let I=SG$(L),D=await this.getAzurePowerShellAccessToken(I,A,this.timeout);return Vg.getToken.info(PQ(H)),{token:D.Token,expiresOnTimestamp:new Date(D.ExpiresOn).getTime(),tokenType:"Bearer"}}catch(I){if(K$9(I)){let B=new Q0(_UA.installed);throw Vg.getToken.info(NE(L,B)),B}else if(F$9(I)){let B=new Q0(_UA.login);throw Vg.getToken.info(NE(L,B)),B}let D=new Q0(`${I}. ${_UA.troubleshoot}`);throw Vg.getToken.info(NE(L,D)),D}})}}async function Q$9(H){let $=/{[^{}]*}/g,A=H.match($),L=H;if(A)try{for(let I of A)try{let D=JSON.parse(I);if(D===null||D===void 0?void 0:D.Token){if(L=L.replace(I,""),L)Vg.getToken.warning(L);return D}}catch(D){continue}}catch(I){throw Error(`Unable to parse the output of PowerShell. Received output: ${H}`)}throw Error(`No access token found in the output. Received output: ${H}`)}var Vg,xQI=!1,jQI,_UA,F$9=(H)=>H.message.match(`(.*)${jQI.login}(.*)`),K$9=(H)=>H.message.match(jQI.installed),CUA;var RQI=K(()=>{RO();DJ();fJH();hV();NQI();b2();Vg=af("AzurePowerShellCredential");jQI={login:"Run Connect-AzAccount to login",installed:"The specified module 'Az.Accounts' with version '2.2.0' was not loaded because no valid module file was found in any module directory"},_UA={login:"Please run 'Connect-AzAccount' from PowerShell to authenticate before using this credential.",installed:`The 'Az.Account' module >= 2.2.0 is not installed. Install the Azure Az PowerShell module with: "Install-Module -Name Az -Scope CurrentUser -Repository PSGallery -Force".`,troubleshoot:"To troubleshoot, visit https://aka.ms/azsdk/js/identity/powershellcredential/troubleshoot."},CUA=[SQI("pwsh")];if(xQI)CUA.push(SQI("powershell"))});class ZUA{constructor(...H){this._sources=[],this._sources=H}async getToken(H,$={}){let{token:A}=await this.getTokenInternal(H,$);return A}async getTokenInternal(H,$={}){let A=null,L,I=[];return T4.withSpan("ChainedTokenCredential.getToken",$,async(D)=>{for(let B=0;B<this._sources.length&&A===null;B++)try{A=await this._sources[B].getToken(H,D),L=this._sources[B]}catch(f){if(f.name==="CredentialUnavailableError"||f.name==="AuthenticationRequiredError")I.push(f);else throw wUA.getToken.info(NE(H,f)),f}if(!A&&I.length>0){let B=new FfA(I,"ChainedTokenCredential authentication failed.");throw wUA.getToken.info(NE(H,B)),B}if(wUA.getToken.info(`Result for ${L.constructor.name}: ${PQ(H)}`),A===null)throw new Q0("Failed to retrieve a valid token");return{token:A,successfulCredential:L}})}}var wUA;var yQI=K(()=>{hV();DJ();b2();wUA=af("ChainedTokenCredential")});class qUA{constructor(H,$,A,L={}){if(!H||!$)throw Error(`${mxH}: tenantId and clientId are required parameters.`);this.tenantId=H,this.additionallyAllowedTenantIds=a_(L===null||L===void 0?void 0:L.additionallyAllowedTenants),this.sendCertificateChain=L.sendCertificateChain,this.certificateConfiguration=Object.assign({},typeof A==="string"?{certificatePath:A}:A);let I=this.certificateConfiguration.certificate,D=this.certificateConfiguration.certificatePath;if(!this.certificateConfiguration||!(I||D))throw Error(`${mxH}: Provide either a PEM certificate in string form, or the path to that certificate in the filesystem. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);if(I&&D)throw Error(`${mxH}: To avoid unexpected behaviors, providing both the contents of a PEM certificate and the path to a PEM certificate is forbidden. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);this.msalClient=Xr($,H,Object.assign(Object.assign({},L),{logger:vQI,tokenCredentialOptions:L}))}async getToken(H,$={}){return T4.withSpan(`${mxH}.getToken`,$,async(A)=>{A.tenantId=bV(this.tenantId,A,this.additionallyAllowedTenantIds,vQI);let L=Array.isArray(H)?H:[H],I=await this.buildClientCertificate();return this.msalClient.getTokenByClientCertificate(L,I,A)})}async buildClientCertificate(){var H;let $=await W$9(this.certificateConfiguration,(H=this.sendCertificateChain)!==null&&H!==void 0?H:!1),A;if(this.certificateConfiguration.certificatePassword!==void 0)A=pxH.createPrivateKey({key:$.certificateContents,passphrase:this.certificateConfiguration.certificatePassword,format:"pem"}).export({format:"pem",type:"pkcs8"}).toString();else A=$.certificateContents;return{thumbprint:$.thumbprint,thumbprintSha256:$.thumbprintSha256,privateKey:A,x5c:$.x5c}}}async function W$9(H,$){let{certificate:A,certificatePath:L}=H,I=A||await hQI.readFile(L,"utf8"),D=$?I:void 0,B=/(-+BEGIN CERTIFICATE-+)(\n\r?|\r\n?)([A-Za-z0-9+/\n\r]+=*)(\n\r?|\r\n?)(-+END CERTIFICATE-+)/g,f=[],E;do if(E=B.exec(I),E)f.push(E[3]);while(E);if(f.length===0)throw Error("The file at the specified path does not contain a PEM-encoded certificate.");let M=pxH.createHash("sha1").update(Buffer.from(f[0],"base64")).digest("hex").toUpperCase(),G=pxH.createHash("sha256").update(Buffer.from(f[0],"base64")).digest("hex").toUpperCase();return{certificateContents:I,thumbprintSha256:G,thumbprint:M,x5c:D}}var pxH,hQI,mxH="ClientCertificateCredential",vQI;var bQI=K(()=>{uxH();RO();DJ();b2();pxH=require("crypto"),hQI=require("fs/promises"),vQI=af(mxH)});class TUA{constructor(H,$,A,L={}){if(!H)throw new Q0("ClientSecretCredential: tenantId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");if(!$)throw new Q0("ClientSecretCredential: clientId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");if(!A)throw new Q0("ClientSecretCredential: clientSecret is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");this.clientSecret=A,this.tenantId=H,this.additionallyAllowedTenantIds=a_(L===null||L===void 0?void 0:L.additionallyAllowedTenants),this.msalClient=Xr($,H,Object.assign(Object.assign({},L),{logger:kQI,tokenCredentialOptions:L}))}async getToken(H,$={}){return T4.withSpan(`${this.constructor.name}.getToken`,$,async(A)=>{A.tenantId=bV(this.tenantId,A,this.additionallyAllowedTenantIds,kQI);let L=xG$(H);return this.msalClient.getTokenByClientSecret(L,this.clientSecret,A)})}}var kQI;var uQI=K(()=>{uxH();RO();hV();DJ();fJH();b2();kQI=af("ClientSecretCredential")});class zUA{constructor(H,$,A,L,I={}){if(!H)throw new Q0("UsernamePasswordCredential: tenantId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!$)throw new Q0("UsernamePasswordCredential: clientId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!A)throw new Q0("UsernamePasswordCredential: username is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!L)throw new Q0("UsernamePasswordCredential: password is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");this.tenantId=H,this.additionallyAllowedTenantIds=a_(I===null||I===void 0?void 0:I.additionallyAllowedTenants),this.username=A,this.password=L,this.msalClient=Xr($,this.tenantId,Object.assign(Object.assign({},I),{tokenCredentialOptions:I!==null&&I!==void 0?I:{}}))}async getToken(H,$={}){return T4.withSpan(`${this.constructor.name}.getToken`,$,async(A)=>{A.tenantId=bV(this.tenantId,A,this.additionallyAllowedTenantIds,V$9);let L=xG$(H);return this.msalClient.getTokenByUsernamePassword(L,this.username,this.password,A)})}}var V$9;var gQI=K(()=>{uxH();RO();hV();DJ();fJH();b2();V$9=af("UsernamePasswordCredential")});function _$9(){var H;return((H=process.env.AZURE_ADDITIONALLY_ALLOWED_TENANTS)!==null&&H!==void 0?H:"").split(";")}function C$9(){var H;let $=((H=process.env.AZURE_CLIENT_SEND_CERTIFICATE_CHAIN)!==null&&H!==void 0?H:"").toLowerCase(),A=$==="true"||$==="1";return Pg.verbose(`AZURE_CLIENT_SEND_CERTIFICATE_CHAIN: ${process.env.AZURE_CLIENT_SEND_CERTIFICATE_CHAIN}; sendCertificateChain: ${A}`),A}class NUA{constructor(H){this._credential=void 0;let $=HE$(P$9).assigned.join(", ");Pg.info(`Found the following environment variables: ${$}`);let A=process.env.AZURE_TENANT_ID,L=process.env.AZURE_CLIENT_ID,I=process.env.AZURE_CLIENT_SECRET,D=_$9(),B=C$9(),f=Object.assign(Object.assign({},H),{additionallyAllowedTenantIds:D,sendCertificateChain:B});if(A)r_(Pg,A);if(A&&L&&I){Pg.info(`Invoking ClientSecretCredential with tenant ID: ${A}, clientId: ${L} and clientSecret: [REDACTED]`),this._credential=new TUA(A,L,I,f);return}let E=process.env.AZURE_CLIENT_CERTIFICATE_PATH,M=process.env.AZURE_CLIENT_CERTIFICATE_PASSWORD;if(A&&L&&E){Pg.info(`Invoking ClientCertificateCredential with tenant ID: ${A}, clientId: ${L} and certificatePath: ${E}`),this._credential=new qUA(A,L,{certificatePath:E,certificatePassword:M},f);return}let G=process.env.AZURE_USERNAME,U=process.env.AZURE_PASSWORD;if(A&&L&&G&&U)Pg.info(`Invoking UsernamePasswordCredential with tenant ID: ${A}, clientId: ${L} and username: ${G}`),Pg.warning("Environment is configured to use username and password authentication. This authentication method is deprecated, as it doesn't support multifactor authentication (MFA). Use a more secure credential. For more details, see https://aka.ms/azsdk/identity/mfa."),this._credential=new zUA(A,L,G,U,f)}async getToken(H,$={}){return T4.withSpan(`${jG$}.getToken`,$,async(A)=>{if(this._credential)try{let L=await this._credential.getToken(H,A);return Pg.getToken.info(PQ(H)),L}catch(L){let I=new kNH(400,{error:`${jG$} authentication failed. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.`,error_description:L.message.toString().split("More details:").join("")});throw Pg.getToken.info(NE(H,I)),I}throw new Q0(`${jG$} is unavailable. No underlying credential could be used. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.`)})}}var P$9,jG$="EnvironmentCredential",Pg;var mQI=K(()=>{hV();DJ();bQI();uQI();gQI();RO();b2();P$9=["AZURE_TENANT_ID","AZURE_CLIENT_ID","AZURE_CLIENT_SECRET","AZURE_CLIENT_CERTIFICATE_PATH","AZURE_CLIENT_CERTIFICATE_PASSWORD","AZURE_USERNAME","AZURE_PASSWORD","AZURE_ADDITIONALLY_ALLOWED_TENANTS","AZURE_CLIENT_SEND_CERTIFICATE_CHAIN"];Pg=af(jG$)});function Y$9(H={}){var $,A,L,I;($=H.retryOptions)!==null&&$!==void 0||(H.retryOptions={maxRetries:5,retryDelayInMs:800});let D=(A=H===null||H===void 0?void 0:H.managedIdentityClientId)!==null&&A!==void 0?A:process.env.AZURE_CLIENT_ID,B=(L=H===null||H===void 0?void 0:H.workloadIdentityClientId)!==null&&L!==void 0?L:D,f=H===null||H===void 0?void 0:H.managedIdentityResourceId,E=process.env.AZURE_FEDERATED_TOKEN_FILE,M=(I=H===null||H===void 0?void 0:H.tenantId)!==null&&I!==void 0?I:process.env.AZURE_TENANT_ID;if(f){let G=Object.assign(Object.assign({},H),{resourceId:f});return new DJH(G)}if(E&&B){let G=Object.assign(Object.assign({},H),{tenantId:M});return new DJH(B,G)}if(D){let G=Object.assign(Object.assign({},H),{clientId:D});return new DJH(G)}return new DJH(H)}function w$9(H){var $,A,L;let I=($=H===null||H===void 0?void 0:H.managedIdentityClientId)!==null&&$!==void 0?$:process.env.AZURE_CLIENT_ID,D=(A=H===null||H===void 0?void 0:H.workloadIdentityClientId)!==null&&A!==void 0?A:I,B=process.env.AZURE_FEDERATED_TOKEN_FILE,f=(L=H===null||H===void 0?void 0:H.tenantId)!==null&&L!==void 0?L:process.env.AZURE_TENANT_ID;if(B&&D){let E=Object.assign(Object.assign({},H),{tenantId:f,clientId:D,tokenFilePath:B});return new vIH(E)}if(f){let E=Object.assign(Object.assign({},H),{tenantId:f});return new vIH(E)}return new vIH(H)}function Z$9(H={}){let $=H.processTimeoutInMs;return new PUA(Object.assign({processTimeoutInMs:$},H))}function q$9(H={}){let $=H.processTimeoutInMs;return new VUA(Object.assign({processTimeoutInMs:$},H))}function T$9(H={}){let $=H.processTimeoutInMs;return new YUA(Object.assign({processTimeoutInMs:$},H))}function z$9(H={}){return new NUA(H)}class pQI{constructor(H,$){this.credentialName=H,this.credentialUnavailableErrorMessage=$}getToken(){return OUA.getToken.info(`Skipping ${this.credentialName}, reason: ${this.credentialUnavailableErrorMessage}`),Promise.resolve(null)}}var OUA,RG$;var dQI=K(()=>{VQI();YQI();qQI();RQI();yQI();mQI();KUA();DJ();OUA=af("DefaultAzureCredential");RG$=class RG$ extends ZUA{constructor(H){let $=process.env.AZURE_TOKEN_CREDENTIALS?process.env.AZURE_TOKEN_CREDENTIALS.trim().toLowerCase():void 0,A=[q$9,T$9,Z$9],L=[z$9,w$9,Y$9],I=[];if($)switch($){case"dev":I=A;break;case"prod":I=L;break;default:{let B=`Invalid value for AZURE_TOKEN_CREDENTIALS = ${process.env.AZURE_TOKEN_CREDENTIALS}. Valid values are 'prod' or 'dev'.`;throw OUA.warning(B),Error(B)}}else I=[...L,...A];let D=I.map((B)=>{try{return B(H)}catch(f){return OUA.warning(`Skipped ${B.name} because of an error creating the credential: ${f}`),new pQI(B.name,f.message)}});super(...D)}}});function xUA(H,$,A){let{abortSignal:L,tracingOptions:I}=A||{},D=nNH();D.addPolicy(eNH({credential:H,scopes:$}));async function B(){var f;let M=(f=(await D.sendRequest({sendRequest:(G)=>Promise.resolve({request:G,status:200,headers:G.headers})},hO({url:"https://example.com",abortSignal:L,tracingOptions:I}))).headers.get("authorization"))===null||f===void 0?void 0:f.split(" ")[1];if(!M)throw Error("Failed to get access token");return M}return B}var cQI=K(()=>{ou()});var lQI=K(()=>{dQI();cQI();G4I()});function yG$(){return{error:(H,...$)=>console.error("[Anthropic SDK ERROR]",H,...$),warn:(H,...$)=>console.error("[Anthropic SDK WARN]",H,...$),info:(H,...$)=>console.error("[Anthropic SDK INFO]",H,...$),debug:(H,...$)=>console.error("[Anthropic SDK DEBUG]",H,...$)}}async function lO({apiKey:H,maxRetries:$,model:A,fetchOverride:L}){let I=process.env.CLAUDE_CODE_CONTAINER_ID,D=process.env.CLAUDE_CODE_REMOTE_SESSION_ID,B=O$9(),f={"x-app":"cli","User-Agent":Hn(),...B,...I?{"x-claude-remote-container-id":I}:{},...D?{"x-claude-remote-session-id":D}:{}};if(N(`[API:request] Creating client, ANTHROPIC_CUSTOM_HEADERS present: ${!!process.env.ANTHROPIC_CUSTOM_HEADERS}, has Authorization header: ${!!B.Authorization}`),A$(process.env.CLAUDE_CODE_ADDITIONAL_PROTECTION))f["x-anthropic-additional-protection"]="true";if(N("[API:auth] OAuth token check starting"),await pW(),N("[API:auth] OAuth token check complete"),!nL())N$9(f,eI());let M={defaultHeaders:f,maxRetries:$,timeout:parseInt(process.env.API_TIMEOUT_MS||String(600000),10),dangerouslyAllowBrowser:!0,fetchOptions:MAH(),...L&&{fetch:L}};if(A$(process.env.CLAUDE_CODE_USE_BEDROCK)){let U=A===eX()&&process.env.ANTHROPIC_SMALL_FAST_MODEL_AWS_REGION?process.env.ANTHROPIC_SMALL_FAST_MODEL_AWS_REGION:WHH(),X={...M,awsRegion:U,...A$(process.env.CLAUDE_CODE_SKIP_BEDROCK_AUTH)&&{skipAuth:!0},...tj()&&{logger:yG$()}};if(process.env.AWS_BEARER_TOKEN_BEDROCK)X.skipAuth=!0,X.defaultHeaders={...X.defaultHeaders,Authorization:`Bearer ${process.env.AWS_BEARER_TOKEN_BEDROCK}`};else if(!A$(process.env.CLAUDE_CODE_SKIP_BEDROCK_AUTH)){let J=await GAH();if(J)X.awsAccessKey=J.accessKeyId,X.awsSecretKey=J.secretAccessKey,X.awsSessionToken=J.sessionToken}return new S8$(X)}if(A$(process.env.CLAUDE_CODE_USE_FOUNDRY)){let U;if(!process.env.ANTHROPIC_FOUNDRY_API_KEY)if(A$(process.env.CLAUDE_CODE_SKIP_FOUNDRY_AUTH))U=()=>Promise.resolve("");else U=xUA(new RG$,"https://cognitiveservices.azure.com/.default");let X={...M,...U&&{azureADTokenProvider:U},...tj()&&{logger:yG$()}};return new v8$(X)}if(A$(process.env.CLAUDE_CODE_USE_VERTEX)){let U=process.env.GCLOUD_PROJECT||process.env.GOOGLE_CLOUD_PROJECT||process.env.gcloud_project||process.env.google_cloud_project,X=process.env.GOOGLE_APPLICATION_CREDENTIALS||process.env.google_application_credentials,J=A$(process.env.CLAUDE_CODE_SKIP_VERTEX_AUTH)?{getClient:()=>({getRequestHeaders:()=>({})})}:new iQI.GoogleAuth({scopes:["https://www.googleapis.com/auth/cloud-platform"],...U||X?{}:{projectId:process.env.ANTHROPIC_VERTEX_PROJECT_ID}}),F={...M,region:ilH(A),googleAuth:J,...tj()&&{logger:yG$()}};return new nf$(F)}let G={apiKey:nL()?null:H||rZ(),authToken:nL()?iD()?.accessToken:void 0,...{},...M,...tj()&&{logger:yG$()}};return new HO(G)}function N$9(H,$){let A=process.env.ANTHROPIC_AUTH_TOKEN||MqH($);if(A)H.Authorization=`Bearer ${A}`}function O$9(){let H={},$=process.env.ANTHROPIC_CUSTOM_HEADERS;if(!$)return H;let A=$.split(/\n|\r\n/);for(let L of A){if(!L.trim())continue;let I=L.match(/^\s*(.*?)\s*:\s*(.*?)\s*$/);if(I){let[,D,B]=I;if(D&&B!==void 0)H[D]=B}}return H}var iQI;var dxH=K(()=>{w1I();O1I();p_();EMI();lQI();fI();p$();KQ();NA();gR();YE();E$();iI();iQI=h(e8A(),1)});function SUA(H){if(VGH())return q1L(H);return H}function EJH(H){return H||VGH()}function nQI(H){return VGH()&&H.status===429}var cxH=K(()=>{hd$();p_();iI()});function rQI(H){return x$9.some(($)=>H.startsWith($))}function aQI(H,$){if(H.isUsingOverage){if(H.overageStatus==="allowed_warning")return{message:"You're close to your extra usage spending limit",severity:"warning"};return null}if(H.status==="rejected")return{message:S$9(H,$),severity:"error"};if(H.status==="allowed_warning"){if(H.utilization!==void 0&&H.utilization<0.7)return null;if(aq()){let I=B0(),D=I==="team"||I==="enterprise",B=w9()?.hasExtraUsageEnabled===!0;if(D&&B&&!Ry())return null}let L=j$9(H);if(L)return{message:L,severity:"warning"}}return null}function jUA(H,$){let A=aQI(H,$);if(A&&A.severity==="error")return A.message;return null}function RUA(H,$){let A=aQI(H,$);if(A&&A.severity==="warning")return A.message;return null}function S$9(H,$){let A=H.resetsAt,L=A?s4H(A,!0):void 0,I=H.overageResetsAt?s4H(H.overageResetsAt,!0):void 0,D=L?` \xB7 resets ${L}`:"";if(H.overageStatus==="rejected"){let B="";if(A&&H.overageResetsAt)if(A<H.overageResetsAt)B=` \xB7 resets ${L}`;else B=` \xB7 resets ${I}`;else if(L)B=` \xB7 resets ${L}`;else if(I)B=` \xB7 resets ${I}`;if(H.overageDisabledReason==="out_of_credits")return`You're out of extra usage${B}`;return MJH("limit",B,$)}if(H.rateLimitType==="seven_day_sonnet"){let B=B0();return MJH(B==="pro"||B==="enterprise"?"weekly limit":"Sonnet limit",D,$)}if(H.rateLimitType==="seven_day_opus")return MJH("Opus limit",D,$);if(H.rateLimitType==="seven_day")return MJH("weekly limit",D,$);if(H.rateLimitType==="five_hour")return MJH("session limit",D,$);return MJH("usage limit",D,$)}function j$9(H){let $=null;switch(H.rateLimitType){case"seven_day":$="weekly limit";break;case"five_hour":$="session limit";break;case"seven_day_opus":$="Opus limit";break;case"seven_day_sonnet":$="Sonnet limit";break;case"overage":$="extra usage";break;case void 0:return null}let A=H.utilization?Math.floor(H.utilization*100):void 0,L=H.resetsAt?s4H(H.resetsAt,!0):void 0,I=R$9(H.rateLimitType);if(A&&L){let B=`You've used ${A}% of your ${$} \xB7 resets ${L}`;return I?`${B} \xB7 ${I}`:B}if(A){let B=`You've used ${A}% of your ${$}`;return I?`${B} \xB7 ${I}`:B}if(H.rateLimitType==="overage")$+=" limit";if(L){let B=`Approaching ${$} \xB7 resets ${L}`;return I?`${B} \xB7 ${I}`:B}let D=`Approaching ${$}`;return I?`${D} \xB7 ${I}`:D}function R$9(H){let $=B0(),A=w9()?.hasExtraUsageEnabled===!0;if(H==="five_hour"){if($==="team"||$==="enterprise"){if(!A&&rN())return"/extra-usage to request more";return null}if($==="pro"||$==="max")return"/upgrade to keep using Claude Code"}if(H==="overage"){if($==="team"||$==="enterprise"){if(!A&&rN())return"/extra-usage to request more"}}return null}function yUA(H){let $=H.resetsAt?s4H(H.resetsAt,!0):"",A="";if(H.rateLimitType==="five_hour")A="session limit";else if(H.rateLimitType==="seven_day")A="weekly limit";else if(H.rateLimitType==="seven_day_opus")A="Opus limit";else if(H.rateLimitType==="seven_day_sonnet"){let I=B0();A=I==="pro"||I==="enterprise"?"weekly limit":"Sonnet limit"}if(!A)return"Now using extra usage";return`You're now using extra usage${$?` \xB7 Your ${A} resets ${$}`:""}`}function MJH(H,$,A){return`You've hit your ${H}${$}`}var x$9;var vUA=K(()=>{q9();fI();vA();x$9=["You've hit your","You've used","You're now using extra usage","You're close to","You're out of extra usage"]});function h$9(H,$){let A=Date.now()/1000,L=H-$,I=A-L;return Math.max(0,Math.min(1,I/$))}function bUA(H){d2=H,hUA.forEach((A)=>A(H));let $=Math.round((H.resetsAt?H.resetsAt-Date.now()/1000:0)/3600);c("tengu_claudeai_limits_status_changed",{status:H.status,unifiedRateLimitFallbackAvailable:H.unifiedRateLimitFallbackAvailable,hoursTillReset:$})}async function b$9(){let H=eX(),$=await lO({maxRetries:0,model:H}),A=[{role:"user",content:"quota"}],L=D2(H);return $.beta.messages.create({model:H,max_tokens:1,messages:A,metadata:Kr(),...L.length>0?{betas:L}:{}}).asResponse()}async function oQI(){if(!EJH(nL()))return;try{let H=await b$9();kUA(H.headers)}catch(H){if(H instanceof KD)hG$(H)}}function Fr(){let[H,$]=vG$.useState({...d2});return vG$.useEffect(()=>{let A=(L)=>{$({...L})};return hUA.add(A),()=>{hUA.delete(A)}},[]),H}function k$9(H,$){for(let[A,L]of Object.entries(v$9)){let I=H.get(`anthropic-ratelimit-unified-${A}-surpassed-threshold`);if(I!==null){let D=H.get(`anthropic-ratelimit-unified-${A}-utilization`),B=H.get(`anthropic-ratelimit-unified-${A}-reset`),f=D?Number(D):void 0;return{status:"allowed_warning",resetsAt:B?Number(B):void 0,rateLimitType:L,utilization:f,unifiedRateLimitFallbackAvailable:$,isUsingOverage:!1,surpassedThreshold:Number(I)}}}return null}function u$9(H,$,A){let{rateLimitType:L,claimAbbrev:I,windowSeconds:D,thresholds:B}=$,f=H.get(`anthropic-ratelimit-unified-${I}-utilization`),E=H.get(`anthropic-ratelimit-unified-${I}-reset`);if(f===null||E===null)return null;let M=Number(f),G=Number(E),U=h$9(G,D);if(!B.some((J)=>M>=J.utilization&&U<=J.timePct))return null;return{status:"allowed_warning",resetsAt:G,rateLimitType:L,utilization:M,unifiedRateLimitFallbackAvailable:A,isUsingOverage:!1}}function g$9(H,$){let A=k$9(H,$);if(A)return A;for(let L of y$9){let I=u$9(H,L,$);if(I)return I}return null}function tQI(H){let $=H.get("anthropic-ratelimit-unified-status")||"allowed",A=H.get("anthropic-ratelimit-unified-reset"),L=A?Number(A):void 0,I=H.get("anthropic-ratelimit-unified-fallback")==="available",D=H.get("anthropic-ratelimit-unified-representative-claim"),B=H.get("anthropic-ratelimit-unified-overage-status"),f=H.get("anthropic-ratelimit-unified-overage-reset"),E=f?Number(f):void 0,M=H.get("anthropic-ratelimit-unified-overage-disabled-reason"),G=$==="rejected"&&(B==="allowed"||B==="allowed_warning"),U=$;if($==="allowed"||$==="allowed_warning"){let X=g$9(H,I);if(X)return X;U="allowed"}return{status:U,resetsAt:L,unifiedRateLimitFallbackAvailable:I,...D&&{rateLimitType:D},...B&&{overageStatus:B},...E&&{overageResetsAt:E},...M&&{overageDisabledReason:M},isUsingOverage:G}}function kUA(H){let $=nL();if(!EJH($)){if(d2.status!=="allowed"||d2.resetsAt)bUA({status:"allowed",unifiedRateLimitFallbackAvailable:!1,isUsingOverage:!1});return}let A=SUA(H),L=tQI(A);if(!CHH(d2,L))bUA(L)}function hG$(H){if(!EJH(nL())||H.status!==429)return;try{let $={...d2};if(H.headers){let A=SUA(H.headers);$=tQI(A)}if($.status="rejected",!CHH(d2,$))bUA($)}catch($){r($)}}var vG$,y$9,v$9,d2,hUA;var yy=K(()=>{dxH();_$();iI();z$();fI();oZ();p_();mU();lj$();cxH();vUA();vG$=h(t(),1),y$9=[{rateLimitType:"five_hour",claimAbbrev:"5h",windowSeconds:18000,thresholds:[{utilization:0.9,timePct:0.72}]},{rateLimitType:"seven_day",claimAbbrev:"7d",windowSeconds:604800,thresholds:[{utilization:0.75,timePct:0.6},{utilization:0.5,timePct:0.35},{utilization:0.25,timePct:0.15}]}],v$9={"5h":"five_hour","7d":"seven_day",overage:"overage"};d2={status:"allowed",unifiedRateLimitFallbackAvailable:!1,isUsingOverage:!1},hUA=new Set});var GJH=5242880,iO=3932160,UJH=2000,XJH=2000,JJH=20971520,sQI=100,eQI=3145728,uUA=104857600,FJH=20,bG$=10;var hIH=()=>{};function lxH(H){if(!H||typeof H!=="object")return null;let $=H,A=5,L=0;while($&&L<A){if($ instanceof Error&&"code"in $&&typeof $.code==="string"){let I=$.code,D=m$9.has(I);return{code:I,message:$.message,isSSLError:D}}if($ instanceof Error&&"cause"in $&&$.cause!==$)$=$.cause,L++;else break}return null}function p$9(H){let $=H.message;if(!$)return"";if($.includes("<!DOCTYPE html")||$.includes("<html")){let A=$.match(/<title>([^<]+)<\/title>/);if(A&&A[1])return A[1].trim();return""}return H.message}function kG$(H){let $=lxH(H);if($){let{code:L,isSSLError:I}=$;if(L==="ETIMEDOUT")return"Request timed out. Check your internet connection and proxy settings";if(I)switch(L){case"UNABLE_TO_VERIFY_LEAF_SIGNATURE":case"UNABLE_TO_GET_ISSUER_CERT":case"UNABLE_TO_GET_ISSUER_CERT_LOCALLY":return"Unable to connect to API: SSL certificate verification failed. Check your proxy or corporate SSL certificates";case"CERT_HAS_EXPIRED":return"Unable to connect to API: SSL certificate has expired";case"CERT_REVOKED":return"Unable to connect to API: SSL certificate has been revoked";case"DEPTH_ZERO_SELF_SIGNED_CERT":case"SELF_SIGNED_CERT_IN_CHAIN":return"Unable to connect to API: Self-signed certificate detected. Check your proxy or corporate SSL certificates";case"ERR_TLS_CERT_ALTNAME_INVALID":case"HOSTNAME_MISMATCH":return"Unable to connect to API: SSL certificate hostname mismatch";case"CERT_NOT_YET_VALID":return"Unable to connect to API: SSL certificate is not yet valid";default:return`Unable to connect to API: SSL error (${L})`}}if(H.message==="Connection error."){if($?.code)return`Unable to connect to API (${$.code})`;return"Unable to connect to API. Check your internet connection"}let A=p$9(H);return A!==H.message&&A.length>0?A:H.message}async function nO(H,$){await new Promise((A,L)=>{let I=setTimeout(A,H);if($){let D=()=>{clearTimeout(I),L(new lf)};if($.aborted){D();return}$.addEventListener("abort",D,{once:!0}),setTimeout(()=>{$?.removeEventListener("abort",D)},H)}})}var m$9;var _g=K(()=>{p_();m$9=new Set(["UNABLE_TO_VERIFY_LEAF_SIGNATURE","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","CERT_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CERT_REVOKED","CERT_REJECTED","CERT_UNTRUSTED","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","CERT_CHAIN_TOO_LONG","PATH_LENGTH_EXCEEDED","ERR_TLS_CERT_ALTNAME_INVALID","HOSTNAME_MISMATCH","ERR_TLS_HANDSHAKE_TIMEOUT","ERR_SSL_WRONG_VERSION_NUMBER","ERR_SSL_DECRYPTION_FAILED_OR_BAD_RECORD_MAC"])});var $WI={};JA($WI,{sharp:()=>HWI,default:()=>d$9});function HWI(H){let $=null,A=[],L=0;async function I(){if(!$)$=(async()=>{if(!uG$)throw Error("Native image processor module not available");let{processImage:f}=uG$;return f(H)})();return $}function D(f){for(let E=L;E<A.length;E++){let M=A[E];if(M)M(f)}L=A.length}let B={async metadata(){return(await I()).metadata()},resize(f,E,M){return A.push((G)=>{G.resize(f,E,M)}),B},jpeg(f){return A.push((E)=>{E.jpeg(f?.quality)}),B},png(f){return A.push((E)=>{E.png(f)}),B},webp(f){return A.push((E)=>{E.webp(f?.quality)}),B},async toBuffer(){let f=await I();return D(f),f.toBuffer()}};return B}var uG$,d$9;var AWI=K(()=>{try{uG$=KmA()}catch(H){uG$=null}d$9=HWI});var vy=z((xgf,IWI)=>{var LWI=function(H){return typeof H<"u"&&H!==null},c$9=function(H){return typeof H==="object"},l$9=function(H){return Object.prototype.toString.call(H)==="[object Object]"},i$9=function(H){return typeof H==="function"},n$9=function(H){return typeof H==="boolean"},r$9=function(H){return H instanceof Buffer},a$9=function(H){if(LWI(H))switch(H.constructor){case Uint8Array:case Uint8ClampedArray:case Int8Array:case Uint16Array:case Int16Array:case Uint32Array:case Int32Array:case Float32Array:case Float64Array:return!0}return!1},o$9=function(H){return H instanceof ArrayBuffer},t$9=function(H){return typeof H==="string"&&H.length>0},s$9=function(H){return typeof H==="number"&&!Number.isNaN(H)},e$9=function(H){return Number.isInteger(H)},HA9=function(H,$,A){return H>=$&&H<=A},$A9=function(H,$){return $.includes(H)},AA9=function(H,$,A){return Error(`Expected ${$} for ${H} but received ${A} of type ${typeof A}`)},LA9=function(H,$){return $.message=H.message,$};IWI.exports={defined:LWI,object:c$9,plainObject:l$9,fn:i$9,bool:n$9,buffer:r$9,typedArray:a$9,arrayBuffer:o$9,string:t$9,number:s$9,integer:e$9,inRange:HA9,inArray:$A9,invalidParameterError:AA9,nativeError:LA9}});var fWI=z((Sgf,BWI)=>{var DWI=()=>!0,gG$=null,IA9=()=>{if(!gG$)if(DWI()&&process.report){let H=process.report.excludeNetwork;process.report.excludeNetwork=!0,gG$=process.report.getReport(),process.report.excludeNetwork=H}else gG$={};return gG$};BWI.exports={isLinux:DWI,getReport:IA9}});var GWI=z((jgf,MWI)=>{var EWI=require("fs"),DA9=(H)=>EWI.readFileSync(H,"utf-8"),BA9=(H)=>new Promise(($,A)=>{EWI.readFile(H,"utf-8",(L,I)=>{if(L)A(L);else $(I)})});MWI.exports={LDD_PATH:"/usr/bin/ldd",readFileSync:DA9,readFile:BA9}});var pG$=z((Rgf,TWI)=>{var XWI=require("child_process"),{isLinux:QJH,getReport:JWI}=fWI(),{LDD_PATH:mG$,readFile:FWI,readFileSync:KWI}=GWI(),hy,by,Qr="",QWI=()=>{if(!Qr)return new Promise((H)=>{XWI.exec("getconf GNU_LIBC_VERSION 2>&1 || true; ldd --version 2>&1 || true",($,A)=>{Qr=$?" ":A,H(Qr)})});return Qr},WWI=()=>{if(!Qr)try{Qr=XWI.execSync("getconf GNU_LIBC_VERSION 2>&1 || true; ldd --version 2>&1 || true",{encoding:"utf8"})}catch(H){Qr=" "}return Qr},Wr="glibc",VWI=/LIBC[a-z0-9 \-).]*?(\d+\.\d+)/i,KJH="musl",fA9=(H)=>H.includes("libc.musl-")||H.includes("ld-musl-"),PWI=()=>{let H=JWI();if(H.header&&H.header.glibcVersionRuntime)return Wr;if(Array.isArray(H.sharedObjects)){if(H.sharedObjects.some(fA9))return KJH}return null},_WI=(H)=>{let[$,A]=H.split(/[\r\n]+/);if($&&$.includes(Wr))return Wr;if(A&&A.includes(KJH))return KJH;return null},CWI=(H)=>{if(H.includes("musl"))return KJH;if(H.includes("GNU C Library"))return Wr;return null},EA9=async()=>{if(hy!==void 0)return hy;hy=null;try{let H=await FWI(mG$);hy=CWI(H)}catch(H){}return hy},MA9=()=>{if(hy!==void 0)return hy;hy=null;try{let H=KWI(mG$);hy=CWI(H)}catch(H){}return hy},YWI=async()=>{let H=null;if(QJH()){if(H=await EA9(),!H)H=PWI();if(!H){let $=await QWI();H=_WI($)}}return H},wWI=()=>{let H=null;if(QJH()){if(H=MA9(),!H)H=PWI();if(!H){let $=WWI();H=_WI($)}}return H},GA9=async()=>QJH()&&await YWI()!==Wr,UA9=()=>QJH()&&wWI()!==Wr,XA9=async()=>{if(by!==void 0)return by;by=null;try{let $=(await FWI(mG$)).match(VWI);if($)by=$[1]}catch(H){}return by},JA9=()=>{if(by!==void 0)return by;by=null;try{let $=KWI(mG$).match(VWI);if($)by=$[1]}catch(H){}return by},ZWI=()=>{let H=JWI();if(H.header&&H.header.glibcVersionRuntime)return H.header.glibcVersionRuntime;return null},UWI=(H)=>H.trim().split(/\s+/)[1],qWI=(H)=>{let[$,A,L]=H.split(/[\r\n]+/);if($&&$.includes(Wr))return UWI($);if(A&&L&&A.includes(KJH))return UWI(L);return null},FA9=async()=>{let H=null;if(QJH()){if(H=await XA9(),!H)H=ZWI();if(!H){let $=await QWI();H=qWI($)}}return H},KA9=()=>{let H=null;if(QJH()){if(H=JA9(),!H)H=ZWI();if(!H){let $=WWI();H=qWI($)}}return H};TWI.exports={GLIBC:Wr,MUSL:KJH,family:YWI,familySync:wWI,isNonGlibcLinux:GA9,isNonGlibcLinuxSync:UA9,version:FA9,versionSync:KA9}});var ixH=z((ygf,zWI)=>{var QA9=typeof process==="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...H)=>console.error("SEMVER",...H):()=>{};zWI.exports=QA9});var dG$=z((vgf,NWI)=>{var WA9=Number.MAX_SAFE_INTEGER||9007199254740991,VA9=["major","premajor","minor","preminor","patch","prepatch","prerelease"];NWI.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:WA9,RELEASE_TYPES:VA9,SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var nxH=z((ky,OWI)=>{var{MAX_SAFE_COMPONENT_LENGTH:gUA,MAX_SAFE_BUILD_LENGTH:PA9,MAX_LENGTH:_A9}=dG$(),CA9=ixH();ky=OWI.exports={};var YA9=ky.re=[],wA9=ky.safeRe=[],ZD=ky.src=[],ZA9=ky.safeSrc=[],qD=ky.t={},qA9=0,mUA="[a-zA-Z0-9-]",TA9=[["\\s",1],["\\d",_A9],[mUA,PA9]],zA9=(H)=>{for(let[$,A]of TA9)H=H.split(`${$}*`).join(`${$}{0,${A}}`).split(`${$}+`).join(`${$}{1,${A}}`);return H},a9=(H,$,A)=>{let L=zA9($),I=qA9++;CA9(H,I,$),qD[H]=I,ZD[I]=$,ZA9[I]=L,YA9[I]=new RegExp($,A?"g":void 0),wA9[I]=new RegExp(L,A?"g":void 0)};a9("NUMERICIDENTIFIER","0|[1-9]\\d*");a9("NUMERICIDENTIFIERLOOSE","\\d+");a9("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${mUA}*`);a9("MAINVERSION",`(${ZD[qD.NUMERICIDENTIFIER]})\\.(${ZD[qD.NUMERICIDENTIFIER]})\\.(${ZD[qD.NUMERICIDENTIFIER]})`);a9("MAINVERSIONLOOSE",`(${ZD[qD.NUMERICIDENTIFIERLOOSE]})\\.(${ZD[qD.NUMERICIDENTIFIERLOOSE]})\\.(${ZD[qD.NUMERICIDENTIFIERLOOSE]})`);a9("PRERELEASEIDENTIFIER",`(?:${ZD[qD.NUMERICIDENTIFIER]}|${ZD[qD.NONNUMERICIDENTIFIER]})`);a9("PRERELEASEIDENTIFIERLOOSE",`(?:${ZD[qD.NUMERICIDENTIFIERLOOSE]}|${ZD[qD.NONNUMERICIDENTIFIER]})`);a9("PRERELEASE",`(?:-(${ZD[qD.PRERELEASEIDENTIFIER]}(?:\\.${ZD[qD.PRERELEASEIDENTIFIER]})*))`);a9("PRERELEASELOOSE",`(?:-?(${ZD[qD.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${ZD[qD.PRERELEASEIDENTIFIERLOOSE]})*))`);a9("BUILDIDENTIFIER",`${mUA}+`);a9("BUILD",`(?:\\+(${ZD[qD.BUILDIDENTIFIER]}(?:\\.${ZD[qD.BUILDIDENTIFIER]})*))`);a9("FULLPLAIN",`v?${ZD[qD.MAINVERSION]}${ZD[qD.PRERELEASE]}?${ZD[qD.BUILD]}?`);a9("FULL",`^${ZD[qD.FULLPLAIN]}$`);a9("LOOSEPLAIN",`[v=\\s]*${ZD[qD.MAINVERSIONLOOSE]}${ZD[qD.PRERELEASELOOSE]}?${ZD[qD.BUILD]}?`);a9("LOOSE",`^${ZD[qD.LOOSEPLAIN]}$`);a9("GTLT","((?:<|>)?=?)");a9("XRANGEIDENTIFIERLOOSE",`${ZD[qD.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);a9("XRANGEIDENTIFIER",`${ZD[qD.NUMERICIDENTIFIER]}|x|X|\\*`);a9("XRANGEPLAIN",`[v=\\s]*(${ZD[qD.XRANGEIDENTIFIER]})(?:\\.(${ZD[qD.XRANGEIDENTIFIER]})(?:\\.(${ZD[qD.XRANGEIDENTIFIER]})(?:${ZD[qD.PRERELEASE]})?${ZD[qD.BUILD]}?)?)?`);a9("XRANGEPLAINLOOSE",`[v=\\s]*(${ZD[qD.XRANGEIDENTIFIERLOOSE]})(?:\\.(${ZD[qD.XRANGEIDENTIFIERLOOSE]})(?:\\.(${ZD[qD.XRANGEIDENTIFIERLOOSE]})(?:${ZD[qD.PRERELEASELOOSE]})?${ZD[qD.BUILD]}?)?)?`);a9("XRANGE",`^${ZD[qD.GTLT]}\\s*${ZD[qD.XRANGEPLAIN]}$`);a9("XRANGELOOSE",`^${ZD[qD.GTLT]}\\s*${ZD[qD.XRANGEPLAINLOOSE]}$`);a9("COERCEPLAIN",`(^|[^\\d])(\\d{1,${gUA}})(?:\\.(\\d{1,${gUA}}))?(?:\\.(\\d{1,${gUA}}))?`);a9("COERCE",`${ZD[qD.COERCEPLAIN]}(?:$|[^\\d])`);a9("COERCEFULL",ZD[qD.COERCEPLAIN]+`(?:${ZD[qD.PRERELEASE]})?(?:${ZD[qD.BUILD]})?(?:$|[^\\d])`);a9("COERCERTL",ZD[qD.COERCE],!0);a9("COERCERTLFULL",ZD[qD.COERCEFULL],!0);a9("LONETILDE","(?:~>?)");a9("TILDETRIM",`(\\s*)${ZD[qD.LONETILDE]}\\s+`,!0);ky.tildeTrimReplace="$1~";a9("TILDE",`^${ZD[qD.LONETILDE]}${ZD[qD.XRANGEPLAIN]}$`);a9("TILDELOOSE",`^${ZD[qD.LONETILDE]}${ZD[qD.XRANGEPLAINLOOSE]}$`);a9("LONECARET","(?:\\^)");a9("CARETTRIM",`(\\s*)${ZD[qD.LONECARET]}\\s+`,!0);ky.caretTrimReplace="$1^";a9("CARET",`^${ZD[qD.LONECARET]}${ZD[qD.XRANGEPLAIN]}$`);a9("CARETLOOSE",`^${ZD[qD.LONECARET]}${ZD[qD.XRANGEPLAINLOOSE]}$`);a9("COMPARATORLOOSE",`^${ZD[qD.GTLT]}\\s*(${ZD[qD.LOOSEPLAIN]})$|^$`);a9("COMPARATOR",`^${ZD[qD.GTLT]}\\s*(${ZD[qD.FULLPLAIN]})$|^$`);a9("COMPARATORTRIM",`(\\s*)${ZD[qD.GTLT]}\\s*(${ZD[qD.LOOSEPLAIN]}|${ZD[qD.XRANGEPLAIN]})`,!0);ky.comparatorTrimReplace="$1$2$3";a9("HYPHENRANGE",`^\\s*(${ZD[qD.XRANGEPLAIN]})\\s+-\\s+(${ZD[qD.XRANGEPLAIN]})\\s*$`);a9("HYPHENRANGELOOSE",`^\\s*(${ZD[qD.XRANGEPLAINLOOSE]})\\s+-\\s+(${ZD[qD.XRANGEPLAINLOOSE]})\\s*$`);a9("STAR","(<|>)?=?\\s*\\*");a9("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");a9("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var cG$=z((hgf,xWI)=>{var NA9=Object.freeze({loose:!0}),OA9=Object.freeze({}),xA9=(H)=>{if(!H)return OA9;if(typeof H!=="object")return NA9;return H};xWI.exports=xA9});var yWI=z((bgf,RWI)=>{var SWI=/^[0-9]+$/,jWI=(H,$)=>{let A=SWI.test(H),L=SWI.test($);if(A&&L)H=+H,$=+$;return H===$?0:A&&!L?-1:L&&!A?1:H<$?-1:1},SA9=(H,$)=>jWI($,H);RWI.exports={compareIdentifiers:jWI,rcompareIdentifiers:SA9}});var VJH=z((kgf,kWI)=>{var lG$=ixH(),{MAX_LENGTH:vWI,MAX_SAFE_INTEGER:iG$}=dG$(),{safeRe:hWI,safeSrc:bWI,t:nG$}=nxH(),jA9=cG$(),{compareIdentifiers:WJH}=yWI();class rO{constructor(H,$){if($=jA9($),H instanceof rO)if(H.loose===!!$.loose&&H.includePrerelease===!!$.includePrerelease)return H;else H=H.version;else if(typeof H!=="string")throw TypeError(`Invalid version. Must be a string. Got type "${typeof H}".`);if(H.length>vWI)throw TypeError(`version is longer than ${vWI} characters`);lG$("SemVer",H,$),this.options=$,this.loose=!!$.loose,this.includePrerelease=!!$.includePrerelease;let A=H.trim().match($.loose?hWI[nG$.LOOSE]:hWI[nG$.FULL]);if(!A)throw TypeError(`Invalid Version: ${H}`);if(this.raw=H,this.major=+A[1],this.minor=+A[2],this.patch=+A[3],this.major>iG$||this.major<0)throw TypeError("Invalid major version");if(this.minor>iG$||this.minor<0)throw TypeError("Invalid minor version");if(this.patch>iG$||this.patch<0)throw TypeError("Invalid patch version");if(!A[4])this.prerelease=[];else this.prerelease=A[4].split(".").map((L)=>{if(/^[0-9]+$/.test(L)){let I=+L;if(I>=0&&I<iG$)return I}return L});this.build=A[5]?A[5].split("."):[],this.format()}format(){if(this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length)this.version+=`-${this.prerelease.join(".")}`;return this.version}toString(){return this.version}compare(H){if(lG$("SemVer.compare",this.version,this.options,H),!(H instanceof rO)){if(typeof H==="string"&&H===this.version)return 0;H=new rO(H,this.options)}if(H.version===this.version)return 0;return this.compareMain(H)||this.comparePre(H)}compareMain(H){if(!(H instanceof rO))H=new rO(H,this.options);return WJH(this.major,H.major)||WJH(this.minor,H.minor)||WJH(this.patch,H.patch)}comparePre(H){if(!(H instanceof rO))H=new rO(H,this.options);if(this.prerelease.length&&!H.prerelease.length)return-1;else if(!this.prerelease.length&&H.prerelease.length)return 1;else if(!this.prerelease.length&&!H.prerelease.length)return 0;let $=0;do{let A=this.prerelease[$],L=H.prerelease[$];if(lG$("prerelease compare",$,A,L),A===void 0&&L===void 0)return 0;else if(L===void 0)return 1;else if(A===void 0)return-1;else if(A===L)continue;else return WJH(A,L)}while(++$)}compareBuild(H){if(!(H instanceof rO))H=new rO(H,this.options);let $=0;do{let A=this.build[$],L=H.build[$];if(lG$("build compare",$,A,L),A===void 0&&L===void 0)return 0;else if(L===void 0)return 1;else if(A===void 0)return-1;else if(A===L)continue;else return WJH(A,L)}while(++$)}inc(H,$,A){if(H.startsWith("pre")){if(!$&&A===!1)throw Error("invalid increment argument: identifier is empty");if($){let L=new RegExp(`^${this.options.loose?bWI[nG$.PRERELEASELOOSE]:bWI[nG$.PRERELEASE]}$`),I=`-${$}`.match(L);if(!I||I[1]!==$)throw Error(`invalid identifier: ${$}`)}}switch(H){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",$,A);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",$,A);break;case"prepatch":this.prerelease.length=0,this.inc("patch",$,A),this.inc("pre",$,A);break;case"prerelease":if(this.prerelease.length===0)this.inc("patch",$,A);this.inc("pre",$,A);break;case"release":if(this.prerelease.length===0)throw Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":if(this.minor!==0||this.patch!==0||this.prerelease.length===0)this.major++;this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":if(this.patch!==0||this.prerelease.length===0)this.minor++;this.patch=0,this.prerelease=[];break;case"patch":if(this.prerelease.length===0)this.patch++;this.prerelease=[];break;case"pre":{let L=Number(A)?1:0;if(this.prerelease.length===0)this.prerelease=[L];else{let I=this.prerelease.length;while(--I>=0)if(typeof this.prerelease[I]==="number")this.prerelease[I]++,I=-2;if(I===-1){if($===this.prerelease.join(".")&&A===!1)throw Error("invalid increment argument: identifier already exists");this.prerelease.push(L)}}if($){let I=[$,L];if(A===!1)I=[$];if(WJH(this.prerelease[0],$)===0){if(isNaN(this.prerelease[1]))this.prerelease=I}else this.prerelease=I}break}default:throw Error(`invalid increment argument: ${H}`)}if(this.raw=this.format(),this.build.length)this.raw+=`+${this.build.join(".")}`;return this}}kWI.exports=rO});var mWI=z((ugf,gWI)=>{var uWI=VJH(),RA9=(H,$,A=!1)=>{if(H instanceof uWI)return H;try{return new uWI(H,$)}catch(L){if(!A)return null;throw L}};gWI.exports=RA9});var dWI=z((ggf,pWI)=>{var yA9=VJH(),vA9=mWI(),{safeRe:rG$,t:aG$}=nxH(),hA9=(H,$)=>{if(H instanceof yA9)return H;if(typeof H==="number")H=String(H);if(typeof H!=="string")return null;$=$||{};let A=null;if(!$.rtl)A=H.match($.includePrerelease?rG$[aG$.COERCEFULL]:rG$[aG$.COERCE]);else{let E=$.includePrerelease?rG$[aG$.COERCERTLFULL]:rG$[aG$.COERCERTL],M;while((M=E.exec(H))&&(!A||A.index+A[0].length!==H.length)){if(!A||M.index+M[0].length!==A.index+A[0].length)A=M;E.lastIndex=M.index+M[1].length+M[2].length}E.lastIndex=-1}if(A===null)return null;let L=A[2],I=A[3]||"0",D=A[4]||"0",B=$.includePrerelease&&A[5]?`-${A[5]}`:"",f=$.includePrerelease&&A[6]?`+${A[6]}`:"";return vA9(`${L}.${I}.${D}${B}${f}`,$)};pWI.exports=hA9});var bIH=z((mgf,lWI)=>{var cWI=VJH(),bA9=(H,$,A)=>new cWI(H,A).compare(new cWI($,A));lWI.exports=bA9});var pUA=z((pgf,iWI)=>{var kA9=bIH(),uA9=(H,$,A)=>kA9(H,$,A)>=0;iWI.exports=uA9});var aWI=z((dgf,rWI)=>{class nWI{constructor(){this.max=1000,this.map=new Map}get(H){let $=this.map.get(H);if($===void 0)return;else return this.map.delete(H),this.map.set(H,$),$}delete(H){return this.map.delete(H)}set(H,$){if(!this.delete(H)&&$!==void 0){if(this.map.size>=this.max){let L=this.map.keys().next().value;this.delete(L)}this.map.set(H,$)}return this}}rWI.exports=nWI});var tWI=z((cgf,oWI)=>{var gA9=bIH(),mA9=(H,$,A)=>gA9(H,$,A)===0;oWI.exports=mA9});var eWI=z((lgf,sWI)=>{var pA9=bIH(),dA9=(H,$,A)=>pA9(H,$,A)!==0;sWI.exports=dA9});var $7I=z((igf,H7I)=>{var cA9=bIH(),lA9=(H,$,A)=>cA9(H,$,A)>0;H7I.exports=lA9});var L7I=z((ngf,A7I)=>{var iA9=bIH(),nA9=(H,$,A)=>iA9(H,$,A)<0;A7I.exports=nA9});var D7I=z((rgf,I7I)=>{var rA9=bIH(),aA9=(H,$,A)=>rA9(H,$,A)<=0;I7I.exports=aA9});var f7I=z((agf,B7I)=>{var oA9=tWI(),tA9=eWI(),sA9=$7I(),eA9=pUA(),HL9=L7I(),$L9=D7I(),AL9=(H,$,A,L)=>{switch($){case"===":if(typeof H==="object")H=H.version;if(typeof A==="object")A=A.version;return H===A;case"!==":if(typeof H==="object")H=H.version;if(typeof A==="object")A=A.version;return H!==A;case"":case"=":case"==":return oA9(H,A,L);case"!=":return tA9(H,A,L);case">":return sA9(H,A,L);case">=":return eA9(H,A,L);case"<":return HL9(H,A,L);case"<=":return $L9(H,A,L);default:throw TypeError(`Invalid operator: ${$}`)}};B7I.exports=AL9});var F7I=z((ogf,J7I)=>{var rxH=Symbol("SemVer ANY");class oG${static get ANY(){return rxH}constructor(H,$){if($=E7I($),H instanceof oG$)if(H.loose===!!$.loose)return H;else H=H.value;if(H=H.trim().split(/\s+/).join(" "),cUA("comparator",H,$),this.options=$,this.loose=!!$.loose,this.parse(H),this.semver===rxH)this.value="";else this.value=this.operator+this.semver.version;cUA("comp",this)}parse(H){let $=this.options.loose?M7I[G7I.COMPARATORLOOSE]:M7I[G7I.COMPARATOR],A=H.match($);if(!A)throw TypeError(`Invalid comparator: ${H}`);if(this.operator=A[1]!==void 0?A[1]:"",this.operator==="=")this.operator="";if(!A[2])this.semver=rxH;else this.semver=new U7I(A[2],this.options.loose)}toString(){return this.value}test(H){if(cUA("Comparator.test",H,this.options.loose),this.semver===rxH||H===rxH)return!0;if(typeof H==="string")try{H=new U7I(H,this.options)}catch($){return!1}return dUA(H,this.operator,this.semver,this.options)}intersects(H,$){if(!(H instanceof oG$))throw TypeError("a Comparator is required");if(this.operator===""){if(this.value==="")return!0;return new X7I(H.value,$).test(this.value)}else if(H.operator===""){if(H.value==="")return!0;return new X7I(this.value,$).test(H.semver)}if($=E7I($),$.includePrerelease&&(this.value==="<0.0.0-0"||H.value==="<0.0.0-0"))return!1;if(!$.includePrerelease&&(this.value.startsWith("<0.0.0")||H.value.startsWith("<0.0.0")))return!1;if(this.operator.startsWith(">")&&H.operator.startsWith(">"))return!0;if(this.operator.startsWith("<")&&H.operator.startsWith("<"))return!0;if(this.semver.version===H.semver.version&&this.operator.includes("=")&&H.operator.includes("="))return!0;if(dUA(this.semver,"<",H.semver,$)&&this.operator.startsWith(">")&&H.operator.startsWith("<"))return!0;if(dUA(this.semver,">",H.semver,$)&&this.operator.startsWith("<")&&H.operator.startsWith(">"))return!0;return!1}}J7I.exports=oG$;var E7I=cG$(),{safeRe:M7I,t:G7I}=nxH(),dUA=f7I(),cUA=ixH(),U7I=VJH(),X7I=lUA()});var lUA=z((tgf,V7I)=>{var LL9=/\s+/g;class axH{constructor(H,$){if($=DL9($),H instanceof axH)if(H.loose===!!$.loose&&H.includePrerelease===!!$.includePrerelease)return H;else return new axH(H.raw,$);if(H instanceof iUA)return this.raw=H.value,this.set=[[H]],this.formatted=void 0,this;if(this.options=$,this.loose=!!$.loose,this.includePrerelease=!!$.includePrerelease,this.raw=H.trim().replace(LL9," "),this.set=this.raw.split("||").map((A)=>this.parseRange(A.trim())).filter((A)=>A.length),!this.set.length)throw TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let A=this.set[0];if(this.set=this.set.filter((L)=>!Q7I(L[0])),this.set.length===0)this.set=[A];else if(this.set.length>1){for(let L of this.set)if(L.length===1&&XL9(L[0])){this.set=[L];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let H=0;H<this.set.length;H++){if(H>0)this.formatted+="||";let $=this.set[H];for(let A=0;A<$.length;A++){if(A>0)this.formatted+=" ";this.formatted+=$[A].toString().trim()}}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(H){let A=((this.options.includePrerelease&&GL9)|(this.options.loose&&UL9))+":"+H,L=K7I.get(A);if(L)return L;let I=this.options.loose,D=I?DC[nV.HYPHENRANGELOOSE]:DC[nV.HYPHENRANGE];H=H.replace(D,YL9(this.options.includePrerelease)),pU("hyphen replace",H),H=H.replace(DC[nV.COMPARATORTRIM],fL9),pU("comparator trim",H),H=H.replace(DC[nV.TILDETRIM],EL9),pU("tilde trim",H),H=H.replace(DC[nV.CARETTRIM],ML9),pU("caret trim",H);let B=H.split(" ").map((G)=>JL9(G,this.options)).join(" ").split(/\s+/).map((G)=>CL9(G,this.options));if(I)B=B.filter((G)=>{return pU("loose invalid filter",G,this.options),!!G.match(DC[nV.COMPARATORLOOSE])});pU("range list",B);let f=new Map,E=B.map((G)=>new iUA(G,this.options));for(let G of E){if(Q7I(G))return[G];f.set(G.value,G)}if(f.size>1&&f.has(""))f.delete("");let M=[...f.values()];return K7I.set(A,M),M}intersects(H,$){if(!(H instanceof axH))throw TypeError("a Range is required");return this.set.some((A)=>{return W7I(A,$)&&H.set.some((L)=>{return W7I(L,$)&&A.every((I)=>{return L.every((D)=>{return I.intersects(D,$)})})})})}test(H){if(!H)return!1;if(typeof H==="string")try{H=new BL9(H,this.options)}catch($){return!1}for(let $=0;$<this.set.length;$++)if(wL9(this.set[$],H,this.options))return!0;return!1}}V7I.exports=axH;var IL9=aWI(),K7I=new IL9,DL9=cG$(),iUA=F7I(),pU=ixH(),BL9=VJH(),{safeRe:DC,t:nV,comparatorTrimReplace:fL9,tildeTrimReplace:EL9,caretTrimReplace:ML9}=nxH(),{FLAG_INCLUDE_PRERELEASE:GL9,FLAG_LOOSE:UL9}=dG$(),Q7I=(H)=>H.value==="<0.0.0-0",XL9=(H)=>H.value==="",W7I=(H,$)=>{let A=!0,L=H.slice(),I=L.pop();while(A&&L.length)A=L.every((D)=>{return I.intersects(D,$)}),I=L.pop();return A},JL9=(H,$)=>{return pU("comp",H,$),H=QL9(H,$),pU("caret",H),H=FL9(H,$),pU("tildes",H),H=VL9(H,$),pU("xrange",H),H=_L9(H,$),pU("stars",H),H},rV=(H)=>!H||H.toLowerCase()==="x"||H==="*",FL9=(H,$)=>{return H.trim().split(/\s+/).map((A)=>KL9(A,$)).join(" ")},KL9=(H,$)=>{let A=$.loose?DC[nV.TILDELOOSE]:DC[nV.TILDE];return H.replace(A,(L,I,D,B,f)=>{pU("tilde",H,L,I,D,B,f);let E;if(rV(I))E="";else if(rV(D))E=`>=${I}.0.0 <${+I+1}.0.0-0`;else if(rV(B))E=`>=${I}.${D}.0 <${I}.${+D+1}.0-0`;else if(f)pU("replaceTilde pr",f),E=`>=${I}.${D}.${B}-${f} <${I}.${+D+1}.0-0`;else E=`>=${I}.${D}.${B} <${I}.${+D+1}.0-0`;return pU("tilde return",E),E})},QL9=(H,$)=>{return H.trim().split(/\s+/).map((A)=>WL9(A,$)).join(" ")},WL9=(H,$)=>{pU("caret",H,$);let A=$.loose?DC[nV.CARETLOOSE]:DC[nV.CARET],L=$.includePrerelease?"-0":"";return H.replace(A,(I,D,B,f,E)=>{pU("caret",H,I,D,B,f,E);let M;if(rV(D))M="";else if(rV(B))M=`>=${D}.0.0${L} <${+D+1}.0.0-0`;else if(rV(f))if(D==="0")M=`>=${D}.${B}.0${L} <${D}.${+B+1}.0-0`;else M=`>=${D}.${B}.0${L} <${+D+1}.0.0-0`;else if(E)if(pU("replaceCaret pr",E),D==="0")if(B==="0")M=`>=${D}.${B}.${f}-${E} <${D}.${B}.${+f+1}-0`;else M=`>=${D}.${B}.${f}-${E} <${D}.${+B+1}.0-0`;else M=`>=${D}.${B}.${f}-${E} <${+D+1}.0.0-0`;else if(pU("no pr"),D==="0")if(B==="0")M=`>=${D}.${B}.${f}${L} <${D}.${B}.${+f+1}-0`;else M=`>=${D}.${B}.${f}${L} <${D}.${+B+1}.0-0`;else M=`>=${D}.${B}.${f} <${+D+1}.0.0-0`;return pU("caret return",M),M})},VL9=(H,$)=>{return pU("replaceXRanges",H,$),H.split(/\s+/).map((A)=>PL9(A,$)).join(" ")},PL9=(H,$)=>{H=H.trim();let A=$.loose?DC[nV.XRANGELOOSE]:DC[nV.XRANGE];return H.replace(A,(L,I,D,B,f,E)=>{pU("xRange",H,L,I,D,B,f,E);let M=rV(D),G=M||rV(B),U=G||rV(f),X=U;if(I==="="&&X)I="";if(E=$.includePrerelease?"-0":"",M)if(I===">"||I==="<")L="<0.0.0-0";else L="*";else if(I&&X){if(G)B=0;if(f=0,I===">")if(I=">=",G)D=+D+1,B=0,f=0;else B=+B+1,f=0;else if(I==="<=")if(I="<",G)D=+D+1;else B=+B+1;if(I==="<")E="-0";L=`${I+D}.${B}.${f}${E}`}else if(G)L=`>=${D}.0.0${E} <${+D+1}.0.0-0`;else if(U)L=`>=${D}.${B}.0${E} <${D}.${+B+1}.0-0`;return pU("xRange return",L),L})},_L9=(H,$)=>{return pU("replaceStars",H,$),H.trim().replace(DC[nV.STAR],"")},CL9=(H,$)=>{return pU("replaceGTE0",H,$),H.trim().replace(DC[$.includePrerelease?nV.GTE0PRE:nV.GTE0],"")},YL9=(H)=>($,A,L,I,D,B,f,E,M,G,U,X)=>{if(rV(L))A="";else if(rV(I))A=`>=${L}.0.0${H?"-0":""}`;else if(rV(D))A=`>=${L}.${I}.0${H?"-0":""}`;else if(B)A=`>=${A}`;else A=`>=${A}${H?"-0":""}`;if(rV(M))E="";else if(rV(G))E=`<${+M+1}.0.0-0`;else if(rV(U))E=`<${M}.${+G+1}.0-0`;else if(X)E=`<=${M}.${G}.${U}-${X}`;else if(H)E=`<${M}.${G}.${+U+1}-0`;else E=`<=${E}`;return`${A} ${E}`.trim()},wL9=(H,$,A)=>{for(let L=0;L<H.length;L++)if(!H[L].test($))return!1;if($.prerelease.length&&!A.includePrerelease){for(let L=0;L<H.length;L++){if(pU(H[L].semver),H[L].semver===iUA.ANY)continue;if(H[L].semver.prerelease.length>0){let I=H[L].semver;if(I.major===$.major&&I.minor===$.minor&&I.patch===$.patch)return!0}}return!1}return!0}});var _7I=z((sgf,P7I)=>{var ZL9=lUA(),qL9=(H,$,A)=>{try{$=new ZL9($,A)}catch(L){return!1}return $.test(H)};P7I.exports=qL9});var nUA=z((egf,TL9)=>{TL9.exports={name:"sharp",description:"High performance Node.js image processing, the fastest module to resize JPEG, PNG, WebP, GIF, AVIF and TIFF images",version:"0.33.5",author:"Lovell Fuller <npm@lovell.info>",homepage:"https://sharp.pixelplumbing.com",contributors:["Pierre Inglebert <pierre.inglebert@gmail.com>","Jonathan Ong <jonathanrichardong@gmail.com>","Chanon Sajjamanochai <chanon.s@gmail.com>","Juliano Julio <julianojulio@gmail.com>","Daniel Gasienica <daniel@gasienica.ch>","Julian Walker <julian@fiftythree.com>","Amit Pitaru <pitaru.amit@gmail.com>","Brandon Aaron <hello.brandon@aaron.sh>","Andreas Lind <andreas@one.com>","Maurus Cuelenaere <mcuelenaere@gmail.com>","Linus Unneb\xE4ck <linus@folkdatorn.se>","Victor Mateevitsi <mvictoras@gmail.com>","Alaric Holloway <alaric.holloway@gmail.com>","Bernhard K. Weisshuhn <bkw@codingforce.com>","Chris Riley <criley@primedia.com>","David Carley <dacarley@gmail.com>","John Tobin <john@limelightmobileinc.com>","Kenton Gray <kentongray@gmail.com>","Felix B\xFCnemann <Felix.Buenemann@gmail.com>","Samy Al Zahrani <samyalzahrany@gmail.com>","Chintan Thakkar <lemnisk8@gmail.com>","F. Orlando Galashan <frulo@gmx.de>","Kleis Auke Wolthuizen <info@kleisauke.nl>","Matt Hirsch <mhirsch@media.mit.edu>","Matthias Thoemmes <thoemmes@gmail.com>","Patrick Paskaris <patrick@paskaris.gr>","J\xE9r\xE9my Lal <kapouer@melix.org>","Rahul Nanwani <r.nanwani@gmail.com>","Alice Monday <alice0meta@gmail.com>","Kristo Jorgenson <kristo.jorgenson@gmail.com>","YvesBos <yves_bos@outlook.com>","Guy Maliar <guy@tailorbrands.com>","Nicolas Coden <nicolas@ncoden.fr>","Matt Parrish <matt.r.parrish@gmail.com>","Marcel Bretschneider <marcel.bretschneider@gmail.com>","Matthew McEachen <matthew+github@mceachen.org>","Jarda Kot\u011B\u0161ovec <jarda.kotesovec@gmail.com>","Kenric D'Souza <kenric.dsouza@gmail.com>","Oleh Aleinyk <oleg.aleynik@gmail.com>","Marcel Bretschneider <marcel.bretschneider@gmail.com>","Andrea Bianco <andrea.bianco@unibas.ch>","Rik Heywood <rik@rik.org>","Thomas Parisot <hi@oncletom.io>","Nathan Graves <nathanrgraves+github@gmail.com>","Tom Lokhorst <tom@lokhorst.eu>","Espen Hovlandsdal <espen@hovlandsdal.com>","Sylvain Dumont <sylvain.dumont35@gmail.com>","Alun Davies <alun.owain.davies@googlemail.com>","Aidan Hoolachan <ajhoolachan21@gmail.com>","Axel Eirola <axel.eirola@iki.fi>","Freezy <freezy@xbmc.org>","Daiz <taneli.vatanen@gmail.com>","Julian Aubourg <j@ubourg.net>","Keith Belovay <keith@picthrive.com>","Michael B. Klein <mbklein@gmail.com>","Jordan Prudhomme <jordan@raboland.fr>","Ilya Ovdin <iovdin@gmail.com>","Andargor <andargor@yahoo.com>","Paul Neave <paul.neave@gmail.com>","Brendan Kennedy <brenwken@gmail.com>","Brychan Bennett-Odlum <git@brychan.io>","Edward Silverton <e.silverton@gmail.com>","Roman Malieiev <aromaleev@gmail.com>","Tomas Szabo <tomas.szabo@deftomat.com>","Robert O'Rourke <robert@o-rourke.org>","Guillermo Alfonso Varela Chouci\xF1o <guillevch@gmail.com>","Christian Flintrup <chr@gigahost.dk>","Manan Jadhav <manan@motionden.com>","Leon Radley <leon@radley.se>","alza54 <alza54@thiocod.in>","Jacob Smith <jacob@frende.me>","Michael Nutt <michael@nutt.im>","Brad Parham <baparham@gmail.com>","Taneli Vatanen <taneli.vatanen@gmail.com>","Joris Dugu\xE9 <zaruike10@gmail.com>","Chris Banks <christopher.bradley.banks@gmail.com>","Ompal Singh <ompal.hitm09@gmail.com>","Brodan <christopher.hranj@gmail.com>","Ankur Parihar <ankur.github@gmail.com>","Brahim Ait elhaj <brahima@gmail.com>","Mart Jansink <m.jansink@gmail.com>","Lachlan Newman <lachnewman007@gmail.com>","Dennis Beatty <dennis@dcbeatty.com>","Ingvar Stepanyan <me@rreverser.com>","Don Denton <don@happycollision.com>"],scripts:{install:"node install/check",clean:"rm -rf src/build/ .nyc_output/ coverage/ test/fixtures/output.*",test:"npm run test-lint && npm run test-unit && npm run test-licensing && npm run test-types","test-lint":"semistandard && cpplint","test-unit":"nyc --reporter=lcov --reporter=text --check-coverage --branches=100 mocha","test-licensing":'license-checker --production --summary --onlyAllow="Apache-2.0;BSD;ISC;LGPL-3.0-or-later;MIT"',"test-leak":"./test/leak/leak.sh","test-types":"tsd","package-from-local-build":"node npm/from-local-build","package-from-github-release":"node npm/from-github-release","docs-build":"node docs/build && node docs/search-index/build","docs-serve":"cd docs && npx serve","docs-publish":"cd docs && npx firebase-tools deploy --project pixelplumbing --only hosting:pixelplumbing-sharp"},type:"commonjs",main:"lib/index.js",types:"lib/index.d.ts",files:["install","lib","src/*.{cc,h,gyp}"],repository:{type:"git",url:"git://github.com/lovell/sharp.git"},keywords:["jpeg","png","webp","avif","tiff","gif","svg","jp2","dzi","image","resize","thumbnail","crop","embed","libvips","vips"],dependencies:{color:"^4.2.3","detect-libc":"^2.0.3",semver:"^7.6.3"},optionalDependencies:{"@img/sharp-darwin-arm64":"0.33.5","@img/sharp-darwin-x64":"0.33.5","@img/sharp-libvips-darwin-arm64":"1.0.4","@img/sharp-libvips-darwin-x64":"1.0.4","@img/sharp-libvips-linux-arm":"1.0.5","@img/sharp-libvips-linux-arm64":"1.0.4","@img/sharp-libvips-linux-s390x":"1.0.4","@img/sharp-libvips-linux-x64":"1.0.4","@img/sharp-libvips-linuxmusl-arm64":"1.0.4","@img/sharp-libvips-linuxmusl-x64":"1.0.4","@img/sharp-linux-arm":"0.33.5","@img/sharp-linux-arm64":"0.33.5","@img/sharp-linux-s390x":"0.33.5","@img/sharp-linux-x64":"0.33.5","@img/sharp-linuxmusl-arm64":"0.33.5","@img/sharp-linuxmusl-x64":"0.33.5","@img/sharp-wasm32":"0.33.5","@img/sharp-win32-ia32":"0.33.5","@img/sharp-win32-x64":"0.33.5"},devDependencies:{"@emnapi/runtime":"^1.2.0","@img/sharp-libvips-dev":"1.0.4","@img/sharp-libvips-dev-wasm32":"1.0.5","@img/sharp-libvips-win32-ia32":"1.0.4","@img/sharp-libvips-win32-x64":"1.0.4","@types/node":"*",async:"^3.2.5",cc:"^3.0.1",emnapi:"^1.2.0","exif-reader":"^2.0.1","extract-zip":"^2.0.1",icc:"^3.0.0","jsdoc-to-markdown":"^8.0.3","license-checker":"^25.0.1",mocha:"^10.7.3","node-addon-api":"^8.1.0",nyc:"^17.0.0",prebuild:"^13.0.1",semistandard:"^17.0.0","tar-fs":"^3.0.6",tsd:"^0.31.1"},license:"Apache-2.0",engines:{node:"^18.17.0 || ^20.3.0 || >=21.0.0"},config:{libvips:">=8.15.3"},funding:{url:"https://opencollective.com/libvips"},binary:{napi_versions:[9]},semistandard:{env:["mocha"]},cc:{linelength:"120",filter:["build/include"]},nyc:{include:["lib"]},tsd:{directory:"test/types/"}}});var tUA=z((Hmf,x7I)=>{var{spawnSync:aUA}=require("child_process"),{createHash:zL9}=require("crypto"),Z7I=dWI(),NL9=pUA(),OL9=_7I(),C7I=pG$(),{config:xL9,engines:Y7I,optionalDependencies:SL9}=nUA(),jL9=process.env.npm_package_config_libvips||xL9.libvips,q7I=Z7I(jL9).version,RL9=["darwin-arm64","darwin-x64","linux-arm","linux-arm64","linux-s390x","linux-x64","linuxmusl-arm64","linuxmusl-x64","win32-ia32","win32-x64"],oUA={encoding:"utf8",shell:!0},yL9=(H)=>{if(H instanceof Error)console.error(`sharp: Installation error: ${H.message}`);else console.log(`sharp: ${H}`)},T7I=()=>C7I.isNonGlibcLinuxSync()?C7I.familySync():"",vL9=()=>`linux${T7I()}-x64`,PJH=()=>{if(z7I())return"wasm32";let{npm_config_arch:H,npm_config_platform:$,npm_config_libc:A}=process.env,L=typeof A==="string"?A:T7I();return`${$||"linux"}${L}-${H||"x64"}`},hL9=()=>{try{return require(`@img/sharp-libvips-dev-${PJH()}/include`)}catch{try{return (()=>{throw new Error("Cannot require module "+"@img/sharp-libvips-dev/include");})()}catch{}}return""},bL9=()=>{try{return (()=>{throw new Error("Cannot require module "+"@img/sharp-libvips-dev/cplusplus");})()}catch{}return""},kL9=()=>{try{return require(`@img/sharp-libvips-dev-${PJH()}/lib`)}catch{try{return require(`@img/sharp-libvips-${PJH()}/lib`)}catch{}}return""},uL9=()=>{if(process.release?.name==="node"&&process.versions){if(!OL9(process.versions.node,Y7I.node))return{found:process.versions.node,expected:Y7I.node}}},z7I=()=>{let{CC:H}=process.env;return Boolean(H&&H.endsWith("/emcc"))},gL9=()=>{return!1},w7I=(H)=>zL9("sha512").update(H).digest("hex"),mL9=()=>{try{let H=w7I(`imgsharp-libvips-${PJH()}`),$=Z7I(SL9[`@img/sharp-libvips-${PJH()}`]).version;return w7I(`${H}npm:${$}`).slice(0,10)}catch{}return""},pL9=()=>aUA(`node-gyp rebuild --directory=src ${z7I()?"--nodedir=emscripten":""}`,{...oUA,stdio:"inherit"}).status,N7I=()=>{return(aUA("pkg-config --modversion vips-cpp",{...oUA,env:{...process.env,PKG_CONFIG_PATH:O7I()}}).stdout||"").trim()},O7I=()=>{return[(aUA('which brew >/dev/null 2>&1 && brew environment --plain | grep PKG_CONFIG_LIBDIR | cut -d" " -f2',oUA).stdout||"").trim(),process.env.PKG_CONFIG_PATH,"/usr/local/lib/pkgconfig","/usr/lib/pkgconfig","/usr/local/libdata/pkgconfig","/usr/libdata/pkgconfig"].filter(Boolean).join(":")},rUA=(H,$,A)=>{if(A)A(`Detected ${$}, skipping search for globally-installed libvips`);return H},dL9=(H)=>{if(Boolean(process.env.SHARP_IGNORE_GLOBAL_LIBVIPS)===!0)return rUA(!1,"SHARP_IGNORE_GLOBAL_LIBVIPS",H);if(Boolean(process.env.SHARP_FORCE_GLOBAL_LIBVIPS)===!0)return rUA(!0,"SHARP_FORCE_GLOBAL_LIBVIPS",H);if(gL9())return rUA(!1,"Rosetta",H);let $=N7I();return!!$&&NL9($,q7I)};x7I.exports={minimumLibvipsVersion:q7I,prebuiltPlatforms:RL9,buildPlatformArch:PJH,buildSharpLibvipsIncludeDir:hL9,buildSharpLibvipsCPlusPlusDir:bL9,buildSharpLibvipsLibDir:kL9,isUnsupportedNodeRuntime:uL9,runtimePlatformArch:vL9,log:yL9,yarnLocator:mL9,spawnRebuild:pL9,globalLibvipsVersion:N7I,pkgConfigPath:O7I,useGlobalLibvips:dL9}});var oxH=z(($mf,j7I)=>{var{familySync:cL9,versionSync:lL9}=pG$(),{runtimePlatformArch:iL9,isUnsupportedNodeRuntime:S7I,prebuiltPlatforms:nL9,minimumLibvipsVersion:rL9}=tUA(),kIH=iL9(),aL9=[`../src/build/Release/sharp-${kIH}.node`,"../src/build/Release/sharp-wasm32.node",`@img/sharp-${kIH}/sharp.node`,"@img/sharp-wasm32/sharp.node"],sUA,tG$=[];for(let H of aL9)try{sUA=require(H);break}catch($){tG$.push($)}if(sUA)j7I.exports=sUA;else{let[H,$,A]=["linux","darwin","win32"].map((D)=>kIH.startsWith(D)),L=[`Could not load the "sharp" module using the ${kIH} runtime`];tG$.forEach((D)=>{if(D.code!=="MODULE_NOT_FOUND")L.push(`${D.code}: ${D.message}`)});let I=tG$.map((D)=>D.message).join(" ");if(L.push("Possible solutions:"),S7I()){let{found:D,expected:B}=S7I();L.push("- Please upgrade Node.js:",`    Found ${D}`,`    Requires ${B}`)}else if(nL9.includes(kIH)){let[D,B]=kIH.split("-"),f=D.endsWith("musl")?" --libc=musl":"";L.push("- Ensure optional dependencies can be installed:","    npm install --include=optional sharp","- Ensure your package manager supports multi-platform installation:","    See https://sharp.pixelplumbing.com/install#cross-platform","- Add platform-specific dependencies:",`    npm install --os=${D.replace("musl","")}${f} --cpu=${B} sharp`)}else L.push(`- Manually install libvips >= ${rL9}`,"- Add experimental WebAssembly-based dependencies:","    npm install --cpu=wasm32 sharp","    npm install @img/sharp-wasm32");if(H&&/(symbol not found|CXXABI_)/i.test(I))try{let{config:D}=require(`@img/sharp-libvips-${kIH}/package`),B=`${cL9()} ${lL9()}`,f=`${D.musl?"musl":"glibc"} ${D.musl||D.glibc}`;L.push("- Update your OS:",`    Found ${B}`,`    Requires ${f}`)}catch(D){}if(H&&/\/snap\/core[0-9]{2}/.test(I))L.push("- Remove the Node.js Snap, which does not support native modules","    snap remove node");if($&&/Incompatible library version/.test(I))L.push("- Update Homebrew:","    brew update && brew upgrade vips");if(tG$.some((D)=>D.code==="ERR_DLOPEN_DISABLED"))L.push("- Run Node.js without using the --no-addons flag");if(A&&/The specified procedure could not be found/.test(I))L.push("- Using the canvas package on Windows?","    See https://sharp.pixelplumbing.com/install#canvas-and-windows","- Check for outdated versions of sharp in the dependency tree:","    npm ls sharp");throw L.push("- Consult the installation documentation:","    See https://sharp.pixelplumbing.com/install"),Error(L.join(`
`)+1)));this.lastActivityTimestamp=new Date}trace(H,$){(0,r3$.trace)($!==null&&$!==void 0?$:zo.LogVerbosity.DEBUG,"channel","("+this.channelzRef.id+") "+(0,a3$.uriToString)(this.target)+" "+H)}callRefTimerRef(){var H,$,A,L;if(!this.callRefTimer)this.callRefTimer=setInterval(()=>{},pi9);if(!(($=(H=this.callRefTimer).hasRef)===null||$===void 0?void 0:$.call(H)))this.trace("callRefTimer.ref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),(L=(A=this.callRefTimer).ref)===null||L===void 0||L.call(A)}callRefTimerUnref(){var H,$,A;if(!((H=this.callRefTimer)===null||H===void 0?void 0:H.hasRef)||this.callRefTimer.hasRef())this.trace("callRefTimer.unref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),(A=($=this.callRefTimer)===null||$===void 0?void 0:$.unref)===null||A===void 0||A.call($)}removeConnectivityStateWatcher(H){let $=this.connectivityStateWatchers.findIndex((A)=>A===H);if($>=0)this.connectivityStateWatchers.splice($,1)}updateState(H){if((0,r3$.trace)(zo.LogVerbosity.DEBUG,"connectivity_state","("+this.channelzRef.id+") "+(0,a3$.uriToString)(this.target)+" "+rT.ConnectivityState[this.connectivityState]+" -> "+rT.ConnectivityState[H]),this.channelzEnabled)this.channelzInfoTracker.trace.addTrace("CT_INFO","Connectivity state change to "+rT.ConnectivityState[H]);this.connectivityState=H,this.channelzInfoTracker.state=H;let $=this.connectivityStateWatchers.slice();for(let A of $)if(H!==A.currentState){if(A.timer)clearTimeout(A.timer);this.removeConnectivityStateWatcher(A),A.callback()}if(H!==rT.ConnectivityState.TRANSIENT_FAILURE)this.currentResolutionError=null}throttleKeepalive(H){if(H>this.keepaliveTime){this.keepaliveTime=H;for(let $ of this.wrappedSubchannels)$.throttleKeepalive(H)}}addWrappedSubchannel(H){this.wrappedSubchannels.add(H)}removeWrappedSubchannel(H){this.wrappedSubchannels.delete(H)}doPick(H,$){return this.currentPicker.pick({metadata:H,extraPickInfo:$})}queueCallForPick(H){this.pickQueue.push(H),this.callRefTimerRef()}getConfig(H,$){if(this.connectivityState!==rT.ConnectivityState.SHUTDOWN)this.resolvingLoadBalancer.exitIdle();if(this.configSelector)return{type:"SUCCESS",config:this.configSelector.invoke(H,$,this.randomChannelId)};else if(this.currentResolutionError)return{type:"ERROR",error:this.currentResolutionError};else return{type:"NONE"}}queueCallForConfig(H){this.configSelectionQueue.push(H),this.callRefTimerRef()}enterIdle(){if(this.resolvingLoadBalancer.destroy(),this.updateState(rT.ConnectivityState.IDLE),this.currentPicker=new lCA.QueuePicker(this.resolvingLoadBalancer),this.idleTimer)clearTimeout(this.idleTimer),this.idleTimer=null;if(this.callRefTimer)clearInterval(this.callRefTimer),this.callRefTimer=null}startIdleTimeout(H){var $,A;this.idleTimer=setTimeout(()=>{if(this.callCount>0){this.startIdleTimeout(this.idleTimeoutMs);return}let I=new Date().valueOf()-this.lastActivityTimestamp.valueOf();if(I>=this.idleTimeoutMs)this.trace("Idle timer triggered after "+this.idleTimeoutMs+"ms of inactivity"),this.enterIdle();else this.startIdleTimeout(this.idleTimeoutMs-I)},H),(A=($=this.idleTimer).unref)===null||A===void 0||A.call($)}maybeStartIdleTimer(){if(this.connectivityState!==rT.ConnectivityState.SHUTDOWN&&!this.idleTimer)this.startIdleTimeout(this.idleTimeoutMs)}onCallStart(){if(this.channelzEnabled)this.channelzInfoTracker.callTracker.addCallStarted();this.callCount+=1}onCallEnd(H){if(this.channelzEnabled)if(H.code===zo.Status.OK)this.channelzInfoTracker.callTracker.addCallSucceeded();else this.channelzInfoTracker.callTracker.addCallFailed();this.callCount-=1,this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer()}createLoadBalancingCall(H,$,A,L,I){let D=(0,dCA.getNextCallNumber)();return this.trace("createLoadBalancingCall ["+D+'] method="'+$+'"'),new bi9.LoadBalancingCall(this,H,$,A,L,I,D)}createRetryingCall(H,$,A,L,I){let D=(0,dCA.getNextCallNumber)();return this.trace("createRetryingCall ["+D+'] method="'+$+'"'),new cCA.RetryingCall(this,H,$,A,L,I,D,this.retryBufferTracker,o3$.get(this.getTarget()))}createResolvingCall(H,$,A,L,I){let D=(0,dCA.getNextCallNumber)();this.trace("createResolvingCall ["+D+'] method="'+H+'", deadline='+(0,ki9.deadlineToString)($));let B={deadline:$,flags:I!==null&&I!==void 0?I:zo.Propagate.DEFAULTS,host:A!==null&&A!==void 0?A:this.defaultAuthority,parentCall:L},f=new ui9.ResolvingCall(this,H,B,this.filterStackFactory.clone(),D);return this.onCallStart(),f.addStatusWatcher((E)=>{this.onCallEnd(E)}),f}close(){var H;this.resolvingLoadBalancer.destroy(),this.updateState(rT.ConnectivityState.SHUTDOWN),this.currentPicker=new VED;for(let $ of this.configSelectionQueue)$.cancelWithStatus(zo.Status.UNAVAILABLE,"Channel closed before call started");this.configSelectionQueue=[];for(let $ of this.pickQueue)$.cancelWithStatus(zo.Status.UNAVAILABLE,"Channel closed before call started");if(this.pickQueue=[],this.callRefTimer)clearInterval(this.callRefTimer);if(this.idleTimer)clearTimeout(this.idleTimer);if(this.channelzEnabled)(0,_hH.unregisterChannelzRef)(this.channelzRef);this.subchannelPool.unrefUnusedSubchannels(),(H=this.configSelector)===null||H===void 0||H.unref(),this.configSelector=null}getTarget(){return(0,a3$.uriToString)(this.target)}getConnectivityState(H){let $=this.connectivityState;if(H)this.resolvingLoadBalancer.exitIdle(),this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer();return $}watchConnectivityState(H,$,A){if(this.connectivityState===rT.ConnectivityState.SHUTDOWN)throw Error("Channel has been shut down");let L=null;if($!==1/0){let D=$ instanceof Date?$:new Date($),B=new Date;if($===-1/0||D<=B){process.nextTick(A,Error("Deadline passed without connectivity state change"));return}L=setTimeout(()=>{this.removeConnectivityStateWatcher(I),A(Error("Deadline passed without connectivity state change"))},D.getTime()-B.getTime())}let I={currentState:H,callback:A,timer:L};this.connectivityStateWatchers.push(I)}getChannelzRef(){return this.channelzRef}createCall(H,$,A,L,I){if(typeof H!=="string")throw TypeError("Channel#createCall: method must be a string");if(!(typeof $==="number"||$ instanceof Date))throw TypeError("Channel#createCall: deadline must be a number or Date");if(this.connectivityState===rT.ConnectivityState.SHUTDOWN)throw Error("Channel has been shut down");return this.createResolvingCall(H,$,A,L,I)}getOptions(){return this.options}}V0H.InternalChannel=_ED});var Z_A=z((t3$)=>{Object.defineProperty(t3$,"__esModule",{value:!0});t3$.ChannelImplementation=void 0;var ni9=JWH(),ri9=iCA();class CED{constructor(H,$,A){if(typeof H!=="string")throw TypeError("Channel target must be a string");if(!($ instanceof ni9.ChannelCredentials))throw TypeError("Channel credentials must be a ChannelCredentials object");if(A){if(typeof A!=="object")throw TypeError("Channel options must be an object")}this.internalChannel=new ri9.InternalChannel(H,$,A)}close(){this.internalChannel.close()}getTarget(){return this.internalChannel.getTarget()}getConnectivityState(H){return this.internalChannel.getConnectivityState(H)}watchConnectivityState(H,$,A){this.internalChannel.watchConnectivityState(H,$,A)}getChannelzRef(){return this.internalChannel.getChannelzRef()}createCall(H,$,A,L,I){if(typeof H!=="string")throw TypeError("Channel#createCall: method must be a string");if(!(typeof $==="number"||$ instanceof Date))throw TypeError("Channel#createCall: deadline must be a number or Date");return this.internalChannel.createCall(H,$,A,L,I)}}t3$.ChannelImplementation=CED});var zED=z((fS)=>{Object.defineProperty(fS,"__esModule",{value:!0});fS.ServerDuplexStreamImpl=fS.ServerWritableStreamImpl=fS.ServerReadableStreamImpl=fS.ServerUnaryCallImpl=void 0;fS.serverErrorToStatus=aCA;var ai9=require("events"),nCA=require("stream"),rCA=I8(),YED=dQ();function aCA(H,$){var A;let L={code:rCA.Status.UNKNOWN,details:"message"in H?H.message:"Unknown Error",metadata:(A=$!==null&&$!==void 0?$:H.metadata)!==null&&A!==void 0?A:null};if("code"in H&&typeof H.code==="number"&&Number.isInteger(H.code)){if(L.code=H.code,"details"in H&&typeof H.details==="string")L.details=H.details}return L}class wED extends ai9.EventEmitter{constructor(H,$,A,L){super();this.path=H,this.call=$,this.metadata=A,this.request=L,this.cancelled=!1}getPeer(){return this.call.getPeer()}sendMetadata(H){this.call.sendMetadata(H)}getDeadline(){return this.call.getDeadline()}getPath(){return this.path}getHost(){return this.call.getHost()}getAuthContext(){return this.call.getAuthContext()}getMetricsRecorder(){return this.call.getMetricsRecorder()}}fS.ServerUnaryCallImpl=wED;class ZED extends nCA.Readable{constructor(H,$,A){super({objectMode:!0});this.path=H,this.call=$,this.metadata=A,this.cancelled=!1}_read(H){this.call.startRead()}getPeer(){return this.call.getPeer()}sendMetadata(H){this.call.sendMetadata(H)}getDeadline(){return this.call.getDeadline()}getPath(){return this.path}getHost(){return this.call.getHost()}getAuthContext(){return this.call.getAuthContext()}getMetricsRecorder(){return this.call.getMetricsRecorder()}}fS.ServerReadableStreamImpl=ZED;class qED extends nCA.Writable{constructor(H,$,A,L){super({objectMode:!0});this.path=H,this.call=$,this.metadata=A,this.request=L,this.pendingStatus={code:rCA.Status.OK,details:"OK"},this.cancelled=!1,this.trailingMetadata=new YED.Metadata,this.on("error",(I)=>{this.pendingStatus=aCA(I),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(H){this.call.sendMetadata(H)}getDeadline(){return this.call.getDeadline()}getPath(){return this.path}getHost(){return this.call.getHost()}getAuthContext(){return this.call.getAuthContext()}getMetricsRecorder(){return this.call.getMetricsRecorder()}_write(H,$,A){this.call.sendMessage(H,A)}_final(H){var $;H(null),this.call.sendStatus(Object.assign(Object.assign({},this.pendingStatus),{metadata:($=this.pendingStatus.metadata)!==null&&$!==void 0?$:this.trailingMetadata}))}end(H){if(H)this.trailingMetadata=H;return super.end()}}fS.ServerWritableStreamImpl=qED;class TED extends nCA.Duplex{constructor(H,$,A){super({objectMode:!0});this.path=H,this.call=$,this.metadata=A,this.pendingStatus={code:rCA.Status.OK,details:"OK"},this.cancelled=!1,this.trailingMetadata=new YED.Metadata,this.on("error",(L)=>{this.pendingStatus=aCA(L),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(H){this.call.sendMetadata(H)}getDeadline(){return this.call.getDeadline()}getPath(){return this.path}getHost(){return this.call.getHost()}getAuthContext(){return this.call.getAuthContext()}getMetricsRecorder(){return this.call.getMetricsRecorder()}_read(H){this.call.startRead()}_write(H,$,A){this.call.sendMessage(H,A)}_final(H){var $;H(null),this.call.sendStatus(Object.assign(Object.assign({},this.pendingStatus),{metadata:($=this.pendingStatus.metadata)!==null&&$!==void 0?$:this.trailingMetadata}))}end(H){if(H)this.trailingMetadata=H;return super.end()}}fS.ServerDuplexStreamImpl=TED});var s3$=z((hWH)=>{Object.defineProperty(hWH,"__esModule",{value:!0});hWH.ServerCredentials=void 0;hWH.createCertificateProviderServerCredentials=oi9;hWH.createServerCredentialsWithInterceptors=ti9;var oCA=E_A();class vWH{constructor(H,$){this.serverConstructorOptions=H,this.watchers=new Set,this.latestContextOptions=null,this.latestContextOptions=$!==null&&$!==void 0?$:null}_addWatcher(H){this.watchers.add(H)}_removeWatcher(H){this.watchers.delete(H)}getWatcherCount(){return this.watchers.size}updateSecureContextOptions(H){this.latestContextOptions=H;for(let $ of this.watchers)$(this.latestContextOptions)}_isSecure(){return this.serverConstructorOptions!==null}_getSecureContextOptions(){return this.latestContextOptions}_getConstructorOptions(){return this.serverConstructorOptions}_getInterceptors(){return[]}static createInsecure(){return new tCA}static createSsl(H,$,A=!1){var L;if(H!==null&&!Buffer.isBuffer(H))throw TypeError("rootCerts must be null or a Buffer");if(!Array.isArray($))throw TypeError("keyCertPairs must be an array");if(typeof A!=="boolean")throw TypeError("checkClientCertificate must be a boolean");let I=[],D=[];for(let B=0;B<$.length;B++){let f=$[B];if(f===null||typeof f!=="object")throw TypeError(`keyCertPair[${B}] must be an object`);if(!Buffer.isBuffer(f.private_key))throw TypeError(`keyCertPair[${B}].private_key must be a Buffer`);if(!Buffer.isBuffer(f.cert_chain))throw TypeError(`keyCertPair[${B}].cert_chain must be a Buffer`);I.push(f.cert_chain),D.push(f.private_key)}return new sCA({requestCert:A,ciphers:oCA.CIPHER_SUITES},{ca:(L=H!==null&&H!==void 0?H:(0,oCA.getDefaultRootsData)())!==null&&L!==void 0?L:void 0,cert:I,key:D})}}hWH.ServerCredentials=vWH;class tCA extends vWH{constructor(){super(null)}_getSettings(){return null}_equals(H){return H instanceof tCA}}class sCA extends vWH{constructor(H,$){super(H,$);this.options=Object.assign(Object.assign({},H),$)}_equals(H){if(this===H)return!0;if(!(H instanceof sCA))return!1;if(Buffer.isBuffer(this.options.ca)&&Buffer.isBuffer(H.options.ca)){if(!this.options.ca.equals(H.options.ca))return!1}else if(this.options.ca!==H.options.ca)return!1;if(Array.isArray(this.options.cert)&&Array.isArray(H.options.cert)){if(this.options.cert.length!==H.options.cert.length)return!1;for(let $=0;$<this.options.cert.length;$++){let A=this.options.cert[$],L=H.options.cert[$];if(Buffer.isBuffer(A)&&Buffer.isBuffer(L)){if(!A.equals(L))return!1}else if(A!==L)return!1}}else if(this.options.cert!==H.options.cert)return!1;if(Array.isArray(this.options.key)&&Array.isArray(H.options.key)){if(this.options.key.length!==H.options.key.length)return!1;for(let $=0;$<this.options.key.length;$++){let A=this.options.key[$],L=H.options.key[$];if(Buffer.isBuffer(A)&&Buffer.isBuffer(L)){if(!A.equals(L))return!1}else if(A!==L)return!1}}else if(this.options.key!==H.options.key)return!1;if(this.options.requestCert!==H.options.requestCert)return!1;return!0}}class eCA extends vWH{constructor(H,$,A){super({requestCert:$!==null,rejectUnauthorized:A,ciphers:oCA.CIPHER_SUITES});this.identityCertificateProvider=H,this.caCertificateProvider=$,this.requireClientCertificate=A,this.latestCaUpdate=null,this.latestIdentityUpdate=null,this.caCertificateUpdateListener=this.handleCaCertificateUpdate.bind(this),this.identityCertificateUpdateListener=this.handleIdentityCertitificateUpdate.bind(this)}_addWatcher(H){var $;if(this.getWatcherCount()===0)($=this.caCertificateProvider)===null||$===void 0||$.addCaCertificateListener(this.caCertificateUpdateListener),this.identityCertificateProvider.addIdentityCertificateListener(this.identityCertificateUpdateListener);super._addWatcher(H)}_removeWatcher(H){var $;if(super._removeWatcher(H),this.getWatcherCount()===0)($=this.caCertificateProvider)===null||$===void 0||$.removeCaCertificateListener(this.caCertificateUpdateListener),this.identityCertificateProvider.removeIdentityCertificateListener(this.identityCertificateUpdateListener)}_equals(H){if(this===H)return!0;if(!(H instanceof eCA))return!1;return this.caCertificateProvider===H.caCertificateProvider&&this.identityCertificateProvider===H.identityCertificateProvider&&this.requireClientCertificate===H.requireClientCertificate}calculateSecureContextOptions(){var H;if(this.latestIdentityUpdate===null)return null;if(this.caCertificateProvider!==null&&this.latestCaUpdate===null)return null;return{ca:(H=this.latestCaUpdate)===null||H===void 0?void 0:H.caCertificate,cert:[this.latestIdentityUpdate.certificate],key:[this.latestIdentityUpdate.privateKey]}}finalizeUpdate(){let H=this.calculateSecureContextOptions();this.updateSecureContextOptions(H)}handleCaCertificateUpdate(H){this.latestCaUpdate=H,this.finalizeUpdate()}handleIdentityCertitificateUpdate(H){this.latestIdentityUpdate=H,this.finalizeUpdate()}}function oi9(H,$,A){return new eCA(H,$,A)}class HYA extends vWH{constructor(H,$){super({});this.childCredentials=H,this.interceptors=$}_isSecure(){return this.childCredentials._isSecure()}_equals(H){if(!(H instanceof HYA))return!1;if(!this.childCredentials._equals(H.childCredentials))return!1;if(this.interceptors.length!==H.interceptors.length)return!1;for(let $=0;$<this.interceptors.length;$++)if(this.interceptors[$]!==H.interceptors[$])return!1;return!0}_getInterceptors(){return this.interceptors}_addWatcher(H){this.childCredentials._addWatcher(H)}_removeWatcher(H){this.childCredentials._removeWatcher(H)}_getConstructorOptions(){return this.childCredentials._getConstructorOptions()}_getSecureContextOptions(){return this.childCredentials._getSecureContextOptions()}}function ti9(H,$){return new HYA(H,$)}});var ChH=z((sm)=>{Object.defineProperty(sm,"__esModule",{value:!0});sm.durationMessageToDuration=si9;sm.msToDuration=ei9;sm.durationToMs=Hn9;sm.isDuration=$n9;sm.isDurationMessage=An9;sm.parseDuration=In9;sm.durationToString=Dn9;function si9(H){return{seconds:Number.parseInt(H.seconds),nanos:H.nanos}}function ei9(H){return{seconds:H/1000|0,nanos:H%1000*1e6|0}}function Hn9(H){return H.seconds*1000+H.nanos/1e6|0}function $n9(H){return typeof H.seconds==="number"&&typeof H.nanos==="number"}function An9(H){return typeof H.seconds==="string"&&typeof H.nanos==="number"}var Ln9=/^(\d+)(?:\.(\d+))?s$/;function In9(H){let $=H.match(Ln9);if(!$)return null;return{seconds:Number.parseInt($[1],10),nanos:$[2]?Number.parseInt($[2].padEnd(9,"0"),10):0}}function Dn9(H){if(H.nanos===0)return`${H.seconds}s`;let $;if(H.nanos%1e6===0)$=1e6;else if(H.nanos%1000===0)$=1000;else $=1;return`${H.seconds}.${H.nanos/$}s`}});var HV$=z((Xw)=>{var __dirname="/home/runner/work/claude-cli-internal/claude-cli-internal/node_modules/@grpc/grpc-js/build/src";Object.defineProperty(Xw,"__esModule",{value:!0});Xw.OrcaOobMetricsSubchannelWrapper=Xw.GRPC_METRICS_HEADER=Xw.ServerMetricRecorder=Xw.PerRequestMetricRecorder=void 0;Xw.createOrcaClient=RED;Xw.createMetricsReader=Xn9;var Bn9=t6$(),$YA=ChH(),fn9=JWH(),En9=PhH(),NED=I8(),Mn9=FWH(),Gn9=YP(),OED=null;function e3$(){if(OED)return OED;let H=QCA().loadSync,$=H("xds/service/orca/v3/orca.proto",{keepCase:!0,longs:String,enums:String,defaults:!0,oneofs:!0,includeDirs:[`${__dirname}/../../proto/xds`,`${__dirname}/../../proto/protoc-gen-validate`]});return(0,Bn9.loadPackageDefinition)($)}class SED{constructor(){this.message={}}recordRequestCostMetric(H,$){if(!this.message.request_cost)this.message.request_cost={};this.message.request_cost[H]=$}recordUtilizationMetric(H,$){if(!this.message.utilization)this.message.utilization={};this.message.utilization[H]=$}recordNamedMetric(H,$){if(!this.message.named_metrics)this.message.named_metrics={};this.message.named_metrics[H]=$}recordCPUUtilizationMetric(H){this.message.cpu_utilization=H}recordMemoryUtilizationMetric(H){this.message.mem_utilization=H}recordApplicationUtilizationMetric(H){this.message.application_utilization=H}recordQpsMetric(H){this.message.rps_fractional=H}recordEpsMetric(H){this.message.eps=H}serialize(){return e3$().xds.data.orca.v3.OrcaLoadReport.serialize(this.message)}}Xw.PerRequestMetricRecorder=SED;var Un9=30000;class jED{constructor(){this.message={},this.serviceImplementation={StreamCoreMetrics:(H)=>{let $=H.request.report_interval?(0,$YA.durationToMs)((0,$YA.durationMessageToDuration)(H.request.report_interval)):Un9,A=setInterval(()=>{H.write(this.message)},$);H.on("cancelled",()=>{clearInterval(A)})}}}putUtilizationMetric(H,$){if(!this.message.utilization)this.message.utilization={};this.message.utilization[H]=$}setAllUtilizationMetrics(H){this.message.utilization=Object.assign({},H)}deleteUtilizationMetric(H){var $;($=this.message.utilization)===null||$===void 0||delete $[H]}setCpuUtilizationMetric(H){this.message.cpu_utilization=H}deleteCpuUtilizationMetric(){delete this.message.cpu_utilization}setApplicationUtilizationMetric(H){this.message.application_utilization=H}deleteApplicationUtilizationMetric(){delete this.message.application_utilization}setQpsMetric(H){this.message.rps_fractional=H}deleteQpsMetric(){delete this.message.rps_fractional}setEpsMetric(H){this.message.eps=H}deleteEpsMetric(){delete this.message.eps}addToServer(H){let $=e3$().xds.service.orca.v3.OpenRcaService.service;H.addService($,this.serviceImplementation)}}Xw.ServerMetricRecorder=jED;function RED(H){return new(e3$()).xds.service.orca.v3.OpenRcaService("unused",fn9.ChannelCredentials.createInsecure(),{channelOverride:H})}Xw.GRPC_METRICS_HEADER="endpoint-load-metrics-bin";var xED="grpc_orca_load_report";function Xn9(H,$){return(A,L,I)=>{let D=I.getOpaque(xED);if(D)H(D);else{let B=I.get(Xw.GRPC_METRICS_HEADER);if(B.length>0)D=e3$().xds.data.orca.v3.OrcaLoadReport.deserialize(B[0]),H(D),I.setOpaque(xED,D)}if($)$(A,L,I)}}var yED="orca_oob_metrics";class vED{constructor(H,$){this.metricsListener=H,this.intervalMs=$,this.dataProducer=null}setSubchannel(H){let $=H.getOrCreateDataProducer(yED,Jn9);this.dataProducer=$,$.addDataWatcher(this)}destroy(){var H;(H=this.dataProducer)===null||H===void 0||H.removeDataWatcher(this)}getInterval(){return this.intervalMs}onMetricsUpdate(H){this.metricsListener(H)}}class hED{constructor(H){this.subchannel=H,this.dataWatchers=new Set,this.orcaSupported=!0,this.metricsCall=null,this.currentInterval=1/0,this.backoffTimer=new Mn9.BackoffTimeout(()=>this.updateMetricsSubscription()),this.subchannelStateListener=()=>this.updateMetricsSubscription();let $=H.getChannel();this.client=RED($),H.addConnectivityStateListener(this.subchannelStateListener)}addDataWatcher(H){this.dataWatchers.add(H),this.updateMetricsSubscription()}removeDataWatcher(H){var $;if(this.dataWatchers.delete(H),this.dataWatchers.size===0)this.subchannel.removeDataProducer(yED),($=this.metricsCall)===null||$===void 0||$.cancel(),this.metricsCall=null,this.client.close(),this.subchannel.removeConnectivityStateListener(this.subchannelStateListener);else this.updateMetricsSubscription()}updateMetricsSubscription(){var H;if(this.dataWatchers.size===0||!this.orcaSupported||this.subchannel.getConnectivityState()!==Gn9.ConnectivityState.READY)return;let $=Math.min(...Array.from(this.dataWatchers).map((A)=>A.getInterval()));if(!this.metricsCall||$!==this.currentInterval){(H=this.metricsCall)===null||H===void 0||H.cancel(),this.currentInterval=$;let A=this.client.streamCoreMetrics({report_interval:(0,$YA.msToDuration)($)});this.metricsCall=A,A.on("data",(L)=>{this.dataWatchers.forEach((I)=>{I.onMetricsUpdate(L)})}),A.on("error",(L)=>{if(this.metricsCall=null,L.code===NED.Status.UNIMPLEMENTED){this.orcaSupported=!1;return}if(L.code===NED.Status.CANCELLED)return;this.backoffTimer.runOnce()})}}}class bED extends En9.BaseSubchannelWrapper{constructor(H,$,A){super(H);this.addDataWatcher(new vED($,A))}getWrappedSubchannel(){return this.child}}Xw.OrcaOobMetricsSubchannelWrapper=bED;function Jn9(H){return new hED(H)}});var DYA=z((aT)=>{Object.defineProperty(aT,"__esModule",{value:!0});aT.BaseServerInterceptingCall=aT.ServerInterceptingCall=aT.ResponderBuilder=aT.ServerListenerBuilder=void 0;aT.isInterceptingServerListener=Qn9;aT.getServerInterceptingCall=Cn9;var LV$=dQ(),mC=I8(),bWH=require("http2"),kED=T6$(),uED=require("zlib"),Fn9=bCA(),cED=wG(),Kn9=require("tls"),gED=HV$(),lED="server_call";function P0H(H){cED.trace(mC.LogVerbosity.DEBUG,lED,H)}class iED{constructor(){this.metadata=void 0,this.message=void 0,this.halfClose=void 0,this.cancel=void 0}withOnReceiveMetadata(H){return this.metadata=H,this}withOnReceiveMessage(H){return this.message=H,this}withOnReceiveHalfClose(H){return this.halfClose=H,this}withOnCancel(H){return this.cancel=H,this}build(){return{onReceiveMetadata:this.metadata,onReceiveMessage:this.message,onReceiveHalfClose:this.halfClose,onCancel:this.cancel}}}aT.ServerListenerBuilder=iED;function Qn9(H){return H.onReceiveMetadata!==void 0&&H.onReceiveMetadata.length===1}class nED{constructor(H,$){this.listener=H,this.nextListener=$,this.cancelled=!1,this.processingMetadata=!1,this.hasPendingMessage=!1,this.pendingMessage=null,this.processingMessage=!1,this.hasPendingHalfClose=!1}processPendingMessage(){if(this.hasPendingMessage)this.nextListener.onReceiveMessage(this.pendingMessage),this.pendingMessage=null,this.hasPendingMessage=!1}processPendingHalfClose(){if(this.hasPendingHalfClose)this.nextListener.onReceiveHalfClose(),this.hasPendingHalfClose=!1}onReceiveMetadata(H){if(this.cancelled)return;this.processingMetadata=!0,this.listener.onReceiveMetadata(H,($)=>{if(this.processingMetadata=!1,this.cancelled)return;this.nextListener.onReceiveMetadata($),this.processPendingMessage(),this.processPendingHalfClose()})}onReceiveMessage(H){if(this.cancelled)return;this.processingMessage=!0,this.listener.onReceiveMessage(H,($)=>{if(this.processingMessage=!1,this.cancelled)return;if(this.processingMetadata)this.pendingMessage=$,this.hasPendingMessage=!0;else this.nextListener.onReceiveMessage($),this.processPendingHalfClose()})}onReceiveHalfClose(){if(this.cancelled)return;this.listener.onReceiveHalfClose(()=>{if(this.cancelled)return;if(this.processingMetadata||this.processingMessage)this.hasPendingHalfClose=!0;else this.nextListener.onReceiveHalfClose()})}onCancel(){this.cancelled=!0,this.listener.onCancel(),this.nextListener.onCancel()}}class rED{constructor(){this.start=void 0,this.metadata=void 0,this.message=void 0,this.status=void 0}withStart(H){return this.start=H,this}withSendMetadata(H){return this.metadata=H,this}withSendMessage(H){return this.message=H,this}withSendStatus(H){return this.status=H,this}build(){return{start:this.start,sendMetadata:this.metadata,sendMessage:this.message,sendStatus:this.status}}}aT.ResponderBuilder=rED;var $V$={onReceiveMetadata:(H,$)=>{$(H)},onReceiveMessage:(H,$)=>{$(H)},onReceiveHalfClose:(H)=>{H()},onCancel:()=>{}},AV$={start:(H)=>{H()},sendMetadata:(H,$)=>{$(H)},sendMessage:(H,$)=>{$(H)},sendStatus:(H,$)=>{$(H)}};class aED{constructor(H,$){var A,L,I,D;this.nextCall=H,this.processingMetadata=!1,this.sentMetadata=!1,this.processingMessage=!1,this.pendingMessage=null,this.pendingMessageCallback=null,this.pendingStatus=null,this.responder={start:(A=$===null||$===void 0?void 0:$.start)!==null&&A!==void 0?A:AV$.start,sendMetadata:(L=$===null||$===void 0?void 0:$.sendMetadata)!==null&&L!==void 0?L:AV$.sendMetadata,sendMessage:(I=$===null||$===void 0?void 0:$.sendMessage)!==null&&I!==void 0?I:AV$.sendMessage,sendStatus:(D=$===null||$===void 0?void 0:$.sendStatus)!==null&&D!==void 0?D:AV$.sendStatus}}processPendingMessage(){if(this.pendingMessageCallback)this.nextCall.sendMessage(this.pendingMessage,this.pendingMessageCallback),this.pendingMessage=null,this.pendingMessageCallback=null}processPendingStatus(){if(this.pendingStatus)this.nextCall.sendStatus(this.pendingStatus),this.pendingStatus=null}start(H){this.responder.start(($)=>{var A,L,I,D;let B={onReceiveMetadata:(A=$===null||$===void 0?void 0:$.onReceiveMetadata)!==null&&A!==void 0?A:$V$.onReceiveMetadata,onReceiveMessage:(L=$===null||$===void 0?void 0:$.onReceiveMessage)!==null&&L!==void 0?L:$V$.onReceiveMessage,onReceiveHalfClose:(I=$===null||$===void 0?void 0:$.onReceiveHalfClose)!==null&&I!==void 0?I:$V$.onReceiveHalfClose,onCancel:(D=$===null||$===void 0?void 0:$.onCancel)!==null&&D!==void 0?D:$V$.onCancel},f=new nED(B,H);this.nextCall.start(f)})}sendMetadata(H){this.processingMetadata=!0,this.sentMetadata=!0,this.responder.sendMetadata(H,($)=>{this.processingMetadata=!1,this.nextCall.sendMetadata($),this.processPendingMessage(),this.processPendingStatus()})}sendMessage(H,$){if(this.processingMessage=!0,!this.sentMetadata)this.sendMetadata(new LV$.Metadata);this.responder.sendMessage(H,(A)=>{if(this.processingMessage=!1,this.processingMetadata)this.pendingMessage=A,this.pendingMessageCallback=$;else this.nextCall.sendMessage(A,$)})}sendStatus(H){this.responder.sendStatus(H,($)=>{if(this.processingMetadata||this.processingMessage)this.pendingStatus=$;else this.nextCall.sendStatus($)})}startRead(){this.nextCall.startRead()}getPeer(){return this.nextCall.getPeer()}getDeadline(){return this.nextCall.getDeadline()}getHost(){return this.nextCall.getHost()}getAuthContext(){return this.nextCall.getAuthContext()}getConnectionInfo(){return this.nextCall.getConnectionInfo()}getMetricsRecorder(){return this.nextCall.getMetricsRecorder()}}aT.ServerInterceptingCall=aED;var oED="grpc-accept-encoding",LYA="grpc-encoding",mED="grpc-message",pED="grpc-status",AYA="grpc-timeout",Wn9=/(\d{1,8})\s*([HMSmun])/,Vn9={H:3600000,M:60000,S:1000,m:1,u:0.001,n:0.000001},Pn9={[oED]:"identity,deflate,gzip",[LYA]:"identity"},dED={[bWH.constants.HTTP2_HEADER_STATUS]:bWH.constants.HTTP_STATUS_OK,[bWH.constants.HTTP2_HEADER_CONTENT_TYPE]:"application/grpc+proto"},_n9={waitForTrailers:!0};class IYA{constructor(H,$,A,L,I){var D,B;if(this.stream=H,this.callEventTracker=A,this.handler=L,this.listener=null,this.deadlineTimer=null,this.deadline=1/0,this.maxSendMessageSize=mC.DEFAULT_MAX_SEND_MESSAGE_LENGTH,this.maxReceiveMessageSize=mC.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,this.cancelled=!1,this.metadataSent=!1,this.wantTrailers=!1,this.cancelNotified=!1,this.incomingEncoding="identity",this.readQueue=[],this.isReadPending=!1,this.receivedHalfClose=!1,this.streamEnded=!1,this.metricsRecorder=new gED.PerRequestMetricRecorder,this.stream.once("error",(U)=>{}),this.stream.once("close",()=>{var U;if(P0H("Request to method "+((U=this.handler)===null||U===void 0?void 0:U.path)+" stream closed with rstCode "+this.stream.rstCode),this.callEventTracker&&!this.streamEnded)this.streamEnded=!0,this.callEventTracker.onStreamEnd(!1),this.callEventTracker.onCallEnd({code:mC.Status.CANCELLED,details:"Stream closed before sending status",metadata:null});this.notifyOnCancel()}),this.stream.on("data",(U)=>{this.handleDataFrame(U)}),this.stream.pause(),this.stream.on("end",()=>{this.handleEndEvent()}),"grpc.max_send_message_length"in I)this.maxSendMessageSize=I["grpc.max_send_message_length"];if("grpc.max_receive_message_length"in I)this.maxReceiveMessageSize=I["grpc.max_receive_message_length"];this.host=(D=$[":authority"])!==null&&D!==void 0?D:$.host,this.decoder=new Fn9.StreamDecoder(this.maxReceiveMessageSize);let f=LV$.Metadata.fromHttp2Headers($);if(cED.isTracerEnabled(lED))P0H("Request to "+this.handler.path+" received headers "+JSON.stringify(f.toJSON()));let E=f.get(AYA);if(E.length>0)this.handleTimeoutHeader(E[0]);let M=f.get(LYA);if(M.length>0)this.incomingEncoding=M[0];f.remove(AYA),f.remove(LYA),f.remove(oED),f.remove(bWH.constants.HTTP2_HEADER_ACCEPT_ENCODING),f.remove(bWH.constants.HTTP2_HEADER_TE),f.remove(bWH.constants.HTTP2_HEADER_CONTENT_TYPE),this.metadata=f;let G=(B=H.session)===null||B===void 0?void 0:B.socket;this.connectionInfo={localAddress:G===null||G===void 0?void 0:G.localAddress,localPort:G===null||G===void 0?void 0:G.localPort,remoteAddress:G===null||G===void 0?void 0:G.remoteAddress,remotePort:G===null||G===void 0?void 0:G.remotePort},this.shouldSendMetrics=!!I["grpc.server_call_metric_recording"]}handleTimeoutHeader(H){let $=H.toString().match(Wn9);if($===null){let I={code:mC.Status.INTERNAL,details:`Invalid ${AYA} value "${H}"`,metadata:null};process.nextTick(()=>{this.sendStatus(I)});return}let A=+$[1]*Vn9[$[2]]|0,L=new Date;this.deadline=L.setMilliseconds(L.getMilliseconds()+A),this.deadlineTimer=setTimeout(()=>{let I={code:mC.Status.DEADLINE_EXCEEDED,details:"Deadline exceeded",metadata:null};this.sendStatus(I)},A)}checkCancelled(){if(!this.cancelled&&(this.stream.destroyed||this.stream.closed))this.notifyOnCancel(),this.cancelled=!0;return this.cancelled}notifyOnCancel(){if(this.cancelNotified)return;if(this.cancelNotified=!0,this.cancelled=!0,process.nextTick(()=>{var H;(H=this.listener)===null||H===void 0||H.onCancel()}),this.deadlineTimer)clearTimeout(this.deadlineTimer);this.stream.resume()}maybeSendMetadata(){if(!this.metadataSent)this.sendMetadata(new LV$.Metadata)}serializeMessage(H){let $=this.handler.serialize(H),A=$.byteLength,L=Buffer.allocUnsafe(A+5);return L.writeUInt8(0,0),L.writeUInt32BE(A,1),$.copy(L,5),L}decompressMessage(H,$){let A=H.subarray(5);if($==="identity")return A;else if($==="deflate"||$==="gzip"){let L;if($==="deflate")L=uED.createInflate();else L=uED.createGunzip();return new Promise((I,D)=>{let B=0,f=[];L.on("data",(E)=>{if(f.push(E),B+=E.byteLength,this.maxReceiveMessageSize!==-1&&B>this.maxReceiveMessageSize)L.destroy(),D({code:mC.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxReceiveMessageSize}`})}),L.on("end",()=>{I(Buffer.concat(f))}),L.write(A),L.end()})}else return Promise.reject({code:mC.Status.UNIMPLEMENTED,details:`Received message compressed with unsupported encoding "${$}"`})}async decompressAndMaybePush(H){if(H.type!=="COMPRESSED")throw Error(`Invalid queue entry type: ${H.type}`);let A=H.compressedMessage.readUInt8(0)===1?this.incomingEncoding:"identity",L;try{L=await this.decompressMessage(H.compressedMessage,A)}catch(I){this.sendStatus(I);return}try{H.parsedMessage=this.handler.deserialize(L)}catch(I){this.sendStatus({code:mC.Status.INTERNAL,details:`Error deserializing request: ${I.message}`});return}H.type="READABLE",this.maybePushNextMessage()}maybePushNextMessage(){if(this.listener&&this.isReadPending&&this.readQueue.length>0&&this.readQueue[0].type!=="COMPRESSED"){this.isReadPending=!1;let H=this.readQueue.shift();if(H.type==="READABLE")this.listener.onReceiveMessage(H.parsedMessage);else this.listener.onReceiveHalfClose()}}handleDataFrame(H){var $;if(this.checkCancelled())return;P0H("Request to "+this.handler.path+" received data frame of size "+H.length);let A;try{A=this.decoder.write(H)}catch(L){this.sendStatus({code:mC.Status.RESOURCE_EXHAUSTED,details:L.message});return}for(let L of A){this.stream.pause();let I={type:"COMPRESSED",compressedMessage:L,parsedMessage:null};this.readQueue.push(I),this.decompressAndMaybePush(I),($=this.callEventTracker)===null||$===void 0||$.addMessageReceived()}}handleEndEvent(){this.readQueue.push({type:"HALF_CLOSE",compressedMessage:null,parsedMessage:null}),this.receivedHalfClose=!0,this.maybePushNextMessage()}start(H){if(P0H("Request to "+this.handler.path+" start called"),this.checkCancelled())return;this.listener=H,H.onReceiveMetadata(this.metadata)}sendMetadata(H){if(this.checkCancelled())return;if(this.metadataSent)return;this.metadataSent=!0;let $=H?H.toHttp2Headers():null,A=Object.assign(Object.assign(Object.assign({},dED),Pn9),$);this.stream.respond(A,_n9)}sendMessage(H,$){if(this.checkCancelled())return;let A;try{A=this.serializeMessage(H)}catch(L){this.sendStatus({code:mC.Status.INTERNAL,details:`Error serializing response: ${(0,kED.getErrorMessage)(L)}`,metadata:null});return}if(this.maxSendMessageSize!==-1&&A.length-5>this.maxSendMessageSize){this.sendStatus({code:mC.Status.RESOURCE_EXHAUSTED,details:`Sent message larger than max (${A.length} vs. ${this.maxSendMessageSize})`,metadata:null});return}this.maybeSendMetadata(),P0H("Request to "+this.handler.path+" sent data frame of size "+A.length),this.stream.write(A,(L)=>{var I;if(L){this.sendStatus({code:mC.Status.INTERNAL,details:`Error writing message: ${(0,kED.getErrorMessage)(L)}`,metadata:null});return}(I=this.callEventTracker)===null||I===void 0||I.addMessageSent(),$()})}sendStatus(H){var $,A,L;if(this.checkCancelled())return;P0H("Request to method "+(($=this.handler)===null||$===void 0?void 0:$.path)+" ended with status code: "+mC.Status[H.code]+" details: "+H.details);let I=(L=(A=H.metadata)===null||A===void 0?void 0:A.clone())!==null&&L!==void 0?L:new LV$.Metadata;if(this.shouldSendMetrics)I.set(gED.GRPC_METRICS_HEADER,this.metricsRecorder.serialize());if(this.metadataSent)if(!this.wantTrailers)this.wantTrailers=!0,this.stream.once("wantTrailers",()=>{if(this.callEventTracker&&!this.streamEnded)this.streamEnded=!0,this.callEventTracker.onStreamEnd(!0),this.callEventTracker.onCallEnd(H);let D=Object.assign({[pED]:H.code,[mED]:encodeURI(H.details)},I.toHttp2Headers());this.stream.sendTrailers(D),this.notifyOnCancel()}),this.stream.end();else this.notifyOnCancel();else{if(this.callEventTracker&&!this.streamEnded)this.streamEnded=!0,this.callEventTracker.onStreamEnd(!0),this.callEventTracker.onCallEnd(H);let D=Object.assign(Object.assign({[pED]:H.code,[mED]:encodeURI(H.details)},dED),I.toHttp2Headers());this.stream.respond(D,{endStream:!0}),this.notifyOnCancel()}}startRead(){if(P0H("Request to "+this.handler.path+" startRead called"),this.checkCancelled())return;if(this.isReadPending=!0,this.readQueue.length===0){if(!this.receivedHalfClose)this.stream.resume()}else this.maybePushNextMessage()}getPeer(){var H;let $=(H=this.stream.session)===null||H===void 0?void 0:H.socket;if($===null||$===void 0?void 0:$.remoteAddress)if($.remotePort)return`${$.remoteAddress}:${$.remotePort}`;else return $.remoteAddress;else return"unknown"}getDeadline(){return this.deadline}getHost(){return this.host}getAuthContext(){var H;if(((H=this.stream.session)===null||H===void 0?void 0:H.socket)instanceof Kn9.TLSSocket){let $=this.stream.session.socket.getPeerCertificate();return{transportSecurityType:"ssl",sslPeerCertificate:$.raw?$:void 0}}else return{}}getConnectionInfo(){return this.connectionInfo}getMetricsRecorder(){return this.metricsRecorder}}aT.BaseServerInterceptingCall=IYA;function Cn9(H,$,A,L,I,D){let B={path:I.path,requestStream:I.type==="clientStream"||I.type==="bidi",responseStream:I.type==="serverStream"||I.type==="bidi",requestDeserialize:I.deserialize,responseSerialize:I.serialize},f=new IYA($,A,L,I,D);return H.reduce((E,M)=>{return M(B,E)},f)}});var LMD=z((Oo)=>{var Yn9=Oo&&Oo.__runInitializers||function(H,$,A){var L=arguments.length>2;for(var I=0;I<$.length;I++)A=L?$[I].call(H,A):$[I].call(H);return L?A:void 0},wn9=Oo&&Oo.__esDecorate||function(H,$,A,L,I,D){function B(P){if(P!==void 0&&typeof P!=="function")throw TypeError("Function expected");return P}var f=L.kind,E=f==="getter"?"get":f==="setter"?"set":"value",M=!$&&H?L.static?H:H.prototype:null,G=$||(M?Object.getOwnPropertyDescriptor(M,L.name):{}),U,X=!1;for(var J=A.length-1;J>=0;J--){var F={};for(var Q in L)F[Q]=Q==="access"?{}:L[Q];for(var Q in L.access)F.access[Q]=L.access[Q];F.addInitializer=function(P){if(X)throw TypeError("Cannot add initializers after decoration has completed");D.push(B(P||null))};var W=(0,A[J])(f==="accessor"?{get:G.get,set:G.set}:G[E],F);if(f==="accessor"){if(W===void 0)continue;if(W===null||typeof W!=="object")throw TypeError("Object expected");if(U=B(W.get))G.get=U;if(U=B(W.set))G.set=U;if(U=B(W.init))I.unshift(U)}else if(U=B(W))if(f==="field")I.unshift(U);else G[E]=U}if(M)Object.defineProperty(M,L.name,G);X=!0};Object.defineProperty(Oo,"__esModule",{value:!0});Oo.Server=void 0;var pC=require("http2"),Zn9=require("util"),VJ=I8(),gWH=zED(),BYA=s3$(),tED=sx(),uWH=wG(),No=gC(),ES=CP(),wK=Zo(),sED=DYA(),kWH=2147483647,fYA=2147483647,qn9=20000,eED=2147483647,{HTTP2_HEADER_PATH:HMD}=pC.constants,Tn9="server",$MD=Buffer.from("max_age");function AMD(H){uWH.trace(VJ.LogVerbosity.DEBUG,"server_call",H)}function zn9(){}function Nn9(H){return function($,A){return Zn9.deprecate($,H)}}function EYA(H){return{code:VJ.Status.UNIMPLEMENTED,details:`The server does not implement the method ${H}`}}function On9(H,$){let A=EYA($);switch(H){case"unary":return(L,I)=>{I(A,null)};case"clientStream":return(L,I)=>{I(A,null)};case"serverStream":return(L)=>{L.emit("error",A)};case"bidi":return(L)=>{L.emit("error",A)};default:throw Error(`Invalid handlerType ${H}`)}}var xn9=(()=>{var H;let $=[],A;return H=class{constructor(I){var D,B,f,E,M,G;if(this.boundPorts=(Yn9(this,$),new Map),this.http2Servers=new Map,this.sessionIdleTimeouts=new Map,this.handlers=new Map,this.sessions=new Map,this.started=!1,this.shutdown=!1,this.serverAddressString="null",this.channelzEnabled=!0,this.options=I!==null&&I!==void 0?I:{},this.options["grpc.enable_channelz"]===0)this.channelzEnabled=!1,this.channelzTrace=new wK.ChannelzTraceStub,this.callTracker=new wK.ChannelzCallTrackerStub,this.listenerChildrenTracker=new wK.ChannelzChildrenTrackerStub,this.sessionChildrenTracker=new wK.ChannelzChildrenTrackerStub;else this.channelzTrace=new wK.ChannelzTrace,this.callTracker=new wK.ChannelzCallTracker,this.listenerChildrenTracker=new wK.ChannelzChildrenTracker,this.sessionChildrenTracker=new wK.ChannelzChildrenTracker;if(this.channelzRef=(0,wK.registerChannelzServer)("server",()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzTrace.addTrace("CT_INFO","Server created"),this.maxConnectionAgeMs=(D=this.options["grpc.max_connection_age_ms"])!==null&&D!==void 0?D:kWH,this.maxConnectionAgeGraceMs=(B=this.options["grpc.max_connection_age_grace_ms"])!==null&&B!==void 0?B:kWH,this.keepaliveTimeMs=(f=this.options["grpc.keepalive_time_ms"])!==null&&f!==void 0?f:fYA,this.keepaliveTimeoutMs=(E=this.options["grpc.keepalive_timeout_ms"])!==null&&E!==void 0?E:qn9,this.sessionIdleTimeout=(M=this.options["grpc.max_connection_idle_ms"])!==null&&M!==void 0?M:eED,this.commonServerOptions={maxSendHeaderBlockLength:Number.MAX_SAFE_INTEGER},"grpc-node.max_session_memory"in this.options)this.commonServerOptions.maxSessionMemory=this.options["grpc-node.max_session_memory"];else this.commonServerOptions.maxSessionMemory=Number.MAX_SAFE_INTEGER;if("grpc.max_concurrent_streams"in this.options)this.commonServerOptions.settings={maxConcurrentStreams:this.options["grpc.max_concurrent_streams"]};this.interceptors=(G=this.options.interceptors)!==null&&G!==void 0?G:[],this.trace("Server constructed")}getChannelzInfo(){return{trace:this.channelzTrace,callTracker:this.callTracker,listenerChildren:this.listenerChildrenTracker.getChildLists(),sessionChildren:this.sessionChildrenTracker.getChildLists()}}getChannelzSessionInfo(I){var D,B,f;let E=this.sessions.get(I),M=I.socket,G=M.remoteAddress?(0,No.stringToSubchannelAddress)(M.remoteAddress,M.remotePort):null,U=M.localAddress?(0,No.stringToSubchannelAddress)(M.localAddress,M.localPort):null,X;if(I.encrypted){let F=M,Q=F.getCipher(),W=F.getCertificate(),P=F.getPeerCertificate();X={cipherSuiteStandardName:(D=Q.standardName)!==null&&D!==void 0?D:null,cipherSuiteOtherName:Q.standardName?null:Q.name,localCertificate:W&&"raw"in W?W.raw:null,remoteCertificate:P&&"raw"in P?P.raw:null}}else X=null;return{remoteAddress:G,localAddress:U,security:X,remoteName:null,streamsStarted:E.streamTracker.callsStarted,streamsSucceeded:E.streamTracker.callsSucceeded,streamsFailed:E.streamTracker.callsFailed,messagesSent:E.messagesSent,messagesReceived:E.messagesReceived,keepAlivesSent:E.keepAlivesSent,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:E.streamTracker.lastCallStartedTimestamp,lastMessageSentTimestamp:E.lastMessageSentTimestamp,lastMessageReceivedTimestamp:E.lastMessageReceivedTimestamp,localFlowControlWindow:(B=I.state.localWindowSize)!==null&&B!==void 0?B:null,remoteFlowControlWindow:(f=I.state.remoteWindowSize)!==null&&f!==void 0?f:null}}trace(I){uWH.trace(VJ.LogVerbosity.DEBUG,Tn9,"("+this.channelzRef.id+") "+I)}keepaliveTrace(I){uWH.trace(VJ.LogVerbosity.DEBUG,"keepalive","("+this.channelzRef.id+") "+I)}addProtoService(){throw Error("Not implemented. Use addService() instead")}addService(I,D){if(I===null||typeof I!=="object"||D===null||typeof D!=="object")throw Error("addService() requires two objects as arguments");let B=Object.keys(I);if(B.length===0)throw Error("Cannot add an empty service to a server");B.forEach((f)=>{let E=I[f],M;if(E.requestStream)if(E.responseStream)M="bidi";else M="clientStream";else if(E.responseStream)M="serverStream";else M="unary";let G=D[f],U;if(G===void 0&&typeof E.originalName==="string")G=D[E.originalName];if(G!==void 0)U=G.bind(D);else U=On9(M,f);if(this.register(E.path,U,E.responseSerialize,E.requestDeserialize,M)===!1)throw Error(`Method handler for ${E.path} already provided.`)})}removeService(I){if(I===null||typeof I!=="object")throw Error("removeService() requires object as argument");Object.keys(I).forEach((B)=>{let f=I[B];this.unregister(f.path)})}bind(I,D){throw Error("Not implemented. Use bindAsync() instead")}experimentalRegisterListenerToChannelz(I){return(0,wK.registerChannelzSocket)((0,No.subchannelAddressToString)(I),()=>{return{localAddress:I,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}},this.channelzEnabled)}experimentalUnregisterListenerFromChannelz(I){(0,wK.unregisterChannelzRef)(I)}createHttp2Server(I){let D;if(I._isSecure()){let B=I._getConstructorOptions(),f=I._getSecureContextOptions(),E=Object.assign(Object.assign(Object.assign(Object.assign({},this.commonServerOptions),B),f),{enableTrace:this.options["grpc-node.tls_enable_trace"]===1}),M=f!==null;this.trace("Initial credentials valid: "+M),D=pC.createSecureServer(E),D.prependListener("connection",(U)=>{if(!M)this.trace("Dropped connection from "+JSON.stringify(U.address())+" due to unloaded credentials"),U.destroy()}),D.on("secureConnection",(U)=>{U.on("error",(X)=>{this.trace("An incoming TLS connection closed with error: "+X.message)})});let G=(U)=>{if(U){let X=D;try{X.setSecureContext(U)}catch(J){uWH.log(VJ.LogVerbosity.ERROR,"Failed to set secure context with error "+J.message),U=null}}M=U!==null,this.trace("Post-update credentials valid: "+M)};I._addWatcher(G),D.on("close",()=>{I._removeWatcher(G)})}else D=pC.createServer(this.commonServerOptions);return D.setTimeout(0,zn9),this._setupHandlers(D,I._getInterceptors()),D}bindOneAddress(I,D){this.trace("Attempting to bind "+(0,No.subchannelAddressToString)(I));let B=this.createHttp2Server(D.credentials);return new Promise((f,E)=>{let M=(G)=>{this.trace("Failed to bind "+(0,No.subchannelAddressToString)(I)+" with error "+G.message),f({port:"port"in I?I.port:1,error:G.message})};B.once("error",M),B.listen(I,()=>{let G=B.address(),U;if(typeof G==="string")U={path:G};else U={host:G.address,port:G.port};let X=this.experimentalRegisterListenerToChannelz(U);this.listenerChildrenTracker.refChild(X),this.http2Servers.set(B,{channelzRef:X,sessions:new Set,ownsChannelzRef:!0}),D.listeningServers.add(B),this.trace("Successfully bound "+(0,No.subchannelAddressToString)(U)),f({port:"port"in U?U.port:1}),B.removeListener("error",M)})})}async bindManyPorts(I,D){if(I.length===0)return{count:0,port:0,errors:[]};if((0,No.isTcpSubchannelAddress)(I[0])&&I[0].port===0){let B=await this.bindOneAddress(I[0],D);if(B.error){let f=await this.bindManyPorts(I.slice(1),D);return Object.assign(Object.assign({},f),{errors:[B.error,...f.errors]})}else{let f=I.slice(1).map((G)=>(0,No.isTcpSubchannelAddress)(G)?{host:G.host,port:B.port}:G),E=await Promise.all(f.map((G)=>this.bindOneAddress(G,D))),M=[B,...E];return{count:M.filter((G)=>G.error===void 0).length,port:B.port,errors:M.filter((G)=>G.error).map((G)=>G.error)}}}else{let B=await Promise.all(I.map((f)=>this.bindOneAddress(f,D)));return{count:B.filter((f)=>f.error===void 0).length,port:B[0].port,errors:B.filter((f)=>f.error).map((f)=>f.error)}}}async bindAddressList(I,D){let B=await this.bindManyPorts(I,D);if(B.count>0){if(B.count<I.length)uWH.log(VJ.LogVerbosity.INFO,`WARNING Only ${B.count} addresses added out of total ${I.length} resolved`);return B.port}else{let f=`No address added out of total ${I.length} resolved`;throw uWH.log(VJ.LogVerbosity.ERROR,f),Error(`${f} errors: [${B.errors.join(",")}]`)}}resolvePort(I){return new Promise((D,B)=>{let f=!1,E=(G,U,X,J)=>{if(f)return!0;if(f=!0,!G.ok)return B(Error(G.error.details)),!0;let F=[].concat(...G.value.map((Q)=>Q.addresses));if(F.length===0)return B(Error(`No addresses resolved for port ${I}`)),!0;return D(F),!0};(0,tED.createResolver)(I,E,this.options).updateResolution()})}async bindPort(I,D){let B=await this.resolvePort(I);if(D.cancelled)throw this.completeUnbind(D),Error("bindAsync operation cancelled by unbind call");let f=await this.bindAddressList(B,D);if(D.cancelled)throw this.completeUnbind(D),Error("bindAsync operation cancelled by unbind call");return f}normalizePort(I){let D=(0,ES.parseUri)(I);if(D===null)throw Error(`Could not parse port "${I}"`);let B=(0,tED.mapUriDefaultScheme)(D);if(B===null)throw Error(`Could not get a default scheme for port "${I}"`);return B}bindAsync(I,D,B){if(this.shutdown)throw Error("bindAsync called after shutdown");if(typeof I!=="string")throw TypeError("port must be a string");if(D===null||!(D instanceof BYA.ServerCredentials))throw TypeError("creds must be a ServerCredentials object");if(typeof B!=="function")throw TypeError("callback must be a function");this.trace("bindAsync port="+I);let f=this.normalizePort(I),E=(X,J)=>{process.nextTick(()=>B(X,J))},M=this.boundPorts.get((0,ES.uriToString)(f));if(M){if(!D._equals(M.credentials)){E(Error(`${I} already bound with incompatible credentials`),0);return}if(M.cancelled=!1,M.completionPromise)M.completionPromise.then((X)=>B(null,X),(X)=>B(X,0));else E(null,M.portNumber);return}M={mapKey:(0,ES.uriToString)(f),originalUri:f,completionPromise:null,cancelled:!1,portNumber:0,credentials:D,listeningServers:new Set};let G=(0,ES.splitHostPort)(f.path),U=this.bindPort(f,M);if(M.completionPromise=U,(G===null||G===void 0?void 0:G.port)===0)U.then((X)=>{let J={scheme:f.scheme,authority:f.authority,path:(0,ES.combineHostPort)({host:G.host,port:X})};M.mapKey=(0,ES.uriToString)(J),M.completionPromise=null,M.portNumber=X,this.boundPorts.set(M.mapKey,M),B(null,X)},(X)=>{B(X,0)});else this.boundPorts.set(M.mapKey,M),U.then((X)=>{M.completionPromise=null,M.portNumber=X,B(null,X)},(X)=>{B(X,0)})}registerInjectorToChannelz(){return(0,wK.registerChannelzSocket)("injector",()=>{return{localAddress:null,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}},this.channelzEnabled)}experimentalCreateConnectionInjectorWithChannelzRef(I,D,B=!1){if(I===null||!(I instanceof BYA.ServerCredentials))throw TypeError("creds must be a ServerCredentials object");if(this.channelzEnabled)this.listenerChildrenTracker.refChild(D);let f=this.createHttp2Server(I),E=new Set;return this.http2Servers.set(f,{channelzRef:D,sessions:E,ownsChannelzRef:B}),{injectConnection:(M)=>{f.emit("connection",M)},drain:(M)=>{var G,U;for(let X of E)this.closeSession(X);(U=(G=setTimeout(()=>{for(let X of E)X.destroy(pC.constants.NGHTTP2_CANCEL)},M)).unref)===null||U===void 0||U.call(G)},destroy:()=>{this.closeServer(f);for(let M of E)this.closeSession(M)}}}createConnectionInjector(I){if(I===null||!(I instanceof BYA.ServerCredentials))throw TypeError("creds must be a ServerCredentials object");let D=this.registerInjectorToChannelz();return this.experimentalCreateConnectionInjectorWithChannelzRef(I,D,!0)}closeServer(I,D){this.trace("Closing server with address "+JSON.stringify(I.address()));let B=this.http2Servers.get(I);I.close(()=>{if(B&&B.ownsChannelzRef)this.listenerChildrenTracker.unrefChild(B.channelzRef),(0,wK.unregisterChannelzRef)(B.channelzRef);this.http2Servers.delete(I),D===null||D===void 0||D()})}closeSession(I,D){var B;this.trace("Closing session initiated by "+((B=I.socket)===null||B===void 0?void 0:B.remoteAddress));let f=this.sessions.get(I),E=()=>{if(f)this.sessionChildrenTracker.unrefChild(f.ref),(0,wK.unregisterChannelzRef)(f.ref);D===null||D===void 0||D()};if(I.closed)queueMicrotask(E);else I.close(E)}completeUnbind(I){for(let D of I.listeningServers){let B=this.http2Servers.get(D);if(this.closeServer(D,()=>{I.listeningServers.delete(D)}),B)for(let f of B.sessions)this.closeSession(f)}this.boundPorts.delete(I.mapKey)}unbind(I){this.trace("unbind port="+I);let D=this.normalizePort(I),B=(0,ES.splitHostPort)(D.path);if((B===null||B===void 0?void 0:B.port)===0)throw Error("Cannot unbind port 0");let f=this.boundPorts.get((0,ES.uriToString)(D));if(f)if(this.trace("unbinding "+f.mapKey+" originally bound as "+(0,ES.uriToString)(f.originalUri)),f.completionPromise)f.cancelled=!0;else this.completeUnbind(f)}drain(I,D){var B,f;this.trace("drain port="+I+" graceTimeMs="+D);let E=this.normalizePort(I),M=(0,ES.splitHostPort)(E.path);if((M===null||M===void 0?void 0:M.port)===0)throw Error("Cannot drain port 0");let G=this.boundPorts.get((0,ES.uriToString)(E));if(!G)return;let U=new Set;for(let X of G.listeningServers){let J=this.http2Servers.get(X);if(J)for(let F of J.sessions)U.add(F),this.closeSession(F,()=>{U.delete(F)})}(f=(B=setTimeout(()=>{for(let X of U)X.destroy(pC.constants.NGHTTP2_CANCEL)},D)).unref)===null||f===void 0||f.call(B)}forceShutdown(){for(let I of this.boundPorts.values())I.cancelled=!0;this.boundPorts.clear();for(let I of this.http2Servers.keys())this.closeServer(I);this.sessions.forEach((I,D)=>{this.closeSession(D),D.destroy(pC.constants.NGHTTP2_CANCEL)}),this.sessions.clear(),(0,wK.unregisterChannelzRef)(this.channelzRef),this.shutdown=!0}register(I,D,B,f,E){if(this.handlers.has(I))return!1;return this.handlers.set(I,{func:D,serialize:B,deserialize:f,type:E,path:I}),!0}unregister(I){return this.handlers.delete(I)}start(){if(this.http2Servers.size===0||[...this.http2Servers.keys()].every((I)=>!I.listening))throw Error("server must be bound in order to start");if(this.started===!0)throw Error("server is already started");this.started=!0}tryShutdown(I){var D;let B=(M)=>{(0,wK.unregisterChannelzRef)(this.channelzRef),I(M)},f=0;function E(){if(f--,f===0)B()}this.shutdown=!0;for(let[M,G]of this.http2Servers.entries()){f++;let U=G.channelzRef.name;this.trace("Waiting for server "+U+" to close"),this.closeServer(M,()=>{this.trace("Server "+U+" finished closing"),E()});for(let X of G.sessions.keys()){f++;let J=(D=X.socket)===null||D===void 0?void 0:D.remoteAddress;this.trace("Waiting for session "+J+" to close"),this.closeSession(X,()=>{this.trace("Session "+J+" finished closing"),E()})}}if(f===0)B()}addHttp2Port(){throw Error("Not yet implemented")}getChannelzRef(){return this.channelzRef}_verifyContentType(I,D){let B=D[pC.constants.HTTP2_HEADER_CONTENT_TYPE];if(typeof B!=="string"||!B.startsWith("application/grpc"))return I.respond({[pC.constants.HTTP2_HEADER_STATUS]:pC.constants.HTTP_STATUS_UNSUPPORTED_MEDIA_TYPE},{endStream:!0}),!1;return!0}_retrieveHandler(I){AMD("Received call to method "+I+" at address "+this.serverAddressString);let D=this.handlers.get(I);if(D===void 0)return AMD("No handler registered for method "+I+". Sending UNIMPLEMENTED status."),null;return D}_respondWithError(I,D,B=null){var f,E;let M=Object.assign({"grpc-status":(f=I.code)!==null&&f!==void 0?f:VJ.Status.INTERNAL,"grpc-message":I.details,[pC.constants.HTTP2_HEADER_STATUS]:pC.constants.HTTP_STATUS_OK,[pC.constants.HTTP2_HEADER_CONTENT_TYPE]:"application/grpc+proto"},(E=I.metadata)===null||E===void 0?void 0:E.toHttp2Headers());D.respond(M,{endStream:!0}),this.callTracker.addCallFailed(),B===null||B===void 0||B.streamTracker.addCallFailed()}_channelzHandler(I,D,B){this.onStreamOpened(D);let f=this.sessions.get(D.session);if(this.callTracker.addCallStarted(),f===null||f===void 0||f.streamTracker.addCallStarted(),!this._verifyContentType(D,B)){this.callTracker.addCallFailed(),f===null||f===void 0||f.streamTracker.addCallFailed();return}let E=B[HMD],M=this._retrieveHandler(E);if(!M){this._respondWithError(EYA(E),D,f);return}let G={addMessageSent:()=>{if(f)f.messagesSent+=1,f.lastMessageSentTimestamp=new Date},addMessageReceived:()=>{if(f)f.messagesReceived+=1,f.lastMessageReceivedTimestamp=new Date},onCallEnd:(X)=>{if(X.code===VJ.Status.OK)this.callTracker.addCallSucceeded();else this.callTracker.addCallFailed()},onStreamEnd:(X)=>{if(f)if(X)f.streamTracker.addCallSucceeded();else f.streamTracker.addCallFailed()}},U=(0,sED.getServerInterceptingCall)([...I,...this.interceptors],D,B,G,M,this.options);if(!this._runHandlerForCall(U,M))this.callTracker.addCallFailed(),f===null||f===void 0||f.streamTracker.addCallFailed(),U.sendStatus({code:VJ.Status.INTERNAL,details:`Unknown handler type: ${M.type}`})}_streamHandler(I,D,B){if(this.onStreamOpened(D),this._verifyContentType(D,B)!==!0)return;let f=B[HMD],E=this._retrieveHandler(f);if(!E){this._respondWithError(EYA(f),D,null);return}let M=(0,sED.getServerInterceptingCall)([...I,...this.interceptors],D,B,null,E,this.options);if(!this._runHandlerForCall(M,E))M.sendStatus({code:VJ.Status.INTERNAL,details:`Unknown handler type: ${E.type}`})}_runHandlerForCall(I,D){let{type:B}=D;if(B==="unary")Sn9(I,D);else if(B==="clientStream")jn9(I,D);else if(B==="serverStream")Rn9(I,D);else if(B==="bidi")yn9(I,D);else return!1;return!0}_setupHandlers(I,D){if(I===null)return;let B=I.address(),f="null";if(B)if(typeof B==="string")f=B;else f=B.address+":"+B.port;this.serverAddressString=f;let E=this.channelzEnabled?this._channelzHandler:this._streamHandler,M=this.channelzEnabled?this._channelzSessionHandler(I):this._sessionHandler(I);I.on("stream",E.bind(this,D)),I.on("session",M)}_sessionHandler(I){return(D)=>{var B,f;(B=this.http2Servers.get(I))===null||B===void 0||B.sessions.add(D);let E=null,M=null,G=null,U=!1,X=this.enableIdleTimeout(D);if(this.maxConnectionAgeMs!==kWH){let P=this.maxConnectionAgeMs/10,Y=Math.random()*P*2-P;E=setTimeout(()=>{var C,Z;U=!0,this.trace("Connection dropped by max connection age: "+((C=D.socket)===null||C===void 0?void 0:C.remoteAddress));try{D.goaway(pC.constants.NGHTTP2_NO_ERROR,2147483647,$MD)}catch(q){D.destroy();return}if(D.close(),this.maxConnectionAgeGraceMs!==kWH)M=setTimeout(()=>{D.destroy()},this.maxConnectionAgeGraceMs),(Z=M.unref)===null||Z===void 0||Z.call(M)},this.maxConnectionAgeMs+Y),(f=E.unref)===null||f===void 0||f.call(E)}let J=()=>{if(G)clearTimeout(G),G=null},F=()=>{return!D.destroyed&&this.keepaliveTimeMs<fYA&&this.keepaliveTimeMs>0},Q,W=()=>{var P;if(!F())return;this.keepaliveTrace("Starting keepalive timer for "+this.keepaliveTimeMs+"ms"),G=setTimeout(()=>{J(),Q()},this.keepaliveTimeMs),(P=G.unref)===null||P===void 0||P.call(G)};Q=()=>{var P;if(!F())return;this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms");let Y="";try{if(!D.ping((Z,q,O)=>{if(J(),Z)this.keepaliveTrace("Ping failed with error: "+Z.message),U=!0,D.close();else this.keepaliveTrace("Received ping response"),W()}))Y="Ping returned false"}catch(C){Y=(C instanceof Error?C.message:"")||"Unknown error"}if(Y){this.keepaliveTrace("Ping send failed: "+Y),this.trace("Connection dropped due to ping send error: "+Y),U=!0,D.close();return}G=setTimeout(()=>{J(),this.keepaliveTrace("Ping timeout passed without response"),this.trace("Connection dropped by keepalive timeout"),U=!0,D.close()},this.keepaliveTimeoutMs),(P=G.unref)===null||P===void 0||P.call(G)},W(),D.on("close",()=>{var P,Y;if(!U)this.trace(`Connection dropped by client ${(P=D.socket)===null||P===void 0?void 0:P.remoteAddress}`);if(E)clearTimeout(E);if(M)clearTimeout(M);if(J(),X!==null)clearTimeout(X.timeout),this.sessionIdleTimeouts.delete(D);(Y=this.http2Servers.get(I))===null||Y===void 0||Y.sessions.delete(D)})}}_channelzSessionHandler(I){return(D)=>{var B,f,E,M;let G=(0,wK.registerChannelzSocket)((f=(B=D.socket)===null||B===void 0?void 0:B.remoteAddress)!==null&&f!==void 0?f:"unknown",this.getChannelzSessionInfo.bind(this,D),this.channelzEnabled),U={ref:G,streamTracker:new wK.ChannelzCallTracker,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null};(E=this.http2Servers.get(I))===null||E===void 0||E.sessions.add(D),this.sessions.set(D,U);let X=`${D.socket.remoteAddress}:${D.socket.remotePort}`;this.channelzTrace.addTrace("CT_INFO","Connection established by client "+X),this.trace("Connection established by client "+X),this.sessionChildrenTracker.refChild(G);let J=null,F=null,Q=null,W=!1,P=this.enableIdleTimeout(D);if(this.maxConnectionAgeMs!==kWH){let O=this.maxConnectionAgeMs/10,j=Math.random()*O*2-O;J=setTimeout(()=>{var u;W=!0,this.channelzTrace.addTrace("CT_INFO","Connection dropped by max connection age from "+X);try{D.goaway(pC.constants.NGHTTP2_NO_ERROR,2147483647,$MD)}catch(y){D.destroy();return}if(D.close(),this.maxConnectionAgeGraceMs!==kWH)F=setTimeout(()=>{D.destroy()},this.maxConnectionAgeGraceMs),(u=F.unref)===null||u===void 0||u.call(F)},this.maxConnectionAgeMs+j),(M=J.unref)===null||M===void 0||M.call(J)}let Y=()=>{if(Q)clearTimeout(Q),Q=null},C=()=>{return!D.destroyed&&this.keepaliveTimeMs<fYA&&this.keepaliveTimeMs>0},Z,q=()=>{var O;if(!C())return;this.keepaliveTrace("Starting keepalive timer for "+this.keepaliveTimeMs+"ms"),Q=setTimeout(()=>{Y(),Z()},this.keepaliveTimeMs),(O=Q.unref)===null||O===void 0||O.call(Q)};Z=()=>{var O;if(!C())return;this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms");let j="";try{if(!D.ping((y,g,v)=>{if(Y(),y)this.keepaliveTrace("Ping failed with error: "+y.message),this.channelzTrace.addTrace("CT_INFO","Connection dropped due to error of a ping frame "+y.message+" return in "+g),W=!0,D.close();else this.keepaliveTrace("Received ping response"),q()}))j="Ping returned false"}catch(u){j=(u instanceof Error?u.message:"")||"Unknown error"}if(j){this.keepaliveTrace("Ping send failed: "+j),this.channelzTrace.addTrace("CT_INFO","Connection dropped due to ping send error: "+j),W=!0,D.close();return}U.keepAlivesSent+=1,Q=setTimeout(()=>{Y(),this.keepaliveTrace("Ping timeout passed without response"),this.channelzTrace.addTrace("CT_INFO","Connection dropped by keepalive timeout from "+X),W=!0,D.close()},this.keepaliveTimeoutMs),(O=Q.unref)===null||O===void 0||O.call(Q)},q(),D.on("close",()=>{var O;if(!W)this.channelzTrace.addTrace("CT_INFO","Connection dropped by client "+X);if(this.sessionChildrenTracker.unrefChild(G),(0,wK.unregisterChannelzRef)(G),J)clearTimeout(J);if(F)clearTimeout(F);if(Y(),P!==null)clearTimeout(P.timeout),this.sessionIdleTimeouts.delete(D);(O=this.http2Servers.get(I))===null||O===void 0||O.sessions.delete(D),this.sessions.delete(D)})}}enableIdleTimeout(I){var D,B;if(this.sessionIdleTimeout>=eED)return null;let f={activeStreams:0,lastIdle:Date.now(),onClose:this.onStreamClose.bind(this,I),timeout:setTimeout(this.onIdleTimeout,this.sessionIdleTimeout,this,I)};(B=(D=f.timeout).unref)===null||B===void 0||B.call(D),this.sessionIdleTimeouts.set(I,f);let{socket:E}=I;return this.trace("Enable idle timeout for "+E.remoteAddress+":"+E.remotePort),f}onIdleTimeout(I,D){let{socket:B}=D,f=I.sessionIdleTimeouts.get(D);if(f!==void 0&&f.activeStreams===0)if(Date.now()-f.lastIdle>=I.sessionIdleTimeout)I.trace("Session idle timeout triggered for "+(B===null||B===void 0?void 0:B.remoteAddress)+":"+(B===null||B===void 0?void 0:B.remotePort)+" last idle at "+f.lastIdle),I.closeSession(D);else f.timeout.refresh()}onStreamOpened(I){let D=I.session,B=this.sessionIdleTimeouts.get(D);if(B)B.activeStreams+=1,I.once("close",B.onClose)}onStreamClose(I){var D,B;let f=this.sessionIdleTimeouts.get(I);if(f){if(f.activeStreams-=1,f.activeStreams===0)f.lastIdle=Date.now(),f.timeout.refresh(),this.trace("Session onStreamClose"+((D=I.socket)===null||D===void 0?void 0:D.remoteAddress)+":"+((B=I.socket)===null||B===void 0?void 0:B.remotePort)+" at "+f.lastIdle)}}},(()=>{let L=typeof Symbol==="function"&&Symbol.metadata?Object.create(null):void 0;if(A=[Nn9("Calling start() is no longer necessary. It can be safely omitted.")],wn9(H,null,A,{kind:"method",name:"start",static:!1,private:!1,access:{has:(I)=>("start"in I),get:(I)=>I.start},metadata:L},null,$),L)Object.defineProperty(H,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:L})})(),H})();Oo.Server=xn9;async function Sn9(H,$){let A;function L(B,f,E,M){if(B){H.sendStatus((0,gWH.serverErrorToStatus)(B,E));return}H.sendMessage(f,()=>{H.sendStatus({code:VJ.Status.OK,details:"OK",metadata:E!==null&&E!==void 0?E:null})})}let I,D=null;H.start({onReceiveMetadata(B){I=B,H.startRead()},onReceiveMessage(B){if(D){H.sendStatus({code:VJ.Status.UNIMPLEMENTED,details:`Received a second request message for server streaming method ${$.path}`,metadata:null});return}D=B,H.startRead()},onReceiveHalfClose(){if(!D){H.sendStatus({code:VJ.Status.UNIMPLEMENTED,details:`Received no request message for server streaming method ${$.path}`,metadata:null});return}A=new gWH.ServerWritableStreamImpl($.path,H,I,D);try{$.func(A,L)}catch(B){H.sendStatus({code:VJ.Status.UNKNOWN,details:`Server method handler threw error ${B.message}`,metadata:null})}},onCancel(){if(A)A.cancelled=!0,A.emit("cancelled","cancelled")}})}function jn9(H,$){let A;function L(I,D,B,f){if(I){H.sendStatus((0,gWH.serverErrorToStatus)(I,B));return}H.sendMessage(D,()=>{H.sendStatus({code:VJ.Status.OK,details:"OK",metadata:B!==null&&B!==void 0?B:null})})}H.start({onReceiveMetadata(I){A=new gWH.ServerDuplexStreamImpl($.path,H,I);try{$.func(A,L)}catch(D){H.sendStatus({code:VJ.Status.UNKNOWN,details:`Server method handler threw error ${D.message}`,metadata:null})}},onReceiveMessage(I){A.push(I)},onReceiveHalfClose(){A.push(null)},onCancel(){if(A)A.cancelled=!0,A.emit("cancelled","cancelled"),A.destroy()}})}function Rn9(H,$){let A,L,I=null;H.start({onReceiveMetadata(D){L=D,H.startRead()},onReceiveMessage(D){if(I){H.sendStatus({code:VJ.Status.UNIMPLEMENTED,details:`Received a second request message for server streaming method ${$.path}`,metadata:null});return}I=D,H.startRead()},onReceiveHalfClose(){if(!I){H.sendStatus({code:VJ.Status.UNIMPLEMENTED,details:`Received no request message for server streaming method ${$.path}`,metadata:null});return}A=new gWH.ServerWritableStreamImpl($.path,H,L,I);try{$.func(A)}catch(D){H.sendStatus({code:VJ.Status.UNKNOWN,details:`Server method handler threw error ${D.message}`,metadata:null})}},onCancel(){if(A)A.cancelled=!0,A.emit("cancelled","cancelled"),A.destroy()}})}function yn9(H,$){let A;H.start({onReceiveMetadata(L){A=new gWH.ServerDuplexStreamImpl($.path,H,L);try{$.func(A)}catch(I){H.sendStatus({code:VJ.Status.UNKNOWN,details:`Server method handler threw error ${I.message}`,metadata:null})}},onReceiveMessage(L){A.push(L)},onReceiveHalfClose(){A.push(null)},onCancel(){if(A)A.cancelled=!0,A.emit("cancelled","cancelled"),A.destroy()}})}});var DMD=z((IV$)=>{Object.defineProperty(IV$,"__esModule",{value:!0});IV$.StatusBuilder=void 0;class IMD{constructor(){this.code=null,this.details=null,this.metadata=null}withCode(H){return this.code=H,this}withDetails(H){return this.details=H,this}withMetadata(H){return this.metadata=H,this}build(){let H={};if(this.code!==null)H.code=this.code;if(this.details!==null)H.details=this.details;if(this.metadata!==null)H.metadata=this.metadata;return H}}IV$.StatusBuilder=IMD});var ZhH=z((Qh)=>{Object.defineProperty(Qh,"__esModule",{value:!0});Qh.LeafLoadBalancer=Qh.PickFirstLoadBalancer=Qh.PickFirstLoadBalancingConfig=void 0;Qh.shuffled=GMD;Qh.setup=pn9;var MYA=Ko(),PJ=YP(),xo=pm(),BMD=gC(),vn9=wG(),hn9=I8(),fMD=gC(),EMD=require("net"),bn9=B0H(),kn9="pick_first";function YhH(H){vn9.trace(hn9.LogVerbosity.DEBUG,kn9,H)}var whH="pick_first",un9=250;class mWH{constructor(H){this.shuffleAddressList=H}getLoadBalancerName(){return whH}toJsonObject(){return{[whH]:{shuffleAddressList:this.shuffleAddressList}}}getShuffleAddressList(){return this.shuffleAddressList}static createFromJson(H){if("shuffleAddressList"in H&&typeof H.shuffleAddressList!=="boolean")throw Error("pick_first config field shuffleAddressList must be a boolean if provided");return new mWH(H.shuffleAddressList===!0)}}Qh.PickFirstLoadBalancingConfig=mWH;class MMD{constructor(H){this.subchannel=H}pick(H){return{pickResultType:xo.PickResultType.COMPLETE,subchannel:this.subchannel,status:null,onCallStarted:null,onCallEnded:null}}}function GMD(H){let $=H.slice();for(let A=$.length-1;A>1;A--){let L=Math.floor(Math.random()*(A+1)),I=$[A];$[A]=$[L],$[L]=I}return $}function gn9(H){if(H.length===0)return[];let $=[],A=[],L=[],I=(0,fMD.isTcpSubchannelAddress)(H[0])&&(0,EMD.isIPv6)(H[0].host);for(let f of H)if((0,fMD.isTcpSubchannelAddress)(f)&&(0,EMD.isIPv6)(f.host))A.push(f);else L.push(f);let D=I?A:L,B=I?L:A;for(let f=0;f<Math.max(D.length,B.length);f++){if(f<D.length)$.push(D[f]);if(f<B.length)$.push(B[f])}return $}var UMD="grpc-node.internal.pick-first.report_health_status";class DV${constructor(H){this.channelControlHelper=H,this.children=[],this.currentState=PJ.ConnectivityState.IDLE,this.currentSubchannelIndex=0,this.currentPick=null,this.subchannelStateListener=($,A,L,I,D)=>{this.onSubchannelStateUpdate($,A,L,D)},this.pickedSubchannelHealthListener=()=>this.calculateAndReportNewState(),this.stickyTransientFailureMode=!1,this.reportHealthStatus=!1,this.lastError=null,this.latestAddressList=null,this.latestOptions={},this.latestResolutionNote="",this.connectionDelayTimeout=setTimeout(()=>{},0),clearTimeout(this.connectionDelayTimeout)}allChildrenHaveReportedTF(){return this.children.every((H)=>H.hasReportedTransientFailure)}resetChildrenReportedTF(){this.children.every((H)=>H.hasReportedTransientFailure=!1)}calculateAndReportNewState(){var H;if(this.currentPick)if(this.reportHealthStatus&&!this.currentPick.isHealthy()){let $=`Picked subchannel ${this.currentPick.getAddress()} is unhealthy`;this.updateState(PJ.ConnectivityState.TRANSIENT_FAILURE,new xo.UnavailablePicker({details:$}),$)}else this.updateState(PJ.ConnectivityState.READY,new MMD(this.currentPick),null);else if(((H=this.latestAddressList)===null||H===void 0?void 0:H.length)===0){let $=`No connection established. Last error: ${this.lastError}. Resolution note: ${this.latestResolutionNote}`;this.updateState(PJ.ConnectivityState.TRANSIENT_FAILURE,new xo.UnavailablePicker({details:$}),$)}else if(this.children.length===0)this.updateState(PJ.ConnectivityState.IDLE,new xo.QueuePicker(this),null);else if(this.stickyTransientFailureMode){let $=`No connection established. Last error: ${this.lastError}. Resolution note: ${this.latestResolutionNote}`;this.updateState(PJ.ConnectivityState.TRANSIENT_FAILURE,new xo.UnavailablePicker({details:$}),$)}else this.updateState(PJ.ConnectivityState.CONNECTING,new xo.QueuePicker(this),null)}requestReresolution(){this.channelControlHelper.requestReresolution()}maybeEnterStickyTransientFailureMode(){if(!this.allChildrenHaveReportedTF())return;if(this.requestReresolution(),this.resetChildrenReportedTF(),this.stickyTransientFailureMode){this.calculateAndReportNewState();return}this.stickyTransientFailureMode=!0;for(let{subchannel:H}of this.children)H.startConnecting();this.calculateAndReportNewState()}removeCurrentPick(){if(this.currentPick!==null)this.currentPick.removeConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.removeChannelzChild(this.currentPick.getChannelzRef()),this.currentPick.removeHealthStateWatcher(this.pickedSubchannelHealthListener),this.currentPick.unref(),this.currentPick=null}onSubchannelStateUpdate(H,$,A,L){var I;if((I=this.currentPick)===null||I===void 0?void 0:I.realSubchannelEquals(H)){if(A!==PJ.ConnectivityState.READY)this.removeCurrentPick(),this.calculateAndReportNewState();return}for(let[D,B]of this.children.entries())if(H.realSubchannelEquals(B.subchannel)){if(A===PJ.ConnectivityState.READY)this.pickSubchannel(B.subchannel);if(A===PJ.ConnectivityState.TRANSIENT_FAILURE){if(B.hasReportedTransientFailure=!0,L)this.lastError=L;if(this.maybeEnterStickyTransientFailureMode(),D===this.currentSubchannelIndex)this.startNextSubchannelConnecting(D+1)}B.subchannel.startConnecting();return}}startNextSubchannelConnecting(H){clearTimeout(this.connectionDelayTimeout);for(let[$,A]of this.children.entries())if($>=H){let L=A.subchannel.getConnectivityState();if(L===PJ.ConnectivityState.IDLE||L===PJ.ConnectivityState.CONNECTING){this.startConnecting($);return}}this.maybeEnterStickyTransientFailureMode()}startConnecting(H){var $,A;if(clearTimeout(this.connectionDelayTimeout),this.currentSubchannelIndex=H,this.children[H].subchannel.getConnectivityState()===PJ.ConnectivityState.IDLE)YhH("Start connecting to subchannel with address "+this.children[H].subchannel.getAddress()),process.nextTick(()=>{var L;(L=this.children[H])===null||L===void 0||L.subchannel.startConnecting()});this.connectionDelayTimeout=setTimeout(()=>{this.startNextSubchannelConnecting(H+1)},un9),(A=($=this.connectionDelayTimeout).unref)===null||A===void 0||A.call($)}pickSubchannel(H){YhH("Pick subchannel with address "+H.getAddress()),this.stickyTransientFailureMode=!1,H.ref(),this.channelControlHelper.addChannelzChild(H.getChannelzRef()),this.removeCurrentPick(),this.resetSubchannelList(),H.addConnectivityStateListener(this.subchannelStateListener),H.addHealthStateWatcher(this.pickedSubchannelHealthListener),this.currentPick=H,clearTimeout(this.connectionDelayTimeout),this.calculateAndReportNewState()}updateState(H,$,A){YhH(PJ.ConnectivityState[this.currentState]+" -> "+PJ.ConnectivityState[H]),this.currentState=H,this.channelControlHelper.updateState(H,$,A)}resetSubchannelList(){for(let H of this.children)H.subchannel.removeConnectivityStateListener(this.subchannelStateListener),H.subchannel.unref(),this.channelControlHelper.removeChannelzChild(H.subchannel.getChannelzRef());this.currentSubchannelIndex=0,this.children=[]}connectToAddressList(H,$){YhH("connectToAddressList(["+H.map((L)=>(0,BMD.subchannelAddressToString)(L))+"])");let A=H.map((L)=>({subchannel:this.channelControlHelper.createSubchannel(L,$),hasReportedTransientFailure:!1}));for(let{subchannel:L}of A)if(L.getConnectivityState()===PJ.ConnectivityState.READY){this.pickSubchannel(L);return}for(let{subchannel:L}of A)L.ref(),this.channelControlHelper.addChannelzChild(L.getChannelzRef());this.resetSubchannelList(),this.children=A;for(let{subchannel:L}of this.children)L.addConnectivityStateListener(this.subchannelStateListener);for(let L of this.children)if(L.subchannel.getConnectivityState()===PJ.ConnectivityState.TRANSIENT_FAILURE)L.hasReportedTransientFailure=!0;this.startNextSubchannelConnecting(0),this.calculateAndReportNewState()}updateAddressList(H,$,A,L){if(!($ instanceof mWH))return!1;if(!H.ok){if(this.children.length===0&&this.currentPick===null)this.channelControlHelper.updateState(PJ.ConnectivityState.TRANSIENT_FAILURE,new xo.UnavailablePicker(H.error),H.error.details);return!0}let I=H.value;if(this.reportHealthStatus=A[UMD],$.getShuffleAddressList())I=GMD(I);let D=[].concat(...I.map((f)=>f.addresses));YhH("updateAddressList(["+D.map((f)=>(0,BMD.subchannelAddressToString)(f))+"])");let B=gn9(D);if(this.latestAddressList=B,this.latestOptions=A,this.connectToAddressList(B,A),this.latestResolutionNote=L,D.length>0)return!0;else return this.lastError="No addresses resolved",!1}exitIdle(){if(this.currentState===PJ.ConnectivityState.IDLE&&this.latestAddressList)this.connectToAddressList(this.latestAddressList,this.latestOptions)}resetBackoff(){}destroy(){this.resetSubchannelList(),this.removeCurrentPick()}getTypeName(){return whH}}Qh.PickFirstLoadBalancer=DV$;var mn9=new mWH(!1);class XMD{constructor(H,$,A,L){this.endpoint=H,this.options=A,this.resolutionNote=L,this.latestState=PJ.ConnectivityState.IDLE;let I=(0,MYA.createChildChannelControlHelper)($,{updateState:(D,B,f)=>{this.latestState=D,this.latestPicker=B,$.updateState(D,B,f)}});this.pickFirstBalancer=new DV$(I),this.latestPicker=new xo.QueuePicker(this.pickFirstBalancer)}startConnecting(){this.pickFirstBalancer.updateAddressList((0,bn9.statusOrFromValue)([this.endpoint]),mn9,Object.assign(Object.assign({},this.options),{[UMD]:!0}),this.resolutionNote)}updateEndpoint(H,$){if(this.options=$,this.endpoint=H,this.latestState!==PJ.ConnectivityState.IDLE)this.startConnecting()}getConnectivityState(){return this.latestState}getPicker(){return this.latestPicker}getEndpoint(){return this.endpoint}exitIdle(){this.pickFirstBalancer.exitIdle()}destroy(){this.pickFirstBalancer.destroy()}}Qh.LeafLoadBalancer=XMD;function pn9(){(0,MYA.registerLoadBalancerType)(whH,DV$,mWH),(0,MYA.registerDefaultLoadBalancerType)(whH)}});var FMD=z((fV$)=>{Object.defineProperty(fV$,"__esModule",{value:!0});fV$.FileWatcherCertificateProvider=void 0;var dn9=require("fs"),cn9=wG(),ln9=I8(),in9=require("util"),nn9="certificate_provider";function BV$(H){cn9.trace(ln9.LogVerbosity.DEBUG,nn9,H)}var GYA=(0,in9.promisify)(dn9.readFile);class JMD{constructor(H){if(this.config=H,this.refreshTimer=null,this.fileResultPromise=null,this.latestCaUpdate=void 0,this.caListeners=new Set,this.latestIdentityUpdate=void 0,this.identityListeners=new Set,this.lastUpdateTime=null,H.certificateFile===void 0!==(H.privateKeyFile===void 0))throw Error("certificateFile and privateKeyFile must be set or unset together");if(H.certificateFile===void 0&&H.caCertificateFile===void 0)throw Error("At least one of certificateFile and caCertificateFile must be set");BV$("File watcher constructed with config "+JSON.stringify(H))}updateCertificates(){if(this.fileResultPromise)return;this.fileResultPromise=Promise.allSettled([this.config.certificateFile?GYA(this.config.certificateFile):Promise.reject(),this.config.privateKeyFile?GYA(this.config.privateKeyFile):Promise.reject(),this.config.caCertificateFile?GYA(this.config.caCertificateFile):Promise.reject()]),this.fileResultPromise.then(([H,$,A])=>{if(!this.refreshTimer)return;if(BV$("File watcher read certificates certificate "+H.status+", privateKey "+$.status+", CA certificate "+A.status),this.lastUpdateTime=new Date,this.fileResultPromise=null,H.status==="fulfilled"&&$.status==="fulfilled")this.latestIdentityUpdate={certificate:H.value,privateKey:$.value};else this.latestIdentityUpdate=null;if(A.status==="fulfilled")this.latestCaUpdate={caCertificate:A.value};else this.latestCaUpdate=null;for(let L of this.identityListeners)L(this.latestIdentityUpdate);for(let L of this.caListeners)L(this.latestCaUpdate)}),BV$("File watcher initiated certificate update")}maybeStartWatchingFiles(){if(!this.refreshTimer){let H=this.lastUpdateTime?new Date().getTime()-this.lastUpdateTime.getTime():1/0;if(H>this.config.refreshIntervalMs)this.updateCertificates();if(H>this.config.refreshIntervalMs*2)this.latestCaUpdate=void 0,this.latestIdentityUpdate=void 0;this.refreshTimer=setInterval(()=>this.updateCertificates(),this.config.refreshIntervalMs),BV$("File watcher started watching")}}maybeStopWatchingFiles(){if(this.caListeners.size===0&&this.identityListeners.size===0){if(this.fileResultPromise=null,this.refreshTimer)clearInterval(this.refreshTimer),this.refreshTimer=null}}addCaCertificateListener(H){if(this.caListeners.add(H),this.maybeStartWatchingFiles(),this.latestCaUpdate!==void 0)process.nextTick(H,this.latestCaUpdate)}removeCaCertificateListener(H){this.caListeners.delete(H),this.maybeStopWatchingFiles()}addIdentityCertificateListener(H){if(this.identityListeners.add(H),this.maybeStartWatchingFiles(),this.latestIdentityUpdate!==void 0)process.nextTick(H,this.latestIdentityUpdate)}removeIdentityCertificateListener(H){this.identityListeners.delete(H),this.maybeStopWatchingFiles()}}fV$.FileWatcherCertificateProvider=JMD});var JYA=z((DD)=>{Object.defineProperty(DD,"__esModule",{value:!0});DD.SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX=DD.createCertificateProviderChannelCredentials=DD.FileWatcherCertificateProvider=DD.createCertificateProviderServerCredentials=DD.createServerCredentialsWithInterceptors=DD.BaseSubchannelWrapper=DD.registerAdminService=DD.FilterStackFactory=DD.BaseFilter=DD.statusOrFromError=DD.statusOrFromValue=DD.PickResultType=DD.QueuePicker=DD.UnavailablePicker=DD.ChildLoadBalancerHandler=DD.EndpointMap=DD.endpointHasAddress=DD.endpointToString=DD.subchannelAddressToString=DD.LeafLoadBalancer=DD.isLoadBalancerNameRegistered=DD.parseLoadBalancingConfig=DD.selectLbConfigFromList=DD.registerLoadBalancerType=DD.createChildChannelControlHelper=DD.BackoffTimeout=DD.parseDuration=DD.durationToMs=DD.splitHostPort=DD.uriToString=DD.CHANNEL_ARGS_CONFIG_SELECTOR_KEY=DD.createResolver=DD.registerResolver=DD.log=DD.trace=void 0;var KMD=wG();Object.defineProperty(DD,"trace",{enumerable:!0,get:function(){return KMD.trace}});Object.defineProperty(DD,"log",{enumerable:!0,get:function(){return KMD.log}});var UYA=sx();Object.defineProperty(DD,"registerResolver",{enumerable:!0,get:function(){return UYA.registerResolver}});Object.defineProperty(DD,"createResolver",{enumerable:!0,get:function(){return UYA.createResolver}});Object.defineProperty(DD,"CHANNEL_ARGS_CONFIG_SELECTOR_KEY",{enumerable:!0,get:function(){return UYA.CHANNEL_ARGS_CONFIG_SELECTOR_KEY}});var QMD=CP();Object.defineProperty(DD,"uriToString",{enumerable:!0,get:function(){return QMD.uriToString}});Object.defineProperty(DD,"splitHostPort",{enumerable:!0,get:function(){return QMD.splitHostPort}});var WMD=ChH();Object.defineProperty(DD,"durationToMs",{enumerable:!0,get:function(){return WMD.durationToMs}});Object.defineProperty(DD,"parseDuration",{enumerable:!0,get:function(){return WMD.parseDuration}});var rn9=FWH();Object.defineProperty(DD,"BackoffTimeout",{enumerable:!0,get:function(){return rn9.BackoffTimeout}});var qhH=Ko();Object.defineProperty(DD,"createChildChannelControlHelper",{enumerable:!0,get:function(){return qhH.createChildChannelControlHelper}});Object.defineProperty(DD,"registerLoadBalancerType",{enumerable:!0,get:function(){return qhH.registerLoadBalancerType}});Object.defineProperty(DD,"selectLbConfigFromList",{enumerable:!0,get:function(){return qhH.selectLbConfigFromList}});Object.defineProperty(DD,"parseLoadBalancingConfig",{enumerable:!0,get:function(){return qhH.parseLoadBalancingConfig}});Object.defineProperty(DD,"isLoadBalancerNameRegistered",{enumerable:!0,get:function(){return qhH.isLoadBalancerNameRegistered}});var an9=ZhH();Object.defineProperty(DD,"LeafLoadBalancer",{enumerable:!0,get:function(){return an9.LeafLoadBalancer}});var EV$=gC();Object.defineProperty(DD,"subchannelAddressToString",{enumerable:!0,get:function(){return EV$.subchannelAddressToString}});Object.defineProperty(DD,"endpointToString",{enumerable:!0,get:function(){return EV$.endpointToString}});Object.defineProperty(DD,"endpointHasAddress",{enumerable:!0,get:function(){return EV$.endpointHasAddress}});Object.defineProperty(DD,"EndpointMap",{enumerable:!0,get:function(){return EV$.EndpointMap}});var on9=d6$();Object.defineProperty(DD,"ChildLoadBalancerHandler",{enumerable:!0,get:function(){return on9.ChildLoadBalancerHandler}});var XYA=pm();Object.defineProperty(DD,"UnavailablePicker",{enumerable:!0,get:function(){return XYA.UnavailablePicker}});Object.defineProperty(DD,"QueuePicker",{enumerable:!0,get:function(){return XYA.QueuePicker}});Object.defineProperty(DD,"PickResultType",{enumerable:!0,get:function(){return XYA.PickResultType}});var VMD=B0H();Object.defineProperty(DD,"statusOrFromValue",{enumerable:!0,get:function(){return VMD.statusOrFromValue}});Object.defineProperty(DD,"statusOrFromError",{enumerable:!0,get:function(){return VMD.statusOrFromError}});var tn9=ZCA();Object.defineProperty(DD,"BaseFilter",{enumerable:!0,get:function(){return tn9.BaseFilter}});var sn9=x3$();Object.defineProperty(DD,"FilterStackFactory",{enumerable:!0,get:function(){return sn9.FilterStackFactory}});var en9=n6$();Object.defineProperty(DD,"registerAdminService",{enumerable:!0,get:function(){return en9.registerAdminService}});var Hr9=PhH();Object.defineProperty(DD,"BaseSubchannelWrapper",{enumerable:!0,get:function(){return Hr9.BaseSubchannelWrapper}});var PMD=s3$();Object.defineProperty(DD,"createServerCredentialsWithInterceptors",{enumerable:!0,get:function(){return PMD.createServerCredentialsWithInterceptors}});Object.defineProperty(DD,"createCertificateProviderServerCredentials",{enumerable:!0,get:function(){return PMD.createCertificateProviderServerCredentials}});var $r9=FMD();Object.defineProperty(DD,"FileWatcherCertificateProvider",{enumerable:!0,get:function(){return $r9.FileWatcherCertificateProvider}});var Ar9=JWH();Object.defineProperty(DD,"createCertificateProviderChannelCredentials",{enumerable:!0,get:function(){return Ar9.createCertificateProviderChannelCredentials}});var Lr9=iCA();Object.defineProperty(DD,"SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX",{enumerable:!0,get:function(){return Lr9.SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX}})});var CMD=z((FYA)=>{Object.defineProperty(FYA,"__esModule",{value:!0});FYA.setup=Br9;var Ir9=sx(),Dr9=B0H();class _MD{constructor(H,$,A){this.listener=$,this.hasReturnedResult=!1,this.endpoints=[];let L;if(H.authority==="")L="/"+H.path;else L=H.path;this.endpoints=[{addresses:[{path:L}]}]}updateResolution(){if(!this.hasReturnedResult)this.hasReturnedResult=!0,process.nextTick(this.listener,(0,Dr9.statusOrFromValue)(this.endpoints),{},null,"")}destroy(){this.hasReturnedResult=!1}static getDefaultAuthority(H){return"localhost"}}function Br9(){(0,Ir9.registerResolver)("unix",_MD)}});var zMD=z((PYA)=>{Object.defineProperty(PYA,"__esModule",{value:!0});PYA.setup=Ur9;var YMD=require("net"),wMD=B0H(),MV$=I8(),KYA=dQ(),ZMD=sx(),fr9=gC(),qMD=CP(),Er9=wG(),Mr9="ip_resolver";function TMD(H){Er9.trace(MV$.LogVerbosity.DEBUG,Mr9,H)}var QYA="ipv4",WYA="ipv6",Gr9=443;class VYA{constructor(H,$,A){var L;this.listener=$,this.endpoints=[],this.error=null,this.hasReturnedResult=!1,TMD("Resolver constructed for target "+(0,qMD.uriToString)(H));let I=[];if(!(H.scheme===QYA||H.scheme===WYA)){this.error={code:MV$.Status.UNAVAILABLE,details:`Unrecognized scheme ${H.scheme} in IP resolver`,metadata:new KYA.Metadata};return}let D=H.path.split(",");for(let B of D){let f=(0,qMD.splitHostPort)(B);if(f===null){this.error={code:MV$.Status.UNAVAILABLE,details:`Failed to parse ${H.scheme} address ${B}`,metadata:new KYA.Metadata};return}if(H.scheme===QYA&&!(0,YMD.isIPv4)(f.host)||H.scheme===WYA&&!(0,YMD.isIPv6)(f.host)){this.error={code:MV$.Status.UNAVAILABLE,details:`Failed to parse ${H.scheme} address ${B}`,metadata:new KYA.Metadata};return}I.push({host:f.host,port:(L=f.port)!==null&&L!==void 0?L:Gr9})}this.endpoints=I.map((B)=>({addresses:[B]})),TMD("Parsed "+H.scheme+" address list "+I.map(fr9.subchannelAddressToString))}updateResolution(){if(!this.hasReturnedResult)this.hasReturnedResult=!0,process.nextTick(()=>{if(this.error)this.listener((0,wMD.statusOrFromError)(this.error),{},null,"");else this.listener((0,wMD.statusOrFromValue)(this.endpoints),{},null,"")})}destroy(){this.hasReturnedResult=!1}static getDefaultAuthority(H){return H.path.split(",")[0]}}function Ur9(){(0,ZMD.registerResolver)(QYA,VYA),(0,ZMD.registerResolver)(WYA,VYA)}});var jMD=z((zhH)=>{Object.defineProperty(zhH,"__esModule",{value:!0});zhH.RoundRobinLoadBalancer=void 0;zhH.setup=Wr9;var xMD=Ko(),O7=YP(),ThH=pm(),Xr9=wG(),Jr9=I8(),NMD=gC(),Fr9=ZhH(),Kr9="round_robin";function OMD(H){Xr9.trace(Jr9.LogVerbosity.DEBUG,Kr9,H)}var GV$="round_robin";class UV${getLoadBalancerName(){return GV$}constructor(){}toJsonObject(){return{[GV$]:{}}}static createFromJson(H){return new UV$}}class SMD{constructor(H,$=0){this.children=H,this.nextIndex=$}pick(H){let $=this.children[this.nextIndex].picker;return this.nextIndex=(this.nextIndex+1)%this.children.length,$.pick(H)}peekNextEndpoint(){return this.children[this.nextIndex].endpoint}}function Qr9(H,$){return[...H.slice($),...H.slice(0,$)]}class _YA{constructor(H){this.channelControlHelper=H,this.children=[],this.currentState=O7.ConnectivityState.IDLE,this.currentReadyPicker=null,this.updatesPaused=!1,this.lastError=null,this.childChannelControlHelper=(0,xMD.createChildChannelControlHelper)(H,{updateState:($,A,L)=>{if(this.currentState===O7.ConnectivityState.READY&&$!==O7.ConnectivityState.READY)this.channelControlHelper.requestReresolution();if(L)this.lastError=L;this.calculateAndUpdateState()}})}countChildrenWithState(H){return this.children.filter(($)=>$.getConnectivityState()===H).length}calculateAndUpdateState(){if(this.updatesPaused)return;if(this.countChildrenWithState(O7.ConnectivityState.READY)>0){let H=this.children.filter((A)=>A.getConnectivityState()===O7.ConnectivityState.READY),$=0;if(this.currentReadyPicker!==null){let A=this.currentReadyPicker.peekNextEndpoint();if($=H.findIndex((L)=>(0,NMD.endpointEqual)(L.getEndpoint(),A)),$<0)$=0}this.updateState(O7.ConnectivityState.READY,new SMD(H.map((A)=>({endpoint:A.getEndpoint(),picker:A.getPicker()})),$),null)}else if(this.countChildrenWithState(O7.ConnectivityState.CONNECTING)>0)this.updateState(O7.ConnectivityState.CONNECTING,new ThH.QueuePicker(this),null);else if(this.countChildrenWithState(O7.ConnectivityState.TRANSIENT_FAILURE)>0){let H=`round_robin: No connection established. Last error: ${this.lastError}`;this.updateState(O7.ConnectivityState.TRANSIENT_FAILURE,new ThH.UnavailablePicker({details:H}),H)}else this.updateState(O7.ConnectivityState.IDLE,new ThH.QueuePicker(this),null);for(let H of this.children)if(H.getConnectivityState()===O7.ConnectivityState.IDLE)H.exitIdle()}updateState(H,$,A){if(OMD(O7.ConnectivityState[this.currentState]+" -> "+O7.ConnectivityState[H]),H===O7.ConnectivityState.READY)this.currentReadyPicker=$;else this.currentReadyPicker=null;this.currentState=H,this.channelControlHelper.updateState(H,$,A)}resetSubchannelList(){for(let H of this.children)H.destroy();this.children=[]}updateAddressList(H,$,A,L){if(!($ instanceof UV$))return!1;if(!H.ok){if(this.children.length===0)this.updateState(O7.ConnectivityState.TRANSIENT_FAILURE,new ThH.UnavailablePicker(H.error),H.error.details);return!0}let I=Math.random()*H.value.length|0,D=Qr9(H.value,I);if(this.resetSubchannelList(),D.length===0){let B=`No addresses resolved. Resolution note: ${L}`;this.updateState(O7.ConnectivityState.TRANSIENT_FAILURE,new ThH.UnavailablePicker({details:B}),B)}OMD("Connect to endpoint list "+D.map(NMD.endpointToString)),this.updatesPaused=!0,this.children=D.map((B)=>new Fr9.LeafLoadBalancer(B,this.childChannelControlHelper,A,L));for(let B of this.children)B.startConnecting();return this.updatesPaused=!1,this.calculateAndUpdateState(),!0}exitIdle(){}resetBackoff(){}destroy(){this.resetSubchannelList()}getTypeName(){return GV$}}zhH.RoundRobinLoadBalancer=_YA;function Wr9(){(0,xMD.registerLoadBalancerType)(GV$,_YA,UV$)}});var kMD=z((C0H)=>{var CYA;Object.defineProperty(C0H,"__esModule",{value:!0});C0H.OutlierDetectionLoadBalancer=C0H.OutlierDetectionLoadBalancingConfig=void 0;C0H.setup=Nr9;var Vr9=YP(),RMD=I8(),_0H=ChH(),yMD=JYA(),Pr9=Ko(),_r9=d6$(),Cr9=pm(),YYA=gC(),Yr9=PhH(),wr9=wG(),Zr9="outlier_detection";function iQ(H){wr9.trace(RMD.LogVerbosity.DEBUG,Zr9,H)}var qYA="outlier_detection",qr9=((CYA=process.env.GRPC_EXPERIMENTAL_ENABLE_OUTLIER_DETECTION)!==null&&CYA!==void 0?CYA:"true")==="true",Tr9={stdev_factor:1900,enforcement_percentage:100,minimum_hosts:5,request_volume:100},zr9={threshold:85,enforcement_percentage:100,minimum_hosts:5,request_volume:50};function pWH(H,$,A,L){if($ in H&&H[$]!==void 0&&typeof H[$]!==A){let I=L?`${L}.${$}`:$;throw Error(`outlier detection config ${I} parse error: expected ${A}, got ${typeof H[$]}`)}}function wYA(H,$,A){let L=A?`${A}.${$}`:$;if($ in H&&H[$]!==void 0){if(!(0,_0H.isDuration)(H[$]))throw Error(`outlier detection config ${L} parse error: expected Duration, got ${typeof H[$]}`);if(!(H[$].seconds>=0&&H[$].seconds<=315576000000&&H[$].nanos>=0&&H[$].nanos<=999999999))throw Error(`outlier detection config ${L} parse error: values out of range for non-negative Duaration`)}}function XV$(H,$,A){let L=A?`${A}.${$}`:$;if(pWH(H,$,"number",A),$ in H&&H[$]!==void 0&&!(H[$]>=0&&H[$]<=100))throw Error(`outlier detection config ${L} parse error: value out of range for percentage (0-100)`)}class NhH{constructor(H,$,A,L,I,D,B){if(this.childPolicy=B,B.getLoadBalancerName()==="pick_first")throw Error("outlier_detection LB policy cannot have a pick_first child policy");this.intervalMs=H!==null&&H!==void 0?H:1e4,this.baseEjectionTimeMs=$!==null&&$!==void 0?$:30000,this.maxEjectionTimeMs=A!==null&&A!==void 0?A:300000,this.maxEjectionPercent=L!==null&&L!==void 0?L:10,this.successRateEjection=I?Object.assign(Object.assign({},Tr9),I):null,this.failurePercentageEjection=D?Object.assign(Object.assign({},zr9),D):null}getLoadBalancerName(){return qYA}toJsonObject(){var H,$;return{outlier_detection:{interval:(0,_0H.msToDuration)(this.intervalMs),base_ejection_time:(0,_0H.msToDuration)(this.baseEjectionTimeMs),max_ejection_time:(0,_0H.msToDuration)(this.maxEjectionTimeMs),max_ejection_percent:this.maxEjectionPercent,success_rate_ejection:(H=this.successRateEjection)!==null&&H!==void 0?H:void 0,failure_percentage_ejection:($=this.failurePercentageEjection)!==null&&$!==void 0?$:void 0,child_policy:[this.childPolicy.toJsonObject()]}}}getIntervalMs(){return this.intervalMs}getBaseEjectionTimeMs(){return this.baseEjectionTimeMs}getMaxEjectionTimeMs(){return this.maxEjectionTimeMs}getMaxEjectionPercent(){return this.maxEjectionPercent}getSuccessRateEjectionConfig(){return this.successRateEjection}getFailurePercentageEjectionConfig(){return this.failurePercentageEjection}getChildPolicy(){return this.childPolicy}static createFromJson(H){var $;if(wYA(H,"interval"),wYA(H,"base_ejection_time"),wYA(H,"max_ejection_time"),XV$(H,"max_ejection_percent"),"success_rate_ejection"in H&&H.success_rate_ejection!==void 0){if(typeof H.success_rate_ejection!=="object")throw Error("outlier detection config success_rate_ejection must be an object");pWH(H.success_rate_ejection,"stdev_factor","number","success_rate_ejection"),XV$(H.success_rate_ejection,"enforcement_percentage","success_rate_ejection"),pWH(H.success_rate_ejection,"minimum_hosts","number","success_rate_ejection"),pWH(H.success_rate_ejection,"request_volume","number","success_rate_ejection")}if("failure_percentage_ejection"in H&&H.failure_percentage_ejection!==void 0){if(typeof H.failure_percentage_ejection!=="object")throw Error("outlier detection config failure_percentage_ejection must be an object");XV$(H.failure_percentage_ejection,"threshold","failure_percentage_ejection"),XV$(H.failure_percentage_ejection,"enforcement_percentage","failure_percentage_ejection"),pWH(H.failure_percentage_ejection,"minimum_hosts","number","failure_percentage_ejection"),pWH(H.failure_percentage_ejection,"request_volume","number","failure_percentage_ejection")}if(!("child_policy"in H)||!Array.isArray(H.child_policy))throw Error("outlier detection config child_policy must be an array");let A=(0,Pr9.selectLbConfigFromList)(H.child_policy);if(!A)throw Error("outlier detection config child_policy: no valid recognized policy found");return new NhH(H.interval?(0,_0H.durationToMs)(H.interval):null,H.base_ejection_time?(0,_0H.durationToMs)(H.base_ejection_time):null,H.max_ejection_time?(0,_0H.durationToMs)(H.max_ejection_time):null,($=H.max_ejection_percent)!==null&&$!==void 0?$:null,H.success_rate_ejection,H.failure_percentage_ejection,A)}}C0H.OutlierDetectionLoadBalancingConfig=NhH;class vMD extends Yr9.BaseSubchannelWrapper{constructor(H,$){super(H);this.mapEntry=$,this.refCount=0}ref(){this.child.ref(),this.refCount+=1}unref(){if(this.child.unref(),this.refCount-=1,this.refCount<=0){if(this.mapEntry){let H=this.mapEntry.subchannelWrappers.indexOf(this);if(H>=0)this.mapEntry.subchannelWrappers.splice(H,1)}}}eject(){this.setHealthy(!1)}uneject(){this.setHealthy(!0)}getMapEntry(){return this.mapEntry}getWrappedSubchannel(){return this.child}}function ZYA(){return{success:0,failure:0}}class hMD{constructor(){this.activeBucket=ZYA(),this.inactiveBucket=ZYA()}addSuccess(){this.activeBucket.success+=1}addFailure(){this.activeBucket.failure+=1}switchBuckets(){this.inactiveBucket=this.activeBucket,this.activeBucket=ZYA()}getLastSuccesses(){return this.inactiveBucket.success}getLastFailures(){return this.inactiveBucket.failure}}class bMD{constructor(H,$){this.wrappedPicker=H,this.countCalls=$}pick(H){let $=this.wrappedPicker.pick(H);if($.pickResultType===Cr9.PickResultType.COMPLETE){let A=$.subchannel,L=A.getMapEntry();if(L){let I=$.onCallEnded;if(this.countCalls)I=(D,B,f)=>{var E;if(D===RMD.Status.OK)L.counter.addSuccess();else L.counter.addFailure();(E=$.onCallEnded)===null||E===void 0||E.call($,D,B,f)};return Object.assign(Object.assign({},$),{subchannel:A.getWrappedSubchannel(),onCallEnded:I})}else return Object.assign(Object.assign({},$),{subchannel:A.getWrappedSubchannel()})}else return $}}class TYA{constructor(H){this.entryMap=new YYA.EndpointMap,this.latestConfig=null,this.timerStartTime=null,this.childBalancer=new _r9.ChildLoadBalancerHandler((0,yMD.createChildChannelControlHelper)(H,{createSubchannel:($,A)=>{let L=H.createSubchannel($,A),I=this.entryMap.getForSubchannelAddress($),D=new vMD(L,I);if((I===null||I===void 0?void 0:I.currentEjectionTimestamp)!==null)D.eject();return I===null||I===void 0||I.subchannelWrappers.push(D),D},updateState:($,A,L)=>{if($===Vr9.ConnectivityState.READY)H.updateState($,new bMD(A,this.isCountingEnabled()),L);else H.updateState($,A,L)}})),this.ejectionTimer=setInterval(()=>{},0),clearInterval(this.ejectionTimer)}isCountingEnabled(){return this.latestConfig!==null&&(this.latestConfig.getSuccessRateEjectionConfig()!==null||this.latestConfig.getFailurePercentageEjectionConfig()!==null)}getCurrentEjectionPercent(){let H=0;for(let $ of this.entryMap.values())if($.currentEjectionTimestamp!==null)H+=1;return H*100/this.entryMap.size}runSuccessRateCheck(H){if(!this.latestConfig)return;let $=this.latestConfig.getSuccessRateEjectionConfig();if(!$)return;iQ("Running success rate check");let A=$.request_volume,L=0,I=[];for(let[G,U]of this.entryMap.entries()){let X=U.counter.getLastSuccesses(),J=U.counter.getLastFailures();if(iQ("Stats for "+(0,YYA.endpointToString)(G)+": successes="+X+" failures="+J+" targetRequestVolume="+A),X+J>=A)L+=1,I.push(X/(X+J))}if(iQ("Found "+L+" success rate candidates; currentEjectionPercent="+this.getCurrentEjectionPercent()+" successRates=["+I+"]"),L<$.minimum_hosts)return;let D=I.reduce((G,U)=>G+U)/I.length,B=0;for(let G of I){let U=G-D;B+=U*U}let f=B/I.length,E=Math.sqrt(f),M=D-E*($.stdev_factor/1000);iQ("stdev="+E+" ejectionThreshold="+M);for(let[G,U]of this.entryMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let X=U.counter.getLastSuccesses(),J=U.counter.getLastFailures();if(X+J<A)continue;let F=X/(X+J);if(iQ("Checking candidate "+G+" successRate="+F),F<M){let Q=Math.random()*100;if(iQ("Candidate "+G+" randomNumber="+Q+" enforcement_percentage="+$.enforcement_percentage),Q<$.enforcement_percentage)iQ("Ejecting candidate "+G),this.eject(U,H)}}}runFailurePercentageCheck(H){if(!this.latestConfig)return;let $=this.latestConfig.getFailurePercentageEjectionConfig();if(!$)return;iQ("Running failure percentage check. threshold="+$.threshold+" request volume threshold="+$.request_volume);let A=0;for(let L of this.entryMap.values()){let I=L.counter.getLastSuccesses(),D=L.counter.getLastFailures();if(I+D>=$.request_volume)A+=1}if(A<$.minimum_hosts)return;for(let[L,I]of this.entryMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let D=I.counter.getLastSuccesses(),B=I.counter.getLastFailures();if(iQ("Candidate successes="+D+" failures="+B),D+B<$.request_volume)continue;if(B*100/(B+D)>$.threshold){let E=Math.random()*100;if(iQ("Candidate "+L+" randomNumber="+E+" enforcement_percentage="+$.enforcement_percentage),E<$.enforcement_percentage)iQ("Ejecting candidate "+L),this.eject(I,H)}}}eject(H,$){H.currentEjectionTimestamp=new Date,H.ejectionTimeMultiplier+=1;for(let A of H.subchannelWrappers)A.eject()}uneject(H){H.currentEjectionTimestamp=null;for(let $ of H.subchannelWrappers)$.uneject()}switchAllBuckets(){for(let H of this.entryMap.values())H.counter.switchBuckets()}startTimer(H){var $,A;this.ejectionTimer=setTimeout(()=>this.runChecks(),H),(A=($=this.ejectionTimer).unref)===null||A===void 0||A.call($)}runChecks(){let H=new Date;if(iQ("Ejection timer running"),this.switchAllBuckets(),!this.latestConfig)return;this.timerStartTime=H,this.startTimer(this.latestConfig.getIntervalMs()),this.runSuccessRateCheck(H),this.runFailurePercentageCheck(H);for(let[$,A]of this.entryMap.entries())if(A.currentEjectionTimestamp===null){if(A.ejectionTimeMultiplier>0)A.ejectionTimeMultiplier-=1}else{let L=this.latestConfig.getBaseEjectionTimeMs(),I=this.latestConfig.getMaxEjectionTimeMs(),D=new Date(A.currentEjectionTimestamp.getTime());if(D.setMilliseconds(D.getMilliseconds()+Math.min(L*A.ejectionTimeMultiplier,Math.max(L,I))),D<new Date)iQ("Unejecting "+$),this.uneject(A)}}updateAddressList(H,$,A,L){if(!($ instanceof NhH))return!1;if(iQ("Received update with config: "+JSON.stringify($.toJsonObject(),void 0,2)),H.ok){for(let D of H.value)if(!this.entryMap.has(D))iQ("Adding map entry for "+(0,YYA.endpointToString)(D)),this.entryMap.set(D,{counter:new hMD,currentEjectionTimestamp:null,ejectionTimeMultiplier:0,subchannelWrappers:[]});this.entryMap.deleteMissing(H.value)}let I=$.getChildPolicy();if(this.childBalancer.updateAddressList(H,I,A,L),$.getSuccessRateEjectionConfig()||$.getFailurePercentageEjectionConfig())if(this.timerStartTime){iQ("Previous timer existed. Replacing timer"),clearTimeout(this.ejectionTimer);let D=$.getIntervalMs()-(new Date().getTime()-this.timerStartTime.getTime());this.startTimer(D)}else iQ("Starting new timer"),this.timerStartTime=new Date,this.startTimer($.getIntervalMs()),this.switchAllBuckets();else{iQ("Counting disabled. Cancelling timer."),this.timerStartTime=null,clearTimeout(this.ejectionTimer);for(let D of this.entryMap.values())this.uneject(D),D.ejectionTimeMultiplier=0}return this.latestConfig=$,!0}exitIdle(){this.childBalancer.exitIdle()}resetBackoff(){this.childBalancer.resetBackoff()}destroy(){clearTimeout(this.ejectionTimer),this.childBalancer.destroy()}getTypeName(){return qYA}}C0H.OutlierDetectionLoadBalancer=TYA;function Nr9(){if(qr9)(0,yMD.registerLoadBalancerType)(qYA,TYA,NhH)}});var gMD=z((FV$)=>{Object.defineProperty(FV$,"__esModule",{value:!0});FV$.PriorityQueue=void 0;var dWH=0,zYA=(H)=>Math.floor(H/2),JV$=(H)=>H*2+1,OhH=(H)=>H*2+2;class uMD{constructor(H=($,A)=>$>A){this.comparator=H,this.heap=[]}size(){return this.heap.length}isEmpty(){return this.size()==0}peek(){return this.heap[dWH]}push(...H){return H.forEach(($)=>{this.heap.push($),this.siftUp()}),this.size()}pop(){let H=this.peek(),$=this.size()-1;if($>dWH)this.swap(dWH,$);return this.heap.pop(),this.siftDown(),H}replace(H){let $=this.peek();return this.heap[dWH]=H,this.siftDown(),$}greater(H,$){return this.comparator(this.heap[H],this.heap[$])}swap(H,$){[this.heap[H],this.heap[$]]=[this.heap[$],this.heap[H]]}siftUp(){let H=this.size()-1;while(H>dWH&&this.greater(H,zYA(H)))this.swap(H,zYA(H)),H=zYA(H)}siftDown(){let H=dWH;while(JV$(H)<this.size()&&this.greater(JV$(H),H)||OhH(H)<this.size()&&this.greater(OhH(H),H)){let $=OhH(H)<this.size()&&this.greater(OhH(H),JV$(H))?OhH(H):JV$(H);this.swap(H,$),H=$}}}FV$.PriorityQueue=uMD});var nMD=z((ShH)=>{Object.defineProperty(ShH,"__esModule",{value:!0});ShH.WeightedRoundRobinLoadBalancingConfig=void 0;ShH.setup=ur9;var nQ=YP(),Or9=I8(),Jw=ChH(),dMD=Ko(),xr9=ZhH(),Sr9=wG(),cMD=HV$(),cWH=pm(),jr9=gMD(),mMD=gC(),Rr9="weighted_round_robin";function NYA(H){Sr9.trace(Or9.LogVerbosity.DEBUG,Rr9,H)}var OYA="weighted_round_robin",yr9=1e4,vr9=1e4,hr9=180000,br9=1000,kr9=1;function pMD(H,$,A){if($ in H&&H[$]!==void 0&&typeof H[$]!==A)throw Error(`weighted round robin config ${$} parse error: expected ${A}, got ${typeof H[$]}`)}function KV$(H,$){if($ in H&&H[$]!==void 0&&H[$]!==null){let A;if((0,Jw.isDuration)(H[$]))A=H[$];else if((0,Jw.isDurationMessage)(H[$]))A=(0,Jw.durationMessageToDuration)(H[$]);else if(typeof H[$]==="string"){let L=(0,Jw.parseDuration)(H[$]);if(!L)throw Error(`weighted round robin config ${$}: failed to parse duration string ${H[$]}`);A=L}else throw Error(`weighted round robin config ${$}: expected duration, got ${typeof H[$]}`);return(0,Jw.durationToMs)(A)}return null}class xhH{constructor(H,$,A,L,I,D){this.enableOobLoadReport=H!==null&&H!==void 0?H:!1,this.oobLoadReportingPeriodMs=$!==null&&$!==void 0?$:yr9,this.blackoutPeriodMs=A!==null&&A!==void 0?A:vr9,this.weightExpirationPeriodMs=L!==null&&L!==void 0?L:hr9,this.weightUpdatePeriodMs=Math.max(I!==null&&I!==void 0?I:br9,100),this.errorUtilizationPenalty=D!==null&&D!==void 0?D:kr9}getLoadBalancerName(){return OYA}toJsonObject(){return{enable_oob_load_report:this.enableOobLoadReport,oob_load_reporting_period:(0,Jw.durationToString)((0,Jw.msToDuration)(this.oobLoadReportingPeriodMs)),blackout_period:(0,Jw.durationToString)((0,Jw.msToDuration)(this.blackoutPeriodMs)),weight_expiration_period:(0,Jw.durationToString)((0,Jw.msToDuration)(this.weightExpirationPeriodMs)),weight_update_period:(0,Jw.durationToString)((0,Jw.msToDuration)(this.weightUpdatePeriodMs)),error_utilization_penalty:this.errorUtilizationPenalty}}static createFromJson(H){if(pMD(H,"enable_oob_load_report","boolean"),pMD(H,"error_utilization_penalty","number"),H.error_utilization_penalty<0)throw Error("weighted round robin config error_utilization_penalty < 0");return new xhH(H.enable_oob_load_report,KV$(H,"oob_load_reporting_period"),KV$(H,"blackout_period"),KV$(H,"weight_expiration_period"),KV$(H,"weight_update_period"),H.error_utilization_penalty)}getEnableOobLoadReport(){return this.enableOobLoadReport}getOobLoadReportingPeriodMs(){return this.oobLoadReportingPeriodMs}getBlackoutPeriodMs(){return this.blackoutPeriodMs}getWeightExpirationPeriodMs(){return this.weightExpirationPeriodMs}getWeightUpdatePeriodMs(){return this.weightUpdatePeriodMs}getErrorUtilizationPenalty(){return this.errorUtilizationPenalty}}ShH.WeightedRoundRobinLoadBalancingConfig=xhH;class lMD{constructor(H,$){this.metricsHandler=$,this.queue=new jr9.PriorityQueue((I,D)=>I.deadline<D.deadline);let A=H.filter((I)=>I.weight>0),L;if(A.length<2)L=1;else{let I=0;for(let{weight:D}of A)I+=D;L=I/A.length}for(let I of H){let D=I.weight>0?1/I.weight:L;this.queue.push({endpointName:I.endpointName,picker:I.picker,period:D,deadline:Math.random()*D})}}pick(H){let $=this.queue.pop();this.queue.push(Object.assign(Object.assign({},$),{deadline:$.deadline+$.period}));let A=$.picker.pick(H);if(A.pickResultType===cWH.PickResultType.COMPLETE)if(this.metricsHandler)return Object.assign(Object.assign({},A),{onCallEnded:(0,cMD.createMetricsReader)((L)=>this.metricsHandler(L,$.endpointName),A.onCallEnded)});else{let L=A.subchannel;return Object.assign(Object.assign({},A),{subchannel:L.getWrappedSubchannel()})}else return A}}class iMD{constructor(H){this.channelControlHelper=H,this.latestConfig=null,this.children=new Map,this.currentState=nQ.ConnectivityState.IDLE,this.updatesPaused=!1,this.lastError=null,this.weightUpdateTimer=null}countChildrenWithState(H){let $=0;for(let A of this.children.values())if(A.child.getConnectivityState()===H)$+=1;return $}updateWeight(H,$){var A,L;let{rps_fractional:I,application_utilization:D}=$;if(D>0&&I>0)D+=$.eps/I*((L=(A=this.latestConfig)===null||A===void 0?void 0:A.getErrorUtilizationPenalty())!==null&&L!==void 0?L:0);let B=D===0?0:I/D;if(B===0)return;let f=new Date;if(H.nonEmptySince===null)H.nonEmptySince=f;H.lastUpdated=f,H.weight=B}getWeight(H){if(!this.latestConfig)return 0;let $=new Date().getTime();if($-H.lastUpdated.getTime()>=this.latestConfig.getWeightExpirationPeriodMs())return H.nonEmptySince=null,0;let A=this.latestConfig.getBlackoutPeriodMs();if(A>0&&(H.nonEmptySince===null||$-H.nonEmptySince.getTime()<A))return 0;return H.weight}calculateAndUpdateState(){if(this.updatesPaused||!this.latestConfig)return;if(this.countChildrenWithState(nQ.ConnectivityState.READY)>0){let H=[];for(let[A,L]of this.children){if(L.child.getConnectivityState()!==nQ.ConnectivityState.READY)continue;H.push({endpointName:A,picker:L.child.getPicker(),weight:this.getWeight(L)})}NYA("Created picker with weights: "+H.map((A)=>A.endpointName+":"+A.weight).join(","));let $;if(!this.latestConfig.getEnableOobLoadReport())$=(A,L)=>{let I=this.children.get(L);if(I)this.updateWeight(I,A)};else $=null;this.updateState(nQ.ConnectivityState.READY,new lMD(H,$),null)}else if(this.countChildrenWithState(nQ.ConnectivityState.CONNECTING)>0)this.updateState(nQ.ConnectivityState.CONNECTING,new cWH.QueuePicker(this),null);else if(this.countChildrenWithState(nQ.ConnectivityState.TRANSIENT_FAILURE)>0){let H=`weighted_round_robin: No connection established. Last error: ${this.lastError}`;this.updateState(nQ.ConnectivityState.TRANSIENT_FAILURE,new cWH.UnavailablePicker({details:H}),H)}else this.updateState(nQ.ConnectivityState.IDLE,new cWH.QueuePicker(this),null);for(let{child:H}of this.children.values())if(H.getConnectivityState()===nQ.ConnectivityState.IDLE)H.exitIdle()}updateState(H,$,A){NYA(nQ.ConnectivityState[this.currentState]+" -> "+nQ.ConnectivityState[H]),this.currentState=H,this.channelControlHelper.updateState(H,$,A)}updateAddressList(H,$,A,L){var I,D;if(!($ instanceof xhH))return!1;if(!H.ok){if(this.children.size===0)this.updateState(nQ.ConnectivityState.TRANSIENT_FAILURE,new cWH.UnavailablePicker(H.error),H.error.details);return!0}if(H.value.length===0){let E=`No addresses resolved. Resolution note: ${L}`;return this.updateState(nQ.ConnectivityState.TRANSIENT_FAILURE,new cWH.UnavailablePicker({details:E}),E),!1}NYA("Connect to endpoint list "+H.value.map(mMD.endpointToString));let B=new Date,f=new Set;this.updatesPaused=!0,this.latestConfig=$;for(let E of H.value){let M=(0,mMD.endpointToString)(E);f.add(M);let G=this.children.get(M);if(!G)G={child:new xr9.LeafLoadBalancer(E,(0,dMD.createChildChannelControlHelper)(this.channelControlHelper,{updateState:(U,X,J)=>{if(this.currentState===nQ.ConnectivityState.READY&&U!==nQ.ConnectivityState.READY)this.channelControlHelper.requestReresolution();if(U===nQ.ConnectivityState.READY)G.nonEmptySince=null;if(J)this.lastError=J;this.calculateAndUpdateState()},createSubchannel:(U,X)=>{let J=this.channelControlHelper.createSubchannel(U,X);if(G===null||G===void 0?void 0:G.oobMetricsListener)return new cMD.OrcaOobMetricsSubchannelWrapper(J,G.oobMetricsListener,this.latestConfig.getOobLoadReportingPeriodMs());else return J}}),A,L),lastUpdated:B,nonEmptySince:null,weight:0,oobMetricsListener:null},this.children.set(M,G);if($.getEnableOobLoadReport())G.oobMetricsListener=(U)=>{this.updateWeight(G,U)};else G.oobMetricsListener=null}for(let[E,M]of this.children)if(f.has(E))M.child.startConnecting();else M.child.destroy(),this.children.delete(E);if(this.updatesPaused=!1,this.calculateAndUpdateState(),this.weightUpdateTimer)clearInterval(this.weightUpdateTimer);return this.weightUpdateTimer=(D=(I=setInterval(()=>{if(this.currentState===nQ.ConnectivityState.READY)this.calculateAndUpdateState()},$.getWeightUpdatePeriodMs())).unref)===null||D===void 0?void 0:D.call(I),!0}exitIdle(){}resetBackoff(){}destroy(){for(let H of this.children.values())H.child.destroy();if(this.children.clear(),this.weightUpdateTimer)clearInterval(this.weightUpdateTimer)}getTypeName(){return OYA}}function ur9(){(0,dMD.registerLoadBalancerType)(OYA,iMD,xhH)}});var jhH=z((tI)=>{Object.defineProperty(tI,"__esModule",{value:!0});tI.experimental=tI.ServerMetricRecorder=tI.ServerInterceptingCall=tI.ResponderBuilder=tI.ServerListenerBuilder=tI.addAdminServicesToServer=tI.getChannelzHandlers=tI.getChannelzServiceDefinition=tI.InterceptorConfigurationError=tI.InterceptingCall=tI.RequesterBuilder=tI.ListenerBuilder=tI.StatusBuilder=tI.getClientChannel=tI.ServerCredentials=tI.Server=tI.setLogVerbosity=tI.setLogger=tI.load=tI.loadObject=tI.CallCredentials=tI.ChannelCredentials=tI.waitForClientReady=tI.closeClient=tI.Channel=tI.makeGenericClientConstructor=tI.makeClientConstructor=tI.loadPackageDefinition=tI.Client=tI.compressionAlgorithms=tI.propagate=tI.connectivityState=tI.status=tI.logVerbosity=tI.Metadata=tI.credentials=void 0;var QV$=j6$();Object.defineProperty(tI,"CallCredentials",{enumerable:!0,get:function(){return QV$.CallCredentials}});var gr9=Z_A();Object.defineProperty(tI,"Channel",{enumerable:!0,get:function(){return gr9.ChannelImplementation}});var mr9=wCA();Object.defineProperty(tI,"compressionAlgorithms",{enumerable:!0,get:function(){return mr9.CompressionAlgorithms}});var pr9=YP();Object.defineProperty(tI,"connectivityState",{enumerable:!0,get:function(){return pr9.ConnectivityState}});var WV$=JWH();Object.defineProperty(tI,"ChannelCredentials",{enumerable:!0,get:function(){return WV$.ChannelCredentials}});var rMD=w_A();Object.defineProperty(tI,"Client",{enumerable:!0,get:function(){return rMD.Client}});var xYA=I8();Object.defineProperty(tI,"logVerbosity",{enumerable:!0,get:function(){return xYA.LogVerbosity}});Object.defineProperty(tI,"status",{enumerable:!0,get:function(){return xYA.Status}});Object.defineProperty(tI,"propagate",{enumerable:!0,get:function(){return xYA.Propagate}});var aMD=wG(),SYA=t6$();Object.defineProperty(tI,"loadPackageDefinition",{enumerable:!0,get:function(){return SYA.loadPackageDefinition}});Object.defineProperty(tI,"makeClientConstructor",{enumerable:!0,get:function(){return SYA.makeClientConstructor}});Object.defineProperty(tI,"makeGenericClientConstructor",{enumerable:!0,get:function(){return SYA.makeClientConstructor}});var dr9=dQ();Object.defineProperty(tI,"Metadata",{enumerable:!0,get:function(){return dr9.Metadata}});var cr9=LMD();Object.defineProperty(tI,"Server",{enumerable:!0,get:function(){return cr9.Server}});var lr9=s3$();Object.defineProperty(tI,"ServerCredentials",{enumerable:!0,get:function(){return lr9.ServerCredentials}});var ir9=DMD();Object.defineProperty(tI,"StatusBuilder",{enumerable:!0,get:function(){return ir9.StatusBuilder}});tI.credentials={combineChannelCredentials:(H,...$)=>{return $.reduce((A,L)=>A.compose(L),H)},combineCallCredentials:(H,...$)=>{return $.reduce((A,L)=>A.compose(L),H)},createInsecure:WV$.ChannelCredentials.createInsecure,createSsl:WV$.ChannelCredentials.createSsl,createFromSecureContext:WV$.ChannelCredentials.createFromSecureContext,createFromMetadataGenerator:QV$.CallCredentials.createFromMetadataGenerator,createFromGoogleCredential:QV$.CallCredentials.createFromGoogleCredential,createEmpty:QV$.CallCredentials.createEmpty};var nr9=(H)=>H.close();tI.closeClient=nr9;var rr9=(H,$,A)=>H.waitForReady($,A);tI.waitForClientReady=rr9;var ar9=(H,$)=>{throw Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")};tI.loadObject=ar9;var or9=(H,$,A)=>{throw Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")};tI.load=or9;var tr9=(H)=>{aMD.setLogger(H)};tI.setLogger=tr9;var sr9=(H)=>{aMD.setLoggerVerbosity(H)};tI.setLogVerbosity=sr9;var er9=(H)=>{return rMD.Client.prototype.getChannel.call(H)};tI.getClientChannel=er9;var VV$=C_A();Object.defineProperty(tI,"ListenerBuilder",{enumerable:!0,get:function(){return VV$.ListenerBuilder}});Object.defineProperty(tI,"RequesterBuilder",{enumerable:!0,get:function(){return VV$.RequesterBuilder}});Object.defineProperty(tI,"InterceptingCall",{enumerable:!0,get:function(){return VV$.InterceptingCall}});Object.defineProperty(tI,"InterceptorConfigurationError",{enumerable:!0,get:function(){return VV$.InterceptorConfigurationError}});var oMD=Zo();Object.defineProperty(tI,"getChannelzServiceDefinition",{enumerable:!0,get:function(){return oMD.getChannelzServiceDefinition}});Object.defineProperty(tI,"getChannelzHandlers",{enumerable:!0,get:function(){return oMD.getChannelzHandlers}});var Ha9=n6$();Object.defineProperty(tI,"addAdminServicesToServer",{enumerable:!0,get:function(){return Ha9.addAdminServicesToServer}});var jYA=DYA();Object.defineProperty(tI,"ServerListenerBuilder",{enumerable:!0,get:function(){return jYA.ServerListenerBuilder}});Object.defineProperty(tI,"ResponderBuilder",{enumerable:!0,get:function(){return jYA.ResponderBuilder}});Object.defineProperty(tI,"ServerInterceptingCall",{enumerable:!0,get:function(){return jYA.ServerInterceptingCall}});var $a9=HV$();Object.defineProperty(tI,"ServerMetricRecorder",{enumerable:!0,get:function(){return $a9.ServerMetricRecorder}});var Aa9=JYA();tI.experimental=Aa9;var La9=vCA(),Ia9=CMD(),Da9=zMD(),Ba9=ZhH(),fa9=jMD(),Ea9=kMD(),Ma9=nMD(),Ga9=Zo();(()=>{La9.setup(),Ia9.setup(),Da9.setup(),Ba9.setup(),fa9.setup(),Ea9.setup(),Ma9.setup(),Ga9.setup()})()});var tMD=z((PV$)=>{Object.defineProperty(PV$,"__esModule",{value:!0});PV$.createServiceClientConstructor=void 0;var Ua9=jhH();function Xa9(H,$){let A={export:{path:H,requestStream:!1,responseStream:!1,requestSerialize:(L)=>{return L},requestDeserialize:(L)=>{return L},responseSerialize:(L)=>{return L},responseDeserialize:(L)=>{return L}}};return Ua9.makeGenericClientConstructor(A,$)}PV$.createServiceClientConstructor=Xa9});var RhH=z((oT)=>{Object.defineProperty(oT,"__esModule",{value:!0});oT.createOtlpGrpcExporterTransport=oT.GrpcExporterTransport=oT.createEmptyMetadata=oT.createSslCredentials=oT.createInsecureCredentials=void 0;var Ja9=Z9D(),sMD=`OTel-OTLP-Exporter-JavaScript/${Ja9.VERSION}`;function Fa9(H){if(H)return`${H} ${sMD}`;return sMD}var Ka9=0,Qa9=2;function Wa9(H){return H==="gzip"?Qa9:Ka9}function Va9(){let{credentials:H}=jhH();return H.createInsecure()}oT.createInsecureCredentials=Va9;function Pa9(H,$,A){let{credentials:L}=jhH();return L.createSsl(H,$,A)}oT.createSslCredentials=Pa9;function _a9(){let{Metadata:H}=jhH();return new H}oT.createEmptyMetadata=_a9;class RYA{_parameters;_client;_metadata;constructor(H){this._parameters=H}shutdown(){this._client?.close()}send(H,$){let A=Buffer.from(H);if(this._client==null){let{createServiceClientConstructor:L}=tMD();try{this._metadata=this._parameters.metadata()}catch(D){return Promise.resolve({status:"failure",error:D})}let I=L(this._parameters.grpcPath,this._parameters.grpcName);try{this._client=new I(this._parameters.address,this._parameters.credentials(),{"grpc.default_compression_algorithm":Wa9(this._parameters.compression),"grpc.primary_user_agent":Fa9(this._parameters.userAgent)})}catch(D){return Promise.resolve({status:"failure",error:D})}}return new Promise((L)=>{let I=Date.now()+$;if(this._metadata==null)return L({error:Error("metadata was null"),status:"failure"});this._client.export(A,this._metadata,{deadline:I},(D,B)=>{if(D)L({status:"failure",error:D});else L({data:B,status:"success"})})})}}oT.GrpcExporterTransport=RYA;function Ca9(H){return new RYA(H)}oT.createOtlpGrpcExporterTransport=Ca9});var LGD=z((So)=>{Object.defineProperty(So,"__esModule",{value:!0});So.getOtlpGrpcDefaultConfiguration=So.mergeOtlpGrpcConfigurationWithDefaults=So.validateAndNormalizeUrl=void 0;var $GD=av(),yhH=RhH(),Ya9=require("url"),eMD=hB();function AGD(H){if(H=H.trim(),!H.match(/^([\w]{1,8}):\/\//))H=`https://${H}`;let A=new Ya9.URL(H);if(A.protocol==="unix:")return H;if(A.pathname&&A.pathname!=="/")eMD.diag.warn("URL path should not be set when using grpc, the path part of the URL will be ignored.");if(A.protocol!==""&&!A.protocol?.match(/^(http)s?:$/))eMD.diag.warn("URL protocol should be http(s)://. Using http://.");return A.host}So.validateAndNormalizeUrl=AGD;function HGD(H,$){for(let[A,L]of Object.entries($.getMap()))if(H.get(A).length<1)H.set(A,L)}function wa9(H,$,A){let L=H.url??$.url??A.url;return{...(0,$GD.mergeOtlpSharedConfigurationWithDefaults)(H,$,A),metadata:()=>{let I=A.metadata();return HGD(I,H.metadata?.().clone()??(0,yhH.createEmptyMetadata)()),HGD(I,$.metadata?.()??(0,yhH.createEmptyMetadata)()),I},url:AGD(L),credentials:H.credentials??$.credentials?.(L)??A.credentials(L),userAgent:H.userAgent}}So.mergeOtlpGrpcConfigurationWithDefaults=wa9;function Za9(){return{...(0,$GD.getSharedConfigurationDefaults)(),metadata:()=>(0,yhH.createEmptyMetadata)(),url:"http://localhost:4317",credentials:(H)=>{if(H.startsWith("http://"))return()=>(0,yhH.createInsecureCredentials)();else return()=>(0,yhH.createSslCredentials)()}}}So.getOtlpGrpcDefaultConfiguration=Za9});var EGD=z((_V$)=>{Object.defineProperty(_V$,"__esModule",{value:!0});_V$.getOtlpGrpcConfigurationFromEnv=void 0;var IGD=Jf(),vhH=RhH(),qa9=gm(),Ta9=require("fs"),za9=require("path"),BGD=hB();function yYA(H,$){if(H!=null&&H!=="")return H;if($!=null&&$!=="")return $;return}function Na9(H){let $=process.env[`OTEL_EXPORTER_OTLP_${H}_HEADERS`]?.trim(),A=process.env.OTEL_EXPORTER_OTLP_HEADERS?.trim(),L=(0,IGD.parseKeyPairsIntoRecord)($),I=(0,IGD.parseKeyPairsIntoRecord)(A);if(Object.keys(L).length===0&&Object.keys(I).length===0)return;let D=Object.assign({},I,L),B=(0,vhH.createEmptyMetadata)();for(let[f,E]of Object.entries(D))B.set(f,E);return B}function Oa9(H){let $=Na9(H);if($==null)return;return()=>$}function xa9(H){let $=process.env[`OTEL_EXPORTER_OTLP_${H}_ENDPOINT`]?.trim(),A=process.env.OTEL_EXPORTER_OTLP_ENDPOINT?.trim();return yYA($,A)}function Sa9(H){let $=process.env[`OTEL_EXPORTER_OTLP_${H}_INSECURE`]?.toLowerCase().trim(),A=process.env.OTEL_EXPORTER_OTLP_INSECURE?.toLowerCase().trim();return yYA($,A)==="true"}function vYA(H,$,A){let L=process.env[H]?.trim(),I=process.env[$]?.trim(),D=yYA(L,I);if(D!=null)try{return Ta9.readFileSync(za9.resolve(process.cwd(),D))}catch{BGD.diag.warn(A);return}else return}function ja9(H){return vYA(`OTEL_EXPORTER_OTLP_${H}_CLIENT_CERTIFICATE`,"OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE","Failed to read client certificate chain file")}function Ra9(H){return vYA(`OTEL_EXPORTER_OTLP_${H}_CLIENT_KEY`,"OTEL_EXPORTER_OTLP_CLIENT_KEY","Failed to read client certificate private key file")}function DGD(H){return vYA(`OTEL_EXPORTER_OTLP_${H}_CERTIFICATE`,"OTEL_EXPORTER_OTLP_CERTIFICATE","Failed to read root certificate file")}function fGD(H){let $=Ra9(H),A=ja9(H),L=DGD(H),I=$!=null&&A!=null;if(L!=null&&!I)return BGD.diag.warn("Client key and certificate must both be provided, but one was missing - attempting to create credentials from just the root certificate"),(0,vhH.createSslCredentials)(DGD(H));return(0,vhH.createSslCredentials)(L,$,A)}function ya9(H){if(Sa9(H))return(0,vhH.createInsecureCredentials)();return fGD(H)}function va9(H){return{...(0,qa9.getSharedConfigurationFromEnvironment)(H),metadata:Oa9(H),url:xa9(H),credentials:($)=>{if($.startsWith("http://"))return()=>{return(0,vhH.createInsecureCredentials)()};else if($.startsWith("https://"))return()=>{return fGD(H)};return()=>{return ya9(H)}}}}_V$.getOtlpGrpcConfigurationFromEnv=va9});var GGD=z((CV$)=>{Object.defineProperty(CV$,"__esModule",{value:!0});CV$.convertLegacyOtlpGrpcOptions=void 0;var ha9=hB(),MGD=LGD(),ba9=RhH(),ka9=EGD();function ua9(H,$){if(H.headers)ha9.diag.warn("Headers cannot be set when using grpc");let A=H.credentials;return(0,MGD.mergeOtlpGrpcConfigurationWithDefaults)({url:H.url,metadata:()=>{return H.metadata??(0,ba9.createEmptyMetadata)()},compression:H.compression,timeoutMillis:H.timeoutMillis,concurrencyLimit:H.concurrencyLimit,credentials:A!=null?()=>A:void 0,userAgent:H.userAgent},(0,ka9.getOtlpGrpcConfigurationFromEnv)($),(0,MGD.getOtlpGrpcDefaultConfiguration)())}CV$.convertLegacyOtlpGrpcOptions=ua9});var UGD=z((YV$)=>{Object.defineProperty(YV$,"__esModule",{value:!0});YV$.createOtlpGrpcExportDelegate=void 0;var ga9=av(),ma9=RhH();function pa9(H,$,A,L){return(0,ga9.createOtlpNetworkExportDelegate)(H,$,(0,ma9.createOtlpGrpcExporterTransport)({address:H.url,compression:H.compression,credentials:H.credentials,metadata:H.metadata,userAgent:H.userAgent,grpcName:A,grpcPath:L}))}YV$.createOtlpGrpcExportDelegate=pa9});var wV$=z((lWH)=>{Object.defineProperty(lWH,"__esModule",{value:!0});lWH.createOtlpGrpcExportDelegate=lWH.convertLegacyOtlpGrpcOptions=void 0;var da9=GGD();Object.defineProperty(lWH,"convertLegacyOtlpGrpcOptions",{enumerable:!0,get:function(){return da9.convertLegacyOtlpGrpcOptions}});var ca9=UGD();Object.defineProperty(lWH,"createOtlpGrpcExportDelegate",{enumerable:!0,get:function(){return ca9.createOtlpGrpcExportDelegate}})});var FGD=z((ZV$)=>{Object.defineProperty(ZV$,"__esModule",{value:!0});ZV$.OTLPMetricExporter=void 0;var la9=Y6$(),XGD=wV$(),ia9=Hh();class JGD extends la9.OTLPMetricExporterBase{constructor(H){super((0,XGD.createOtlpGrpcExportDelegate)((0,XGD.convertLegacyOtlpGrpcOptions)(H??{},"METRICS"),ia9.ProtobufMetricsSerializer,"MetricsExportService","/opentelemetry.proto.collector.metrics.v1.MetricsService/Export"),H)}}ZV$.OTLPMetricExporter=JGD});var KGD=z((qV$)=>{Object.defineProperty(qV$,"__esModule",{value:!0});qV$.OTLPMetricExporter=void 0;var na9=FGD();Object.defineProperty(qV$,"OTLPMetricExporter",{enumerable:!0,get:function(){return na9.OTLPMetricExporter}})});var kYA=z((NV$)=>{Object.defineProperty(NV$,"__esModule",{value:!0});NV$.PrometheusSerializer=void 0;var ra9=hB(),Y0H=Mo(),QGD=Jf();function zV$(H){return H.replace(/\\/g,"\\\\").replace(/\n/g,"\\n")}function WGD(H=""){if(typeof H!=="string")H=JSON.stringify(H);return zV$(H).replace(/"/g,"\\\"")}var aa9=/[^a-z0-9_]/gi,oa9=/_{2,}/g;function bYA(H){return H.replace(aa9,"_").replace(oa9,"_")}function hYA(H,$){if(!H.endsWith("_total")&&$.dataPointType===Y0H.DataPointType.SUM&&$.isMonotonic)H=H+"_total";return H}function ta9(H){if(H===1/0)return"+Inf";else if(H===-1/0)return"-Inf";else return`${H}`}function sa9(H){switch(H.dataPointType){case Y0H.DataPointType.SUM:if(H.isMonotonic)return"counter";return"gauge";case Y0H.DataPointType.GAUGE:return"gauge";case Y0H.DataPointType.HISTOGRAM:return"histogram";default:return"untyped"}}function TV$(H,$,A,L,I){let D=!1,B="";for(let[f,E]of Object.entries($)){let M=bYA(f);D=!0,B+=`${B.length>0?",":""}${M}="${WGD(E)}"`}if(I)for(let[f,E]of Object.entries(I)){let M=bYA(f);D=!0,B+=`${B.length>0?",":""}${M}="${WGD(E)}"`}if(D)H+=`{${B}}`;return`${H} ${ta9(A)}${L!==void 0?" "+String(L):""}
`),A.code=L.error.code,A.errors=L.error.errors;else A.message=L.error.message,A.code=L.error.code;else if($&&$.status>=400)A.message=L,A.status=$.status;return A}}Xf$.DefaultTransporter=wNH;wNH.USER_AGENT=`${IfI}/${xm0.version}`});var Qy=z((p1A,BfI)=>{/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Jf$=require("buffer"),Ky=Jf$.Buffer;function DfI(H,$){for(var A in H)$[A]=H[A]}if(Ky.from&&Ky.alloc&&Ky.allocUnsafe&&Ky.allocUnsafeSlow)BfI.exports=Jf$;else DfI(Jf$,p1A),p1A.Buffer=wLH;function wLH(H,$,A){return Ky(H,$,A)}wLH.prototype=Object.create(Ky.prototype);DfI(Ky,wLH);wLH.from=function(H,$,A){if(typeof H==="number")throw TypeError("Argument must not be a number");return Ky(H,$,A)};wLH.alloc=function(H,$,A){if(typeof H!=="number")throw TypeError("Argument must be a number");var L=Ky(H);if($!==void 0)if(typeof A==="string")L.fill($,A);else L.fill($);else L.fill(0);return L};wLH.allocUnsafe=function(H){if(typeof H!=="number")throw TypeError("Argument must be a number");return Ky(H)};wLH.allocUnsafeSlow=function(H){if(typeof H!=="number")throw TypeError("Argument must be a number");return Jf$.SlowBuffer(H)}});var EfI=z((a_f,ffI)=>{function d1A(H){var $=(H/8|0)+(H%8===0?0:1);return $}var Sm0={ES256:d1A(256),ES384:d1A(384),ES512:d1A(521)};function jm0(H){var $=Sm0[H];if($)return $;throw Error('Unknown algorithm "'+H+'"')}ffI.exports=jm0});var Wf$=z((o_f,FfI)=>{var Ff$=Qy().Buffer,GfI=EfI(),Kf$=128,UfI=0,Rm0=32,ym0=16,vm0=2,XfI=ym0|Rm0|UfI<<6,Qf$=vm0|UfI<<6;function hm0(H){return H.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function JfI(H){if(Ff$.isBuffer(H))return H;else if(typeof H==="string")return Ff$.from(H,"base64");throw TypeError("ECDSA signature must be a Base64 string or a Buffer")}function bm0(H,$){H=JfI(H);var A=GfI($),L=A+1,I=H.length,D=0;if(H[D++]!==XfI)throw Error('Could not find expected "seq"');var B=H[D++];if(B===(Kf$|1))B=H[D++];if(I-D<B)throw Error('"seq" specified length of "'+B+'", only "'+(I-D)+'" remaining');if(H[D++]!==Qf$)throw Error('Could not find expected "int" for "r"');var f=H[D++];if(I-D-2<f)throw Error('"r" specified length of "'+f+'", only "'+(I-D-2)+'" available');if(L<f)throw Error('"r" specified length of "'+f+'", max of "'+L+'" is acceptable');var E=D;if(D+=f,H[D++]!==Qf$)throw Error('Could not find expected "int" for "s"');var M=H[D++];if(I-D!==M)throw Error('"s" specified length of "'+M+'", expected "'+(I-D)+'"');if(L<M)throw Error('"s" specified length of "'+M+'", max of "'+L+'" is acceptable');var G=D;if(D+=M,D!==I)throw Error('Expected to consume entire buffer, but "'+(I-D)+'" bytes remain');var U=A-f,X=A-M,J=Ff$.allocUnsafe(U+f+X+M);for(D=0;D<U;++D)J[D]=0;H.copy(J,D,E+Math.max(-U,0),E+f),D=A;for(var F=D;D<F+X;++D)J[D]=0;return H.copy(J,D,G+Math.max(-X,0),G+M),J=J.toString("base64"),J=hm0(J),J}function MfI(H,$,A){var L=0;while($+L<A&&H[$+L]===0)++L;var I=H[$+L]>=Kf$;if(I)--L;return L}function km0(H,$){H=JfI(H);var A=GfI($),L=H.length;if(L!==A*2)throw TypeError('"'+$+'" signatures must be "'+A*2+'" bytes, saw "'+L+'"');var I=MfI(H,0,A),D=MfI(H,A,H.length),B=A-I,f=A-D,E=2+B+1+1+f,M=E<Kf$,G=Ff$.allocUnsafe((M?2:3)+E),U=0;if(G[U++]=XfI,M)G[U++]=E;else G[U++]=Kf$|1,G[U++]=E&255;if(G[U++]=Qf$,G[U++]=B,I<0)G[U++]=0,U+=H.copy(G,U,0,A);else U+=H.copy(G,U,I,A);if(G[U++]=Qf$,G[U++]=f,D<0)G[U++]=0,H.copy(G,U,A);else H.copy(G,U,A+D);return G}FfI.exports={derToJose:bm0,joseToDer:km0}});var On=z((Nn)=>{var zO=Nn&&Nn.__classPrivateFieldGet||function(H,$,A,L){if(A==="a"&&!L)throw TypeError("Private accessor was defined without a getter");if(typeof $==="function"?H!==$||!L:!$.has(H))throw TypeError("Cannot read private member from an object whose class did not declare it");return A==="m"?L:A==="a"?L.call(H):L?L.value:$.get(H)},t5H,pu,c1A,l1A;Object.defineProperty(Nn,"__esModule",{value:!0});Nn.LRUCache=void 0;Nn.snakeToCamel=KfI;Nn.originalOrCamelOptions=um0;function KfI(H){return H.replace(/([_][^_])/g,($)=>$.slice(1).toUpperCase())}function um0(H){function $(A){var L;let I=H||{};return(L=I[A])!==null&&L!==void 0?L:I[KfI(A)]}return{get:$}}class QfI{constructor(H){t5H.add(this),pu.set(this,new Map),this.capacity=H.capacity,this.maxAge=H.maxAge}set(H,$){zO(this,t5H,"m",c1A).call(this,H,$),zO(this,t5H,"m",l1A).call(this)}get(H){let $=zO(this,pu,"f").get(H);if(!$)return;return zO(this,t5H,"m",c1A).call(this,H,$.value),zO(this,t5H,"m",l1A).call(this),$.value}}Nn.LRUCache=QfI;pu=new WeakMap,t5H=new WeakSet,c1A=function($,A){zO(this,pu,"f").delete($),zO(this,pu,"f").set($,{value:A,lastAccessed:Date.now()})},l1A=function(){let $=this.maxAge?Date.now()-this.maxAge:0,A=zO(this,pu,"f").entries().next();while(!A.done&&(zO(this,pu,"f").size>this.capacity||A.value[1].lastAccessed<$))zO(this,pu,"f").delete(A.value[0]),A=zO(this,pu,"f").entries().next()}});var Wy=z((NO)=>{Object.defineProperty(NO,"__esModule",{value:!0});NO.AuthClient=NO.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS=NO.DEFAULT_UNIVERSE=void 0;var gm0=require("events"),WfI=ZO(),VfI=ZNH(),mm0=On();NO.DEFAULT_UNIVERSE="googleapis.com";NO.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS=300000;class PfI extends gm0.EventEmitter{constructor(H={}){var $,A,L,I,D;super();this.credentials={},this.eagerRefreshThresholdMillis=NO.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS,this.forceRefreshOnFailure=!1,this.universeDomain=NO.DEFAULT_UNIVERSE;let B=(0,mm0.originalOrCamelOptions)(H);if(this.apiKey=H.apiKey,this.projectId=($=B.get("project_id"))!==null&&$!==void 0?$:null,this.quotaProjectId=B.get("quota_project_id"),this.credentials=(A=B.get("credentials"))!==null&&A!==void 0?A:{},this.universeDomain=(L=B.get("universe_domain"))!==null&&L!==void 0?L:NO.DEFAULT_UNIVERSE,this.transporter=(I=H.transporter)!==null&&I!==void 0?I:new VfI.DefaultTransporter,H.transporterOptions)this.transporter.defaults=H.transporterOptions;if(H.eagerRefreshThresholdMillis)this.eagerRefreshThresholdMillis=H.eagerRefreshThresholdMillis;this.forceRefreshOnFailure=(D=H.forceRefreshOnFailure)!==null&&D!==void 0?D:!1}get gaxios(){if(this.transporter instanceof WfI.Gaxios)return this.transporter;else if(this.transporter instanceof VfI.DefaultTransporter)return this.transporter.instance;else if("instance"in this.transporter&&this.transporter.instance instanceof WfI.Gaxios)return this.transporter.instance;return null}setCredentials(H){this.credentials=H}addSharedMetadataHeaders(H){if(!H["x-goog-user-project"]&&this.quotaProjectId)H["x-goog-user-project"]=this.quotaProjectId;return H}static get RETRY_CONFIG(){return{retry:!0,retryConfig:{httpMethodsToRetry:["GET","PUT","POST","HEAD","OPTIONS","DELETE"]}}}}NO.AuthClient=PfI});var i1A=z((Vf$)=>{Object.defineProperty(Vf$,"__esModule",{value:!0});Vf$.LoginTicket=void 0;class _fI{constructor(H,$){this.envelope=H,this.payload=$}getEnvelope(){return this.envelope}getPayload(){return this.payload}getUserId(){let H=this.getPayload();if(H&&H.sub)return H.sub;return null}getAttributes(){return{envelope:this.getEnvelope(),payload:this.getPayload()}}}Vf$.LoginTicket=_fI});var ZLH=z((Vy)=>{Object.defineProperty(Vy,"__esModule",{value:!0});Vy.OAuth2Client=Vy.ClientAuthentication=Vy.CertificateFormat=Vy.CodeChallengeMethod=void 0;var pm0=ZO(),n1A=require("querystring"),dm0=require("stream"),cm0=Wf$(),r1A=a5H(),lm0=Wy(),im0=i1A(),CfI;(function(H){H.Plain="plain",H.S256="S256"})(CfI||(Vy.CodeChallengeMethod=CfI={}));var du;(function(H){H.PEM="PEM",H.JWK="JWK"})(du||(Vy.CertificateFormat=du={}));var qNH;(function(H){H.ClientSecretPost="ClientSecretPost",H.ClientSecretBasic="ClientSecretBasic",H.None="None"})(qNH||(Vy.ClientAuthentication=qNH={}));class vV extends lm0.AuthClient{constructor(H,$,A){let L=H&&typeof H==="object"?H:{clientId:H,clientSecret:$,redirectUri:A};super(L);this.certificateCache={},this.certificateExpiry=null,this.certificateCacheFormat=du.PEM,this.refreshTokenPromises=new Map,this._clientId=L.clientId,this._clientSecret=L.clientSecret,this.redirectUri=L.redirectUri,this.endpoints={tokenInfoUrl:"https://oauth2.googleapis.com/tokeninfo",oauth2AuthBaseUrl:"https://accounts.google.com/o/oauth2/v2/auth",oauth2TokenUrl:"https://oauth2.googleapis.com/token",oauth2RevokeUrl:"https://oauth2.googleapis.com/revoke",oauth2FederatedSignonPemCertsUrl:"https://www.googleapis.com/oauth2/v1/certs",oauth2FederatedSignonJwkCertsUrl:"https://www.googleapis.com/oauth2/v3/certs",oauth2IapPublicKeyUrl:"https://www.gstatic.com/iap/verify/public_key",...L.endpoints},this.clientAuthentication=L.clientAuthentication||qNH.ClientSecretPost,this.issuers=L.issuers||["accounts.google.com","https://accounts.google.com",this.universeDomain]}generateAuthUrl(H={}){if(H.code_challenge_method&&!H.code_challenge)throw Error("If a code_challenge_method is provided, code_challenge must be included.");if(H.response_type=H.response_type||"code",H.client_id=H.client_id||this._clientId,H.redirect_uri=H.redirect_uri||this.redirectUri,Array.isArray(H.scope))H.scope=H.scope.join(" ");return this.endpoints.oauth2AuthBaseUrl.toString()+"?"+n1A.stringify(H)}generateCodeVerifier(){throw Error("generateCodeVerifier is removed, please use generateCodeVerifierAsync instead.")}async generateCodeVerifierAsync(){let H=(0,r1A.createCrypto)(),A=H.randomBytesBase64(96).replace(/\+/g,"~").replace(/=/g,"_").replace(/\//g,"-"),I=(await H.sha256DigestBase64(A)).split("=")[0].replace(/\+/g,"-").replace(/\//g,"_");return{codeVerifier:A,codeChallenge:I}}getToken(H,$){let A=typeof H==="string"?{code:H}:H;if($)this.getTokenAsync(A).then((L)=>$(null,L.tokens,L.res),(L)=>$(L,null,L.response));else return this.getTokenAsync(A)}async getTokenAsync(H){let $=this.endpoints.oauth2TokenUrl.toString(),A={"Content-Type":"application/x-www-form-urlencoded"},L={client_id:H.client_id||this._clientId,code_verifier:H.codeVerifier,code:H.code,grant_type:"authorization_code",redirect_uri:H.redirect_uri||this.redirectUri};if(this.clientAuthentication===qNH.ClientSecretBasic){let B=Buffer.from(`${this._clientId}:${this._clientSecret}`);A.Authorization=`Basic ${B.toString("base64")}`}if(this.clientAuthentication===qNH.ClientSecretPost)L.client_secret=this._clientSecret;let I=await this.transporter.request({...vV.RETRY_CONFIG,method:"POST",url:$,data:n1A.stringify(L),headers:A}),D=I.data;if(I.data&&I.data.expires_in)D.expiry_date=new Date().getTime()+I.data.expires_in*1000,delete D.expires_in;return this.emit("tokens",D),{tokens:D,res:I}}async refreshToken(H){if(!H)return this.refreshTokenNoCache(H);if(this.refreshTokenPromises.has(H))return this.refreshTokenPromises.get(H);let $=this.refreshTokenNoCache(H).then((A)=>{return this.refreshTokenPromises.delete(H),A},(A)=>{throw this.refreshTokenPromises.delete(H),A});return this.refreshTokenPromises.set(H,$),$}async refreshTokenNoCache(H){var $;if(!H)throw Error("No refresh token is set.");let A=this.endpoints.oauth2TokenUrl.toString(),L={refresh_token:H,client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token"},I;try{I=await this.transporter.request({...vV.RETRY_CONFIG,method:"POST",url:A,data:n1A.stringify(L),headers:{"Content-Type":"application/x-www-form-urlencoded"}})}catch(B){if(B instanceof pm0.GaxiosError&&B.message==="invalid_grant"&&(($=B.response)===null||$===void 0?void 0:$.data)&&/ReAuth/i.test(B.response.data.error_description))B.message=JSON.stringify(B.response.data);throw B}let D=I.data;if(I.data&&I.data.expires_in)D.expiry_date=new Date().getTime()+I.data.expires_in*1000,delete D.expires_in;return this.emit("tokens",D),{tokens:D,res:I}}refreshAccessToken(H){if(H)this.refreshAccessTokenAsync().then(($)=>H(null,$.credentials,$.res),H);else return this.refreshAccessTokenAsync()}async refreshAccessTokenAsync(){let H=await this.refreshToken(this.credentials.refresh_token),$=H.tokens;return $.refresh_token=this.credentials.refresh_token,this.credentials=$,{credentials:this.credentials,res:H.res}}getAccessToken(H){if(H)this.getAccessTokenAsync().then(($)=>H(null,$.token,$.res),H);else return this.getAccessTokenAsync()}async getAccessTokenAsync(){if(!this.credentials.access_token||this.isTokenExpiring()){if(!this.credentials.refresh_token)if(this.refreshHandler){let A=await this.processAndValidateRefreshHandler();if(A===null||A===void 0?void 0:A.access_token)return this.setCredentials(A),{token:this.credentials.access_token}}else throw Error("No refresh token or refresh handler callback is set.");let $=await this.refreshAccessTokenAsync();if(!$.credentials||$.credentials&&!$.credentials.access_token)throw Error("Could not refresh access token.");return{token:$.credentials.access_token,res:$.res}}else return{token:this.credentials.access_token}}async getRequestHeaders(H){return(await this.getRequestMetadataAsync(H)).headers}async getRequestMetadataAsync(H){let $=this.credentials;if(!$.access_token&&!$.refresh_token&&!this.apiKey&&!this.refreshHandler)throw Error("No access, refresh token, API key or refresh handler callback is set.");if($.access_token&&!this.isTokenExpiring()){$.token_type=$.token_type||"Bearer";let B={Authorization:$.token_type+" "+$.access_token};return{headers:this.addSharedMetadataHeaders(B)}}if(this.refreshHandler){let B=await this.processAndValidateRefreshHandler();if(B===null||B===void 0?void 0:B.access_token){this.setCredentials(B);let f={Authorization:"Bearer "+this.credentials.access_token};return{headers:this.addSharedMetadataHeaders(f)}}}if(this.apiKey)return{headers:{"X-Goog-Api-Key":this.apiKey}};let A=null,L=null;try{A=await this.refreshToken($.refresh_token),L=A.tokens}catch(B){let f=B;if(f.response&&(f.response.status===403||f.response.status===404))f.message=`Could not refresh access token: ${f.message}`;throw f}let I=this.credentials;I.token_type=I.token_type||"Bearer",L.refresh_token=I.refresh_token,this.credentials=L;let D={Authorization:I.token_type+" "+L.access_token};return{headers:this.addSharedMetadataHeaders(D),res:A.res}}static getRevokeTokenUrl(H){return new vV().getRevokeTokenURL(H).toString()}getRevokeTokenURL(H){let $=new URL(this.endpoints.oauth2RevokeUrl);return $.searchParams.append("token",H),$}revokeToken(H,$){let A={...vV.RETRY_CONFIG,url:this.getRevokeTokenURL(H).toString(),method:"POST"};if($)this.transporter.request(A).then((L)=>$(null,L),$);else return this.transporter.request(A)}revokeCredentials(H){if(H)this.revokeCredentialsAsync().then(($)=>H(null,$),H);else return this.revokeCredentialsAsync()}async revokeCredentialsAsync(){let H=this.credentials.access_token;if(this.credentials={},H)return this.revokeToken(H);else throw Error("No access token to revoke.")}request(H,$){if($)this.requestAsync(H).then((A)=>$(null,A),(A)=>{return $(A,A.response)});else return this.requestAsync(H)}async requestAsync(H,$=!1){let A;try{let L=await this.getRequestMetadataAsync(H.url);if(H.headers=H.headers||{},L.headers&&L.headers["x-goog-user-project"])H.headers["x-goog-user-project"]=L.headers["x-goog-user-project"];if(L.headers&&L.headers.Authorization)H.headers.Authorization=L.headers.Authorization;if(this.apiKey)H.headers["X-Goog-Api-Key"]=this.apiKey;A=await this.transporter.request(H)}catch(L){let I=L.response;if(I){let D=I.status,B=this.credentials&&this.credentials.access_token&&this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure),f=this.credentials&&this.credentials.access_token&&!this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure)&&this.refreshHandler,E=I.config.data instanceof dm0.Readable,M=D===401||D===403;if(!$&&M&&!E&&B)return await this.refreshAccessTokenAsync(),this.requestAsync(H,!0);else if(!$&&M&&!E&&f){let G=await this.processAndValidateRefreshHandler();if(G===null||G===void 0?void 0:G.access_token)this.setCredentials(G);return this.requestAsync(H,!0)}}throw L}return A}verifyIdToken(H,$){if($&&typeof $!=="function")throw Error("This method accepts an options object as the first parameter, which includes the idToken, audience, and maxExpiry.");if($)this.verifyIdTokenAsync(H).then((A)=>$(null,A),$);else return this.verifyIdTokenAsync(H)}async verifyIdTokenAsync(H){if(!H.idToken)throw Error("The verifyIdToken method requires an ID Token");let $=await this.getFederatedSignonCertsAsync();return await this.verifySignedJwtWithCertsAsync(H.idToken,$.certs,H.audience,this.issuers,H.maxExpiry)}async getTokenInfo(H){let{data:$}=await this.transporter.request({...vV.RETRY_CONFIG,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:`Bearer ${H}`},url:this.endpoints.tokenInfoUrl.toString()}),A=Object.assign({expiry_date:new Date().getTime()+$.expires_in*1000,scopes:$.scope.split(" ")},$);return delete A.expires_in,delete A.scope,A}getFederatedSignonCerts(H){if(H)this.getFederatedSignonCertsAsync().then(($)=>H(null,$.certs,$.res),H);else return this.getFederatedSignonCertsAsync()}async getFederatedSignonCertsAsync(){let H=new Date().getTime(),$=(0,r1A.hasBrowserCrypto)()?du.JWK:du.PEM;if(this.certificateExpiry&&H<this.certificateExpiry.getTime()&&this.certificateCacheFormat===$)return{certs:this.certificateCache,format:$};let A,L;switch($){case du.PEM:L=this.endpoints.oauth2FederatedSignonPemCertsUrl.toString();break;case du.JWK:L=this.endpoints.oauth2FederatedSignonJwkCertsUrl.toString();break;default:throw Error(`Unsupported certificate format ${$}`)}try{A=await this.transporter.request({...vV.RETRY_CONFIG,url:L})}catch(E){if(E instanceof Error)E.message=`Failed to retrieve verification certificates: ${E.message}`;throw E}let I=A?A.headers["cache-control"]:void 0,D=-1;if(I){let M=new RegExp("max-age=([0-9]*)").exec(I);if(M&&M.length===2)D=Number(M[1])*1000}let B={};switch($){case du.PEM:B=A.data;break;case du.JWK:for(let E of A.data.keys)B[E.kid]=E;break;default:throw Error(`Unsupported certificate format ${$}`)}let f=new Date;return this.certificateExpiry=D===-1?null:new Date(f.getTime()+D),this.certificateCache=B,this.certificateCacheFormat=$,{certs:B,format:$,res:A}}getIapPublicKeys(H){if(H)this.getIapPublicKeysAsync().then(($)=>H(null,$.pubkeys,$.res),H);else return this.getIapPublicKeysAsync()}async getIapPublicKeysAsync(){let H,$=this.endpoints.oauth2IapPublicKeyUrl.toString();try{H=await this.transporter.request({...vV.RETRY_CONFIG,url:$})}catch(A){if(A instanceof Error)A.message=`Failed to retrieve verification certificates: ${A.message}`;throw A}return{pubkeys:H.data,res:H}}verifySignedJwtWithCerts(){throw Error("verifySignedJwtWithCerts is removed, please use verifySignedJwtWithCertsAsync instead.")}async verifySignedJwtWithCertsAsync(H,$,A,L,I){let D=(0,r1A.createCrypto)();if(!I)I=vV.DEFAULT_MAX_TOKEN_LIFETIME_SECS_;let B=H.split(".");if(B.length!==3)throw Error("Wrong number of segments in token: "+H);let f=B[0]+"."+B[1],E=B[2],M,G;try{M=JSON.parse(D.decodeBase64StringUtf8(B[0]))}catch(Y){if(Y instanceof Error)Y.message=`Can't parse token envelope: ${B[0]}': ${Y.message}`;throw Y}if(!M)throw Error("Can't parse token envelope: "+B[0]);try{G=JSON.parse(D.decodeBase64StringUtf8(B[1]))}catch(Y){if(Y instanceof Error)Y.message=`Can't parse token payload '${B[0]}`;throw Y}if(!G)throw Error("Can't parse token payload: "+B[1]);if(!Object.prototype.hasOwnProperty.call($,M.kid))throw Error("No pem found for envelope: "+JSON.stringify(M));let U=$[M.kid];if(M.alg==="ES256")E=cm0.joseToDer(E,"ES256").toString("base64");if(!await D.verify(U,f,E))throw Error("Invalid token signature: "+H);if(!G.iat)throw Error("No issue time in token: "+JSON.stringify(G));if(!G.exp)throw Error("No expiration time in token: "+JSON.stringify(G));let J=Number(G.iat);if(isNaN(J))throw Error("iat field using invalid format");let F=Number(G.exp);if(isNaN(F))throw Error("exp field using invalid format");let Q=new Date().getTime()/1000;if(F>=Q+I)throw Error("Expiration time too far in future: "+JSON.stringify(G));let W=J-vV.CLOCK_SKEW_SECS_,P=F+vV.CLOCK_SKEW_SECS_;if(Q<W)throw Error("Token used too early, "+Q+" < "+W+": "+JSON.stringify(G));if(Q>P)throw Error("Token used too late, "+Q+" > "+P+": "+JSON.stringify(G));if(L&&L.indexOf(G.iss)<0)throw Error("Invalid issuer, expected one of ["+L+"], but got "+G.iss);if(typeof A<"u"&&A!==null){let Y=G.aud,C=!1;if(A.constructor===Array)C=A.indexOf(Y)>-1;else C=Y===A;if(!C)throw Error("Wrong recipient, payload audience != requiredAudience")}return new im0.LoginTicket(M,G)}async processAndValidateRefreshHandler(){if(this.refreshHandler){let H=await this.refreshHandler();if(!H.access_token)throw Error("No access token is returned by the refreshHandler callback.");return H}return}isTokenExpiring(){let H=this.credentials.expiry_date;return H?H<=new Date().getTime()+this.eagerRefreshThresholdMillis:!1}}Vy.OAuth2Client=vV;vV.GOOGLE_TOKEN_INFO_URL="https://oauth2.googleapis.com/tokeninfo";vV.CLOCK_SKEW_SECS_=300;vV.DEFAULT_MAX_TOKEN_LIFETIME_SECS_=86400});var a1A=z((Pf$)=>{Object.defineProperty(Pf$,"__esModule",{value:!0});Pf$.Compute=void 0;var nm0=ZO(),YfI=CNH(),rm0=ZLH();class wfI extends rm0.OAuth2Client{constructor(H={}){super(H);this.credentials={expiry_date:1,refresh_token:"compute-placeholder"},this.serviceAccountEmail=H.serviceAccountEmail||"default",this.scopes=Array.isArray(H.scopes)?H.scopes:H.scopes?[H.scopes]:[]}async refreshTokenNoCache(H){let $=`service-accounts/${this.serviceAccountEmail}/token`,A;try{let I={property:$};if(this.scopes.length>0)I.params={scopes:this.scopes.join(",")};A=await YfI.instance(I)}catch(I){if(I instanceof nm0.GaxiosError)I.message=`Could not refresh access token: ${I.message}`,this.wrapError(I);throw I}let L=A;if(A&&A.expires_in)L.expiry_date=new Date().getTime()+A.expires_in*1000,delete L.expires_in;return this.emit("tokens",L),{tokens:L,res:null}}async fetchIdToken(H){let $=`service-accounts/${this.serviceAccountEmail}/identity?format=full&audience=${H}`,A;try{let L={property:$};A=await YfI.instance(L)}catch(L){if(L instanceof Error)L.message=`Could not fetch ID token: ${L.message}`;throw L}return A}wrapError(H){let $=H.response;if($&&$.status){if(H.status=$.status,$.status===403)H.message="A Forbidden error was returned while attempting to retrieve an access token for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have the correct permission scopes specified: "+H.message;else if($.status===404)H.message="A Not Found error was returned while attempting to retrieve an accesstoken for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have any permission scopes specified: "+H.message}}}Pf$.Compute=wfI});var o1A=z((_f$)=>{Object.defineProperty(_f$,"__esModule",{value:!0});_f$.IdTokenClient=void 0;var am0=ZLH();class ZfI extends am0.OAuth2Client{constructor(H){super(H);this.targetAudience=H.targetAudience,this.idTokenProvider=H.idTokenProvider}async getRequestMetadataAsync(H){if(!this.credentials.id_token||!this.credentials.expiry_date||this.isTokenExpiring()){let A=await this.idTokenProvider.fetchIdToken(this.targetAudience);this.credentials={id_token:A,expiry_date:this.getIdTokenExpiryDate(A)}}return{headers:{Authorization:"Bearer "+this.credentials.id_token}}}getIdTokenExpiryDate(H){let $=H.split(".")[1];if($)return JSON.parse(Buffer.from($,"base64").toString("ascii")).exp*1000}}_f$.IdTokenClient=ZfI});var t1A=z((s5H)=>{Object.defineProperty(s5H,"__esModule",{value:!0});s5H.GCPEnv=void 0;s5H.clear=om0;s5H.getEnv=tm0;var qfI=CNH(),cu;(function(H){H.APP_ENGINE="APP_ENGINE",H.KUBERNETES_ENGINE="KUBERNETES_ENGINE",H.CLOUD_FUNCTIONS="CLOUD_FUNCTIONS",H.COMPUTE_ENGINE="COMPUTE_ENGINE",H.CLOUD_RUN="CLOUD_RUN",H.NONE="NONE"})(cu||(s5H.GCPEnv=cu={}));var TNH;function om0(){TNH=void 0}async function tm0(){if(TNH)return TNH;return TNH=sm0(),TNH}async function sm0(){let H=cu.NONE;if(em0())H=cu.APP_ENGINE;else if(Hp0())H=cu.CLOUD_FUNCTIONS;else if(await Lp0())if(await Ap0())H=cu.KUBERNETES_ENGINE;else if($p0())H=cu.CLOUD_RUN;else H=cu.COMPUTE_ENGINE;else H=cu.NONE;return H}function em0(){return!!(process.env.GAE_SERVICE||process.env.GAE_MODULE_NAME)}function Hp0(){return!!(process.env.FUNCTION_NAME||process.env.FUNCTION_TARGET)}function $p0(){return!!process.env.K_CONFIGURATION}async function Ap0(){try{return await qfI.instance("attributes/cluster-name"),!0}catch(H){return!1}}async function Lp0(){return qfI.isAvailable()}});var s1A=z((ICf,TfI)=>{var Cf$=Qy().Buffer,Ip0=require("stream"),Dp0=require("util");function Yf$(H){if(this.buffer=null,this.writable=!0,this.readable=!0,!H)return this.buffer=Cf$.alloc(0),this;if(typeof H.pipe==="function")return this.buffer=Cf$.alloc(0),H.pipe(this),this;if(H.length||typeof H==="object")return this.buffer=H,this.writable=!1,process.nextTick(function(){this.emit("end",H),this.readable=!1,this.emit("close")}.bind(this)),this;throw TypeError("Unexpected data type ("+typeof H+")")}Dp0.inherits(Yf$,Ip0);Yf$.prototype.write=function($){this.buffer=Cf$.concat([this.buffer,Cf$.from($)]),this.emit("data",$)};Yf$.prototype.end=function($){if($)this.write($);this.emit("end",$),this.emit("close"),this.writable=!1,this.readable=!1};TfI.exports=Yf$});var H8A=z((DCf,zfI)=>{var zNH=require("buffer").Buffer,e1A=require("buffer").SlowBuffer;zfI.exports=wf$;function wf$(H,$){if(!zNH.isBuffer(H)||!zNH.isBuffer($))return!1;if(H.length!==$.length)return!1;var A=0;for(var L=0;L<H.length;L++)A|=H[L]^$[L];return A===0}wf$.install=function(){zNH.prototype.equal=e1A.prototype.equal=function($){return wf$(this,$)}};var Bp0=zNH.prototype.equal,fp0=e1A.prototype.equal;wf$.restore=function(){zNH.prototype.equal=Bp0,e1A.prototype.equal=fp0}});var I8A=z((BCf,hfI)=>{var HXH=Qy().Buffer,uq=require("crypto"),OfI=Wf$(),NfI=require("util"),Ep0=`"%s" is not a valid algorithm.